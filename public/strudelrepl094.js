(function(){"use strict";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var n=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var o=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return s[a]}})}),n}var fraction$2={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(s,e){(function(n){var a=2e3,o={s:1,n:0,d:1};function l(E,k){if(isNaN(E=parseInt(E,10)))throw b.InvalidParameter;return E*k}function u(E,k){if(k===0)throw b.DivisionByZero;var $=Object.create(b.prototype);$.s=E<0?-1:1,E=E<0?-E:E;var R=S(E,k);return $.n=E/R,$.d=k/R,$}function c(E){for(var k={},$=E,R=2,Z=4;Z<=$;){for(;$%R===0;)$/=R,k[R]=(k[R]||0)+1;Z+=1+2*R++}return $!==E?$>1&&(k[$]=(k[$]||0)+1):k[E]=(k[E]||0)+1,k}var f=function(E,k){var $=0,R=1,Z=1,he=0,j=0,K=0,se=1,de=1,ue=0,me=1,ge=1,Oe=1,be=1e7,Ae;if(E!=null)if(k!==void 0){if($=E,R=k,Z=$*R,$%1!==0||R%1!==0)throw b.NonIntegerParameter}else switch(typeof E){case"object":{if("d"in E&&"n"in E)$=E.n,R=E.d,"s"in E&&($*=E.s);else if(0 in E)$=E[0],1 in E&&(R=E[1]);else throw b.InvalidParameter;Z=$*R;break}case"number":{if(E<0&&(Z=E,E=-E),E%1===0)$=E;else if(E>0){for(E>=1&&(de=Math.pow(10,Math.floor(1+Math.log(E)/Math.LN10)),E/=de);me<=be&&Oe<=be;)if(Ae=(ue+ge)/(me+Oe),E===Ae){me+Oe<=be?($=ue+ge,R=me+Oe):Oe>me?($=ge,R=Oe):($=ue,R=me);break}else E>Ae?(ue+=ge,me+=Oe):(ge+=ue,Oe+=me),me>be?($=ge,R=Oe):($=ue,R=me);$*=de}else(isNaN(E)||isNaN(k))&&(R=$=NaN);break}case"string":{if(me=E.match(/\d+|./g),me===null)throw b.InvalidParameter;if(me[ue]==="-"?(Z=-1,ue++):me[ue]==="+"&&ue++,me.length===ue+1?j=l(me[ue++],Z):me[ue+1]==="."||me[ue]==="."?(me[ue]!=="."&&(he=l(me[ue++],Z)),ue++,(ue+1===me.length||me[ue+1]==="("&&me[ue+3]===")"||me[ue+1]==="'"&&me[ue+3]==="'")&&(j=l(me[ue],Z),se=Math.pow(10,me[ue].length),ue++),(me[ue]==="("&&me[ue+2]===")"||me[ue]==="'"&&me[ue+2]==="'")&&(K=l(me[ue+1],Z),de=Math.pow(10,me[ue+1].length)-1,ue+=3)):me[ue+1]==="/"||me[ue+1]===":"?(j=l(me[ue],Z),se=l(me[ue+2],1),ue+=3):me[ue+3]==="/"&&me[ue+1]===" "&&(he=l(me[ue],Z),j=l(me[ue+2],Z),se=l(me[ue+4],1),ue+=5),me.length<=ue){R=se*de,Z=$=K+R*he+de*j;break}}default:throw b.InvalidParameter}if(R===0)throw b.DivisionByZero;o.s=Z<0?-1:1,o.n=Math.abs($),o.d=Math.abs(R)};function d(E,k,$){for(var R=1;k>0;E=E*E%$,k>>=1)k&1&&(R=R*E%$);return R}function g(E,k){for(;k%2===0;k/=2);for(;k%5===0;k/=5);if(k===1)return 0;for(var $=10%k,R=1;$!==1;R++)if($=$*10%k,R>a)return 0;return R}function O(E,k,$){for(var R=1,Z=d(10,$,k),he=0;he<300;he++){if(R===Z)return he;R=R*10%k,Z=Z*10%k}return 0}function S(E,k){if(!E)return k;if(!k)return E;for(;;){if(E%=k,!E)return k;if(k%=E,!k)return E}}function b(E,k){if(f(E,k),this instanceof b)E=S(o.d,o.n),this.s=o.s,this.n=o.n/E,this.d=o.d/E;else return u(o.s*o.n,o.d)}b.DivisionByZero=new Error("Division by Zero"),b.InvalidParameter=new Error("Invalid argument"),b.NonIntegerParameter=new Error("Parameters must be integer"),b.prototype={s:1,n:0,d:1,abs:function(){return u(this.n,this.d)},neg:function(){return u(-this.s*this.n,this.d)},add:function(E,k){return f(E,k),u(this.s*this.n*o.d+o.s*this.d*o.n,this.d*o.d)},sub:function(E,k){return f(E,k),u(this.s*this.n*o.d-o.s*this.d*o.n,this.d*o.d)},mul:function(E,k){return f(E,k),u(this.s*o.s*this.n*o.n,this.d*o.d)},div:function(E,k){return f(E,k),u(this.s*o.s*this.n*o.d,this.d*o.n)},clone:function(){return u(this.s*this.n,this.d)},mod:function(E,k){if(isNaN(this.n)||isNaN(this.d))return new b(NaN);if(E===void 0)return u(this.s*this.n%this.d,1);if(f(E,k),o.n===0&&this.d===0)throw b.DivisionByZero;return u(this.s*(o.d*this.n)%(o.n*this.d),o.d*this.d)},gcd:function(E,k){return f(E,k),u(S(o.n,this.n)*S(o.d,this.d),o.d*this.d)},lcm:function(E,k){return f(E,k),o.n===0&&this.n===0?u(0,1):u(o.n*this.n,S(o.n,this.n)*S(o.d,this.d))},ceil:function(E){return E=Math.pow(10,E||0),isNaN(this.n)||isNaN(this.d)?new b(NaN):u(Math.ceil(E*this.s*this.n/this.d),E)},floor:function(E){return E=Math.pow(10,E||0),isNaN(this.n)||isNaN(this.d)?new b(NaN):u(Math.floor(E*this.s*this.n/this.d),E)},round:function(E){return E=Math.pow(10,E||0),isNaN(this.n)||isNaN(this.d)?new b(NaN):u(Math.round(E*this.s*this.n/this.d),E)},inverse:function(){return u(this.s*this.d,this.n)},pow:function(E,k){if(f(E,k),o.d===1)return o.s<0?u(Math.pow(this.s*this.d,o.n),Math.pow(this.n,o.n)):u(Math.pow(this.s*this.n,o.n),Math.pow(this.d,o.n));if(this.s<0)return null;var $=c(this.n),R=c(this.d),Z=1,he=1;for(var j in $)if(j!=="1"){if(j==="0"){Z=0;break}if($[j]*=o.n,$[j]%o.d===0)$[j]/=o.d;else return null;Z*=Math.pow(j,$[j])}for(var j in R)if(j!=="1"){if(R[j]*=o.n,R[j]%o.d===0)R[j]/=o.d;else return null;he*=Math.pow(j,R[j])}return o.s<0?u(he,Z):u(Z,he)},equals:function(E,k){return f(E,k),this.s*this.n*o.d===o.s*o.n*this.d},compare:function(E,k){f(E,k);var $=this.s*this.n*o.d-o.s*o.n*this.d;return(0<$)-($<0)},simplify:function(E){if(isNaN(this.n)||isNaN(this.d))return this;E=E||.001;for(var k=this.abs(),$=k.toContinued(),R=1;R<$.length;R++){for(var Z=u($[R-1],1),he=R-2;he>=0;he--)Z=Z.inverse().add($[he]);if(Z.sub(k).abs().valueOf()<E)return Z.mul(this.s)}return this},divisible:function(E,k){return f(E,k),!(!(o.n*this.d)||this.n*o.d%(o.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(E){var k,$="",R=this.n,Z=this.d;return this.s<0&&($+="-"),Z===1?$+=R:(E&&(k=Math.floor(R/Z))>0&&($+=k,$+=" ",R%=Z),$+=R,$+="/",$+=Z),$},toLatex:function(E){var k,$="",R=this.n,Z=this.d;return this.s<0&&($+="-"),Z===1?$+=R:(E&&(k=Math.floor(R/Z))>0&&($+=k,R%=Z),$+="\\frac{",$+=R,$+="}{",$+=Z,$+="}"),$},toContinued:function(){var E,k=this.n,$=this.d,R=[];if(isNaN(k)||isNaN($))return R;do R.push(Math.floor(k/$)),E=k%$,k=$,$=E;while(k!==1);return R},toString:function(E){var k=this.n,$=this.d;if(isNaN(k)||isNaN($))return"NaN";E=E||15;var R=g(k,$),Z=O(k,$,R),he=this.s<0?"-":"";if(he+=k/$|0,k%=$,k*=10,k&&(he+="."),R){for(var j=Z;j--;)he+=k/$|0,k%=$,k*=10;he+="(";for(var j=R;j--;)he+=k/$|0,k%=$,k*=10;he+=")"}else for(var j=E;k&&j--;)he+=k/$|0,k%=$,k*=10;return he}},Object.defineProperty(b,"__esModule",{value:!0}),b.default=b,b.Fraction=b,s.exports=b})()})(fraction$2);var fractionExports=fraction$2.exports;const Fraction=getDefaultExportFromCjs(fractionExports);Fraction.prototype.sam=function(){return this.floor()},Fraction.prototype.nextSam=function(){return this.sam().add(1)},Fraction.prototype.wholeCycle=function(){return new TimeSpan(this.sam(),this.nextSam())},Fraction.prototype.cyclePos=function(){return this.sub(this.sam())},Fraction.prototype.lt=function(s){return this.compare(s)<0},Fraction.prototype.gt=function(s){return this.compare(s)>0},Fraction.prototype.lte=function(s){return this.compare(s)<=0},Fraction.prototype.gte=function(s){return this.compare(s)>=0},Fraction.prototype.eq=function(s){return this.compare(s)==0},Fraction.prototype.max=function(s){return this.gt(s)?this:s},Fraction.prototype.min=function(s){return this.lt(s)?this:s},Fraction.prototype.show=function(){return this.s*this.n+"/"+this.d},Fraction.prototype.or=function(s){return this.eq(0)?s:this};const fraction$1=s=>Fraction(s),gcd=(...s)=>s.reduce((e,n)=>e.gcd(n),fraction$1(1));fraction$1._original=Fraction;class TimeSpan{constructor(e,n){this.begin=fraction$1(e),this.end=fraction$1(n)}get spanCycles(){const e=[];var n=this.begin;const a=this.end,o=a.sam();if(n.equals(a))return[new TimeSpan(n,a)];for(;a.gt(n);){if(n.sam().equals(o)){e.push(new TimeSpan(n,this.end));break}const l=n.nextSam();e.push(new TimeSpan(n,l)),n=l}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),n=e.add(this.duration);return new TimeSpan(e,n)}withTime(e){return new TimeSpan(e(this.begin),e(this.end))}withEnd(e){return new TimeSpan(this.begin,e(this.end))}withCycle(e){const n=this.begin.sam(),a=n.add(e(this.begin.sub(n))),o=n.add(e(this.end.sub(n)));return new TimeSpan(a,o)}intersection(e){const n=this.begin.max(e.begin),a=this.end.min(e.end);if(!n.gt(a)&&!(n.equals(a)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(e.end)&&e.begin.lt(e.end))))return new TimeSpan(n,a)}intersection_e(e){const n=this.intersection(e);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(fraction$1(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Hap{constructor(e,n,a,o={},l=!1){this.whole=e,this.part=n,this.value=a,this.context=o,this.stateful=l,l&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){return this.whole.end.sub(this.whole.begin).mul(typeof this.value?.clip=="number"?this.value?.clip:1)}get endClipped(){return this.whole.begin.add(this.duration)}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const n=this.whole?e(this.whole):void 0;return new Hap(n,e(this.part),this.value,this.context)}withValue(e){return new Hap(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[a,o]=n(e);return[a,new Hap(this.whole,this.part,o,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const n=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var a="";if(this.whole==null)a="~"+this.part.show;else{var o=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(a=this.whole.begin.show()+" ⇜ "),o||(a+="("),a+=this.part.show(),o||(a+=")"),this.whole.end.equals(this.part.end)||(a+=" ⇝ "+this.whole.end.show())}return"[ "+a+" | "+n+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value}`}combineContext(e){const n=this;return{...n.context,...e.context,locations:(n.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new Hap(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class State{constructor(e,n={}){this.span=e,this.controls=n}setSpan(e){return new State(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new State(this.span,e)}}const isNoteWithOctave=s=>/^[a-gA-G][#bs]*[0-9]$/.test(s),isNote=s=>/^[a-gA-G][#bsf]*[0-9]?$/.test(s),tokenizeNote$2=s=>{if(typeof s!="string")return[];const[e,n="",a]=s.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/)?.slice(1)||[];return e?[e,n,a?Number(a):void 0]:[]},chromas$2={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$2={"#":1,b:-1,s:1,f:-1},noteToMidi$1=(s,e=3)=>{const[n,a,o=e]=tokenizeNote$2(s);if(!n)throw new Error('not a note: "'+s+'"');const l=chromas$2[n.toLowerCase()],u=a?.split("").reduce((c,f)=>c+accs$2[f],0)||0;return(Number(o)+1)*12+l+u},midiToFreq$2=s=>Math.pow(2,(s-69)/12)*440,freqToMidi$2=s=>12*Math.log(s/440)/Math.LN2+69,valueToMidi$1=(s,e)=>{if(typeof s!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:a}=s;if(typeof n=="number")return freqToMidi$2(n);if(typeof a=="string")return noteToMidi$1(a);if(typeof a=="number")return a;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},getFreq=s=>midiToFreq$2(typeof s=="number"?s:noteToMidi$1(s)),pcs$1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],midi2note$1=s=>{const e=Math.floor(s/12)-1;return pcs$1[s%12]+e},_mod=(s,e)=>(s%e+e)%e,getPlayableNoteValue=s=>{let{value:e,context:n}=s,a=e;if(typeof a=="object"&&!Array.isArray(a)&&(a=a.note||a.n||a.value,a===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof a=="number"&&n.type!=="frequency")a=midiToFreq$2(s.value);else if(typeof a=="number"&&n.type==="frequency")a=s.value;else if(typeof a!="string"||!isNote(a))throw new Error("not a note: "+JSON.stringify(a));return a},getFrequency=s=>{let{value:e,context:n}=s;if(typeof e=="object")return e.freq?e.freq:getFreq(e.note||e.n||e.value);if(typeof e=="number"&&n.type!=="frequency")e=midiToFreq$2(s.value);else if(typeof e=="string"&&isNote(e))e=midiToFreq$2(noteToMidi$1(s.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},rotate$2=(s,e)=>s.slice(e).concat(s.slice(0,e)),pipe=(...s)=>s.reduce((e,n)=>(...a)=>e(n(...a)),e=>e),compose=(...s)=>pipe(...s.reverse()),removeUndefineds=s=>s.filter(e=>e!=null),flatten$1=s=>[].concat(...s),id$1=s=>s,constant=(s,e)=>s,listRange=(s,e)=>Array.from({length:e-s+1},(n,a)=>a+s);function curry(s,e,n=s.length){const a=function o(...l){if(l.length>=n)return s.apply(this,l);{const u=function(...c){return o.apply(this,l.concat(c))};return e&&e(u,l),u}};return e&&e(a,[]),a}function parseNumeral(s){const e=Number(s);if(!isNaN(e))return e;if(isNote(s))return noteToMidi$1(s);throw new Error(`cannot parse as numeral: "${s}"`)}function mapArgs(s,e){return(...n)=>s(...n.map(e))}function numeralArgs(s){return mapArgs(s,parseNumeral)}function parseFractional(s){const e=Number(s);if(!isNaN(e))return e;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[s];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${s}"`)}const fractionalArgs=s=>mapArgs(s,parseFractional),splitAt=function(s,e){return[e.slice(0,s),e.slice(s)]},zipWith=(s,e,n)=>e.map((a,o)=>s(a,n[o])),clamp$1=(s,e,n)=>Math.min(Math.max(s,e),n),solfeggio=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],indian=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],german=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],byzantine=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],japanese=["I","Ro","Ha","Ni","Ho","He","To"],english=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sol2note=(s,e="letters")=>{const a=(e==="solfeggio"?solfeggio:e==="indian"?indian:e==="german"?german:e==="byzantine"?byzantine:e==="japanese"?japanese:english)[s%12],o=Math.floor(s/12)-1;return a+o};function unicodeToBase64(s){const e=new TextEncoder().encode(s);return btoa(String.fromCharCode(...e))}function base64ToUnicode(s){const e=new Uint8Array(atob(s).split("").map(a=>a.charCodeAt(0)));return new TextDecoder().decode(e)}function code2hash(s){return encodeURIComponent(unicodeToBase64(s))}function hash2code(s){return base64ToUnicode(decodeURIComponent(s))}function unionWithObj(s,e,n){if(typeof e?.value=="number"){const o=Object.keys(s).filter(u=>typeof s[u]=="number"),l=Object.fromEntries(o.map(u=>[u,e.value]));e=Object.assign(e,l),delete e.value}const a=Object.keys(s).filter(o=>Object.keys(e).includes(o));return Object.assign({},s,e,Object.fromEntries(a.map(o=>[o,n(s[o],e[o])])))}curry((s,e)=>s*e),curry((s,e)=>e.map(s));function drawLine(s,e=60){let n=0,a=fraction$1(0),o=[""],l="";for(;o[0].length<e;){const u=s.queryArc(n,n+1),c=u.filter(g=>g.hasOnset()).map(g=>g.duration),f=gcd(...c),d=f.inverse();o=o.map(g=>g+"|"),l+="|";for(let g=0;g<d;g++){const[O,S]=[a,a.add(f)],b=u.filter(k=>k.whole.begin.lte(O)&&k.whole.end.gte(S)),E=b.length-o.length;E>0&&(o=o.concat(Array(E).fill(l))),o=o.map((k,$)=>{const R=b[$];if(R){const he=R.whole.begin.eq(O)?""+R.value:"-";return k+he}return k+"."}),l+=".",a=a.add(f)}n++}return o.join(`
`)}const logKey="strudel.log";function logger$2(s,e,n={}){console.log(`%c${s}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(logKey,{detail:{message:s,type:e,data:n}}))}logger$2.key=logKey;let stringParser;const setStringParser=s=>stringParser=s;let Pattern$1=class Lt{constructor(e){this.query=e,this._Pattern=!0}withValue(e){return new Lt(n=>this.query(n).map(a=>a.withValue(e)))}fmap(e){return this.withValue(e)}appWhole(e,n){const a=this,o=function(l){const u=a.query(l),c=n.query(l),f=function(d,g){const O=d.part.intersection(g.part);if(O!=null)return new Hap(e(d.whole,g.whole),O,d.value(g.value),g.combineContext(d))};return flatten$1(u.map(d=>removeUndefineds(c.map(g=>f(d,g)))))};return new Lt(o)}appBoth(e){const n=function(a,o){if(!(a==null||o==null))return a.intersection_e(o)};return this.appWhole(n,e)}appLeft(e){const n=this,a=function(o){const l=[];for(const u of n.query(o)){const c=e.query(o.setSpan(u.wholeOrPart()));for(const f of c){const d=u.whole,g=u.part.intersection(f.part);if(g){const O=u.value(f.value),S=f.combineContext(u),b=new Hap(d,g,O,S);l.push(b)}}}return l};return new Lt(a)}appRight(e){const n=this,a=function(o){const l=[];for(const u of e.query(o)){const c=n.query(o.setSpan(u.wholeOrPart()));for(const f of c){const d=u.whole,g=f.part.intersection(u.part);if(g){const O=f.value(u.value),S=u.combineContext(f),b=new Hap(d,g,O,S);l.push(b)}}}return l};return new Lt(a)}bindWhole(e,n){const a=this,o=function(l){const u=function(f,d){return new Hap(e(f.whole,d.whole),d.part,d.value,Object.assign({},f.context,d.context,{locations:(f.context.locations||[]).concat(d.context.locations||[])}))},c=function(f){return n(f.value).query(l.setSpan(f.part)).map(d=>u(f,d))};return flatten$1(a.query(l).map(f=>c(f)))};return new Lt(o)}bind(e){const n=function(a,o){if(!(a==null||o==null))return a.intersection_e(o)};return this.bindWhole(n,e)}join(){return this.bind(id$1)}outerBind(e){return this.bindWhole(n=>n,e)}outerJoin(){return this.outerBind(id$1)}innerBind(e){return this.bindWhole((n,a)=>a,e)}innerJoin(){return this.innerBind(id$1)}trigJoin(e=!1){const n=this;return new Lt(a=>n.discreteOnly().query(a).map(o=>o.value.late(e?o.whole.begin:o.whole.begin.cyclePos()).query(a).map(l=>new Hap(l.whole?l.whole.intersection(o.whole):void 0,l.part.intersection(o.part),l.value).setContext(o.combineContext(l))).filter(l=>l.part)).flat())}trigzeroJoin(){return this.trigJoin(!0)}squeezeJoin(){const e=this;function n(a){const o=e.discreteOnly().query(a);function l(c){const d=c.value._focusSpan(c.wholeOrPart()).query(a.setSpan(c.part));function g(O,S){let b;if(S.whole&&O.whole&&(b=S.whole.intersection(O.whole),!b))return;const E=S.part.intersection(O.part);if(!E)return;const k=S.combineContext(O);return new Hap(b,E,S.value,k)}return d.map(O=>g(c,O))}return flatten$1(o.map(l)).filter(c=>c)}return new Lt(n)}squeezeBind(e){return this.fmap(e).squeezeJoin()}queryArc(e,n){try{return this.query(new State(new TimeSpan(e,n)))}catch(a){return logger$2(`[query]: ${a.message}`,"error"),[]}}splitQueries(){const e=this,n=a=>flatten$1(a.span.spanCycles.map(o=>e.query(a.setSpan(o))));return new Lt(n)}withQuerySpan(e){return new Lt(n=>this.query(n.withSpan(e)))}withQuerySpanMaybe(e){const n=this;return new Lt(a=>{const o=a.withSpan(e);return o.span?n.query(o):[]})}withQueryTime(e){return new Lt(n=>this.query(n.withSpan(a=>a.withTime(e))))}withHapSpan(e){return new Lt(n=>this.query(n).map(a=>a.withSpan(e)))}withHapTime(e){return this.withHapSpan(n=>n.withTime(e))}withHaps(e){return new Lt(n=>e(this.query(n)))}withHap(e){return this.withHaps(n=>n.map(e))}setContext(e){return this.withHap(n=>n.setContext(e))}withContext(e){return this.withHap(n=>n.setContext(e(n.context)))}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,n){const a={start:e,end:n};return this.withContext(o=>{const l=(o.locations||[]).concat([a]);return{...o,locations:l}})}filterHaps(e){return new Lt(n=>this.query(n).filter(e))}filterValues(e){return new Lt(n=>this.query(n).filter(a=>e(a.value)))}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(n=>{const a=[];for(var o=0;o<n.length;++o){for(var l=!0,u=n[o];l;){const d=JSON.stringify(n[o].value);for(var c=!1,f=o+1;f<n.length;f++){const g=n[f];if(u.whole.equals(g.whole)){if(u.part.begin.eq(g.part.end)){if(d===JSON.stringify(g.value)){u=new Hap(u.whole,new TimeSpan(g.part.begin,u.part.end),u.value),n.splice(f,1),c=!0;break}}else if(g.part.begin.eq(u.part.end)&&d==JSON.stringify(g.value)){u=new Hap(u.whole,new TimeSpan(u.part.begin,g.part.end),u.value),n.splice(f,1),c=!0;break}}}l=c}a.push(u)}return a})}firstCycle(e=!1){var n=this;return e||(n=n.stripContext()),n.query(new State(new TimeSpan(fraction$1(0),fraction$1(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((n,a)=>n.part.begin.sub(a.part.begin).or(n.part.end.sub(a.part.end)).or(n.whole.begin.sub(a.whole.begin).or(n.whole.end.sub(a.whole.end)))))}asNumber(){return this.fmap(parseNumeral)}_opIn(e,n){return this.fmap(n).appLeft(reify(e))}_opOut(e,n){return this.fmap(n).appRight(reify(e))}_opMix(e,n){return this.fmap(n).appBoth(reify(e))}_opSqueeze(e,n){const a=reify(e);return this.fmap(o=>a.fmap(l=>n(o)(l))).squeezeJoin()}_opSqueezeOut(e,n){const a=this;return reify(e).fmap(l=>a.fmap(u=>n(u)(l))).squeezeJoin()}_opTrig(e,n){return reify(e).fmap(o=>this.fmap(l=>n(l)(o))).trigJoin()}_opTrigzero(e,n){return reify(e).fmap(o=>this.fmap(l=>n(l)(o))).trigzeroJoin()}layer(...e){return stack(...e.map(n=>n(this)))}superimpose(...e){return this.stack(...e.map(n=>n(this)))}stack(...e){return stack(this,...e)}sequence(...e){return sequence(this,...e)}seq(...e){return sequence(this,...e)}cat(...e){return cat(this,...e)}fastcat(...e){return fastcat(this,...e)}slowcat(...e){return slowcat(this,...e)}onTrigger(e,n=!0){return this.withHap(a=>a.setContext({...a.context,onTrigger:(...o)=>{a.context.onTrigger?.(...o),e(...o)},dominantTrigger:a.context.dominantTrigger||n}))}log(e=(a,o)=>`[hap] ${o.showWhole(!0)}`,n=(a,o)=>({hap:o})){return this.onTrigger((...a)=>{logger$2(e(...a),void 0,n(...a))},!1)}logValues(e=id$1){return this.log((n,a)=>e(a.value))}drawLine(){return console.log(drawLine(this)),this}};function groupHapsBy(s,e){let n=[];return e.forEach(a=>{const o=n.findIndex(([l])=>s(a,l));o===-1?n.push([a]):n[o].push(a)}),n}const congruent=(s,e)=>s.spanEquals(e);Pattern$1.prototype.collect=function(){return this.withHaps(s=>groupHapsBy(congruent,s).map(e=>new Hap(e[0].whole,e[0].part,e,{})))},Pattern$1.prototype.arpWith=function(s){return this.collect().fmap(e=>reify(s(e))).innerJoin().withHap(e=>new Hap(e.whole,e.part,e.value.value,e.combineContext(e.value)))},Pattern$1.prototype.arp=function(s){return this.arpWith(e=>s.fmap(n=>e[n%e.length]))};function _composeOp(s,e,n){function a(o){return o instanceof Object&&!(o instanceof Function)}return a(s)||a(e)?(a(s)||(s={value:s}),a(e)||(e={value:e}),unionWithObj(s,e,n)):n(s,e)}(function(){const s={set:[(n,a)=>a],keep:[n=>n],keepif:[(n,a)=>a?n:void 0],add:[numeralArgs((n,a)=>n+a)],sub:[numeralArgs((n,a)=>n-a)],mul:[numeralArgs((n,a)=>n*a)],div:[numeralArgs((n,a)=>n/a)],mod:[numeralArgs(_mod)],pow:[numeralArgs(Math.pow)],band:[numeralArgs((n,a)=>n&a)],bor:[numeralArgs((n,a)=>n|a)],bxor:[numeralArgs((n,a)=>n^a)],blshift:[numeralArgs((n,a)=>n<<a)],brshift:[numeralArgs((n,a)=>n>>a)],lt:[(n,a)=>n<a],gt:[(n,a)=>n>a],lte:[(n,a)=>n<=a],gte:[(n,a)=>n>=a],eq:[(n,a)=>n==a],eqt:[(n,a)=>n===a],ne:[(n,a)=>n!=a],net:[(n,a)=>n!==a],and:[(n,a)=>n&&a],or:[(n,a)=>n||a],func:[(n,a)=>a(n)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Trig","Trigzero"];for(const[n,[a,o]]of Object.entries(s)){Pattern$1.prototype["_"+n]=function(l){return this.fmap(u=>a(u,l))},Object.defineProperty(Pattern$1.prototype,n,{get:function(){const l=this,u=(...c)=>l[n].in(...c);for(const c of e)u[c.toLowerCase()]=function(...f){var d=l;f=sequence(f),o&&(d=o(d),f=o(f));var g;return n==="keepif"?(g=d["_op"+c](f,O=>S=>a(O,S)),g=g.removeUndefineds()):g=d["_op"+c](f,O=>S=>_composeOp(O,S,a)),g};return u.squeezein=u.squeeze,u}});for(const l of e)Pattern$1.prototype[l.toLowerCase()]=function(...u){return this.set[l.toLowerCase()](u)}}Pattern$1.prototype.struct=function(...n){return this.keepif.out(...n)},Pattern$1.prototype.structAll=function(...n){return this.keep.out(...n)},Pattern$1.prototype.mask=function(...n){return this.keepif.in(...n)},Pattern$1.prototype.maskAll=function(...n){return this.keep.in(...n)},Pattern$1.prototype.reset=function(...n){return this.keepif.trig(...n)},Pattern$1.prototype.resetAll=function(...n){return this.keep.trig(...n)},Pattern$1.prototype.restart=function(...n){return this.keepif.trigzero(...n)},Pattern$1.prototype.restartAll=function(...n){return this.keep.trigzero(...n)}})();const polyrhythm=stack,pr=stack,pm=polymeter;Pattern$1.prototype.factories={pure,stack,slowcat,fastcat,cat,timeCat,sequence,seq,polymeter,pm,polyrhythm,pr};const silence=new Pattern$1(()=>[]);function pure(s){function e(n){return n.span.spanCycles.map(a=>new Hap(fraction$1(a.begin).wholeCycle(),a,s))}return new Pattern$1(e)}function isPattern(s){return s instanceof Pattern$1||s?._Pattern}function reify(s){return isPattern(s)?s:stringParser&&typeof s=="string"?stringParser(s):pure(s)}function stack(...s){s=s.map(n=>Array.isArray(n)?sequence(...n):reify(n));const e=n=>flatten$1(s.map(a=>a.query(n)));return new Pattern$1(e)}function slowcat(...s){s=s.map(n=>Array.isArray(n)?sequence(...n):reify(n));const e=function(n){const a=n.span,o=_mod(a.begin.sam(),s.length),l=s[o];if(!l)return[];const u=a.begin.floor().sub(a.begin.div(s.length).floor());return l.withHapTime(c=>c.add(u)).query(n.setSpan(a.withTime(c=>c.sub(u))))};return new Pattern$1(e).splitQueries()}function slowcatPrime(...s){s=s.map(reify);const e=function(n){const a=Math.floor(n.span.begin)%s.length;return s[a]?.query(n)||[]};return new Pattern$1(e).splitQueries()}function cat(...s){return slowcat(...s)}function timeCat(...s){const e=s.map(o=>o[0]).reduce((o,l)=>o.add(l),fraction$1(0));let n=fraction$1(0);const a=[];for(const[o,l]of s){const u=n.add(o);a.push(reify(l)._compress(n.div(e),u.div(e))),n=u}return stack(...a)}function arrange(...s){const e=s.reduce((n,[a])=>n+a,0);return s=s.map(([n,a])=>[n,a.fast(n)]),timeCat(...s).slow(e)}function fastcat(...s){return slowcat(...s)._fast(s.length)}function sequence(...s){return fastcat(...s)}function seq(...s){return fastcat(...s)}function _sequenceCount(s){return Array.isArray(s)?s.length==0?[silence,0]:s.length==1?_sequenceCount(s[0]):[fastcat(...s.map(e=>_sequenceCount(e)[0])),s.length]:[reify(s),1]}function polymeterSteps(s,...e){const n=e.map(o=>_sequenceCount(o));if(n.length==0)return silence;s==0&&(s=n[0][1]);const a=[];for(const o of n)o[1]!=0&&(s==o[1]?a.push(o[0]):a.push(o[0]._fast(fraction$1(s).div(fraction$1(o[1])))));return stack(...a)}function polymeter(...s){return polymeterSteps(0,...s)}const mask=curry((s,e)=>reify(e).mask(s)),struct=curry((s,e)=>reify(e).struct(s)),superimpose=curry((s,e)=>reify(e).superimpose(...s)),set=curry((s,e)=>reify(e).set(s)),keep=curry((s,e)=>reify(e).keep(s)),keepif=curry((s,e)=>reify(e).keepif(s)),add$5=curry((s,e)=>reify(e).add(s)),sub=curry((s,e)=>reify(e).sub(s)),mul=curry((s,e)=>reify(e).mul(s)),div=curry((s,e)=>reify(e).div(s)),mod$2=curry((s,e)=>reify(e).mod(s)),pow=curry((s,e)=>reify(e).pow(s)),band=curry((s,e)=>reify(e).band(s)),bor=curry((s,e)=>reify(e).bor(s)),bxor=curry((s,e)=>reify(e).bxor(s)),blshift=curry((s,e)=>reify(e).blshift(s)),brshift=curry((s,e)=>reify(e).brshift(s)),lt=curry((s,e)=>reify(e).lt(s)),gt=curry((s,e)=>reify(e).gt(s)),lte=curry((s,e)=>reify(e).lte(s)),gte=curry((s,e)=>reify(e).gte(s)),eq=curry((s,e)=>reify(e).eq(s)),eqt=curry((s,e)=>reify(e).eqt(s)),ne=curry((s,e)=>reify(e).ne(s)),net=curry((s,e)=>reify(e).net(s)),and=curry((s,e)=>reify(e).and(s)),or=curry((s,e)=>reify(e).or(s)),func=curry((s,e)=>reify(e).func(s));function register(s,e,n=!0){if(Array.isArray(s)){const l={};for(const u of s)l[u]=register(u,e,n);return l}const a=e.length;var o;return n?o=function(...l){l=l.map(reify);const u=l[l.length-1];if(a===1)return e(u);const[c,...f]=l.slice(0,-1);let d=(...g)=>(Array(a-1).fill().map((O,S)=>g[S]??void 0),e(...g,u));return d=curry(d,null,a-1),f.reduce((g,O)=>g.appLeft(O),c.fmap(d)).innerJoin()}:o=function(...l){return l=l.map(reify),e(...l)},Pattern$1.prototype[s]=function(...l){if(a===2&&l.length!==1)l=[sequence(...l)];else if(a!==l.length+1)throw new Error(`.${s}() expects ${a-1} inputs but got ${l.length}.`);return l=l.map(reify),o(...l,this)},a>1&&(Pattern$1.prototype["_"+s]=function(...l){return e(...l,this)}),curry(o,null,a)}const round=register("round",function(s){return s.asNumber().fmap(e=>Math.round(e))}),floor=register("floor",function(s){return s.asNumber().fmap(e=>Math.floor(e))}),ceil=register("ceil",function(s){return s.asNumber().fmap(e=>Math.ceil(e))}),toBipolar=register("toBipolar",function(s){return s.fmap(e=>e*2-1)}),fromBipolar=register("fromBipolar",function(s){return s.fmap(e=>(e+1)/2)}),range$2=register("range",function(s,e,n){return n.mul(e-s).add(s)}),rangex=register("rangex",function(s,e,n){return n._range(Math.log(s),Math.log(e)).fmap(Math.exp)}),range2=register("range2",function(s,e,n){return n.fromBipolar()._range(s,e)}),ratio=register("ratio",s=>s.fmap(e=>Array.isArray(e)?e.slice(1).reduce((n,a)=>n/a,e[0]):e)),compress=register("compress",function(s,e,n){return s=fraction$1(s),e=fraction$1(e),s.gt(e)||s.gt(1)||e.gt(1)||s.lt(0)||e.lt(0)?silence:n._fastGap(fraction$1(1).div(e.sub(s)))._late(s)}),{compressSpan,compressspan}=register(["compressSpan","compressspan"],function(s,e){return e._compress(s.begin,s.end)}),{fastGap,fastgap}=register(["fastGap","fastgap"],function(s,e){const n=function(o){const l=o.begin.sam(),u=o.begin.sub(l).mul(s).min(1),c=o.end.sub(l).mul(s).min(1);if(!(u>=1))return new TimeSpan(l.add(u),l.add(c))},a=function(o){const l=o.part.begin,u=o.part.end,c=l.sam(),f=l.sub(c).div(s).min(1),d=u.sub(c).div(s).min(1),g=new TimeSpan(c.add(f),c.add(d)),O=o.whole?new TimeSpan(g.begin.sub(l.sub(o.whole.begin).div(s)),g.end.add(o.whole.end.sub(u).div(s))):void 0;return new Hap(O,g,o.value,o.context)};return e.withQuerySpanMaybe(n).withHap(a).splitQueries()}),focus=register("focus",function(s,e,n){return s=fraction$1(s),e=fraction$1(e),n._fast(fraction$1(1).div(e.sub(s))).late(s.cyclePos())}),{focusSpan,focusspan}=register(["focusSpan","focusspan"],function(s,e){return e._focus(s.begin,s.end)}),ply=register("ply",function(s,e){return e.fmap(n=>pure(n)._fast(s)).squeezeJoin()}),{fast,density}=register(["fast","density"],function(s,e){return s===0?silence:(s=fraction$1(s),e.withQueryTime(a=>a.mul(s)).withHapTime(a=>a.div(s)))}),hurry=register("hurry",function(s,e){return e._fast(s).mul(pure({speed:s}))}),{slow,sparsity}=register(["slow","sparsity"],function(s,e){return s===0?silence:e._fast(fraction$1(1).div(s))}),inside$1=register("inside",function(s,e,n){return e(n._slow(s))._fast(s)}),outside=register("outside",function(s,e,n){return e(n._fast(s))._slow(s)}),lastOf=register("lastOf",function(s,e,n){const a=Array(s-1).fill(n);return a.push(e(n)),slowcatPrime(...a)}),{firstOf,every}=register(["firstOf","every"],function(s,e,n){const a=Array(s-1).fill(n);return a.unshift(e(n)),slowcatPrime(...a)}),apply=register("apply",function(s,e){return s(e)}),cpm=register("cpm",function(s,e){return e._fast(s/60)}),early=register("early",function(s,e){return s=fraction$1(s),e.withQueryTime(n=>n.add(s)).withHapTime(n=>n.sub(s))}),late=register("late",function(s,e){return s=fraction$1(s),e._early(fraction$1(0).sub(s))}),zoom=register("zoom",function(s,e,n){e=fraction$1(e),s=fraction$1(s);const a=e.sub(s);return n.withQuerySpan(o=>o.withCycle(l=>l.mul(a).add(s))).withHapSpan(o=>o.withCycle(l=>l.sub(s).div(a))).splitQueries()}),{zoomArc,zoomarc}=register(["zoomArc","zoomarc"],function(s,e){return e.zoom(s.begin,s.end)}),linger=register("linger",function(s,e){return s==0?silence:s<0?e._zoom(s.add(1),1)._slow(s):e._zoom(0,s)._slow(s)}),segment=register("segment",function(s,e){return e.struct(pure(!0)._fast(s))}),{invert:invert$1,inv}=register(["invert","inv"],function(s){return s.fmap(e=>!e)}),when=register("when",function(s,e,n){return s?e(n):n}),off$1=register("off",function(s,e,n){return stack(n,e(n.late(s)))}),brak=register("brak",function(s){return s.when(slowcat(!1,!0),e=>fastcat(e,silence)._late(.25))}),rev=register("rev",function(s){const e=function(n){const a=n.span,o=a.begin.sam(),l=a.begin.nextSam(),u=function(f){const d=f.withTime(O=>o.add(l.sub(O))),g=d.begin;return d.begin=d.end,d.end=g,d};return s.query(n.setSpan(u(a))).map(f=>f.withSpan(u))};return new Pattern$1(e).splitQueries()}),pressBy=register("pressBy",function(s,e){return e.fmap(n=>pure(n).compress(s,1)).squeezeJoin()}),press=register("press",function(s){return s._pressBy(.5)});Pattern$1.prototype.hush=function(){return silence};const palindrome=register("palindrome",function(s){return s.lastOf(2,rev)}),{juxBy,juxby}=register(["juxBy","juxby"],function(s,e,n){s/=2;const a=function(u,c,f){return c in u?u[c]:f},o=n.withValue(u=>Object.assign({},u,{pan:a(u,"pan",.5)-s})),l=n.withValue(u=>Object.assign({},u,{pan:a(u,"pan",.5)+s}));return stack(o,e(l))}),jux=register("jux",function(s,e){return e._juxBy(1,s,e)}),{echoWith,echowith,stutWith,stutwith}=register(["echoWith","echowith","stutWith","stutwith"],function(s,e,n,a){return stack(...listRange(0,s-1).map(o=>n(a.late(fraction$1(e).mul(o)),o)))}),echo=register("echo",function(s,e,n,a){return a._echoWith(s,e,(o,l)=>o.velocity(Math.pow(n,l)))}),stut=register("stut",function(s,e,n,a){return a._echoWith(s,n,(o,l)=>o.velocity(Math.pow(e,l)))}),_iter=function(s,e,n=!1){return s=fraction$1(s),slowcat(...listRange(0,s.sub(1)).map(a=>n?e.late(fraction$1(a).div(s)):e.early(fraction$1(a).div(s))))},iter=register("iter",function(s,e){return _iter(s,e,!1)}),{iterBack,iterback}=register(["iterBack","iterback"],function(s,e){return _iter(s,e,!0)}),_repeatCycles=function(s,e){return slowcat(...Array(s).fill(e))};register("repeatCycles",_repeatCycles);const _chunk=function(s,e,n,a=!1,o=!1){const l=Array(s-1).fill(!1);l.unshift(!0);const u=_iter(s,sequence(...l),!a);return o||(n=n.repeatCycles(s)),n.when(u,e)};register(["chunk","slowchunk","slowChunk"],function(s,e,n){return _chunk(s,e,n,!1,!1)});const{chunkBack,chunkback}=register(["chunkBack","chunkback"],function(s,e,n){return _chunk(s,e,n,!0)});register(["fastchunk","fastChunk"],function(s,e,n){return _chunk(s,e,n,!1,!0)});const bypass=register("bypass",function(s,e){return s=!!parseInt(s),s?silence:e}),ribbon=register("ribbon",(s,e,n)=>n.early(s).restart(pure(1).slow(e))),duration=register("duration",function(s,e){return e.withHapSpan(n=>new TimeSpan(n.begin,n.begin.add(s)))}),hsla=register("hsla",(s,e,n,a,o)=>o.color(`hsla(${s}turn,${e*100}%,${n*100}%,${a})`)),hsl=register("hsl",(s,e,n,a)=>a.color(`hsl(${s}turn,${e*100}%,${n*100}%)`)),{color,colour}=register(["color","colour"],function(s,e){return e.withContext(n=>({...n,color:s}))}),velocity=register("velocity",function(s,e){return e.withContext(n=>({...n,velocity:(n.velocity||1)*s}))}),legato=register("legato",function(s,e){return s=fraction$1(s),e.withHapSpan(n=>new TimeSpan(n.begin,n.begin.add(n.end.sub(n.begin).mul(s))))}),chop=register("chop",function(s,e){const a=Array.from({length:s},(l,u)=>u).map(l=>({begin:l/s,end:(l+1)/s})),o=function(l){return sequence(a.map(u=>Object.assign({},l,u)))};return e.squeezeBind(o)}),striate=register("striate",function(s,e){const a=Array.from({length:s},(l,u)=>u).map(l=>({begin:l/s,end:(l+1)/s})),o=slowcat(...a);return e.set(o)._fast(s)}),_loopAt=function(s,e,n=1){return e.speed(1/s*n).unit("c").slow(s)},slice=register("slice",function(s,e,n){return s.innerBind(a=>e.outerBind(o=>n.outerBind(l=>{l=l instanceof Object?l:{s:l};const u=Array.isArray(a)?a[o]:o/a,c=Array.isArray(a)?a[o+1]:(o+1)/a;return pure({begin:u,end:c,_slices:a,...l})})))},!1),splice=register("splice",function(s,e,n){return slice(s,e,n).withHap(function(o){return o.withValue(l=>({speed:1/l._slices/o.whole.duration*(l.speed||1),unit:"c",...l}))})},!1),{loopAt,loopat}=register(["loopAt","loopat"],function(s,e){return _loopAt(s,e,1)}),fit=register("fit",s=>s.withHap(e=>e.withValue(n=>({...n,speed:1/e.whole.duration,unit:"c"})))),{loopAtCps,loopatcps}=register(["loopAtCps","loopatcps"],function(s,e,n){return _loopAt(s,n,e)}),ref$1=s=>pure(1).withValue(()=>reify(s())).innerJoin();let fadeGain=s=>s<.5?1:1-(s-.5)/.5,xfade=(s,e,n)=>{e=reify(e),s=reify(s),n=reify(n);let a=e.fmap(l=>({gain:fadeGain(l)})),o=e.fmap(l=>({gain:fadeGain(1-l)}));return stack(s.mul(a),n.mul(o))};Pattern$1.prototype.xfade=function(s,e){return xfade(this,s,e)};const controls={},generic_params=[[["s","n","gain"],"sound"],["source","src"],["n"],[["note","n"]],["accelerate"],["gain"],["postgain"],["amp"],["attack","att"],[["fmh","fmi"],"fmh"],[["fmi","fmh"],"fm"],["fmenv"],["fmattack"],["fmdecay"],["fmsustain"],["fmrelease"],["fmvelocity"],["bank"],["analyze"],["fft"],["decay"],["sustain","sus"],["release","rel"],["hold"],[["bandf","bandq"],"bpf","bp"],["bandq","bpq"],["begin"],["end"],["loop"],["loopBegin","loopb"],["loopEnd","loope"],["crush"],["coarse"],["channels","ch"],["phaserrate","phasr"],[["phaser","phaserdepth","phasercenter","phasersweep"],"ph"],["phasersweep","phs"],["phasercenter","phc"],["phaserdepth","phd","phasdp"],["channel"],["cut"],[["cutoff","resonance"],"ctf","lpf","lp"],["lpenv","lpe"],["hpenv","hpe"],["bpenv","bpe"],["lpattack","lpa"],["hpattack","hpa"],["bpattack","bpa"],["lpdecay","lpd"],["hpdecay","hpd"],["bpdecay","bpd"],["lpsustain","lps"],["hpsustain","hps"],["bpsustain","bps"],["lprelease","lpr"],["hprelease","hpr"],["bprelease","bpr"],["ftype"],["fanchor"],[["vib","vibmod"],"vibrato","v"],["noise"],[["vibmod","vib"],"vmod"],[["hcutoff","hresonance"],"hpf","hp"],["hresonance","hpq"],["resonance","lpq"],["djf"],[["delay","delaytime","delayfeedback"]],["delayfeedback","delayfb","dfb"],["delaytime","delayt","dt"],["lock"],["detune","det"],["dry"],["fadeTime","fadeOutTime"],["fadeInTime"],["freq"],["gate","gat"],["leslie"],["lrate"],["lsize"],["activeLabel"],[["label","activeLabel"]],["degree"],["mtranspose"],["ctranspose"],["harmonic"],["stepsPerOctave"],["octaveR"],["nudge"],["octave"],["orbit"],["overgain"],["overshape"],["pan"],["panspan"],["pansplay"],["panwidth"],["panorient"],["rate"],["slide"],["semitone"],["voice"],["chord"],["dictionary","dict"],["anchor"],["offset"],["octaves"],[["mode","anchor"]],[["room","size"]],["roomlp","rlp"],["roomdim","rdim"],["roomfade","rfade"],[["ir","i"],"iresponse"],["roomsize","size","sz","rsize"],["shape"],[["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]],["compressorKnee"],["compressorRatio"],["compressorAttack"],["compressorRelease"],["speed"],["unit"],["squiz"],["vowel"],["waveloss"],["density"],["dur"],["expression"],["sustainpedal"],["tremolodepth","tremdp"],["tremolorate","tremr"],["fshift"],["fshiftnote"],["fshiftphase"],["triode"],["krush"],["kcutoff"],["octer"],["octersub"],["octersubsub"],["ring"],["ringf"],["ringdf"],["distort"],["freeze"],["xsdelay"],["tsdelay"],["real"],["imag"],["enhance"],["partials"],["comb"],["smear"],["scram"],["binshift"],["hbrick"],["lbrick"],["midichan"],["control"],["ccn"],["ccv"],["polyTouch"],["midibend"],["miditouch"],["ctlNum"],["frameRate"],["frames"],["hours"],["midicmd"],["minutes"],["progNum"],["seconds"],["songPtr"],["uid"],["val"],["cps"],["clip"],["zrand"],["curve"],["slide"],["deltaSlide"],["pitchJump"],["pitchJumpTime"],["lfo","repeatTime"],["znoise"],["zmod"],["zcrush"],["zdelay"],["tremolo"],["zzfx"]];controls.createParam=function(s){const e=Array.isArray(s)?s[0]:s;var n;Array.isArray(s)?n=l=>{if(Array.isArray(l)){const u={};return l.forEach((c,f)=>{f<s.length&&(u[s[f]]=c)}),u}else return{[e]:l}}:n=l=>({[e]:l});const a=(...l)=>sequence(...l).withValue(n),o=function(...l){return l.length?this.set(a(...l)):this.fmap(n)};return Pattern$1.prototype[e]=o,a},generic_params.forEach(([s,...e])=>{const n=Array.isArray(s)?s[0]:s;controls[n]=controls.createParam(s),e.forEach(a=>{controls[a]=controls[n],Pattern$1.prototype[a]=Pattern$1.prototype[n]})}),controls.createParams=(...s)=>s.reduce((e,n)=>Object.assign(e,{[n]:controls.createParam(n)}),{}),controls.adsr=register("adsr",(s,e)=>{s=Array.isArray(s)?s:[s];const[n,a,o,l]=s;return e.set({attack:n,decay:a,sustain:o,release:l})}),controls.ds=register("ds",(s,e)=>{s=Array.isArray(s)?s:[s];const[n,a]=s;return e.set({decay:n,sustain:a})});const left=function(s,e){const[n,a]=s,[o,l]=e,[u,c]=splitAt(a,o);return[[a,n-a],[zipWith((f,d)=>f.concat(d),u,l),c]]},right=function(s,e){const[n,a]=s,[o,l]=e,[u,c]=splitAt(n,l);return[[n,a-n],[zipWith((d,g)=>d.concat(g),o,u),c]]},_bjork=function(s,e){const[n,a]=s;return Math.min(n,a)<=1?[s,e]:_bjork(...n>a?left(s,e):right(s,e))},bjork=function(s,e){const n=e-s,a=Array(s).fill([1]),o=Array(n).fill([0]),l=_bjork([s,n],[a,o]);return flatten$1(l[1][0]).concat(flatten$1(l[1][1]))},_euclidRot=function(s,e,n){const a=bjork(s,e);return n?rotate$2(a,-n):a},euclid=register("euclid",function(s,e,n){return n.struct(_euclidRot(s,e,0))}),{euclidrot,euclidRot}=register(["euclidrot","euclidRot"],function(s,e,n,a){return a.struct(_euclidRot(s,e,n))}),_euclidLegato=function(s,e,n,a){if(s<1)return silence;const l=_euclidRot(s,e,n).join("").split("1").slice(1).map(u=>[u.length+1,!0]);return a.struct(timeCat(...l))},euclidLegato=register(["euclidLegato"],function(s,e,n){return _euclidLegato(s,e,0,n)}),euclidLegatoRot=register(["euclidLegatoRot"],function(s,e,n,a){return _euclidLegato(s,e,n,a)});function steady(s){return new Pattern$1(e=>[new Hap(void 0,e.span,s)])}const signal$1=s=>{const e=n=>[new Hap(void 0,n.span,s(n.span.midpoint()))];return new Pattern$1(e)},isaw=signal$1(s=>1-s%1),isaw2=isaw.toBipolar(),saw=signal$1(s=>s%1),saw2=saw.toBipolar(),sine2=signal$1(s=>Math.sin(Math.PI*2*s)),sine=sine2.fromBipolar(),cosine=sine._early(fraction$1(1).div(4)),cosine2=sine2._early(fraction$1(1).div(4)),square=signal$1(s=>Math.floor(s*2%2)),square2=square.toBipolar(),tri=fastcat(isaw,saw),tri2=fastcat(isaw2,saw2),time$1=signal$1(id$1),xorwise=s=>{const e=s<<13^s,n=e>>17^e;return n<<5^n},_frac=s=>s-Math.trunc(s),timeToIntSeed=s=>xorwise(Math.trunc(_frac(s/300)*536870912)),intSeedToRand=s=>s%536870912/536870912,timeToRand=s=>Math.abs(intSeedToRand(timeToIntSeed(s))),run=s=>saw.range(0,s).floor().segment(s),rand=signal$1(timeToRand),rand2=rand.toBipolar(),_brandBy=s=>rand.fmap(e=>e<s),brandBy=s=>reify(s).fmap(_brandBy).innerJoin(),brand=_brandBy(.5),_irand=s=>rand.fmap(e=>Math.trunc(e*s)),irand=s=>reify(s).fmap(_irand).innerJoin(),pick=(s,e)=>(e=e.map(reify),e.length==0?silence:s.fmap(n=>{const a=clamp$1(Math.round(n),0,e.length-1);return e[a]}).innerJoin()),squeeze=(s,e)=>(e=e.map(reify),e.length==0?silence:s.fmap(n=>{const a=_mod(Math.round(n),e.length);return e[a]}).squeezeJoin()),__chooseWith=(s,e)=>(e=e.map(reify),e.length==0?silence:s.range(0,e.length).fmap(n=>{const a=Math.min(Math.max(Math.floor(n),0),e.length-1);return e[a]})),chooseWith=(s,e)=>__chooseWith(s,e).outerJoin(),chooseInWith=(s,e)=>__chooseWith(s,e).innerJoin(),choose=(...s)=>chooseWith(rand,s);Pattern$1.prototype.choose=function(...s){return chooseWith(this,s)},Pattern$1.prototype.choose2=function(...s){return chooseWith(this.fromBipolar(),s)};const chooseCycles=(...s)=>chooseInWith(rand.segment(1),s),randcat=chooseCycles,_wchooseWith=function(s,...e){const n=e.map(c=>reify(c[0])),a=[];let o=0;for(const c of e)o+=c[1],a.push(o);const l=o,u=function(c){const f=c*l;return n[a.findIndex(d=>d>f,a)]};return s.fmap(u)},wchooseWith=(...s)=>_wchooseWith(...s).outerJoin(),wchoose=(...s)=>wchooseWith(rand,...s),wchooseCycles=(...s)=>_wchooseWith(rand,...s).innerJoin(),perlinWith=s=>{const e=s.fmap(Math.floor),n=s.fmap(l=>Math.floor(l)+1),a=l=>6*l**5-15*l**4+10*l**3,o=l=>u=>c=>u+a(l)*(c-u);return s.sub(e).fmap(o).appBoth(e.fmap(timeToRand)).appBoth(n.fmap(timeToRand))},perlin=perlinWith(time$1.fmap(s=>Number(s))),degradeByWith=register("degradeByWith",(s,e,n)=>n.fmap(a=>o=>a).appLeft(s.filterValues(a=>a>e))),degradeBy=register("degradeBy",function(s,e){return e._degradeByWith(rand,s)}),degrade=register("degrade",s=>s._degradeBy(.5)),undegradeBy=register("undegradeBy",function(s,e){return e._degradeByWith(rand.fmap(n=>1-n),s)}),undegrade=register("undegrade",s=>s._undegradeBy(.5)),sometimesBy=register("sometimesBy",function(s,e,n){return reify(s).fmap(a=>stack(n._degradeBy(a),e(n._undegradeBy(1-a)))).innerJoin()}),sometimes=register("sometimes",function(s,e){return e._sometimesBy(.5,s)}),someCyclesBy=register("someCyclesBy",function(s,e,n){return reify(s).fmap(a=>stack(n._degradeByWith(rand._segment(1),a),e(n._degradeByWith(rand.fmap(o=>1-o)._segment(1),1-a)))).innerJoin()}),someCycles=register("someCycles",function(s,e){return e._someCyclesBy(.5,s)}),often=register("often",function(s,e){return e.sometimesBy(.75,s)}),rarely=register("rarely",function(s,e){return e.sometimesBy(.25,s)}),almostNever=register("almostNever",function(s,e){return e.sometimesBy(.1,s)}),almostAlways=register("almostAlways",function(s,e){return e.sometimesBy(.9,s)}),never=register("never",function(s,e){return e}),always=register("always",function(s,e){return s(e)});let synth;try{synth=window?.speechSynthesis}catch(s){console.warn("cannot use window: not in browser?")}let allVoices=synth?.getVoices();function triggerSpeech(s,e,n){synth.cancel();const a=new SpeechSynthesisUtterance(s);a.lang=e,allVoices=synth.getVoices();const o=allVoices.filter(l=>l.lang.includes(e));typeof n=="number"?a.voice=o[n%o.length]:typeof n=="string"&&(a.voice=o.find(l=>l.name===l)),speechSynthesis.speak(a)}const speak=register("speak",function(s,e,n){return n.onTrigger((a,o)=>{triggerSpeech(o.value,s,e)})}),evalScope=async(...s)=>{const e=await Promise.allSettled(s),n=e.filter(a=>a.status==="fulfilled").map(a=>a.value);e.forEach((a,o)=>{a.status==="rejected"&&console.warn(`evalScope: module with index ${o} could not be loaded:`,a.reason)}),n.forEach(a=>{Object.entries(a).forEach(([o,l])=>{globalThis[o]=l})})};function safeEval(s,e={}){const{wrapExpression:n=!0,wrapAsync:a=!0}=e;n&&(s=`{${s}}`),a&&(s=`(async ()=>${s})()`);const o=`"use strict";return (${s})`;return Function(o)()}const evaluate=async(s,e)=>{let n={};if(e){const l=e(s);s=l.output,n=l}return{mode:"javascript",pattern:await safeEval(s,{wrapExpression:!!e}),meta:n}};function createClock(s,e,n=.05,a=.1,o=.1){let l=0,u=0,c=10**4,f=.01;const d=R=>n=R(n);o=o||a/2;const g=()=>{const R=s(),Z=R+a+o;for(u===0&&(u=R+f);u<Z;)u=Math.round(u*c)/c,u>=R&&e(u,n,l),u<R&&console.log("TOO LATE",u),u+=n,l++};let O;const S=()=>{b(),g(),O=setInterval(g,a*1e3)},b=()=>O!==void 0&&clearInterval(O);return{setDuration:d,start:S,stop:()=>{l=0,u=0,b()},pause:()=>b(),duration:n,interval:a,getPhase:()=>u,minLatency:f}}class Cyclist{constructor({interval:e,onTrigger:n,onToggle:a,onError:o,getTime:l,latency:u=.1}){this.started=!1,this.cps=1,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=l,this.onToggle=a,this.latency=u;const c=f=>Math.round(f*1e3)/1e3;this.clock=createClock(l,(f,d,g)=>{g===0&&(this.origin=f);try{const O=l(),S=this.lastEnd;this.lastBegin=S;const b=c(S+d*this.cps);this.lastEnd=b;const E=this.pattern.queryArc(S,b),k=f-O;this.lastTick=O+k,E.forEach($=>{if($.part.begin.equals($.whole.begin)){const R=($.whole.begin-S)/this.cps+k+u,Z=$.duration/this.cps;n?.($,R,Z,this.cps)}})}catch(O){logger$2(`[cyclist] error: ${O.message}`),o?.(O)}},e)}now(){const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){this.started=e,this.onToggle?.(e)}start(){if(!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");logger$2("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){logger$2("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){logger$2("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}setPattern(e,n=!1){this.pattern=e,n&&!this.started&&this.start()}setCps(e=1){this.cps=e}log(e,n,a){const o=a.filter(l=>l.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(o.length).fill("I").join("")}`)}}let time;function getTime$1(){if(!time)throw new Error("no time set! use setTime to define a time source");return time()}function setTime(s){time=s}function repl({interval:s,defaultOutput:e,onSchedulerError:n,onEvalError:a,beforeEval:o,afterEval:l,getTime:u,transpiler:c,onToggle:f,editPattern:d}){const g=new Cyclist({interval:s,onTrigger:getTrigger({defaultOutput:e,getTime:u}),onError:n,getTime:u,onToggle:f});let O={},S;const b=function(){return O={},S=void 0,silence},E=(ue,me=!0)=>{ue=d?.(ue)||ue,g.setPattern(ue,me)};setTime(()=>g.now());const k=async(ue,me=!0,ge=!0)=>{if(!ue)throw new Error("no code to evaluate");try{await o?.({code:ue}),ge&&b();let{pattern:Oe,meta:be}=await evaluate(ue,c);if(Object.keys(O).length&&(Oe=stack(...Object.values(O))),S&&(Oe=S(Oe)),!isPattern(Oe)){const Ae=`got "${typeof evaluated}" instead of pattern`;throw new Error(Ae+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return logger$2("[eval] code updated"),E(Oe,me),l?.({code:ue,pattern:Oe,meta:be}),Oe}catch(Oe){logger$2(`[eval] error: ${Oe.message}`,"error"),a?.(Oe)}},$=()=>g.stop(),R=()=>g.start(),Z=()=>g.pause(),he=ue=>g.setCps(ue),j=ue=>g.setCps(ue/60),K=register("loopAt",(ue,me)=>me.loopAtCps(ue,g.cps));Pattern$1.prototype.p=function(ue){return O[ue]=this,this},Pattern$1.prototype.q=function(ue){return silence};const se=function(ue){return S=ue,silence};try{for(let ue=1;ue<10;++ue)Object.defineProperty(Pattern$1.prototype,`d${ue}`,{get(){return this.p(ue)}}),Object.defineProperty(Pattern$1.prototype,`p${ue}`,{get(){return this.p(ue)}}),Pattern$1.prototype[`q${ue}`]=silence}catch{}const de=register("fit",ue=>ue.withHap(me=>me.withValue(ge=>({...ge,speed:g.cps/me.whole.duration,unit:"c"}))));return evalScope({loopAt:K,fit:de,all:se,hush:b,setCps:he,setcps:he,setCpm:j,setcpm:j}),{scheduler:g,evaluate:k,start:R,stop:$,pause:Z,setCps:he,setPattern:E}}const getTrigger=({getTime:s,defaultOutput:e})=>async(n,a,o,l)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await e(n,a,o,l),n.context.onTrigger&&await n.context.onTrigger(s()+a,n,s(),l)}catch(u){logger$2(`[cyclist] error: ${u.message}`,"error")}},getDrawContext=(s="test-canvas")=>{let e=document.querySelector("#"+s);if(!e){e=document.createElement("canvas"),e.id=s,e.width=window.innerWidth*2,e.height=window.innerHeight*2,e.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",document.body.prepend(e);let a;window.addEventListener("resize",()=>{a&&clearTimeout(a),a=setTimeout(()=>{e.width=window.innerWidth*2,e.height=window.innerHeight*2},200)})}return e.getContext("2d")};Pattern$1.prototype.draw=function(s,{from:e,to:n,onQuery:a}={}){if(typeof window>"u")return this;window.strudelAnimation&&cancelAnimationFrame(window.strudelAnimation);const o=getDrawContext();let l,u=[];const c=f=>{const d=getTime$1();if(e!==void 0&&n!==void 0){const g=Math.floor(d);if(l!==g){l=g;const O=g+e,S=g+n;setTimeout(()=>{u=this.query(new State(new TimeSpan(O,S))).filter(Boolean).filter(b=>b.part.begin.equals(b.whole.begin)),a?.(u)},0)}}s(o,u,d,f),window.strudelAnimation=requestAnimationFrame(c)};return requestAnimationFrame(c),this};const cleanupDraw=(s=!0)=>{const e=getDrawContext();s&&e.clearRect(0,0,e.canvas.width,e.canvas.width),window.strudelAnimation&&cancelAnimationFrame(window.strudelAnimation),window.strudelScheduler&&clearInterval(window.strudelScheduler)};Pattern$1.prototype.onPaint=function(s){return this.context={onPaint:s},this};class Framer{constructor(e,n){this.onFrame=e,this.onError=n}start(){const e=this;let n=requestAnimationFrame(function a(o){try{e.onFrame(o)}catch(l){e.onError(l)}n=requestAnimationFrame(a)});e.cancel=()=>{cancelAnimationFrame(n)}}stop(){this.cancel&&this.cancel()}}class Drawer{constructor(e,n){let[a,o]=n;a=Math.abs(a),this.visibleHaps=[],this.lastFrame=null,this.drawTime=n,this.framer=new Framer(()=>{if(!this.scheduler){console.warn("Drawer: no scheduler");return}const l=this.scheduler.now()+o;if(this.lastFrame===null){this.lastFrame=l;return}const u=this.scheduler.pattern.queryArc(Math.max(this.lastFrame,l-1/10),l);this.lastFrame=l,this.visibleHaps=(this.visibleHaps||[]).filter(f=>f.whole.end>=l-a-o).concat(u.filter(f=>f.hasOnset()));const c=l-o;e(this.visibleHaps,c,this)},l=>{console.warn("draw error",l)})}invalidate(e=this.scheduler){if(!e)return;this.scheduler=e;const n=e.now();let[a,o]=this.drawTime;const[l,u]=[Math.max(n,0),n+o+.1];this.visibleHaps=this.visibleHaps.filter(f=>f.whole.begin<n);const c=e.pattern.queryArc(l,u);this.visibleHaps=this.visibleHaps.concat(c)}start(e){this.scheduler=e,this.invalidate(),this.framer.start()}stop(){this.framer&&this.framer.stop()}}const{createParams}=controls;let clearColor="#22222210";Pattern$1.prototype.animate=function({callback:s,sync:e=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const a=getDrawContext(),{clientWidth:o,clientHeight:l}=a.canvas;let u=n===0?"99":Number((1-n)*100).toFixed(0);u=u.length===1?`0${u}`:u,clearColor=`#200010${u}`;const c=f=>{let d;f=Math.round(f),d=this.slow(1e3).queryArc(f,f),a.fillStyle=clearColor,a.fillRect(0,0,o,l),d.forEach(g=>{let{x:O,y:S,w:b,h:E,s:k,r:$,angle:R=0,fill:Z="darkseagreen"}=g.value;if(b*=o,E*=l,$!==void 0&&R!==void 0){const j=R*2*Math.PI,[K,se]=[(o-b)/2,(l-E)/2];O=K+Math.cos(j)*$*K,S=se+Math.sin(j)*$*se}else O*=o-b,S*=l-E;const he={...g.value,x:O,y:S,w:b,h:E};a.fillStyle=Z,k==="rect"?a.fillRect(O,S,b,E):k==="ellipse"&&(a.beginPath(),a.ellipse(O+b/2,S+E/2,b/2,E/2,0,0,2*Math.PI),a.fill()),s&&s(a,he,g)}),window.frame=requestAnimationFrame(c)};return window.frame=requestAnimationFrame(c),silence};const{x:x$1,y,w,h:h$1,angle,r,fill,smear}=createParams("x","y","w","h","angle","r","fill","smear"),rescale=register("rescale",function(s,e){return e.mul(x$1(s).w(s).y(s).h(s))}),moveXY=register("moveXY",function(s,e,n){return n.add(x$1(s).y(e))}),zoomIn=register("zoomIn",function(s,e){const n=pure(1).sub(s).div(2);return e.rescale(s).move(n,n)}),scale$2=(s,e,n)=>s*(n-e)+e,getValue=s=>{let{value:e}=s;typeof s.value!="object"&&(e={value:e});let{note:n,n:a,freq:o,s:l}=e;return o?freqToMidi$2(o):(n=n??a,typeof n=="string"?noteToMidi$1(n):typeof n=="number"?n:l?"_"+l:e)};Pattern$1.prototype.pianoroll=function(s={}){let{cycles:e=4,playhead:n=.5,overscan:a=1,hideNegative:o=!1}=s,l=-e*n,u=e*(1-n);return this.draw((c,f,d)=>{const g=O=>(!o||O.whole.begin>=0)&&O.whole.begin<=d+u&&O.endClipped>=d+l;pianoroll({...s,time:d,ctx:c,haps:f.filter(g)})},{from:l-a,to:u+a}),this};function pianoroll({time:s,haps:e,cycles:n=4,playhead:a=.5,flipTime:o=0,flipValues:l=0,hideNegative:u=!1,inactive:c="#7491D2",active:f="#FFCA28",background:d="transparent",smear:g=0,playheadColor:O="white",minMidi:S=10,maxMidi:b=90,autorange:E=0,timeframe:k,fold:$=0,vertical:R=0,labels:Z=!1,fill:he=1,fillActive:j=!1,strokeActive:K=!0,stroke:se,hideInactive:de=0,colorizeInactive:ue=1,fontFamily:me,ctx:ge}={}){const Oe=ge.canvas.width,be=ge.canvas.height;let Ae=-n*a,Ne=n*(1-a);k&&(console.warn("timeframe is deprecated! use from/to instead"),Ae=0,Ne=k);const Re=R?be:Oe,Fe=R?Oe:be;let Ue=R?[Re,0]:[0,Re];const $e=Ne-Ae,Ie=R?[0,Fe]:[Fe,0];let Xe=b-S+1,Pe=Fe/Xe,nt=[];o&&Ue.reverse(),l&&Ie.reverse();const{min:At,max:Dt,values:qe}=e.reduce(({min:xe,max:Et,values:Ft},ot)=>{const st=getValue(ot);return{min:st<xe?st:xe,max:st>Et?st:Et,values:Ft.includes(st)?Ft:[...Ft,st]}},{min:1/0,max:-1/0,values:[]});E&&(S=At,b=Dt,Xe=b-S+1),nt=qe.sort((xe,Et)=>String(xe).localeCompare(String(Et))),Pe=$?Fe/nt.length:Fe/Xe,ge.fillStyle=d,ge.globalAlpha=1,g||(ge.clearRect(0,0,Oe,be),ge.fillRect(0,0,Oe,be)),e.forEach(xe=>{const Et=xe.whole.begin<=s&&xe.endClipped>s;let Ft=se??(K&&Et),ot=!Et&&he||Et&&j;if(de&&!Et)return;let st=xe.value?.color||xe.context?.color;f=st||f,c=ue&&st||c,st=Et?f:c,ge.fillStyle=ot?st:"transparent",ge.strokeStyle=st,ge.globalAlpha=xe.context.velocity??xe.value?.gain??1;const Xt=(xe.whole.begin-(o?Ne:Ae))/$e,ht=scale$2(Xt,...Ue);let Tt=scale$2(xe.duration/$e,0,Re);const dt=getValue(xe),Kt=$?nt.indexOf(dt)/nt.length:(Number(dt)-S)/Xe,Ct=scale$2(Kt,...Ie);let Ht=0;const Yt=scale$2(s/$e,...Ue);let It;if(R?It=[Ct+1-(l?Pe:0),Re-Yt+ht+Ht+1-(o?0:Tt),Pe-2,Tt-2]:It=[ht-Yt+Ht+1-(o?Tt:0),Ct+1-(l?0:Pe),Tt-2,Pe-2],Ft&&ge.strokeRect(...It),ot&&ge.fillRect(...It),Z){const Qt=xe.value.note??xe.value.s+(xe.value.n?`:${xe.value.n}`:""),{label:Bt,activeLabel:ei}=xe.value,_t=(Et&&ei||Bt)??Qt;let Le=R?Tt:Pe*.75;ge.font=`${Le}px ${me||"monospace"}`,ge.fillStyle=ot?"black":st,ge.textBaseline="top",ge.fillText(_t,...It)}}),ge.globalAlpha=1;const at=scale$2(-Ae/$e,...Ue);return ge.strokeStyle=O,ge.beginPath(),R?(ge.moveTo(0,at),ge.lineTo(Fe,at)):(ge.moveTo(at,0),ge.lineTo(at,Fe)),ge.stroke(),this}function getDrawOptions(s,e={}){let[n,a]=s;n=Math.abs(n);const o=a+n,l=n/o;return{fold:1,...e,cycles:o,playhead:l}}Pattern$1.prototype.punchcard=function(s){return this.onPaint((e,n,a,o,l={})=>pianoroll({ctx:e,time:n,haps:a,...getDrawOptions(o,{...l,...s})}))},Pattern$1.prototype.wordfall=function(s){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...s})};function drawPianoroll(s){const{drawTime:e,...n}=s;pianoroll({...getDrawOptions(e),...n})}function fromPolar(s,e,n,a){const o=(s-90)*Math.PI/180;return[n+Math.cos(o)*e,a+Math.sin(o)*e]}const xyOnSpiral=(s,e,n,a,o=0)=>fromPolar((s+o)*360,e*s,n,a);function spiralSegment(s){let{ctx:e,from:n=0,to:a=3,margin:o=50,cx:l=100,cy:u=100,rotate:c=0,thickness:f=o/2,color:d="#0000ff30",cap:g="round",stretch:O=1,fromOpacity:S=1,toOpacity:b=1}=s;n*=O,a*=O,c*=O,e.lineWidth=f,e.lineCap=g,e.strokeStyle=d,e.globalAlpha=S,e.beginPath();let[E,k]=xyOnSpiral(n,o,l,u,c);e.moveTo(E,k);const $=1/60;let R=n;for(;R<=a;){const[Z,he]=xyOnSpiral(R,o,l,u,c);e.globalAlpha=(R-n)/(a-n)*b,e.lineTo(Z,he),R+=$}e.stroke()}Pattern$1.prototype.spiral=function(s={}){const{stretch:e=1,size:n=80,thickness:a=n/2,cap:o="butt",inset:l=3,playheadColor:u="#ffffff90",playheadLength:c=.02,playheadThickness:f=a,padding:d=0,steady:g=1,inactiveColor:O="#ffffff20",colorizeInactive:S=0,fade:b=!0}=s;function E({ctx:k,time:$,haps:R,drawTime:Z}){const[he,j]=[k.canvas.width,k.canvas.height];k.clearRect(0,0,he*2,j*2);const[K,se]=[he/2,j/2],de={margin:n/e,cx:K,cy:se,stretch:e,cap:o,thickness:a},ue={...de,thickness:f,from:l-c,to:l,color:u},[me]=Z,ge=g*$;R.forEach(Oe=>{const be=Oe.whole.begin<=$&&Oe.endClipped>$,Ae=Oe.whole.begin-$+l,Ne=Oe.endClipped-$+l-d,{color:Re}=Oe.context,Fe=b?1-Math.abs((Oe.whole.begin-$)/me):1;spiralSegment({ctx:k,...de,from:Ae,to:Ne,rotate:ge,color:S||be?Re:O,fromOpacity:Fe,toOpacity:Fe})}),spiralSegment({ctx:k,...ue,rotate:ge})}return this.onPaint((k,$,R,Z)=>E({ctx:k,time:$,haps:R,drawTime:Z}))};function frame(s){window.strudelAnimation&&cancelAnimationFrame(window.strudelAnimation);const e=n=>{s(n,getTime$1()),window.strudelAnimation=requestAnimationFrame(e)};requestAnimationFrame(e)}const backgroundImage=function(s,e={}){const n=document.getElementById("code"),a="background-image:url("+s+");background-size:contain;";n.style=a;const{className:o}=n,l=(f,d)=>{({style:()=>n.style=a+";"+d,className:()=>n.className=d+" "+o})[f]()},u=Object.entries(e).filter(([f,d])=>typeof d=="function");Object.entries(e).filter(([f,d])=>typeof d=="string").forEach(([f,d])=>l(f,d)),u.length!==0&&frame((f,d)=>u.forEach(([g,O])=>{l(g,O(d))}))},cleanupUi=()=>{const s=document.getElementById("code");s&&(s.style="")},gist=(route,cache=!0)=>fetch(`https://gist.githubusercontent.com/${route}?cachebust=${cache?"":Date.now()}`).then(s=>s.text()).then(code=>eval(code));logger$2("🌀 @strudel.cycles/core loaded 🌀"),globalThis._strudelLoaded&&console.warn(`@strudel.cycles/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel.cycles/core".`),globalThis._strudelLoaded=!0;const core=Object.freeze(Object.defineProperty({__proto__:null,Cyclist,Drawer,Fraction:fraction$1,Framer,Hap,Pattern:Pattern$1,State,TimeSpan,__chooseWith,_brandBy,_irand,_mod,add:add$5,almostAlways,almostNever,always,and,angle,apply,arrange,backgroundImage,band,base64ToUnicode,bjork,blshift,bor,brak,brand,brandBy,brshift,bxor,bypass,cat,ceil,choose,chooseCycles,chooseInWith,chooseWith,chop,chunkBack,chunkback,clamp:clamp$1,cleanupDraw,cleanupUi,code2hash,color,colour,compose,compress,compressSpan,compressspan,constant,controls,cosine,cosine2,cpm,curry,degrade,degradeBy,degradeByWith,density,div,drawLine,drawPianoroll,duration,early,echo,echoWith,echowith,eq,eqt,euclid,euclidLegato,euclidLegatoRot,euclidRot,euclidrot,evalScope,evaluate,every,fast,fastGap,fastcat,fastgap,fill,firstOf,fit,flatten:flatten$1,floor,focus,focusSpan,focusspan,fractionalArgs,freqToMidi:freqToMidi$2,fromBipolar,func,getDrawContext,getDrawOptions,getFreq,getFrequency,getPlayableNoteValue,getTime:getTime$1,getTrigger,gist,gt,gte,h:h$1,hash2code,hsl,hsla,hurry,id:id$1,inside:inside$1,inv,invert:invert$1,irand,isNote,isNoteWithOctave,isPattern,isaw,isaw2,iter,iterBack,iterback,jux,juxBy,juxby,keep,keepif,lastOf,late,legato,linger,listRange,logKey,logger:logger$2,loopAt,loopAtCps,loopat,loopatcps,lt,lte,mapArgs,mask,midi2note:midi2note$1,midiToFreq:midiToFreq$2,mod:mod$2,moveXY,mul,ne,net,never,noteToMidi:noteToMidi$1,numeralArgs,off:off$1,often,or,outside,palindrome,parseFractional,parseNumeral,perlin,perlinWith,pianoroll,pick,pipe,ply,pm,polymeter,polymeterSteps,polyrhythm,pow,pr,press,pressBy,pure,r,rand,rand2,randcat,range:range$2,range2,rangex,rarely,ratio,ref:ref$1,register,reify,removeUndefineds,repl,rescale,rev,ribbon,rotate:rotate$2,round,run,saw,saw2,segment,seq,sequence,set,setStringParser,setTime,signal:signal$1,silence,sine,sine2,slice,slow,slowcat,slowcatPrime,smear,sol2note,someCycles,someCyclesBy,sometimes,sometimesBy,sparsity,speak,splice,splitAt,square,square2,squeeze,stack,steady,striate,struct,stut,stutWith,stutwith,sub,superimpose,time:time$1,timeCat,toBipolar,tokenizeNote:tokenizeNote$2,tri,tri2,undegrade,undegradeBy,unicodeToBase64,valueToMidi:valueToMidi$1,velocity,w,wchoose,wchooseCycles,when,x:x$1,xfade,y,zipWith,zoom,zoomArc,zoomIn,zoomarc},Symbol.toStringTag,{value:"Module"}));var escodegen$1={},estraverse={};(function(s){(function e(n){var a,o,l,u,c,f;function d(K){var se={},de,ue;for(de in K)K.hasOwnProperty(de)&&(ue=K[de],typeof ue=="object"&&ue!==null?se[de]=d(ue):se[de]=ue);return se}function g(K,se){var de,ue,me,ge;for(ue=K.length,me=0;ue;)de=ue>>>1,ge=me+de,se(K[ge])?ue=de:(me=ge+1,ue-=de+1);return me}a={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},l={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},u={},c={},f={},o={Break:u,Skip:c,Remove:f};function O(K,se){this.parent=K,this.key=se}O.prototype.replace=function(se){this.parent[this.key]=se},O.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function S(K,se,de,ue){this.node=K,this.path=se,this.wrap=de,this.ref=ue}function b(){}b.prototype.path=function(){var se,de,ue,me,ge,Oe;function be(Ae,Ne){if(Array.isArray(Ne))for(ue=0,me=Ne.length;ue<me;++ue)Ae.push(Ne[ue]);else Ae.push(Ne)}if(!this.__current.path)return null;for(ge=[],se=2,de=this.__leavelist.length;se<de;++se)Oe=this.__leavelist[se],be(ge,Oe.path);return be(ge,this.__current.path),ge},b.prototype.type=function(){var K=this.current();return K.type||this.__current.wrap},b.prototype.parents=function(){var se,de,ue;for(ue=[],se=1,de=this.__leavelist.length;se<de;++se)ue.push(this.__leavelist[se].node);return ue},b.prototype.current=function(){return this.__current.node},b.prototype.__execute=function(se,de){var ue,me;return me=void 0,ue=this.__current,this.__current=de,this.__state=null,se&&(me=se.call(this,de.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=ue,me},b.prototype.notify=function(se){this.__state=se},b.prototype.skip=function(){this.notify(c)},b.prototype.break=function(){this.notify(u)},b.prototype.remove=function(){this.notify(f)},b.prototype.__initialize=function(K,se){this.visitor=se,this.root=K,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,se.fallback==="iteration"?this.__fallback=Object.keys:typeof se.fallback=="function"&&(this.__fallback=se.fallback),this.__keys=l,se.keys&&(this.__keys=Object.assign(Object.create(this.__keys),se.keys))};function E(K){return K==null?!1:typeof K=="object"&&typeof K.type=="string"}function k(K,se){return(K===a.ObjectExpression||K===a.ObjectPattern)&&se==="properties"}function $(K,se){for(var de=K.length-1;de>=0;--de)if(K[de].node===se)return!0;return!1}b.prototype.traverse=function(se,de){var ue,me,ge,Oe,be,Ae,Ne,Re,Fe,Ue,$e,Ie;for(this.__initialize(se,de),Ie={},ue=this.__worklist,me=this.__leavelist,ue.push(new S(se,null,null,null)),me.push(new S(null,null,null,null));ue.length;){if(ge=ue.pop(),ge===Ie){if(ge=me.pop(),Ae=this.__execute(de.leave,ge),this.__state===u||Ae===u)return;continue}if(ge.node){if(Ae=this.__execute(de.enter,ge),this.__state===u||Ae===u)return;if(ue.push(Ie),me.push(ge),this.__state===c||Ae===c)continue;if(Oe=ge.node,be=Oe.type||ge.wrap,Ue=this.__keys[be],!Ue)if(this.__fallback)Ue=this.__fallback(Oe);else throw new Error("Unknown node type "+be+".");for(Re=Ue.length;(Re-=1)>=0;)if(Ne=Ue[Re],$e=Oe[Ne],!!$e){if(Array.isArray($e)){for(Fe=$e.length;(Fe-=1)>=0;)if($e[Fe]&&!$(me,$e[Fe])){if(k(be,Ue[Re]))ge=new S($e[Fe],[Ne,Fe],"Property",null);else if(E($e[Fe]))ge=new S($e[Fe],[Ne,Fe],null,null);else continue;ue.push(ge)}}else if(E($e)){if($(me,$e))continue;ue.push(new S($e,Ne,null,null))}}}}},b.prototype.replace=function(se,de){var ue,me,ge,Oe,be,Ae,Ne,Re,Fe,Ue,$e,Ie,Xe;function Pe(nt){var At,Dt,qe,at;if(nt.ref.remove()){for(Dt=nt.ref.key,at=nt.ref.parent,At=ue.length;At--;)if(qe=ue[At],qe.ref&&qe.ref.parent===at){if(qe.ref.key<Dt)break;--qe.ref.key}}}for(this.__initialize(se,de),$e={},ue=this.__worklist,me=this.__leavelist,Ie={root:se},Ae=new S(se,null,null,new O(Ie,"root")),ue.push(Ae),me.push(Ae);ue.length;){if(Ae=ue.pop(),Ae===$e){if(Ae=me.pop(),be=this.__execute(de.leave,Ae),be!==void 0&&be!==u&&be!==c&&be!==f&&Ae.ref.replace(be),(this.__state===f||be===f)&&Pe(Ae),this.__state===u||be===u)return Ie.root;continue}if(be=this.__execute(de.enter,Ae),be!==void 0&&be!==u&&be!==c&&be!==f&&(Ae.ref.replace(be),Ae.node=be),(this.__state===f||be===f)&&(Pe(Ae),Ae.node=null),this.__state===u||be===u)return Ie.root;if(ge=Ae.node,!!ge&&(ue.push($e),me.push(Ae),!(this.__state===c||be===c))){if(Oe=ge.type||Ae.wrap,Fe=this.__keys[Oe],!Fe)if(this.__fallback)Fe=this.__fallback(ge);else throw new Error("Unknown node type "+Oe+".");for(Ne=Fe.length;(Ne-=1)>=0;)if(Xe=Fe[Ne],Ue=ge[Xe],!!Ue)if(Array.isArray(Ue)){for(Re=Ue.length;(Re-=1)>=0;)if(Ue[Re]){if(k(Oe,Fe[Ne]))Ae=new S(Ue[Re],[Xe,Re],"Property",new O(Ue,Re));else if(E(Ue[Re]))Ae=new S(Ue[Re],[Xe,Re],null,new O(Ue,Re));else continue;ue.push(Ae)}}else E(Ue)&&ue.push(new S(Ue,Xe,null,new O(ge,Xe)))}}return Ie.root};function R(K,se){var de=new b;return de.traverse(K,se)}function Z(K,se){var de=new b;return de.replace(K,se)}function he(K,se){var de;return de=g(se,function(me){return me.range[0]>K.range[0]}),K.extendedRange=[K.range[0],K.range[1]],de!==se.length&&(K.extendedRange[1]=se[de].range[0]),de-=1,de>=0&&(K.extendedRange[0]=se[de].range[1]),K}function j(K,se,de){var ue=[],me,ge,Oe,be;if(!K.range)throw new Error("attachComments needs range information");if(!de.length){if(se.length){for(Oe=0,ge=se.length;Oe<ge;Oe+=1)me=d(se[Oe]),me.extendedRange=[0,K.range[0]],ue.push(me);K.leadingComments=ue}return K}for(Oe=0,ge=se.length;Oe<ge;Oe+=1)ue.push(he(d(se[Oe]),de));return be=0,R(K,{enter:function(Ae){for(var Ne;be<ue.length&&(Ne=ue[be],!(Ne.extendedRange[1]>Ae.range[0]));)Ne.extendedRange[1]===Ae.range[0]?(Ae.leadingComments||(Ae.leadingComments=[]),Ae.leadingComments.push(Ne),ue.splice(be,1)):be+=1;if(be===ue.length)return o.Break;if(ue[be].extendedRange[0]>Ae.range[1])return o.Skip}}),be=0,R(K,{leave:function(Ae){for(var Ne;be<ue.length&&(Ne=ue[be],!(Ae.range[1]<Ne.extendedRange[0]));)Ae.range[1]===Ne.extendedRange[0]?(Ae.trailingComments||(Ae.trailingComments=[]),Ae.trailingComments.push(Ne),ue.splice(be,1)):be+=1;if(be===ue.length)return o.Break;if(ue[be].extendedRange[0]>Ae.range[1])return o.Skip}}),K}return n.Syntax=a,n.traverse=R,n.replace=Z,n.attachComments=j,n.VisitorKeys=l,n.VisitorOption=o,n.Controller=b,n.cloneEnvironment=function(){return e({})},n})(s)})(estraverse);var utils={},ast={exports:{}};(function(){function s(u){if(u==null)return!1;switch(u.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(u){if(u==null)return!1;switch(u.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function n(u){if(u==null)return!1;switch(u.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function a(u){return n(u)||u!=null&&u.type==="FunctionDeclaration"}function o(u){switch(u.type){case"IfStatement":return u.alternate!=null?u.alternate:u.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return u.body}return null}function l(u){var c;if(u.type!=="IfStatement"||u.alternate==null)return!1;c=u.consequent;do{if(c.type==="IfStatement"&&c.alternate==null)return!0;c=o(c)}while(c);return!1}ast.exports={isExpression:s,isStatement:n,isIterationStatement:e,isSourceElement:a,isProblematicIfStatement:l,trailingStatement:o}})();var astExports=ast.exports,code$1={exports:{}};(function(){var s,e,n,a,o,l;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},s={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function u($){return 48<=$&&$<=57}function c($){return 48<=$&&$<=57||97<=$&&$<=102||65<=$&&$<=70}function f($){return $>=48&&$<=55}n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function d($){return $===32||$===9||$===11||$===12||$===160||$>=5760&&n.indexOf($)>=0}function g($){return $===10||$===13||$===8232||$===8233}function O($){if($<=65535)return String.fromCharCode($);var R=String.fromCharCode(Math.floor(($-65536)/1024)+55296),Z=String.fromCharCode(($-65536)%1024+56320);return R+Z}for(a=new Array(128),l=0;l<128;++l)a[l]=l>=97&&l<=122||l>=65&&l<=90||l===36||l===95;for(o=new Array(128),l=0;l<128;++l)o[l]=l>=97&&l<=122||l>=65&&l<=90||l>=48&&l<=57||l===36||l===95;function S($){return $<128?a[$]:e.NonAsciiIdentifierStart.test(O($))}function b($){return $<128?o[$]:e.NonAsciiIdentifierPart.test(O($))}function E($){return $<128?a[$]:s.NonAsciiIdentifierStart.test(O($))}function k($){return $<128?o[$]:s.NonAsciiIdentifierPart.test(O($))}code$1.exports={isDecimalDigit:u,isHexDigit:c,isOctalDigit:f,isWhiteSpace:d,isLineTerminator:g,isIdentifierStartES5:S,isIdentifierPartES5:b,isIdentifierStartES6:E,isIdentifierPartES6:k}})();var codeExports=code$1.exports,keyword$1={exports:{}};(function(){var s=codeExports;function e(S){switch(S){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function n(S,b){return!b&&S==="yield"?!1:a(S,b)}function a(S,b){if(b&&e(S))return!0;switch(S.length){case 2:return S==="if"||S==="in"||S==="do";case 3:return S==="var"||S==="for"||S==="new"||S==="try";case 4:return S==="this"||S==="else"||S==="case"||S==="void"||S==="with"||S==="enum";case 5:return S==="while"||S==="break"||S==="catch"||S==="throw"||S==="const"||S==="yield"||S==="class"||S==="super";case 6:return S==="return"||S==="typeof"||S==="delete"||S==="switch"||S==="export"||S==="import";case 7:return S==="default"||S==="finally"||S==="extends";case 8:return S==="function"||S==="continue"||S==="debugger";case 10:return S==="instanceof";default:return!1}}function o(S,b){return S==="null"||S==="true"||S==="false"||n(S,b)}function l(S,b){return S==="null"||S==="true"||S==="false"||a(S,b)}function u(S){return S==="eval"||S==="arguments"}function c(S){var b,E,k;if(S.length===0||(k=S.charCodeAt(0),!s.isIdentifierStartES5(k)))return!1;for(b=1,E=S.length;b<E;++b)if(k=S.charCodeAt(b),!s.isIdentifierPartES5(k))return!1;return!0}function f(S,b){return(S-55296)*1024+(b-56320)+65536}function d(S){var b,E,k,$,R;if(S.length===0)return!1;for(R=s.isIdentifierStartES6,b=0,E=S.length;b<E;++b){if(k=S.charCodeAt(b),55296<=k&&k<=56319){if(++b,b>=E||($=S.charCodeAt(b),!(56320<=$&&$<=57343)))return!1;k=f(k,$)}if(!R(k))return!1;R=s.isIdentifierPartES6}return!0}function g(S,b){return c(S)&&!o(S,b)}function O(S,b){return d(S)&&!l(S,b)}keyword$1.exports={isKeywordES5:n,isKeywordES6:a,isReservedWordES5:o,isReservedWordES6:l,isRestrictedWord:u,isIdentifierNameES5:c,isIdentifierNameES6:d,isIdentifierES5:g,isIdentifierES6:O}})();var keywordExports=keyword$1.exports;(function(){utils.ast=astExports,utils.code=codeExports,utils.keyword=keywordExports})();var sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(e){if(0<=e&&e<s.length)return s[e];throw new TypeError("Must be between 0 and 63: "+e)},base64.decode=function(e){var n=65,a=90,o=97,l=122,u=48,c=57,f=43,d=47,g=26,O=52;return n<=e&&e<=a?e-n:o<=e&&e<=l?e-o+g:u<=e&&e<=c?e-u+O:e==f?62:e==d?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var s=requireBase64(),e=5,n=1<<e,a=n-1,o=n;function l(c){return c<0?(-c<<1)+1:(c<<1)+0}function u(c){var f=(c&1)===1,d=c>>1;return f?-d:d}return base64Vlq.encode=function(f){var d="",g,O=l(f);do g=O&a,O>>>=e,O>0&&(g|=o),d+=s.encode(g);while(O>0);return d},base64Vlq.decode=function(f,d,g){var O=f.length,S=0,b=0,E,k;do{if(d>=O)throw new Error("Expected more digits in base 64 VLQ value.");if(k=s.decode(f.charCodeAt(d++)),k===-1)throw new Error("Invalid base64 digit: "+f.charAt(d-1));E=!!(k&o),k&=a,S=S+(k<<b),b+=e}while(E);g.value=u(S),g.rest=d},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(s){function e(j,K,se){if(K in j)return j[K];if(arguments.length===3)return se;throw new Error('"'+K+'" is a required argument.')}s.getArg=e;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,a=/^data:.+\,.+$/;function o(j){var K=j.match(n);return K?{scheme:K[1],auth:K[2],host:K[3],port:K[4],path:K[5]}:null}s.urlParse=o;function l(j){var K="";return j.scheme&&(K+=j.scheme+":"),K+="//",j.auth&&(K+=j.auth+"@"),j.host&&(K+=j.host),j.port&&(K+=":"+j.port),j.path&&(K+=j.path),K}s.urlGenerate=l;function u(j){var K=j,se=o(j);if(se){if(!se.path)return j;K=se.path}for(var de=s.isAbsolute(K),ue=K.split(/\/+/),me,ge=0,Oe=ue.length-1;Oe>=0;Oe--)me=ue[Oe],me==="."?ue.splice(Oe,1):me===".."?ge++:ge>0&&(me===""?(ue.splice(Oe+1,ge),ge=0):(ue.splice(Oe,2),ge--));return K=ue.join("/"),K===""&&(K=de?"/":"."),se?(se.path=K,l(se)):K}s.normalize=u;function c(j,K){j===""&&(j="."),K===""&&(K=".");var se=o(K),de=o(j);if(de&&(j=de.path||"/"),se&&!se.scheme)return de&&(se.scheme=de.scheme),l(se);if(se||K.match(a))return K;if(de&&!de.host&&!de.path)return de.host=K,l(de);var ue=K.charAt(0)==="/"?K:u(j.replace(/\/+$/,"")+"/"+K);return de?(de.path=ue,l(de)):ue}s.join=c,s.isAbsolute=function(j){return j.charAt(0)==="/"||n.test(j)};function f(j,K){j===""&&(j="."),j=j.replace(/\/$/,"");for(var se=0;K.indexOf(j+"/")!==0;){var de=j.lastIndexOf("/");if(de<0||(j=j.slice(0,de),j.match(/^([^\/]+:\/)?\/*$/)))return K;++se}return Array(se+1).join("../")+K.substr(j.length+1)}s.relative=f;var d=function(){var j=Object.create(null);return!("__proto__"in j)}();function g(j){return j}function O(j){return b(j)?"$"+j:j}s.toSetString=d?g:O;function S(j){return b(j)?j.slice(1):j}s.fromSetString=d?g:S;function b(j){if(!j)return!1;var K=j.length;if(K<9||j.charCodeAt(K-1)!==95||j.charCodeAt(K-2)!==95||j.charCodeAt(K-3)!==111||j.charCodeAt(K-4)!==116||j.charCodeAt(K-5)!==111||j.charCodeAt(K-6)!==114||j.charCodeAt(K-7)!==112||j.charCodeAt(K-8)!==95||j.charCodeAt(K-9)!==95)return!1;for(var se=K-10;se>=0;se--)if(j.charCodeAt(se)!==36)return!1;return!0}function E(j,K,se){var de=$(j.source,K.source);return de!==0||(de=j.originalLine-K.originalLine,de!==0)||(de=j.originalColumn-K.originalColumn,de!==0||se)||(de=j.generatedColumn-K.generatedColumn,de!==0)||(de=j.generatedLine-K.generatedLine,de!==0)?de:$(j.name,K.name)}s.compareByOriginalPositions=E;function k(j,K,se){var de=j.generatedLine-K.generatedLine;return de!==0||(de=j.generatedColumn-K.generatedColumn,de!==0||se)||(de=$(j.source,K.source),de!==0)||(de=j.originalLine-K.originalLine,de!==0)||(de=j.originalColumn-K.originalColumn,de!==0)?de:$(j.name,K.name)}s.compareByGeneratedPositionsDeflated=k;function $(j,K){return j===K?0:j===null?1:K===null?-1:j>K?1:-1}function R(j,K){var se=j.generatedLine-K.generatedLine;return se!==0||(se=j.generatedColumn-K.generatedColumn,se!==0)||(se=$(j.source,K.source),se!==0)||(se=j.originalLine-K.originalLine,se!==0)||(se=j.originalColumn-K.originalColumn,se!==0)?se:$(j.name,K.name)}s.compareByGeneratedPositionsInflated=R;function Z(j){return JSON.parse(j.replace(/^\)]}'[^\n]*\n/,""))}s.parseSourceMapInput=Z;function he(j,K,se){if(K=K||"",j&&(j[j.length-1]!=="/"&&K[0]!=="/"&&(j+="/"),K=j+K),se){var de=o(se);if(!de)throw new Error("sourceMapURL could not be parsed");if(de.path){var ue=de.path.lastIndexOf("/");ue>=0&&(de.path=de.path.substring(0,ue+1))}K=c(l(de),K)}return u(K)}s.computeSourceURL=he}(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var s=requireUtil(),e=Object.prototype.hasOwnProperty,n=typeof Map<"u";function a(){this._array=[],this._set=n?new Map:Object.create(null)}return a.fromArray=function(l,u){for(var c=new a,f=0,d=l.length;f<d;f++)c.add(l[f],u);return c},a.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},a.prototype.add=function(l,u){var c=n?l:s.toSetString(l),f=n?this.has(l):e.call(this._set,c),d=this._array.length;(!f||u)&&this._array.push(l),f||(n?this._set.set(l,d):this._set[c]=d)},a.prototype.has=function(l){if(n)return this._set.has(l);var u=s.toSetString(l);return e.call(this._set,u)},a.prototype.indexOf=function(l){if(n){var u=this._set.get(l);if(u>=0)return u}else{var c=s.toSetString(l);if(e.call(this._set,c))return this._set[c]}throw new Error('"'+l+'" is not in the set.')},a.prototype.at=function(l){if(l>=0&&l<this._array.length)return this._array[l];throw new Error("No element indexed by "+l)},a.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=a,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var s=requireUtil();function e(a,o){var l=a.generatedLine,u=o.generatedLine,c=a.generatedColumn,f=o.generatedColumn;return u>l||u==l&&f>=c||s.compareByGeneratedPositionsInflated(a,o)<=0}function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return n.prototype.unsortedForEach=function(o,l){this._array.forEach(o,l)},n.prototype.add=function(o){e(this._last,o)?(this._last=o,this._array.push(o)):(this._sorted=!1,this._array.push(o))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(s.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=n,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var s=requireBase64Vlq(),e=requireUtil(),n=requireArraySet().ArraySet,a=requireMappingList().MappingList;function o(l){l||(l={}),this._file=e.getArg(l,"file",null),this._sourceRoot=e.getArg(l,"sourceRoot",null),this._skipValidation=e.getArg(l,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new a,this._sourcesContents=null}return o.prototype._version=3,o.fromSourceMap=function(u){var c=u.sourceRoot,f=new o({file:u.file,sourceRoot:c});return u.eachMapping(function(d){var g={generated:{line:d.generatedLine,column:d.generatedColumn}};d.source!=null&&(g.source=d.source,c!=null&&(g.source=e.relative(c,g.source)),g.original={line:d.originalLine,column:d.originalColumn},d.name!=null&&(g.name=d.name)),f.addMapping(g)}),u.sources.forEach(function(d){var g=d;c!==null&&(g=e.relative(c,d)),f._sources.has(g)||f._sources.add(g);var O=u.sourceContentFor(d);O!=null&&f.setSourceContent(d,O)}),f},o.prototype.addMapping=function(u){var c=e.getArg(u,"generated"),f=e.getArg(u,"original",null),d=e.getArg(u,"source",null),g=e.getArg(u,"name",null);this._skipValidation||this._validateMapping(c,f,d,g),d!=null&&(d=String(d),this._sources.has(d)||this._sources.add(d)),g!=null&&(g=String(g),this._names.has(g)||this._names.add(g)),this._mappings.add({generatedLine:c.line,generatedColumn:c.column,originalLine:f!=null&&f.line,originalColumn:f!=null&&f.column,source:d,name:g})},o.prototype.setSourceContent=function(u,c){var f=u;this._sourceRoot!=null&&(f=e.relative(this._sourceRoot,f)),c!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(f)]=c):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(f)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},o.prototype.applySourceMap=function(u,c,f){var d=c;if(c==null){if(u.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);d=u.file}var g=this._sourceRoot;g!=null&&(d=e.relative(g,d));var O=new n,S=new n;this._mappings.unsortedForEach(function(b){if(b.source===d&&b.originalLine!=null){var E=u.originalPositionFor({line:b.originalLine,column:b.originalColumn});E.source!=null&&(b.source=E.source,f!=null&&(b.source=e.join(f,b.source)),g!=null&&(b.source=e.relative(g,b.source)),b.originalLine=E.line,b.originalColumn=E.column,E.name!=null&&(b.name=E.name))}var k=b.source;k!=null&&!O.has(k)&&O.add(k);var $=b.name;$!=null&&!S.has($)&&S.add($)},this),this._sources=O,this._names=S,u.sources.forEach(function(b){var E=u.sourceContentFor(b);E!=null&&(f!=null&&(b=e.join(f,b)),g!=null&&(b=e.relative(g,b)),this.setSourceContent(b,E))},this)},o.prototype._validateMapping=function(u,c,f,d){if(c&&typeof c.line!="number"&&typeof c.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(u&&"line"in u&&"column"in u&&u.line>0&&u.column>=0&&!c&&!f&&!d)){if(u&&"line"in u&&"column"in u&&c&&"line"in c&&"column"in c&&u.line>0&&u.column>=0&&c.line>0&&c.column>=0&&f)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:u,source:f,original:c,name:d}))}},o.prototype._serializeMappings=function(){for(var u=0,c=1,f=0,d=0,g=0,O=0,S="",b,E,k,$,R=this._mappings.toArray(),Z=0,he=R.length;Z<he;Z++){if(E=R[Z],b="",E.generatedLine!==c)for(u=0;E.generatedLine!==c;)b+=";",c++;else if(Z>0){if(!e.compareByGeneratedPositionsInflated(E,R[Z-1]))continue;b+=","}b+=s.encode(E.generatedColumn-u),u=E.generatedColumn,E.source!=null&&($=this._sources.indexOf(E.source),b+=s.encode($-O),O=$,b+=s.encode(E.originalLine-1-d),d=E.originalLine-1,b+=s.encode(E.originalColumn-f),f=E.originalColumn,E.name!=null&&(k=this._names.indexOf(E.name),b+=s.encode(k-g),g=k)),S+=b}return S},o.prototype._generateSourcesContent=function(u,c){return u.map(function(f){if(!this._sourcesContents)return null;c!=null&&(f=e.relative(c,f));var d=e.toSetString(f);return Object.prototype.hasOwnProperty.call(this._sourcesContents,d)?this._sourcesContents[d]:null},this)},o.prototype.toJSON=function(){var u={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(u.file=this._file),this._sourceRoot!=null&&(u.sourceRoot=this._sourceRoot),this._sourcesContents&&(u.sourcesContent=this._generateSourcesContent(u.sources,u.sourceRoot)),u},o.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=o,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,function(s){s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2;function e(n,a,o,l,u,c){var f=Math.floor((a-n)/2)+n,d=u(o,l[f],!0);return d===0?f:d>0?a-f>1?e(f,a,o,l,u,c):c==s.LEAST_UPPER_BOUND?a<l.length?a:-1:f:f-n>1?e(n,f,o,l,u,c):c==s.LEAST_UPPER_BOUND?f:n<0?-1:n}s.search=function(a,o,l,u){if(o.length===0)return-1;var c=e(-1,o.length,a,o,l,u||s.GREATEST_LOWER_BOUND);if(c<0)return-1;for(;c-1>=0&&l(o[c],o[c-1],!0)===0;)--c;return c}}(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function s(a,o,l){var u=a[o];a[o]=a[l],a[l]=u}function e(a,o){return Math.round(a+Math.random()*(o-a))}function n(a,o,l,u){if(l<u){var c=e(l,u),f=l-1;s(a,c,u);for(var d=a[u],g=l;g<u;g++)o(a[g],d)<=0&&(f+=1,s(a,f,g));s(a,f+1,g);var O=f+1;n(a,o,l,O-1),n(a,o,O+1,u)}}return quickSort.quickSort=function(a,o){n(a,o,0,a.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var s=requireUtil(),e=requireBinarySearch(),n=requireArraySet().ArraySet,a=requireBase64Vlq(),o=requireQuickSort().quickSort;function l(d,g){var O=d;return typeof d=="string"&&(O=s.parseSourceMapInput(d)),O.sections!=null?new f(O,g):new u(O,g)}l.fromSourceMap=function(d,g){return u.fromSourceMap(d,g)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(g,O){var S=g.charAt(O);return S===";"||S===","},l.prototype._parseMappings=function(g,O){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(g,O,S){var b=O||null,E=S||l.GENERATED_ORDER,k;switch(E){case l.GENERATED_ORDER:k=this._generatedMappings;break;case l.ORIGINAL_ORDER:k=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var $=this.sourceRoot;k.map(function(R){var Z=R.source===null?null:this._sources.at(R.source);return Z=s.computeSourceURL($,Z,this._sourceMapURL),{source:Z,generatedLine:R.generatedLine,generatedColumn:R.generatedColumn,originalLine:R.originalLine,originalColumn:R.originalColumn,name:R.name===null?null:this._names.at(R.name)}},this).forEach(g,b)},l.prototype.allGeneratedPositionsFor=function(g){var O=s.getArg(g,"line"),S={source:s.getArg(g,"source"),originalLine:O,originalColumn:s.getArg(g,"column",0)};if(S.source=this._findSourceIndex(S.source),S.source<0)return[];var b=[],E=this._findMapping(S,this._originalMappings,"originalLine","originalColumn",s.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(E>=0){var k=this._originalMappings[E];if(g.column===void 0)for(var $=k.originalLine;k&&k.originalLine===$;)b.push({line:s.getArg(k,"generatedLine",null),column:s.getArg(k,"generatedColumn",null),lastColumn:s.getArg(k,"lastGeneratedColumn",null)}),k=this._originalMappings[++E];else for(var R=k.originalColumn;k&&k.originalLine===O&&k.originalColumn==R;)b.push({line:s.getArg(k,"generatedLine",null),column:s.getArg(k,"generatedColumn",null),lastColumn:s.getArg(k,"lastGeneratedColumn",null)}),k=this._originalMappings[++E]}return b},sourceMapConsumer.SourceMapConsumer=l;function u(d,g){var O=d;typeof d=="string"&&(O=s.parseSourceMapInput(d));var S=s.getArg(O,"version"),b=s.getArg(O,"sources"),E=s.getArg(O,"names",[]),k=s.getArg(O,"sourceRoot",null),$=s.getArg(O,"sourcesContent",null),R=s.getArg(O,"mappings"),Z=s.getArg(O,"file",null);if(S!=this._version)throw new Error("Unsupported version: "+S);k&&(k=s.normalize(k)),b=b.map(String).map(s.normalize).map(function(he){return k&&s.isAbsolute(k)&&s.isAbsolute(he)?s.relative(k,he):he}),this._names=n.fromArray(E.map(String),!0),this._sources=n.fromArray(b,!0),this._absoluteSources=this._sources.toArray().map(function(he){return s.computeSourceURL(k,he,g)}),this.sourceRoot=k,this.sourcesContent=$,this._mappings=R,this._sourceMapURL=g,this.file=Z}u.prototype=Object.create(l.prototype),u.prototype.consumer=l,u.prototype._findSourceIndex=function(d){var g=d;if(this.sourceRoot!=null&&(g=s.relative(this.sourceRoot,g)),this._sources.has(g))return this._sources.indexOf(g);var O;for(O=0;O<this._absoluteSources.length;++O)if(this._absoluteSources[O]==d)return O;return-1},u.fromSourceMap=function(g,O){var S=Object.create(u.prototype),b=S._names=n.fromArray(g._names.toArray(),!0),E=S._sources=n.fromArray(g._sources.toArray(),!0);S.sourceRoot=g._sourceRoot,S.sourcesContent=g._generateSourcesContent(S._sources.toArray(),S.sourceRoot),S.file=g._file,S._sourceMapURL=O,S._absoluteSources=S._sources.toArray().map(function(se){return s.computeSourceURL(S.sourceRoot,se,O)});for(var k=g._mappings.toArray().slice(),$=S.__generatedMappings=[],R=S.__originalMappings=[],Z=0,he=k.length;Z<he;Z++){var j=k[Z],K=new c;K.generatedLine=j.generatedLine,K.generatedColumn=j.generatedColumn,j.source&&(K.source=E.indexOf(j.source),K.originalLine=j.originalLine,K.originalColumn=j.originalColumn,j.name&&(K.name=b.indexOf(j.name)),R.push(K)),$.push(K)}return o(S.__originalMappings,s.compareByOriginalPositions),S},u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function c(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}u.prototype._parseMappings=function(g,O){for(var S=1,b=0,E=0,k=0,$=0,R=0,Z=g.length,he=0,j={},K={},se=[],de=[],ue,me,ge,Oe,be;he<Z;)if(g.charAt(he)===";")S++,he++,b=0;else if(g.charAt(he)===",")he++;else{for(ue=new c,ue.generatedLine=S,Oe=he;Oe<Z&&!this._charIsMappingSeparator(g,Oe);Oe++);if(me=g.slice(he,Oe),ge=j[me],ge)he+=me.length;else{for(ge=[];he<Oe;)a.decode(g,he,K),be=K.value,he=K.rest,ge.push(be);if(ge.length===2)throw new Error("Found a source, but no line and column");if(ge.length===3)throw new Error("Found a source and line, but no column");j[me]=ge}ue.generatedColumn=b+ge[0],b=ue.generatedColumn,ge.length>1&&(ue.source=$+ge[1],$+=ge[1],ue.originalLine=E+ge[2],E=ue.originalLine,ue.originalLine+=1,ue.originalColumn=k+ge[3],k=ue.originalColumn,ge.length>4&&(ue.name=R+ge[4],R+=ge[4])),de.push(ue),typeof ue.originalLine=="number"&&se.push(ue)}o(de,s.compareByGeneratedPositionsDeflated),this.__generatedMappings=de,o(se,s.compareByOriginalPositions),this.__originalMappings=se},u.prototype._findMapping=function(g,O,S,b,E,k){if(g[S]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+g[S]);if(g[b]<0)throw new TypeError("Column must be greater than or equal to 0, got "+g[b]);return e.search(g,O,E,k)},u.prototype.computeColumnSpans=function(){for(var g=0;g<this._generatedMappings.length;++g){var O=this._generatedMappings[g];if(g+1<this._generatedMappings.length){var S=this._generatedMappings[g+1];if(O.generatedLine===S.generatedLine){O.lastGeneratedColumn=S.generatedColumn-1;continue}}O.lastGeneratedColumn=1/0}},u.prototype.originalPositionFor=function(g){var O={generatedLine:s.getArg(g,"line"),generatedColumn:s.getArg(g,"column")},S=this._findMapping(O,this._generatedMappings,"generatedLine","generatedColumn",s.compareByGeneratedPositionsDeflated,s.getArg(g,"bias",l.GREATEST_LOWER_BOUND));if(S>=0){var b=this._generatedMappings[S];if(b.generatedLine===O.generatedLine){var E=s.getArg(b,"source",null);E!==null&&(E=this._sources.at(E),E=s.computeSourceURL(this.sourceRoot,E,this._sourceMapURL));var k=s.getArg(b,"name",null);return k!==null&&(k=this._names.at(k)),{source:E,line:s.getArg(b,"originalLine",null),column:s.getArg(b,"originalColumn",null),name:k}}}return{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(g){return g==null}):!1},u.prototype.sourceContentFor=function(g,O){if(!this.sourcesContent)return null;var S=this._findSourceIndex(g);if(S>=0)return this.sourcesContent[S];var b=g;this.sourceRoot!=null&&(b=s.relative(this.sourceRoot,b));var E;if(this.sourceRoot!=null&&(E=s.urlParse(this.sourceRoot))){var k=b.replace(/^file:\/\//,"");if(E.scheme=="file"&&this._sources.has(k))return this.sourcesContent[this._sources.indexOf(k)];if((!E.path||E.path=="/")&&this._sources.has("/"+b))return this.sourcesContent[this._sources.indexOf("/"+b)]}if(O)return null;throw new Error('"'+b+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(g){var O=s.getArg(g,"source");if(O=this._findSourceIndex(O),O<0)return{line:null,column:null,lastColumn:null};var S={source:O,originalLine:s.getArg(g,"line"),originalColumn:s.getArg(g,"column")},b=this._findMapping(S,this._originalMappings,"originalLine","originalColumn",s.compareByOriginalPositions,s.getArg(g,"bias",l.GREATEST_LOWER_BOUND));if(b>=0){var E=this._originalMappings[b];if(E.source===S.source)return{line:s.getArg(E,"generatedLine",null),column:s.getArg(E,"generatedColumn",null),lastColumn:s.getArg(E,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=u;function f(d,g){var O=d;typeof d=="string"&&(O=s.parseSourceMapInput(d));var S=s.getArg(O,"version"),b=s.getArg(O,"sections");if(S!=this._version)throw new Error("Unsupported version: "+S);this._sources=new n,this._names=new n;var E={line:-1,column:0};this._sections=b.map(function(k){if(k.url)throw new Error("Support for url field in sections not implemented.");var $=s.getArg(k,"offset"),R=s.getArg($,"line"),Z=s.getArg($,"column");if(R<E.line||R===E.line&&Z<E.column)throw new Error("Section offsets must be ordered and non-overlapping.");return E=$,{generatedOffset:{generatedLine:R+1,generatedColumn:Z+1},consumer:new l(s.getArg(k,"map"),g)}})}return f.prototype=Object.create(l.prototype),f.prototype.constructor=l,f.prototype._version=3,Object.defineProperty(f.prototype,"sources",{get:function(){for(var d=[],g=0;g<this._sections.length;g++)for(var O=0;O<this._sections[g].consumer.sources.length;O++)d.push(this._sections[g].consumer.sources[O]);return d}}),f.prototype.originalPositionFor=function(g){var O={generatedLine:s.getArg(g,"line"),generatedColumn:s.getArg(g,"column")},S=e.search(O,this._sections,function(E,k){var $=E.generatedLine-k.generatedOffset.generatedLine;return $||E.generatedColumn-k.generatedOffset.generatedColumn}),b=this._sections[S];return b?b.consumer.originalPositionFor({line:O.generatedLine-(b.generatedOffset.generatedLine-1),column:O.generatedColumn-(b.generatedOffset.generatedLine===O.generatedLine?b.generatedOffset.generatedColumn-1:0),bias:g.bias}):{source:null,line:null,column:null,name:null}},f.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(g){return g.consumer.hasContentsOfAllSources()})},f.prototype.sourceContentFor=function(g,O){for(var S=0;S<this._sections.length;S++){var b=this._sections[S],E=b.consumer.sourceContentFor(g,!0);if(E)return E}if(O)return null;throw new Error('"'+g+'" is not in the SourceMap.')},f.prototype.generatedPositionFor=function(g){for(var O=0;O<this._sections.length;O++){var S=this._sections[O];if(S.consumer._findSourceIndex(s.getArg(g,"source"))!==-1){var b=S.consumer.generatedPositionFor(g);if(b){var E={line:b.line+(S.generatedOffset.generatedLine-1),column:b.column+(S.generatedOffset.generatedLine===b.line?S.generatedOffset.generatedColumn-1:0)};return E}}}return{line:null,column:null}},f.prototype._parseMappings=function(g,O){this.__generatedMappings=[],this.__originalMappings=[];for(var S=0;S<this._sections.length;S++)for(var b=this._sections[S],E=b.consumer._generatedMappings,k=0;k<E.length;k++){var $=E[k],R=b.consumer._sources.at($.source);R=s.computeSourceURL(b.consumer.sourceRoot,R,this._sourceMapURL),this._sources.add(R),R=this._sources.indexOf(R);var Z=null;$.name&&(Z=b.consumer._names.at($.name),this._names.add(Z),Z=this._names.indexOf(Z));var he={source:R,generatedLine:$.generatedLine+(b.generatedOffset.generatedLine-1),generatedColumn:$.generatedColumn+(b.generatedOffset.generatedLine===$.generatedLine?b.generatedOffset.generatedColumn-1:0),originalLine:$.originalLine,originalColumn:$.originalColumn,name:Z};this.__generatedMappings.push(he),typeof he.originalLine=="number"&&this.__originalMappings.push(he)}o(this.__generatedMappings,s.compareByGeneratedPositionsDeflated),o(this.__originalMappings,s.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=f,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var s=requireSourceMapGenerator().SourceMapGenerator,e=requireUtil(),n=/(\r?\n)/,a=10,o="$$$isSourceNode$$$";function l(u,c,f,d,g){this.children=[],this.sourceContents={},this.line=u??null,this.column=c??null,this.source=f??null,this.name=g??null,this[o]=!0,d!=null&&this.add(d)}return l.fromStringWithSourceMap=function(c,f,d){var g=new l,O=c.split(n),S=0,b=function(){var Z=j(),he=j()||"";return Z+he;function j(){return S<O.length?O[S++]:void 0}},E=1,k=0,$=null;return f.eachMapping(function(Z){if($!==null)if(E<Z.generatedLine)R($,b()),E++,k=0;else{var he=O[S]||"",j=he.substr(0,Z.generatedColumn-k);O[S]=he.substr(Z.generatedColumn-k),k=Z.generatedColumn,R($,j),$=Z;return}for(;E<Z.generatedLine;)g.add(b()),E++;if(k<Z.generatedColumn){var he=O[S]||"";g.add(he.substr(0,Z.generatedColumn)),O[S]=he.substr(Z.generatedColumn),k=Z.generatedColumn}$=Z},this),S<O.length&&($&&R($,b()),g.add(O.splice(S).join(""))),f.sources.forEach(function(Z){var he=f.sourceContentFor(Z);he!=null&&(d!=null&&(Z=e.join(d,Z)),g.setSourceContent(Z,he))}),g;function R(Z,he){if(Z===null||Z.source===void 0)g.add(he);else{var j=d?e.join(d,Z.source):Z.source;g.add(new l(Z.originalLine,Z.originalColumn,j,he,Z.name))}}},l.prototype.add=function(c){if(Array.isArray(c))c.forEach(function(f){this.add(f)},this);else if(c[o]||typeof c=="string")c&&this.children.push(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this},l.prototype.prepend=function(c){if(Array.isArray(c))for(var f=c.length-1;f>=0;f--)this.prepend(c[f]);else if(c[o]||typeof c=="string")this.children.unshift(c);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+c);return this},l.prototype.walk=function(c){for(var f,d=0,g=this.children.length;d<g;d++)f=this.children[d],f[o]?f.walk(c):f!==""&&c(f,{source:this.source,line:this.line,column:this.column,name:this.name})},l.prototype.join=function(c){var f,d,g=this.children.length;if(g>0){for(f=[],d=0;d<g-1;d++)f.push(this.children[d]),f.push(c);f.push(this.children[d]),this.children=f}return this},l.prototype.replaceRight=function(c,f){var d=this.children[this.children.length-1];return d[o]?d.replaceRight(c,f):typeof d=="string"?this.children[this.children.length-1]=d.replace(c,f):this.children.push("".replace(c,f)),this},l.prototype.setSourceContent=function(c,f){this.sourceContents[e.toSetString(c)]=f},l.prototype.walkSourceContents=function(c){for(var f=0,d=this.children.length;f<d;f++)this.children[f][o]&&this.children[f].walkSourceContents(c);for(var g=Object.keys(this.sourceContents),f=0,d=g.length;f<d;f++)c(e.fromSetString(g[f]),this.sourceContents[g[f]])},l.prototype.toString=function(){var c="";return this.walk(function(f){c+=f}),c},l.prototype.toStringWithSourceMap=function(c){var f={code:"",line:1,column:0},d=new s(c),g=!1,O=null,S=null,b=null,E=null;return this.walk(function(k,$){f.code+=k,$.source!==null&&$.line!==null&&$.column!==null?((O!==$.source||S!==$.line||b!==$.column||E!==$.name)&&d.addMapping({source:$.source,original:{line:$.line,column:$.column},generated:{line:f.line,column:f.column},name:$.name}),O=$.source,S=$.line,b=$.column,E=$.name,g=!0):g&&(d.addMapping({generated:{line:f.line,column:f.column}}),O=null,g=!1);for(var R=0,Z=k.length;R<Z;R++)k.charCodeAt(R)===a?(f.line++,f.column=0,R+1===Z?(O=null,g=!1):g&&d.addMapping({source:$.source,original:{line:$.line,column:$.column},generated:{line:f.line,column:f.column},name:$.name})):f.column++}),this.walkSourceContents(function(k,$){d.setSourceContent(k,$)}),{code:f.code,map:d}},sourceNode.SourceNode=l,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}const name$3="escodegen",description="ECMAScript code generator",homepage="http://github.com/estools/escodegen",main="escodegen.js",bin={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version$1="2.0.0",engines={node:">=6.0"},maintainers=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository={type:"git",url:"http://github.com/estools/escodegen.git"},dependencies={estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies={"source-map":"~0.6.1"},devDependencies={acorn:"^7.3.1",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license="BSD-2-Clause",scripts={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"},require$$3={name:name$3,description,homepage,main,bin,files,version:version$1,engines,maintainers,repository,dependencies,optionalDependencies,devDependencies,license,scripts};(function(s){(function(){var e,n,a,o,l,u,c,f,d,g,O,S,b,E,k,$,R,Z,he,j,K,se,de,ue,me,ge;l=estraverse,u=utils,e=l.Syntax;function Oe(F){return ze.Expression.hasOwnProperty(F.type)}function be(F){return ze.Statement.hasOwnProperty(F.type)}n={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,OptionalChaining:16,Call:17,New:18,TaggedTemplate:19,Member:20,Primary:21},a={"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,in:n.Relational,instanceof:n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative,"**":n.Exponentiation};var Ae=1,Ne=2,Re=4,Fe=8,Ue=16,$e=32,Ie=Ne|Re,Xe=Ae|Ne,Pe=Ae|Ne|Re,nt=Ae,At=Re,Dt=Ae|Re,qe=Ae,at=Ae|$e,xe=0,Et=Ae|Ue,Ft=Ae|Fe;function ot(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function st(F,L){var I="";for(L|=0;L>0;L>>>=1,F+=F)L&1&&(I+=F);return I}function Xt(F){return/[\r\n]/g.test(F)}function ht(F){var L=F.length;return L&&u.code.isLineTerminator(F.charCodeAt(L-1))}function Tt(F,L){var I;for(I in L)L.hasOwnProperty(I)&&(F[I]=L[I]);return F}function dt(F,L){var I,U;function te(ye){return typeof ye=="object"&&ye instanceof Object&&!(ye instanceof RegExp)}for(I in L)L.hasOwnProperty(I)&&(U=L[I],te(U)?te(F[I])?dt(F[I],U):F[I]=dt({},U):F[I]=U);return F}function Kt(F){var L,I,U,te,ye;if(F!==F)throw new Error("Numeric literal whose value is NaN");if(F<0||F===0&&1/F<0)throw new Error("Numeric literal whose value is negative");if(F===1/0)return d?"null":g?"1e400":"1e+400";if(L=""+F,!g||L.length<3)return L;for(I=L.indexOf("."),!d&&L.charCodeAt(0)===48&&I===1&&(I=0,L=L.slice(1)),U=L,L=L.replace("e+","e"),te=0,(ye=U.indexOf("e"))>0&&(te=+U.slice(ye+1),U=U.slice(0,ye)),I>=0&&(te-=U.length-I-1,U=+(U.slice(0,I)+U.slice(I+1))+""),ye=0;U.charCodeAt(U.length+ye-1)===48;)--ye;return ye!==0&&(te-=ye,U=U.slice(0,ye)),te!==0&&(U+="e"+te),(U.length<L.length||O&&F>1e12&&Math.floor(F)===F&&(U="0x"+F.toString(16)).length<L.length)&&+U===F&&(L=U),L}function Ct(F,L){return(F&-2)===8232?(L?"u":"\\u")+(F===8232?"2028":"2029"):F===10||F===13?(L?"":"\\")+(F===10?"n":"r"):String.fromCharCode(F)}function Ht(F){var L,I,U,te,ye,Se,we,Be;if(I=F.toString(),F.source){if(L=I.match(/\/([^/]*)$/),!L)return I;for(U=L[1],I="",we=!1,Be=!1,te=0,ye=F.source.length;te<ye;++te)Se=F.source.charCodeAt(te),Be?(I+=Ct(Se,Be),Be=!1):(we?Se===93&&(we=!1):Se===47?I+="\\":Se===91&&(we=!0),I+=Ct(Se,Be),Be=Se===92);return"/"+I+"/"+U}return I}function Yt(F,L){var I;return F===8?"\\b":F===12?"\\f":F===9?"\\t":(I=F.toString(16).toUpperCase(),d||F>255?"\\u"+"0000".slice(I.length)+I:F===0&&!u.code.isDecimalDigit(L)?"\\0":F===11?"\\x0B":"\\x"+"00".slice(I.length)+I)}function It(F){if(F===92)return"\\\\";if(F===10)return"\\n";if(F===13)return"\\r";if(F===8232)return"\\u2028";if(F===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function Qt(F){var L,I,U,te;for(te=S==="double"?'"':"'",L=0,I=F.length;L<I;++L)if(U=F.charCodeAt(L),U===39){te='"';break}else if(U===34){te="'";break}else U===92&&++L;return te+F+te}function Bt(F){var L="",I,U,te,ye=0,Se=0,we,Be;for(I=0,U=F.length;I<U;++I){if(te=F.charCodeAt(I),te===39)++ye;else if(te===34)++Se;else if(te===47&&d)L+="\\";else if(u.code.isLineTerminator(te)||te===92){L+=It(te);continue}else if(!u.code.isIdentifierPartES5(te)&&(d&&te<32||!d&&!b&&(te<32||te>126))){L+=Yt(te,F.charCodeAt(I+1));continue}L+=String.fromCharCode(te)}if(we=!(S==="double"||S==="auto"&&Se<ye),Be=we?"'":'"',!(we?ye:Se))return Be+L+Be;for(F=L,L=Be,I=0,U=F.length;I<U;++I)te=F.charCodeAt(I),(te===39&&we||te===34&&!we)&&(L+="\\"),L+=String.fromCharCode(te);return L+Be}function ei(F){var L,I,U,te="";for(L=0,I=F.length;L<I;++L)U=F[L],te+=Array.isArray(U)?ei(U):U;return te}function Ye(F,L){if(!se)return Array.isArray(F)?ei(F):F;if(L==null){if(F instanceof o)return F;L={}}return L.loc==null?new o(null,null,se,F,L.name||null):new o(L.loc.start.line,L.loc.start.column,se===!0?L.loc.source||null:se,F,L.name||null)}function _t(){return k||" "}function Le(F,L){var I,U,te,ye;return I=Ye(F).toString(),I.length===0?[L]:(U=Ye(L).toString(),U.length===0?[F]:(te=I.charCodeAt(I.length-1),ye=U.charCodeAt(0),(te===43||te===45)&&te===ye||u.code.isIdentifierPartES5(te)&&u.code.isIdentifierPartES5(ye)||te===47&&ye===105?[F,_t(),L]:u.code.isWhiteSpace(te)||u.code.isLineTerminator(te)||u.code.isWhiteSpace(ye)||u.code.isLineTerminator(ye)?[F,L]:[F,k,L]))}function ut(F){return[c,F]}function Ot(F){var L;L=c,c+=f,F(c),c=L}function vt(F){var L;for(L=F.length-1;L>=0&&!u.code.isLineTerminator(F.charCodeAt(L));--L);return F.length-1-L}function pt(F,L){var I,U,te,ye,Se,we,Be,He;for(I=F.split(/\r\n|[\r\n]/),we=Number.MAX_VALUE,U=1,te=I.length;U<te;++U){for(ye=I[U],Se=0;Se<ye.length&&u.code.isWhiteSpace(ye.charCodeAt(Se));)++Se;we>Se&&(we=Se)}for(typeof L<"u"?(Be=c,I[1][we]==="*"&&(L+=" "),c=L):(we&1&&--we,Be=c),U=1,te=I.length;U<te;++U)He=Ye(ut(I[U].slice(we))),I[U]=se?He.join(""):He;return c=Be,I.join(`
`)}function et(F,L){if(F.type==="Line"){if(ht(F.value))return"//"+F.value;var I="//"+F.value;return ue||(I+=`
`),I}return j.format.indent.adjustMultilineComment&&/[\n\r]/.test(F.value)?pt("/*"+F.value+"*/",L):"/*"+F.value+"*/"}function ti(F,L){var I,U,te,ye,Se,we,Be,He,St,kt,ii,fi,Vt,Nt;if(F.leadingComments&&F.leadingComments.length>0){if(ye=L,ue){for(te=F.leadingComments[0],L=[],He=te.extendedRange,St=te.range,ii=de.substring(He[0],St[0]),Nt=(ii.match(/\n/g)||[]).length,Nt>0?(L.push(st(`
`,Nt)),L.push(ut(et(te)))):(L.push(ii),L.push(et(te))),kt=St,I=1,U=F.leadingComments.length;I<U;I++)te=F.leadingComments[I],St=te.range,fi=de.substring(kt[1],St[0]),Nt=(fi.match(/\n/g)||[]).length,L.push(st(`
`,Nt)),L.push(ut(et(te))),kt=St;Vt=de.substring(St[1],He[1]),Nt=(Vt.match(/\n/g)||[]).length,L.push(st(`
`,Nt))}else for(te=F.leadingComments[0],L=[],Z&&F.type===e.Program&&F.body.length===0&&L.push(`
`),L.push(et(te)),ht(Ye(L).toString())||L.push(`
`),I=1,U=F.leadingComments.length;I<U;++I)te=F.leadingComments[I],Be=[et(te)],ht(Ye(Be).toString())||Be.push(`
`),L.push(ut(Be));L.push(ut(ye))}if(F.trailingComments)if(ue)te=F.trailingComments[0],He=te.extendedRange,St=te.range,ii=de.substring(He[0],St[0]),Nt=(ii.match(/\n/g)||[]).length,Nt>0?(L.push(st(`
`,Nt)),L.push(ut(et(te)))):(L.push(ii),L.push(et(te)));else for(Se=!ht(Ye(L).toString()),we=st(" ",vt(Ye([c,L,f]).toString())),I=0,U=F.trailingComments.length;I<U;++I)te=F.trailingComments[I],Se?(I===0?L=[L,f]:L=[L,we],L.push(et(te,we))):L=[L,ut(et(te))],I!==U-1&&!ht(Ye(L).toString())&&(L=[L,`
`]);return L}function jt(F,L,I){var U,te=0;for(U=F;U<L;U++)de[U]===`
`&&te++;for(U=1;U<te;U++)I.push(E)}function yt(F,L,I){return L<I?["(",F,")"]:F}function Je(F){var L,I,U;for(U=F.split(/\r\n|\n/),L=1,I=U.length;L<I;L++)U[L]=E+c+U[L];return U}function Ke(F,L){var I,U,te;return I=F[j.verbatim],typeof I=="string"?U=yt(Je(I),n.Sequence,L):(U=Je(I.content),te=I.precedence!=null?I.precedence:n.Sequence,U=yt(U,te,L)),Ye(U,F)}function ze(){}ze.prototype.maybeBlock=function(F,L){var I,U,te=this;return U=!j.comment||!F.leadingComments,F.type===e.BlockStatement&&U?[k,this.generateStatement(F,L)]:F.type===e.EmptyStatement&&U?";":(Ot(function(){I=[E,ut(te.generateStatement(F,L))]}),I)},ze.prototype.maybeBlockSuffix=function(F,L){var I=ht(Ye(L).toString());return F.type===e.BlockStatement&&(!j.comment||!F.leadingComments)&&!I?[L,k]:I?[L,c]:[L,E,c]};function We(F){return Ye(F.name,F)}function Pt(F,L){return F.async?"async"+(L?_t():k):""}function Gt(F){var L=F.generator&&!j.moz.starlessGenerator;return L?"*"+k:""}function ai(F){var L=F.value,I="";return L.async&&(I+=Pt(L,!F.computed)),L.generator&&(I+=Gt(L)?"*":""),I}ze.prototype.generatePattern=function(F,L,I){return F.type===e.Identifier?We(F):this.generateExpression(F,L,I)},ze.prototype.generateFunctionParams=function(F){var L,I,U,te;if(te=!1,F.type===e.ArrowFunctionExpression&&!F.rest&&(!F.defaults||F.defaults.length===0)&&F.params.length===1&&F.params[0].type===e.Identifier)U=[Pt(F,!0),We(F.params[0])];else{for(U=F.type===e.ArrowFunctionExpression?[Pt(F,!1)]:[],U.push("("),F.defaults&&(te=!0),L=0,I=F.params.length;L<I;++L)te&&F.defaults[L]?U.push(this.generateAssignment(F.params[L],F.defaults[L],"=",n.Assignment,Pe)):U.push(this.generatePattern(F.params[L],n.Assignment,Pe)),L+1<I&&U.push(","+k);F.rest&&(F.params.length&&U.push(","+k),U.push("..."),U.push(We(F.rest))),U.push(")")}return U},ze.prototype.generateFunctionBody=function(F){var L,I;return L=this.generateFunctionParams(F),F.type===e.ArrowFunctionExpression&&(L.push(k),L.push("=>")),F.expression?(L.push(k),I=this.generateExpression(F.body,n.Assignment,Pe),I.toString().charAt(0)==="{"&&(I=["(",I,")"]),L.push(I)):L.push(this.maybeBlock(F.body,Ft)),L},ze.prototype.generateIterationForStatement=function(F,L,I){var U=["for"+(L.await?_t()+"await":"")+k+"("],te=this;return Ot(function(){L.left.type===e.VariableDeclaration?Ot(function(){U.push(L.left.kind+_t()),U.push(te.generateStatement(L.left.declarations[0],xe))}):U.push(te.generateExpression(L.left,n.Call,Pe)),U=Le(U,F),U=[Le(U,te.generateExpression(L.right,n.Assignment,Pe)),")"]}),U.push(this.maybeBlock(L.body,I)),U},ze.prototype.generatePropertyKey=function(F,L){var I=[];return L&&I.push("["),I.push(this.generateExpression(F,n.Assignment,Pe)),L&&I.push("]"),I},ze.prototype.generateAssignment=function(F,L,I,U,te){return n.Assignment<U&&(te|=Ae),yt([this.generateExpression(F,n.Call,te),k+I+k,this.generateExpression(L,n.Assignment,te)],n.Assignment,U)},ze.prototype.semicolon=function(F){return!R&&F&$e?"":";"},ze.Statement={BlockStatement:function(F,L){var I,U,te=["{",E],ye=this;return Ot(function(){F.body.length===0&&ue&&(I=F.range,I[1]-I[0]>2&&(U=de.substring(I[0]+1,I[1]-1),U[0]===`
`&&(te=["{"]),te.push(U)));var Se,we,Be,He;for(He=qe,L&Fe&&(He|=Ue),Se=0,we=F.body.length;Se<we;++Se)ue&&(Se===0&&(F.body[0].leadingComments&&(I=F.body[0].leadingComments[0].extendedRange,U=de.substring(I[0],I[1]),U[0]===`
`&&(te=["{"])),F.body[0].leadingComments||jt(F.range[0],F.body[0].range[0],te)),Se>0&&!F.body[Se-1].trailingComments&&!F.body[Se].leadingComments&&jt(F.body[Se-1].range[1],F.body[Se].range[0],te)),Se===we-1&&(He|=$e),F.body[Se].leadingComments&&ue?Be=ye.generateStatement(F.body[Se],He):Be=ut(ye.generateStatement(F.body[Se],He)),te.push(Be),ht(Ye(Be).toString())||ue&&Se<we-1&&F.body[Se+1].leadingComments||te.push(E),ue&&Se===we-1&&(F.body[Se].trailingComments||jt(F.body[Se].range[1],F.range[1],te))}),te.push(ut("}")),te},BreakStatement:function(F,L){return F.label?"break "+F.label.name+this.semicolon(L):"break"+this.semicolon(L)},ContinueStatement:function(F,L){return F.label?"continue "+F.label.name+this.semicolon(L):"continue"+this.semicolon(L)},ClassBody:function(F,L){var I=["{",E],U=this;return Ot(function(te){var ye,Se;for(ye=0,Se=F.body.length;ye<Se;++ye)I.push(te),I.push(U.generateExpression(F.body[ye],n.Sequence,Pe)),ye+1<Se&&I.push(E)}),ht(Ye(I).toString())||I.push(E),I.push(c),I.push("}"),I},ClassDeclaration:function(F,L){var I,U;return I=["class"],F.id&&(I=Le(I,this.generateExpression(F.id,n.Sequence,Pe))),F.superClass&&(U=Le("extends",this.generateExpression(F.superClass,n.Unary,Pe)),I=Le(I,U)),I.push(k),I.push(this.generateStatement(F.body,at)),I},DirectiveStatement:function(F,L){return j.raw&&F.raw?F.raw+this.semicolon(L):Qt(F.directive)+this.semicolon(L)},DoWhileStatement:function(F,L){var I=Le("do",this.maybeBlock(F.body,qe));return I=this.maybeBlockSuffix(F.body,I),Le(I,["while"+k+"(",this.generateExpression(F.test,n.Sequence,Pe),")"+this.semicolon(L)])},CatchClause:function(F,L){var I,U=this;return Ot(function(){var te;F.param?(I=["catch"+k+"(",U.generateExpression(F.param,n.Sequence,Pe),")"],F.guard&&(te=U.generateExpression(F.guard,n.Sequence,Pe),I.splice(2,0," if ",te))):I=["catch"]}),I.push(this.maybeBlock(F.body,qe)),I},DebuggerStatement:function(F,L){return"debugger"+this.semicolon(L)},EmptyStatement:function(F,L){return";"},ExportDefaultDeclaration:function(F,L){var I=["export"],U;return U=L&$e?at:qe,I=Le(I,"default"),be(F.declaration)?I=Le(I,this.generateStatement(F.declaration,U)):I=Le(I,this.generateExpression(F.declaration,n.Assignment,Pe)+this.semicolon(L)),I},ExportNamedDeclaration:function(F,L){var I=["export"],U,te=this;return U=L&$e?at:qe,F.declaration?Le(I,this.generateStatement(F.declaration,U)):(F.specifiers&&(F.specifiers.length===0?I=Le(I,"{"+k+"}"):F.specifiers[0].type===e.ExportBatchSpecifier?I=Le(I,this.generateExpression(F.specifiers[0],n.Sequence,Pe)):(I=Le(I,"{"),Ot(function(ye){var Se,we;for(I.push(E),Se=0,we=F.specifiers.length;Se<we;++Se)I.push(ye),I.push(te.generateExpression(F.specifiers[Se],n.Sequence,Pe)),Se+1<we&&I.push(","+E)}),ht(Ye(I).toString())||I.push(E),I.push(c+"}")),F.source?I=Le(I,["from"+k,this.generateExpression(F.source,n.Sequence,Pe),this.semicolon(L)]):I.push(this.semicolon(L))),I)},ExportAllDeclaration:function(F,L){return["export"+k,"*"+k,"from"+k,this.generateExpression(F.source,n.Sequence,Pe),this.semicolon(L)]},ExpressionStatement:function(F,L){var I,U;function te(we){var Be;return we.slice(0,5)!=="class"?!1:(Be=we.charCodeAt(5),Be===123||u.code.isWhiteSpace(Be)||u.code.isLineTerminator(Be))}function ye(we){var Be;return we.slice(0,8)!=="function"?!1:(Be=we.charCodeAt(8),Be===40||u.code.isWhiteSpace(Be)||Be===42||u.code.isLineTerminator(Be))}function Se(we){var Be,He,St;if(we.slice(0,5)!=="async"||!u.code.isWhiteSpace(we.charCodeAt(5)))return!1;for(He=6,St=we.length;He<St&&u.code.isWhiteSpace(we.charCodeAt(He));++He);return He===St||we.slice(He,He+8)!=="function"?!1:(Be=we.charCodeAt(He+8),Be===40||u.code.isWhiteSpace(Be)||Be===42||u.code.isLineTerminator(Be))}return I=[this.generateExpression(F.expression,n.Sequence,Pe)],U=Ye(I).toString(),U.charCodeAt(0)===123||te(U)||ye(U)||Se(U)||he&&L&Ue&&F.expression.type===e.Literal&&typeof F.expression.value=="string"?I=["(",I,")"+this.semicolon(L)]:I.push(this.semicolon(L)),I},ImportDeclaration:function(F,L){var I,U,te=this;return F.specifiers.length===0?["import",k,this.generateExpression(F.source,n.Sequence,Pe),this.semicolon(L)]:(I=["import"],U=0,F.specifiers[U].type===e.ImportDefaultSpecifier&&(I=Le(I,[this.generateExpression(F.specifiers[U],n.Sequence,Pe)]),++U),F.specifiers[U]&&(U!==0&&I.push(","),F.specifiers[U].type===e.ImportNamespaceSpecifier?I=Le(I,[k,this.generateExpression(F.specifiers[U],n.Sequence,Pe)]):(I.push(k+"{"),F.specifiers.length-U===1?(I.push(k),I.push(this.generateExpression(F.specifiers[U],n.Sequence,Pe)),I.push(k+"}"+k)):(Ot(function(ye){var Se,we;for(I.push(E),Se=U,we=F.specifiers.length;Se<we;++Se)I.push(ye),I.push(te.generateExpression(F.specifiers[Se],n.Sequence,Pe)),Se+1<we&&I.push(","+E)}),ht(Ye(I).toString())||I.push(E),I.push(c+"}"+k)))),I=Le(I,["from"+k,this.generateExpression(F.source,n.Sequence,Pe),this.semicolon(L)]),I)},VariableDeclarator:function(F,L){var I=L&Ae?Pe:Ie;return F.init?[this.generateExpression(F.id,n.Assignment,I),k,"=",k,this.generateExpression(F.init,n.Assignment,I)]:this.generatePattern(F.id,n.Assignment,I)},VariableDeclaration:function(F,L){var I,U,te,ye,Se,we=this;I=[F.kind],Se=L&Ae?qe:xe;function Be(){for(ye=F.declarations[0],j.comment&&ye.leadingComments?(I.push(`
`),I.push(ut(we.generateStatement(ye,Se)))):(I.push(_t()),I.push(we.generateStatement(ye,Se))),U=1,te=F.declarations.length;U<te;++U)ye=F.declarations[U],j.comment&&ye.leadingComments?(I.push(","+E),I.push(ut(we.generateStatement(ye,Se)))):(I.push(","+k),I.push(we.generateStatement(ye,Se)))}return F.declarations.length>1?Ot(Be):Be(),I.push(this.semicolon(L)),I},ThrowStatement:function(F,L){return[Le("throw",this.generateExpression(F.argument,n.Sequence,Pe)),this.semicolon(L)]},TryStatement:function(F,L){var I,U,te,ye;if(I=["try",this.maybeBlock(F.block,qe)],I=this.maybeBlockSuffix(F.block,I),F.handlers)for(U=0,te=F.handlers.length;U<te;++U)I=Le(I,this.generateStatement(F.handlers[U],qe)),(F.finalizer||U+1!==te)&&(I=this.maybeBlockSuffix(F.handlers[U].body,I));else{for(ye=F.guardedHandlers||[],U=0,te=ye.length;U<te;++U)I=Le(I,this.generateStatement(ye[U],qe)),(F.finalizer||U+1!==te)&&(I=this.maybeBlockSuffix(ye[U].body,I));if(F.handler)if(Array.isArray(F.handler))for(U=0,te=F.handler.length;U<te;++U)I=Le(I,this.generateStatement(F.handler[U],qe)),(F.finalizer||U+1!==te)&&(I=this.maybeBlockSuffix(F.handler[U].body,I));else I=Le(I,this.generateStatement(F.handler,qe)),F.finalizer&&(I=this.maybeBlockSuffix(F.handler.body,I))}return F.finalizer&&(I=Le(I,["finally",this.maybeBlock(F.finalizer,qe)])),I},SwitchStatement:function(F,L){var I,U,te,ye,Se,we=this;if(Ot(function(){I=["switch"+k+"(",we.generateExpression(F.discriminant,n.Sequence,Pe),")"+k+"{"+E]}),F.cases)for(Se=qe,te=0,ye=F.cases.length;te<ye;++te)te===ye-1&&(Se|=$e),U=ut(this.generateStatement(F.cases[te],Se)),I.push(U),ht(Ye(U).toString())||I.push(E);return I.push(ut("}")),I},SwitchCase:function(F,L){var I,U,te,ye,Se,we=this;return Ot(function(){for(F.test?I=[Le("case",we.generateExpression(F.test,n.Sequence,Pe)),":"]:I=["default:"],te=0,ye=F.consequent.length,ye&&F.consequent[0].type===e.BlockStatement&&(U=we.maybeBlock(F.consequent[0],qe),I.push(U),te=1),te!==ye&&!ht(Ye(I).toString())&&I.push(E),Se=qe;te<ye;++te)te===ye-1&&L&$e&&(Se|=$e),U=ut(we.generateStatement(F.consequent[te],Se)),I.push(U),te+1!==ye&&!ht(Ye(U).toString())&&I.push(E)}),I},IfStatement:function(F,L){var I,U,te,ye=this;return Ot(function(){I=["if"+k+"(",ye.generateExpression(F.test,n.Sequence,Pe),")"]}),te=L&$e,U=qe,te&&(U|=$e),F.alternate?(I.push(this.maybeBlock(F.consequent,qe)),I=this.maybeBlockSuffix(F.consequent,I),F.alternate.type===e.IfStatement?I=Le(I,["else ",this.generateStatement(F.alternate,U)]):I=Le(I,Le("else",this.maybeBlock(F.alternate,U)))):I.push(this.maybeBlock(F.consequent,U)),I},ForStatement:function(F,L){var I,U=this;return Ot(function(){I=["for"+k+"("],F.init?F.init.type===e.VariableDeclaration?I.push(U.generateStatement(F.init,xe)):(I.push(U.generateExpression(F.init,n.Sequence,Ie)),I.push(";")):I.push(";"),F.test&&(I.push(k),I.push(U.generateExpression(F.test,n.Sequence,Pe))),I.push(";"),F.update&&(I.push(k),I.push(U.generateExpression(F.update,n.Sequence,Pe))),I.push(")")}),I.push(this.maybeBlock(F.body,L&$e?at:qe)),I},ForInStatement:function(F,L){return this.generateIterationForStatement("in",F,L&$e?at:qe)},ForOfStatement:function(F,L){return this.generateIterationForStatement("of",F,L&$e?at:qe)},LabeledStatement:function(F,L){return[F.label.name+":",this.maybeBlock(F.body,L&$e?at:qe)]},Program:function(F,L){var I,U,te,ye,Se;for(ye=F.body.length,I=[Z&&ye>0?`
`:""],Se=Et,te=0;te<ye;++te)!Z&&te===ye-1&&(Se|=$e),ue&&(te===0&&(F.body[0].leadingComments||jt(F.range[0],F.body[te].range[0],I)),te>0&&!F.body[te-1].trailingComments&&!F.body[te].leadingComments&&jt(F.body[te-1].range[1],F.body[te].range[0],I)),U=ut(this.generateStatement(F.body[te],Se)),I.push(U),te+1<ye&&!ht(Ye(U).toString())&&(ue&&F.body[te+1].leadingComments||I.push(E)),ue&&te===ye-1&&(F.body[te].trailingComments||jt(F.body[te].range[1],F.range[1],I));return I},FunctionDeclaration:function(F,L){return[Pt(F,!0),"function",Gt(F)||_t(),F.id?We(F.id):"",this.generateFunctionBody(F)]},ReturnStatement:function(F,L){return F.argument?[Le("return",this.generateExpression(F.argument,n.Sequence,Pe)),this.semicolon(L)]:["return"+this.semicolon(L)]},WhileStatement:function(F,L){var I,U=this;return Ot(function(){I=["while"+k+"(",U.generateExpression(F.test,n.Sequence,Pe),")"]}),I.push(this.maybeBlock(F.body,L&$e?at:qe)),I},WithStatement:function(F,L){var I,U=this;return Ot(function(){I=["with"+k+"(",U.generateExpression(F.object,n.Sequence,Pe),")"]}),I.push(this.maybeBlock(F.body,L&$e?at:qe)),I}},Tt(ze.prototype,ze.Statement),ze.Expression={SequenceExpression:function(F,L,I){var U,te,ye;for(n.Sequence<L&&(I|=Ae),U=[],te=0,ye=F.expressions.length;te<ye;++te)U.push(this.generateExpression(F.expressions[te],n.Assignment,I)),te+1<ye&&U.push(","+k);return yt(U,n.Sequence,L)},AssignmentExpression:function(F,L,I){return this.generateAssignment(F.left,F.right,F.operator,L,I)},ArrowFunctionExpression:function(F,L,I){return yt(this.generateFunctionBody(F),n.ArrowFunction,L)},ConditionalExpression:function(F,L,I){return n.Conditional<L&&(I|=Ae),yt([this.generateExpression(F.test,n.LogicalOR,I),k+"?"+k,this.generateExpression(F.consequent,n.Assignment,I),k+":"+k,this.generateExpression(F.alternate,n.Assignment,I)],n.Conditional,L)},LogicalExpression:function(F,L,I){return this.BinaryExpression(F,L,I)},BinaryExpression:function(F,L,I){var U,te,ye,Se,we,Be;return Se=a[F.operator],te=F.operator==="**"?n.Postfix:Se,ye=F.operator==="**"?Se:Se+1,Se<L&&(I|=Ae),we=this.generateExpression(F.left,te,I),Be=we.toString(),Be.charCodeAt(Be.length-1)===47&&u.code.isIdentifierPartES5(F.operator.charCodeAt(0))?U=[we,_t(),F.operator]:U=Le(we,F.operator),we=this.generateExpression(F.right,ye,I),F.operator==="/"&&we.toString().charAt(0)==="/"||F.operator.slice(-1)==="<"&&we.toString().slice(0,3)==="!--"?(U.push(_t()),U.push(we)):U=Le(U,we),F.operator==="in"&&!(I&Ae)?["(",U,")"]:yt(U,Se,L)},CallExpression:function(F,L,I){var U,te,ye;for(U=[this.generateExpression(F.callee,n.Call,Xe)],F.optional&&U.push("?."),U.push("("),te=0,ye=F.arguments.length;te<ye;++te)U.push(this.generateExpression(F.arguments[te],n.Assignment,Pe)),te+1<ye&&U.push(","+k);return U.push(")"),I&Ne?yt(U,n.Call,L):["(",U,")"]},ChainExpression:function(F,L,I){n.OptionalChaining<L&&(I|=Ne);var U=this.generateExpression(F.expression,n.OptionalChaining,I);return yt(U,n.OptionalChaining,L)},NewExpression:function(F,L,I){var U,te,ye,Se,we;if(te=F.arguments.length,we=I&Re&&!$&&te===0?Dt:nt,U=Le("new",this.generateExpression(F.callee,n.New,we)),!(I&Re)||$||te>0){for(U.push("("),ye=0,Se=te;ye<Se;++ye)U.push(this.generateExpression(F.arguments[ye],n.Assignment,Pe)),ye+1<Se&&U.push(","+k);U.push(")")}return yt(U,n.New,L)},MemberExpression:function(F,L,I){var U,te;return U=[this.generateExpression(F.object,n.Call,I&Ne?Xe:nt)],F.computed?(F.optional&&U.push("?."),U.push("["),U.push(this.generateExpression(F.property,n.Sequence,I&Ne?Pe:Dt)),U.push("]")):(!F.optional&&F.object.type===e.Literal&&typeof F.object.value=="number"&&(te=Ye(U).toString(),te.indexOf(".")<0&&!/[eExX]/.test(te)&&u.code.isDecimalDigit(te.charCodeAt(te.length-1))&&!(te.length>=2&&te.charCodeAt(0)===48)&&U.push(" ")),U.push(F.optional?"?.":"."),U.push(We(F.property))),yt(U,n.Member,L)},MetaProperty:function(F,L,I){var U;return U=[],U.push(typeof F.meta=="string"?F.meta:We(F.meta)),U.push("."),U.push(typeof F.property=="string"?F.property:We(F.property)),yt(U,n.Member,L)},UnaryExpression:function(F,L,I){var U,te,ye,Se,we;return te=this.generateExpression(F.argument,n.Unary,Pe),k===""?U=Le(F.operator,te):(U=[F.operator],F.operator.length>2?U=Le(U,te):(Se=Ye(U).toString(),we=Se.charCodeAt(Se.length-1),ye=te.toString().charCodeAt(0),((we===43||we===45)&&we===ye||u.code.isIdentifierPartES5(we)&&u.code.isIdentifierPartES5(ye))&&U.push(_t()),U.push(te))),yt(U,n.Unary,L)},YieldExpression:function(F,L,I){var U;return F.delegate?U="yield*":U="yield",F.argument&&(U=Le(U,this.generateExpression(F.argument,n.Yield,Pe))),yt(U,n.Yield,L)},AwaitExpression:function(F,L,I){var U=Le(F.all?"await*":"await",this.generateExpression(F.argument,n.Await,Pe));return yt(U,n.Await,L)},UpdateExpression:function(F,L,I){return F.prefix?yt([F.operator,this.generateExpression(F.argument,n.Unary,Pe)],n.Unary,L):yt([this.generateExpression(F.argument,n.Postfix,Pe),F.operator],n.Postfix,L)},FunctionExpression:function(F,L,I){var U=[Pt(F,!0),"function"];return F.id?(U.push(Gt(F)||_t()),U.push(We(F.id))):U.push(Gt(F)||k),U.push(this.generateFunctionBody(F)),U},ArrayPattern:function(F,L,I){return this.ArrayExpression(F,L,I,!0)},ArrayExpression:function(F,L,I,U){var te,ye,Se=this;return F.elements.length?(ye=U?!1:F.elements.length>1,te=["[",ye?E:""],Ot(function(we){var Be,He;for(Be=0,He=F.elements.length;Be<He;++Be)F.elements[Be]?(te.push(ye?we:""),te.push(Se.generateExpression(F.elements[Be],n.Assignment,Pe))):(ye&&te.push(we),Be+1===He&&te.push(",")),Be+1<He&&te.push(","+(ye?E:k))}),ye&&!ht(Ye(te).toString())&&te.push(E),te.push(ye?c:""),te.push("]"),te):"[]"},RestElement:function(F,L,I){return"..."+this.generatePattern(F.argument)},ClassExpression:function(F,L,I){var U,te;return U=["class"],F.id&&(U=Le(U,this.generateExpression(F.id,n.Sequence,Pe))),F.superClass&&(te=Le("extends",this.generateExpression(F.superClass,n.Unary,Pe)),U=Le(U,te)),U.push(k),U.push(this.generateStatement(F.body,at)),U},MethodDefinition:function(F,L,I){var U,te;return F.static?U=["static"+k]:U=[],F.kind==="get"||F.kind==="set"?te=[Le(F.kind,this.generatePropertyKey(F.key,F.computed)),this.generateFunctionBody(F.value)]:te=[ai(F),this.generatePropertyKey(F.key,F.computed),this.generateFunctionBody(F.value)],Le(U,te)},Property:function(F,L,I){return F.kind==="get"||F.kind==="set"?[F.kind,_t(),this.generatePropertyKey(F.key,F.computed),this.generateFunctionBody(F.value)]:F.shorthand?F.value.type==="AssignmentPattern"?this.AssignmentPattern(F.value,n.Sequence,Pe):this.generatePropertyKey(F.key,F.computed):F.method?[ai(F),this.generatePropertyKey(F.key,F.computed),this.generateFunctionBody(F.value)]:[this.generatePropertyKey(F.key,F.computed),":"+k,this.generateExpression(F.value,n.Assignment,Pe)]},ObjectExpression:function(F,L,I){var U,te,ye,Se=this;return F.properties.length?(U=F.properties.length>1,Ot(function(){ye=Se.generateExpression(F.properties[0],n.Sequence,Pe)}),!U&&!Xt(Ye(ye).toString())?["{",k,ye,k,"}"]:(Ot(function(we){var Be,He;if(te=["{",E,we,ye],U)for(te.push(","+E),Be=1,He=F.properties.length;Be<He;++Be)te.push(we),te.push(Se.generateExpression(F.properties[Be],n.Sequence,Pe)),Be+1<He&&te.push(","+E)}),ht(Ye(te).toString())||te.push(E),te.push(c),te.push("}"),te)):"{}"},AssignmentPattern:function(F,L,I){return this.generateAssignment(F.left,F.right,"=",L,I)},ObjectPattern:function(F,L,I){var U,te,ye,Se,we,Be=this;if(!F.properties.length)return"{}";if(Se=!1,F.properties.length===1)we=F.properties[0],we.type===e.Property&&we.value.type!==e.Identifier&&(Se=!0);else for(te=0,ye=F.properties.length;te<ye;++te)if(we=F.properties[te],we.type===e.Property&&!we.shorthand){Se=!0;break}return U=["{",Se?E:""],Ot(function(He){var St,kt;for(St=0,kt=F.properties.length;St<kt;++St)U.push(Se?He:""),U.push(Be.generateExpression(F.properties[St],n.Sequence,Pe)),St+1<kt&&U.push(","+(Se?E:k))}),Se&&!ht(Ye(U).toString())&&U.push(E),U.push(Se?c:""),U.push("}"),U},ThisExpression:function(F,L,I){return"this"},Super:function(F,L,I){return"super"},Identifier:function(F,L,I){return We(F)},ImportDefaultSpecifier:function(F,L,I){return We(F.id||F.local)},ImportNamespaceSpecifier:function(F,L,I){var U=["*"],te=F.id||F.local;return te&&U.push(k+"as"+_t()+We(te)),U},ImportSpecifier:function(F,L,I){var U=F.imported,te=[U.name],ye=F.local;return ye&&ye.name!==U.name&&te.push(_t()+"as"+_t()+We(ye)),te},ExportSpecifier:function(F,L,I){var U=F.local,te=[U.name],ye=F.exported;return ye&&ye.name!==U.name&&te.push(_t()+"as"+_t()+We(ye)),te},Literal:function(F,L,I){var U;if(F.hasOwnProperty("raw")&&K&&j.raw)try{if(U=K(F.raw).body[0].expression,U.type===e.Literal&&U.value===F.value)return F.raw}catch{}return F.regex?"/"+F.regex.pattern+"/"+F.regex.flags:F.value===null?"null":typeof F.value=="string"?Bt(F.value):typeof F.value=="number"?Kt(F.value):typeof F.value=="boolean"?F.value?"true":"false":Ht(F.value)},GeneratorExpression:function(F,L,I){return this.ComprehensionExpression(F,L,I)},ComprehensionExpression:function(F,L,I){var U,te,ye,Se,we=this;return U=F.type===e.GeneratorExpression?["("]:["["],j.moz.comprehensionExpressionStartsWithAssignment&&(Se=this.generateExpression(F.body,n.Assignment,Pe),U.push(Se)),F.blocks&&Ot(function(){for(te=0,ye=F.blocks.length;te<ye;++te)Se=we.generateExpression(F.blocks[te],n.Sequence,Pe),te>0||j.moz.comprehensionExpressionStartsWithAssignment?U=Le(U,Se):U.push(Se)}),F.filter&&(U=Le(U,"if"+k),Se=this.generateExpression(F.filter,n.Sequence,Pe),U=Le(U,["(",Se,")"])),j.moz.comprehensionExpressionStartsWithAssignment||(Se=this.generateExpression(F.body,n.Assignment,Pe),U=Le(U,Se)),U.push(F.type===e.GeneratorExpression?")":"]"),U},ComprehensionBlock:function(F,L,I){var U;return F.left.type===e.VariableDeclaration?U=[F.left.kind,_t(),this.generateStatement(F.left.declarations[0],xe)]:U=this.generateExpression(F.left,n.Call,Pe),U=Le(U,F.of?"of":"in"),U=Le(U,this.generateExpression(F.right,n.Sequence,Pe)),["for"+k+"(",U,")"]},SpreadElement:function(F,L,I){return["...",this.generateExpression(F.argument,n.Assignment,Pe)]},TaggedTemplateExpression:function(F,L,I){var U=Xe;I&Ne||(U=nt);var te=[this.generateExpression(F.tag,n.Call,U),this.generateExpression(F.quasi,n.Primary,At)];return yt(te,n.TaggedTemplate,L)},TemplateElement:function(F,L,I){return F.value.raw},TemplateLiteral:function(F,L,I){var U,te,ye;for(U=["`"],te=0,ye=F.quasis.length;te<ye;++te)U.push(this.generateExpression(F.quasis[te],n.Primary,Pe)),te+1<ye&&(U.push("${"+k),U.push(this.generateExpression(F.expressions[te],n.Sequence,Pe)),U.push(k+"}"));return U.push("`"),U},ModuleSpecifier:function(F,L,I){return this.Literal(F,L,I)},ImportExpression:function(F,L,I){return yt(["import(",this.generateExpression(F.source,n.Assignment,Pe),")"],n.Call,L)}},Tt(ze.prototype,ze.Expression),ze.prototype.generateExpression=function(F,L,I){var U,te;return te=F.type||e.Property,j.verbatim&&F.hasOwnProperty(j.verbatim)?Ke(F,L):(U=this[te](F,L,I),j.comment&&(U=ti(F,U)),Ye(U,F))},ze.prototype.generateStatement=function(F,L){var I,U;return I=this[F.type](F,L),j.comment&&(I=ti(F,I)),U=Ye(I).toString(),F.type===e.Program&&!Z&&E===""&&U.charAt(U.length-1)===`
`&&(I=se?Ye(I).replaceRight(/\s+$/,""):U.replace(/\s+$/,"")),Ye(I,F)};function wt(F){var L;if(L=new ze,be(F))return L.generateStatement(F,qe);if(Oe(F))return L.generateExpression(F,n.Sequence,Pe);throw new Error("Unknown node type: "+F.type)}function si(F,L){var I=ot(),U,te;return L!=null?(typeof L.indent=="string"&&(I.format.indent.style=L.indent),typeof L.base=="number"&&(I.format.indent.base=L.base),L=dt(I,L),f=L.format.indent.style,typeof L.base=="string"?c=L.base:c=st(f,L.format.indent.base)):(L=I,f=L.format.indent.style,c=st(f,L.format.indent.base)),d=L.format.json,g=L.format.renumber,O=d?!1:L.format.hexadecimal,S=d?"double":L.format.quotes,b=L.format.escapeless,E=L.format.newline,k=L.format.space,L.format.compact&&(E=k=f=c=""),$=L.format.parentheses,R=L.format.semicolons,Z=L.format.safeConcatenation,he=L.directive,K=d?null:L.parse,se=L.sourceMap,de=L.sourceCode,ue=L.format.preserveBlankLines&&de!==null,j=L,se&&(s.browser?o=commonjsGlobal.sourceMap.SourceNode:o=requireSourceMap().SourceNode),U=wt(F),se?(te=U.toStringWithSourceMap({file:L.file,sourceRoot:L.sourceMapRoot}),L.sourceContent&&te.map.setSourceContent(L.sourceMap,L.sourceContent),L.sourceMapWithCode?te:te.map.toString()):(te={code:U.toString(),map:null},L.sourceMapWithCode?te:te.code)}me={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},ge=ot().format,s.version=require$$3.version,s.generate=si,s.attachComments=l.attachComments,s.Precedence=dt({},n),s.browser=!1,s.FORMAT_MINIFY=me,s.FORMAT_DEFAULTS=ge})()})(escodegen$1);const escodegen=getDefaultExportFromCjs(escodegen$1);var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(s,e){for(var n=65536,a=0;a<e.length;a+=2){if(n+=e[a],n>s)return!1;if(n+=e[a+1],n>=s)return!0}return!1}function isIdentifierStart(s,e){return s<65?s===36:s<91?!0:s<97?s===95:s<123?!0:s<=65535?s>=170&&nonASCIIidentifierStart.test(String.fromCharCode(s)):e===!1?!1:isInAstralSet(s,astralIdentifierStartCodes)}function isIdentifierChar(s,e){return s<48?s===36:s<58?!0:s<65?!1:s<91?!0:s<97?s===95:s<123?!0:s<=65535?s>=170&&nonASCIIidentifier.test(String.fromCharCode(s)):e===!1?!1:isInAstralSet(s,astralIdentifierStartCodes)||isInAstralSet(s,astralIdentifierCodes)}var TokenType=function s(e,n){n===void 0&&(n={}),this.label=e,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function binop(s,e){return new TokenType(s,{beforeExpr:!0,binop:e})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords$2={};function kw(s,e){return e===void 0&&(e={}),e.keyword=s,keywords$2[s]=new TokenType(s,e)}var types$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(s){return s===10||s===13||s===8232||s===8233}function nextLineBreak(s,e,n){n===void 0&&(n=s.length);for(var a=e;a<n;a++){var o=s.charCodeAt(a);if(isNewLine(o))return a<n-1&&o===13&&s.charCodeAt(a+1)===10?a+2:a+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||function(s,e){return hasOwnProperty.call(s,e)},isArray=Array.isArray||function(s){return toString.call(s)==="[object Array]"};function wordsRegexp(s){return new RegExp("^(?:"+s.replace(/ /g,"|")+")$")}function codePointToString(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function s(e,n){this.line=e,this.column=n};Position.prototype.offset=function s(e){return new Position(this.line,this.column+e)};var SourceLocation=function s(e,n,a){this.start=n,this.end=a,e.sourceFile!==null&&(this.source=e.sourceFile)};function getLineInfo(s,e){for(var n=1,a=0;;){var o=nextLineBreak(s,a,e);if(o<0)return new Position(n,e-a);++n,a=o}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(s){var e={};for(var n in defaultOptions)e[n]=s&&hasOwn(s,n)?s[n]:defaultOptions[n];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!s||s.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),isArray(e.onToken)){var a=e.onToken;e.onToken=function(o){return a.push(o)}}return isArray(e.onComment)&&(e.onComment=pushComment(e,e.onComment)),e}function pushComment(s,e){return function(n,a,o,l,u,c){var f={type:n?"Block":"Line",value:a,start:o,end:l};s.locations&&(f.loc=new SourceLocation(this,u,c)),s.ranges&&(f.range=[o,l]),e.push(f)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(s,e){return SCOPE_FUNCTION|(s?SCOPE_ASYNC:0)|(e?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser$1=function s(e,n,a){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=wordsRegexp(keywords$1[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var o="";e.allowReserved!==!0&&(o=reservedWords[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(o+=" await")),this.reservedWords=wordsRegexp(o);var l=(o?o+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(l),this.reservedWordsStrictBind=wordsRegexp(l+" "+reservedWords.strictBind),this.input=String(n),this.containsEsc=!1,a?(this.pos=a,this.lineStart=this.input.lastIndexOf(`
`,a-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser$1.prototype.parse=function s(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.canAwait.get=function(){for(var s=this.scopeStack.length-1;s>=0;s--){var e=this.scopeStack[s];if(e.inClassFieldInit||e.flags&SCOPE_CLASS_STATIC_BLOCK)return!1;if(e.flags&SCOPE_FUNCTION)return(e.flags&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var s=this.currentThisScope(),e=s.flags,n=s.inClassFieldInit;return(e&SCOPE_SUPER)>0||n||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){var s=this.currentThisScope(),e=s.flags,n=s.inClassFieldInit;return(e&(SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK))>0||n},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser$1.extend=function s(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var a=this,o=0;o<e.length;o++)a=e[o](a);return a},Parser$1.parse=function s(e,n){return new this(n,e).parse()},Parser$1.parseExpressionAt=function s(e,n,a){var o=new this(a,e,n);return o.nextToken(),o.parseExpression()},Parser$1.tokenizer=function s(e,n){return new this(n,e)},Object.defineProperties(Parser$1.prototype,prototypeAccessors);var pp$9=Parser$1.prototype,literal$1=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;pp$9.strictDirective=function(s){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=s,s+=skipWhiteSpace.exec(this.input)[0].length;var e=literal$1.exec(this.input.slice(s));if(!e)return!1;if((e[1]||e[2])==="use strict"){skipWhiteSpace.lastIndex=s+e[0].length;var n=skipWhiteSpace.exec(this.input),a=n.index+n[0].length,o=this.input.charAt(a);return o===";"||o==="}"||lineBreak.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(o)||o==="!"&&this.input.charAt(a+1)==="=")}s+=e[0].length,skipWhiteSpace.lastIndex=s,s+=skipWhiteSpace.exec(this.input)[0].length,this.input[s]===";"&&s++}},pp$9.eat=function(s){return this.type===s?(this.next(),!0):!1},pp$9.isContextual=function(s){return this.type===types$1.name&&this.value===s&&!this.containsEsc},pp$9.eatContextual=function(s){return this.isContextual(s)?(this.next(),!0):!1},pp$9.expectContextual=function(s){this.eatContextual(s)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1.eof||this.type===types$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(s,e){if(this.type===s)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},pp$9.expect=function(s){this.eat(s)||this.unexpected()},pp$9.unexpected=function(s){this.raise(s??this.start,"Unexpected token")};var DestructuringErrors=function s(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(s,e){if(s){s.trailingComma>-1&&this.raiseRecoverable(s.trailingComma,"Comma is not permitted after the rest element");var n=e?s.parenthesizedAssign:s.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(s,e){if(!s)return!1;var n=s.shorthandAssign,a=s.doubleProto;if(!e)return n>=0||a>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),a>=0&&this.raiseRecoverable(a,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(s){return s.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(s.expression):s.type==="Identifier"||s.type==="MemberExpression"};var pp$8=Parser$1.prototype;pp$8.parseTopLevel=function(s){var e=Object.create(null);for(s.body||(s.body=[]);this.type!==types$1.eof;){var n=this.parseStatement(null,!0,e);s.body.push(n)}if(this.inModule)for(var a=0,o=Object.keys(this.undefinedExports);a<o.length;a+=1){var l=o[a];this.raiseRecoverable(this.undefinedExports[l].start,"Export '"+l+"' is not defined")}return this.adaptDirectivePrologue(s.body),this.next(),s.sourceType=this.options.sourceType,this.finishNode(s,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(s){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),n=this.pos+e[0].length,a=this.input.charCodeAt(n);if(a===91||a===92)return!0;if(s)return!1;if(a===123||a>55295&&a<56320)return!0;if(isIdentifierStart(a,!0)){for(var o=n+1;isIdentifierChar(a=this.input.charCodeAt(o),!0);)++o;if(a===92||a>55295&&a<56320)return!0;var l=this.input.slice(n,o);if(!keywordRelationalOperator.test(l))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var s=skipWhiteSpace.exec(this.input),e=this.pos+s[0].length,n;return!lineBreak.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(isIdentifierChar(n=this.input.charCodeAt(e+8))||n>55295&&n<56320))},pp$8.parseStatement=function(s,e,n){var a=this.type,o=this.startNode(),l;switch(this.isLet(s)&&(a=types$1._var,l="let"),a){case types$1._break:case types$1._continue:return this.parseBreakContinueStatement(o,a.keyword);case types$1._debugger:return this.parseDebuggerStatement(o);case types$1._do:return this.parseDoStatement(o);case types$1._for:return this.parseForStatement(o);case types$1._function:return s&&(this.strict||s!=="if"&&s!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1,!s);case types$1._class:return s&&this.unexpected(),this.parseClass(o,!0);case types$1._if:return this.parseIfStatement(o);case types$1._return:return this.parseReturnStatement(o);case types$1._switch:return this.parseSwitchStatement(o);case types$1._throw:return this.parseThrowStatement(o);case types$1._try:return this.parseTryStatement(o);case types$1._const:case types$1._var:return l=l||this.value,s&&l!=="var"&&this.unexpected(),this.parseVarStatement(o,l);case types$1._while:return this.parseWhileStatement(o);case types$1._with:return this.parseWithStatement(o);case types$1.braceL:return this.parseBlock(!0,o);case types$1.semi:return this.parseEmptyStatement(o);case types$1._export:case types$1._import:if(this.options.ecmaVersion>10&&a===types$1._import){skipWhiteSpace.lastIndex=this.pos;var u=skipWhiteSpace.exec(this.input),c=this.pos+u[0].length,f=this.input.charCodeAt(c);if(f===40||f===46)return this.parseExpressionStatement(o,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),a===types$1._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction())return s&&this.unexpected(),this.next(),this.parseFunctionStatement(o,!0,!s);var d=this.value,g=this.parseExpression();return a===types$1.name&&g.type==="Identifier"&&this.eat(types$1.colon)?this.parseLabeledStatement(o,d,g,s):this.parseExpressionStatement(o,g)}},pp$8.parseBreakContinueStatement=function(s,e){var n=e==="break";this.next(),this.eat(types$1.semi)||this.insertSemicolon()?s.label=null:this.type!==types$1.name?this.unexpected():(s.label=this.parseIdent(),this.semicolon());for(var a=0;a<this.labels.length;++a){var o=this.labels[a];if((s.label==null||o.name===s.label.name)&&(o.kind!=null&&(n||o.kind==="loop")||s.label&&n))break}return a===this.labels.length&&this.raise(s.start,"Unsyntactic "+e),this.finishNode(s,n?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(s){return this.next(),this.semicolon(),this.finishNode(s,"DebuggerStatement")},pp$8.parseDoStatement=function(s){return this.next(),this.labels.push(loopLabel),s.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1._while),s.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1.semi):this.semicolon(),this.finishNode(s,"DoWhileStatement")},pp$8.parseForStatement=function(s){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1.parenL),this.type===types$1.semi)return e>-1&&this.unexpected(e),this.parseFor(s,null);var n=this.isLet();if(this.type===types$1._var||this.type===types$1._const||n){var a=this.startNode(),o=n?"let":this.value;return this.next(),this.parseVar(a,!0,o),this.finishNode(a,"VariableDeclaration"),(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&a.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1._in?e>-1&&this.unexpected(e):s.await=e>-1),this.parseForIn(s,a)):(e>-1&&this.unexpected(e),this.parseFor(s,a))}var l=this.isContextual("let"),u=!1,c=new DestructuringErrors,f=this.parseExpression(e>-1?"await":!0,c);return this.type===types$1._in||(u=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===types$1._in?e>-1&&this.unexpected(e):s.await=e>-1),l&&u&&this.raise(f.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(f,!1,c),this.checkLValPattern(f),this.parseForIn(s,f)):(this.checkExpressionErrors(c,!0),e>-1&&this.unexpected(e),this.parseFor(s,f))},pp$8.parseFunctionStatement=function(s,e,n){return this.next(),this.parseFunction(s,FUNC_STATEMENT|(n?0:FUNC_HANGING_STATEMENT),!1,e)},pp$8.parseIfStatement=function(s){return this.next(),s.test=this.parseParenExpression(),s.consequent=this.parseStatement("if"),s.alternate=this.eat(types$1._else)?this.parseStatement("if"):null,this.finishNode(s,"IfStatement")},pp$8.parseReturnStatement=function(s){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1.semi)||this.insertSemicolon()?s.argument=null:(s.argument=this.parseExpression(),this.semicolon()),this.finishNode(s,"ReturnStatement")},pp$8.parseSwitchStatement=function(s){this.next(),s.discriminant=this.parseParenExpression(),s.cases=[],this.expect(types$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var e,n=!1;this.type!==types$1.braceR;)if(this.type===types$1._case||this.type===types$1._default){var a=this.type===types$1._case;e&&this.finishNode(e,"SwitchCase"),s.cases.push(e=this.startNode()),e.consequent=[],this.next(),a?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(types$1.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(s,"SwitchStatement")},pp$8.parseThrowStatement=function(s){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),s.argument=this.parseExpression(),this.semicolon(),this.finishNode(s,"ThrowStatement")};var empty$1=[];pp$8.parseTryStatement=function(s){if(this.next(),s.block=this.parseBlock(),s.handler=null,this.type===types$1._catch){var e=this.startNode();if(this.next(),this.eat(types$1.parenL)){e.param=this.parseBindingAtom();var n=e.param.type==="Identifier";this.enterScope(n?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(e.param,n?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),s.handler=this.finishNode(e,"CatchClause")}return s.finalizer=this.eat(types$1._finally)?this.parseBlock():null,!s.handler&&!s.finalizer&&this.raise(s.start,"Missing catch or finally clause"),this.finishNode(s,"TryStatement")},pp$8.parseVarStatement=function(s,e){return this.next(),this.parseVar(s,!1,e),this.semicolon(),this.finishNode(s,"VariableDeclaration")},pp$8.parseWhileStatement=function(s){return this.next(),s.test=this.parseParenExpression(),this.labels.push(loopLabel),s.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(s,"WhileStatement")},pp$8.parseWithStatement=function(s){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),s.object=this.parseParenExpression(),s.body=this.parseStatement("with"),this.finishNode(s,"WithStatement")},pp$8.parseEmptyStatement=function(s){return this.next(),this.finishNode(s,"EmptyStatement")},pp$8.parseLabeledStatement=function(s,e,n,a){for(var o=0,l=this.labels;o<l.length;o+=1){var u=l[o];u.name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var c=this.type.isLoop?"loop":this.type===types$1._switch?"switch":null,f=this.labels.length-1;f>=0;f--){var d=this.labels[f];if(d.statementStart===s.start)d.statementStart=this.start,d.kind=c;else break}return this.labels.push({name:e,kind:c,statementStart:this.start}),s.body=this.parseStatement(a?a.indexOf("label")===-1?a+"label":a:"label"),this.labels.pop(),s.label=n,this.finishNode(s,"LabeledStatement")},pp$8.parseExpressionStatement=function(s,e){return s.expression=e,this.semicolon(),this.finishNode(s,"ExpressionStatement")},pp$8.parseBlock=function(s,e,n){for(s===void 0&&(s=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(types$1.braceL),s&&this.enterScope(0);this.type!==types$1.braceR;){var a=this.parseStatement(null);e.body.push(a)}return n&&(this.strict=!1),this.next(),s&&this.exitScope(),this.finishNode(e,"BlockStatement")},pp$8.parseFor=function(s,e){return s.init=e,this.expect(types$1.semi),s.test=this.type===types$1.semi?null:this.parseExpression(),this.expect(types$1.semi),s.update=this.type===types$1.parenR?null:this.parseExpression(),this.expect(types$1.parenR),s.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(s,"ForStatement")},pp$8.parseForIn=function(s,e){var n=this.type===types$1._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),s.left=e,s.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1.parenR),s.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(s,n?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(s,e,n){for(s.declarations=[],s.kind=n;;){var a=this.startNode();if(this.parseVarId(a,n),this.eat(types$1.eq)?a.init=this.parseMaybeAssign(e):n==="const"&&!(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():a.id.type!=="Identifier"&&!(e&&(this.type===types$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):a.init=null,s.declarations.push(this.finishNode(a,"VariableDeclarator")),!this.eat(types$1.comma))break}return s},pp$8.parseVarId=function(s,e){s.id=this.parseBindingAtom(),this.checkLValPattern(s.id,e==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(s,e,n,a,o){this.initFunction(s),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!a)&&(this.type===types$1.star&&e&FUNC_HANGING_STATEMENT&&this.unexpected(),s.generator=this.eat(types$1.star)),this.options.ecmaVersion>=8&&(s.async=!!a),e&FUNC_STATEMENT&&(s.id=e&FUNC_NULLABLE_ID&&this.type!==types$1.name?null:this.parseIdent(),s.id&&!(e&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(s.id,this.strict||s.generator||s.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var l=this.yieldPos,u=this.awaitPos,c=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(s.async,s.generator)),e&FUNC_STATEMENT||(s.id=this.type===types$1.name?this.parseIdent():null),this.parseFunctionParams(s),this.parseFunctionBody(s,n,!1,o),this.yieldPos=l,this.awaitPos=u,this.awaitIdentPos=c,this.finishNode(s,e&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(s){this.expect(types$1.parenL),s.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(s,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(s,e),this.parseClassSuper(s);var a=this.enterClassBody(),o=this.startNode(),l=!1;for(o.body=[],this.expect(types$1.braceL);this.type!==types$1.braceR;){var u=this.parseClassElement(s.superClass!==null);u&&(o.body.push(u),u.type==="MethodDefinition"&&u.kind==="constructor"?(l&&this.raise(u.start,"Duplicate constructor in the same class"),l=!0):u.key&&u.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(a,u)&&this.raiseRecoverable(u.key.start,"Identifier '#"+u.key.name+"' has already been declared"))}return this.strict=n,this.next(),s.body=this.finishNode(o,"ClassBody"),this.exitClassBody(),this.finishNode(s,e?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(s){if(this.eat(types$1.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),a="",o=!1,l=!1,u="method",c=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(types$1.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===types$1.star?c=!0:a="static"}if(n.static=c,!a&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1.star)&&!this.canInsertSemicolon()?l=!0:a="async"),!a&&(e>=9||!l)&&this.eat(types$1.star)&&(o=!0),!a&&!l&&!o){var f=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?u=f:a=f)}if(a?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=a,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===types$1.parenL||u!=="method"||o||l){var d=!n.static&&checkKeyName(n,"constructor"),g=d&&s;d&&u!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=d?"constructor":u,this.parseClassMethod(n,o,l,g)}else this.parseClassField(n);return n},pp$8.isClassElementNameStart=function(){return this.type===types$1.name||this.type===types$1.privateId||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(s){this.type===types$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),s.computed=!1,s.key=this.parsePrivateIdent()):this.parsePropertyName(s)},pp$8.parseClassMethod=function(s,e,n,a){var o=s.key;s.kind==="constructor"?(e&&this.raise(o.start,"Constructor can't be a generator"),n&&this.raise(o.start,"Constructor can't be an async method")):s.static&&checkKeyName(s,"prototype")&&this.raise(o.start,"Classes may not have a static property named prototype");var l=s.value=this.parseMethod(e,n,a);return s.kind==="get"&&l.params.length!==0&&this.raiseRecoverable(l.start,"getter should have no params"),s.kind==="set"&&l.params.length!==1&&this.raiseRecoverable(l.start,"setter should have exactly one param"),s.kind==="set"&&l.params[0].type==="RestElement"&&this.raiseRecoverable(l.params[0].start,"Setter cannot use rest params"),this.finishNode(s,"MethodDefinition")},pp$8.parseClassField=function(s){if(checkKeyName(s,"constructor")?this.raise(s.key.start,"Classes can't have a field named 'constructor'"):s.static&&checkKeyName(s,"prototype")&&this.raise(s.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,s.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else s.value=null;return this.semicolon(),this.finishNode(s,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(s){s.body=[];var e=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1.braceR;){var n=this.parseStatement(null);s.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(s,"StaticBlock")},pp$8.parseClassId=function(s,e){this.type===types$1.name?(s.id=this.parseIdent(),e&&this.checkLValSimple(s.id,BIND_LEXICAL,!1)):(e===!0&&this.unexpected(),s.id=null)},pp$8.parseClassSuper=function(s){s.superClass=this.eat(types$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var s={declared:Object.create(null),used:[]};return this.privateNameStack.push(s),s.declared},pp$8.exitClassBody=function(){for(var s=this.privateNameStack.pop(),e=s.declared,n=s.used,a=this.privateNameStack.length,o=a===0?null:this.privateNameStack[a-1],l=0;l<n.length;++l){var u=n[l];hasOwn(e,u.name)||(o?o.used.push(u):this.raiseRecoverable(u.start,"Private field '#"+u.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(s,e){var n=e.key.name,a=s[n],o="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(o=(e.static?"s":"i")+e.kind),a==="iget"&&o==="iset"||a==="iset"&&o==="iget"||a==="sget"&&o==="sset"||a==="sset"&&o==="sget"?(s[n]="true",!1):a?!0:(s[n]=o,!1)}function checkKeyName(s,e){var n=s.computed,a=s.key;return!n&&(a.type==="Identifier"&&a.name===e||a.type==="Literal"&&a.value===e)}pp$8.parseExport=function(s,e){if(this.next(),this.eat(types$1.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(s.exported=this.parseModuleExportName(),this.checkExport(e,s.exported,this.lastTokStart)):s.exported=null),this.expectContextual("from"),this.type!==types$1.string&&this.unexpected(),s.source=this.parseExprAtom(),this.semicolon(),this.finishNode(s,"ExportAllDeclaration");if(this.eat(types$1._default)){this.checkExport(e,"default",this.lastTokStart);var n;if(this.type===types$1._function||(n=this.isAsyncFunction())){var a=this.startNode();this.next(),n&&this.next(),s.declaration=this.parseFunction(a,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,n)}else if(this.type===types$1._class){var o=this.startNode();s.declaration=this.parseClass(o,"nullableID")}else s.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(s,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())s.declaration=this.parseStatement(null),s.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,s.declaration.declarations):this.checkExport(e,s.declaration.id,s.declaration.id.start),s.specifiers=[],s.source=null;else{if(s.declaration=null,s.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==types$1.string&&this.unexpected(),s.source=this.parseExprAtom();else{for(var l=0,u=s.specifiers;l<u.length;l+=1){var c=u[l];this.checkUnreserved(c.local),this.checkLocalExport(c.local),c.local.type==="Literal"&&this.raise(c.local.start,"A string literal cannot be used as an exported binding without `from`.")}s.source=null}this.semicolon()}return this.finishNode(s,"ExportNamedDeclaration")},pp$8.checkExport=function(s,e,n){s&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),hasOwn(s,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),s[e]=!0)},pp$8.checkPatternExport=function(s,e){var n=e.type;if(n==="Identifier")this.checkExport(s,e,e.start);else if(n==="ObjectPattern")for(var a=0,o=e.properties;a<o.length;a+=1){var l=o[a];this.checkPatternExport(s,l)}else if(n==="ArrayPattern")for(var u=0,c=e.elements;u<c.length;u+=1){var f=c[u];f&&this.checkPatternExport(s,f)}else n==="Property"?this.checkPatternExport(s,e.value):n==="AssignmentPattern"?this.checkPatternExport(s,e.left):n==="RestElement"?this.checkPatternExport(s,e.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(s,e.expression)},pp$8.checkVariableExport=function(s,e){if(s)for(var n=0,a=e;n<a.length;n+=1){var o=a[n];this.checkPatternExport(s,o.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifiers=function(s){var e=[],n=!0;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(n)n=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;var a=this.startNode();a.local=this.parseModuleExportName(),a.exported=this.eatContextual("as")?this.parseModuleExportName():a.local,this.checkExport(s,a.exported,a.exported.start),e.push(this.finishNode(a,"ExportSpecifier"))}return e},pp$8.parseImport=function(s){return this.next(),this.type===types$1.string?(s.specifiers=empty$1,s.source=this.parseExprAtom()):(s.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),s.source=this.type===types$1.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(s,"ImportDeclaration")},pp$8.parseImportSpecifiers=function(){var s=[],e=!0;if(this.type===types$1.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,BIND_LEXICAL),s.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(types$1.comma))return s}if(this.type===types$1.star){var a=this.startNode();return this.next(),this.expectContextual("as"),a.local=this.parseIdent(),this.checkLValSimple(a.local,BIND_LEXICAL),s.push(this.finishNode(a,"ImportNamespaceSpecifier")),s}for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(e)e=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;var o=this.startNode();o.imported=this.parseModuleExportName(),this.eatContextual("as")?o.local=this.parseIdent():(this.checkUnreserved(o.imported),o.local=o.imported),this.checkLValSimple(o.local,BIND_LEXICAL),s.push(this.finishNode(o,"ImportSpecifier"))}return s},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1.string){var s=this.parseLiteral(this.value);return loneSurrogate.test(s.value)&&this.raise(s.start,"An export name cannot include a lone surrogate."),s}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(s){for(var e=0;e<s.length&&this.isDirectiveCandidate(s[e]);++e)s[e].directive=s[e].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(s){return this.options.ecmaVersion>=5&&s.type==="ExpressionStatement"&&s.expression.type==="Literal"&&typeof s.expression.value=="string"&&(this.input[s.start]==='"'||this.input[s.start]==="'")};var pp$7=Parser$1.prototype;pp$7.toAssignable=function(s,e,n){if(this.options.ecmaVersion>=6&&s)switch(s.type){case"Identifier":this.inAsync&&s.name==="await"&&this.raise(s.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":s.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var a=0,o=s.properties;a<o.length;a+=1){var l=o[a];this.toAssignable(l,e),l.type==="RestElement"&&(l.argument.type==="ArrayPattern"||l.argument.type==="ObjectPattern")&&this.raise(l.argument.start,"Unexpected token")}break;case"Property":s.kind!=="init"&&this.raise(s.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(s.value,e);break;case"ArrayExpression":s.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(s.elements,e);break;case"SpreadElement":s.type="RestElement",this.toAssignable(s.argument,e),s.argument.type==="AssignmentPattern"&&this.raise(s.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":s.operator!=="="&&this.raise(s.left.end,"Only '=' operator can be used for specifying default value."),s.type="AssignmentPattern",delete s.operator,this.toAssignable(s.left,e);break;case"ParenthesizedExpression":this.toAssignable(s.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(s.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(s.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return s},pp$7.toAssignableList=function(s,e){for(var n=s.length,a=0;a<n;a++){var o=s[a];o&&this.toAssignable(o,e)}if(n){var l=s[n-1];this.options.ecmaVersion===6&&e&&l&&l.type==="RestElement"&&l.argument.type!=="Identifier"&&this.unexpected(l.argument.start)}return s},pp$7.parseSpread=function(s){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,s),this.finishNode(e,"SpreadElement")},pp$7.parseRestBinding=function(){var s=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1.name&&this.unexpected(),s.argument=this.parseBindingAtom(),this.finishNode(s,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1.bracketL:var s=this.startNode();return this.next(),s.elements=this.parseBindingList(types$1.bracketR,!0,!0),this.finishNode(s,"ArrayPattern");case types$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(s,e,n){for(var a=[],o=!0;!this.eat(s);)if(o?o=!1:this.expect(types$1.comma),e&&this.type===types$1.comma)a.push(null);else{if(n&&this.afterTrailingComma(s))break;if(this.type===types$1.ellipsis){var l=this.parseRestBinding();this.parseBindingListItem(l),a.push(l),this.type===types$1.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(s);break}else{var u=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(u),a.push(u)}}return a},pp$7.parseBindingListItem=function(s){return s},pp$7.parseMaybeDefault=function(s,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1.eq))return n;var a=this.startNodeAt(s,e);return a.left=n,a.right=this.parseMaybeAssign(),this.finishNode(a,"AssignmentPattern")},pp$7.checkLValSimple=function(s,e,n){e===void 0&&(e=BIND_NONE);var a=e!==BIND_NONE;switch(s.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(s.name)&&this.raiseRecoverable(s.start,(a?"Binding ":"Assigning to ")+s.name+" in strict mode"),a&&(e===BIND_LEXICAL&&s.name==="let"&&this.raiseRecoverable(s.start,"let is disallowed as a lexically bound name"),n&&(hasOwn(n,s.name)&&this.raiseRecoverable(s.start,"Argument name clash"),n[s.name]=!0),e!==BIND_OUTSIDE&&this.declareName(s.name,e,s.start));break;case"ChainExpression":this.raiseRecoverable(s.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":a&&this.raiseRecoverable(s.start,"Binding member expression");break;case"ParenthesizedExpression":return a&&this.raiseRecoverable(s.start,"Binding parenthesized expression"),this.checkLValSimple(s.expression,e,n);default:this.raise(s.start,(a?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(s,e,n){switch(e===void 0&&(e=BIND_NONE),s.type){case"ObjectPattern":for(var a=0,o=s.properties;a<o.length;a+=1){var l=o[a];this.checkLValInnerPattern(l,e,n)}break;case"ArrayPattern":for(var u=0,c=s.elements;u<c.length;u+=1){var f=c[u];f&&this.checkLValInnerPattern(f,e,n)}break;default:this.checkLValSimple(s,e,n)}},pp$7.checkLValInnerPattern=function(s,e,n){switch(e===void 0&&(e=BIND_NONE),s.type){case"Property":this.checkLValInnerPattern(s.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(s.left,e,n);break;case"RestElement":this.checkLValPattern(s.argument,e,n);break;default:this.checkLValPattern(s,e,n)}};var TokContext=function s(e,n,a,o,l){this.token=e,this.isExpr=!!n,this.preserveSpace=!!a,this.override=o,this.generator=!!l},types$2={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(s){return s.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser$1.prototype;pp$6.initialContext=function(){return[types$2.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(s){var e=this.curContext();return e===types$2.f_expr||e===types$2.f_stat?!0:s===types$1.colon&&(e===types$2.b_stat||e===types$2.b_expr)?!e.isExpr:s===types$1._return||s===types$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):s===types$1._else||s===types$1.semi||s===types$1.eof||s===types$1.parenR||s===types$1.arrow?!0:s===types$1.braceL?e===types$2.b_stat:s===types$1._var||s===types$1._const||s===types$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var s=this.context.length-1;s>=1;s--){var e=this.context[s];if(e.token==="function")return e.generator}return!1},pp$6.updateContext=function(s){var e,n=this.type;n.keyword&&s===types$1.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,s):this.exprAllowed=n.beforeExpr},pp$6.overrideContext=function(s){this.curContext()!==s&&(this.context[this.context.length-1]=s)},types$1.parenR.updateContext=types$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var s=this.context.pop();s===types$2.b_stat&&this.curContext().token==="function"&&(s=this.context.pop()),this.exprAllowed=!s.isExpr},types$1.braceL.updateContext=function(s){this.context.push(this.braceIsBlock(s)?types$2.b_stat:types$2.b_expr),this.exprAllowed=!0},types$1.dollarBraceL.updateContext=function(){this.context.push(types$2.b_tmpl),this.exprAllowed=!0},types$1.parenL.updateContext=function(s){var e=s===types$1._if||s===types$1._for||s===types$1._with||s===types$1._while;this.context.push(e?types$2.p_stat:types$2.p_expr),this.exprAllowed=!0},types$1.incDec.updateContext=function(){},types$1._function.updateContext=types$1._class.updateContext=function(s){s.beforeExpr&&s!==types$1._else&&!(s===types$1.semi&&this.curContext()!==types$2.p_stat)&&!(s===types$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((s===types$1.colon||s===types$1.braceL)&&this.curContext()===types$2.b_stat)?this.context.push(types$2.f_expr):this.context.push(types$2.f_stat),this.exprAllowed=!1},types$1.backQuote.updateContext=function(){this.curContext()===types$2.q_tmpl?this.context.pop():this.context.push(types$2.q_tmpl),this.exprAllowed=!1},types$1.star.updateContext=function(s){if(s===types$1._function){var e=this.context.length-1;this.context[e]===types$2.f_expr?this.context[e]=types$2.f_expr_gen:this.context[e]=types$2.f_gen}this.exprAllowed=!0},types$1.name.updateContext=function(s){var e=!1;this.options.ecmaVersion>=6&&s!==types$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var pp$5=Parser$1.prototype;pp$5.checkPropClash=function(s,e,n){if(!(this.options.ecmaVersion>=9&&s.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(s.computed||s.method||s.shorthand))){var a=s.key,o;switch(a.type){case"Identifier":o=a.name;break;case"Literal":o=String(a.value);break;default:return}var l=s.kind;if(this.options.ecmaVersion>=6){o==="__proto__"&&l==="init"&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=a.start):this.raiseRecoverable(a.start,"Redefinition of __proto__ property")),e.proto=!0);return}o="$"+o;var u=e[o];if(u){var c;l==="init"?c=this.strict&&u.init||u.get||u.set:c=u.init||u[l],c&&this.raiseRecoverable(a.start,"Redefinition of property")}else u=e[o]={init:!1,get:!1,set:!1};u[l]=!0}},pp$5.parseExpression=function(s,e){var n=this.start,a=this.startLoc,o=this.parseMaybeAssign(s,e);if(this.type===types$1.comma){var l=this.startNodeAt(n,a);for(l.expressions=[o];this.eat(types$1.comma);)l.expressions.push(this.parseMaybeAssign(s,e));return this.finishNode(l,"SequenceExpression")}return o},pp$5.parseMaybeAssign=function(s,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(s);this.exprAllowed=!1}var a=!1,o=-1,l=-1,u=-1;e?(o=e.parenthesizedAssign,l=e.trailingComma,u=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new DestructuringErrors,a=!0);var c=this.start,f=this.startLoc;(this.type===types$1.parenL||this.type===types$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=s==="await");var d=this.parseMaybeConditional(s,e);if(n&&(d=n.call(this,d,c,f)),this.type.isAssign){var g=this.startNodeAt(c,f);return g.operator=this.value,this.type===types$1.eq&&(d=this.toAssignable(d,!1,e)),a||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=d.start&&(e.shorthandAssign=-1),this.type===types$1.eq?this.checkLValPattern(d):this.checkLValSimple(d),g.left=d,this.next(),g.right=this.parseMaybeAssign(s),u>-1&&(e.doubleProto=u),this.finishNode(g,"AssignmentExpression")}else a&&this.checkExpressionErrors(e,!0);return o>-1&&(e.parenthesizedAssign=o),l>-1&&(e.trailingComma=l),d},pp$5.parseMaybeConditional=function(s,e){var n=this.start,a=this.startLoc,o=this.parseExprOps(s,e);if(this.checkExpressionErrors(e))return o;if(this.eat(types$1.question)){var l=this.startNodeAt(n,a);return l.test=o,l.consequent=this.parseMaybeAssign(),this.expect(types$1.colon),l.alternate=this.parseMaybeAssign(s),this.finishNode(l,"ConditionalExpression")}return o},pp$5.parseExprOps=function(s,e){var n=this.start,a=this.startLoc,o=this.parseMaybeUnary(e,!1,!1,s);return this.checkExpressionErrors(e)||o.start===n&&o.type==="ArrowFunctionExpression"?o:this.parseExprOp(o,n,a,-1,s)},pp$5.parseExprOp=function(s,e,n,a,o){var l=this.type.binop;if(l!=null&&(!o||this.type!==types$1._in)&&l>a){var u=this.type===types$1.logicalOR||this.type===types$1.logicalAND,c=this.type===types$1.coalesce;c&&(l=types$1.logicalAND.binop);var f=this.value;this.next();var d=this.start,g=this.startLoc,O=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,o),d,g,l,o),S=this.buildBinary(e,n,s,O,f,u||c);return(u&&this.type===types$1.coalesce||c&&(this.type===types$1.logicalOR||this.type===types$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(S,e,n,a,o)}return s},pp$5.buildBinary=function(s,e,n,a,o,l){a.type==="PrivateIdentifier"&&this.raise(a.start,"Private identifier can only be left side of binary expression");var u=this.startNodeAt(s,e);return u.left=n,u.operator=o,u.right=a,this.finishNode(u,l?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(s,e,n,a){var o=this.start,l=this.startLoc,u;if(this.isContextual("await")&&this.canAwait)u=this.parseAwait(a),e=!0;else if(this.type.prefix){var c=this.startNode(),f=this.type===types$1.incDec;c.operator=this.value,c.prefix=!0,this.next(),c.argument=this.parseMaybeUnary(null,!0,f,a),this.checkExpressionErrors(s,!0),f?this.checkLValSimple(c.argument):this.strict&&c.operator==="delete"&&c.argument.type==="Identifier"?this.raiseRecoverable(c.start,"Deleting local variable in strict mode"):c.operator==="delete"&&isPrivateFieldAccess(c.argument)?this.raiseRecoverable(c.start,"Private fields can not be deleted"):e=!0,u=this.finishNode(c,f?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===types$1.privateId)(a||this.privateNameStack.length===0)&&this.unexpected(),u=this.parsePrivateIdent(),this.type!==types$1._in&&this.unexpected();else{if(u=this.parseExprSubscripts(s,a),this.checkExpressionErrors(s))return u;for(;this.type.postfix&&!this.canInsertSemicolon();){var d=this.startNodeAt(o,l);d.operator=this.value,d.prefix=!1,d.argument=u,this.checkLValSimple(u),this.next(),u=this.finishNode(d,"UpdateExpression")}}if(!n&&this.eat(types$1.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(o,l,u,this.parseMaybeUnary(null,!1,!1,a),"**",!1);else return u};function isPrivateFieldAccess(s){return s.type==="MemberExpression"&&s.property.type==="PrivateIdentifier"||s.type==="ChainExpression"&&isPrivateFieldAccess(s.expression)}pp$5.parseExprSubscripts=function(s,e){var n=this.start,a=this.startLoc,o=this.parseExprAtom(s,e);if(o.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return o;var l=this.parseSubscripts(o,n,a,!1,e);return s&&l.type==="MemberExpression"&&(s.parenthesizedAssign>=l.start&&(s.parenthesizedAssign=-1),s.parenthesizedBind>=l.start&&(s.parenthesizedBind=-1),s.trailingComma>=l.start&&(s.trailingComma=-1)),l},pp$5.parseSubscripts=function(s,e,n,a,o){for(var l=this.options.ecmaVersion>=8&&s.type==="Identifier"&&s.name==="async"&&this.lastTokEnd===s.end&&!this.canInsertSemicolon()&&s.end-s.start===5&&this.potentialArrowAt===s.start,u=!1;;){var c=this.parseSubscript(s,e,n,a,l,u,o);if(c.optional&&(u=!0),c===s||c.type==="ArrowFunctionExpression"){if(u){var f=this.startNodeAt(e,n);f.expression=c,c=this.finishNode(f,"ChainExpression")}return c}s=c}},pp$5.parseSubscript=function(s,e,n,a,o,l,u){var c=this.options.ecmaVersion>=11,f=c&&this.eat(types$1.questionDot);a&&f&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var d=this.eat(types$1.bracketL);if(d||f&&this.type!==types$1.parenL&&this.type!==types$1.backQuote||this.eat(types$1.dot)){var g=this.startNodeAt(e,n);g.object=s,d?(g.property=this.parseExpression(),this.expect(types$1.bracketR)):this.type===types$1.privateId&&s.type!=="Super"?g.property=this.parsePrivateIdent():g.property=this.parseIdent(this.options.allowReserved!=="never"),g.computed=!!d,c&&(g.optional=f),s=this.finishNode(g,"MemberExpression")}else if(!a&&this.eat(types$1.parenL)){var O=new DestructuringErrors,S=this.yieldPos,b=this.awaitPos,E=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var k=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1,O);if(o&&!f&&!this.canInsertSemicolon()&&this.eat(types$1.arrow))return this.checkPatternErrors(O,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=S,this.awaitPos=b,this.awaitIdentPos=E,this.parseArrowExpression(this.startNodeAt(e,n),k,!0,u);this.checkExpressionErrors(O,!0),this.yieldPos=S||this.yieldPos,this.awaitPos=b||this.awaitPos,this.awaitIdentPos=E||this.awaitIdentPos;var $=this.startNodeAt(e,n);$.callee=s,$.arguments=k,c&&($.optional=f),s=this.finishNode($,"CallExpression")}else if(this.type===types$1.backQuote){(f||l)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var R=this.startNodeAt(e,n);R.tag=s,R.quasi=this.parseTemplate({isTagged:!0}),s=this.finishNode(R,"TaggedTemplateExpression")}return s},pp$5.parseExprAtom=function(s,e){this.type===types$1.slash&&this.readRegexp();var n,a=this.potentialArrowAt===this.start;switch(this.type){case types$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===types$1.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==types$1.dot&&this.type!==types$1.bracketL&&this.type!==types$1.parenL&&this.unexpected(),this.finishNode(n,"Super");case types$1._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case types$1.name:var o=this.start,l=this.startLoc,u=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!u&&c.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1._function))return this.overrideContext(types$2.f_expr),this.parseFunction(this.startNodeAt(o,l),0,!1,!0,e);if(a&&!this.canInsertSemicolon()){if(this.eat(types$1.arrow))return this.parseArrowExpression(this.startNodeAt(o,l),[c],!1,e);if(this.options.ecmaVersion>=8&&c.name==="async"&&this.type===types$1.name&&!u&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return c=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(o,l),[c],!0,e)}return c;case types$1.regexp:var f=this.value;return n=this.parseLiteral(f.value),n.regex={pattern:f.pattern,flags:f.flags},n;case types$1.num:case types$1.string:return this.parseLiteral(this.value);case types$1._null:case types$1._true:case types$1._false:return n=this.startNode(),n.value=this.type===types$1._null?null:this.type===types$1._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case types$1.parenL:var d=this.start,g=this.parseParenAndDistinguishExpression(a,e);return s&&(s.parenthesizedAssign<0&&!this.isSimpleAssignTarget(g)&&(s.parenthesizedAssign=d),s.parenthesizedBind<0&&(s.parenthesizedBind=d)),g;case types$1.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(types$1.bracketR,!0,!0,s),this.finishNode(n,"ArrayExpression");case types$1.braceL:return this.overrideContext(types$2.b_expr),this.parseObj(!1,s);case types$1._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case types$1._class:return this.parseClass(this.startNode(),!1);case types$1._new:return this.parseNew();case types$1.backQuote:return this.parseTemplate();case types$1._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},pp$5.parseExprImport=function(){var s=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case types$1.parenL:return this.parseDynamicImport(s);case types$1.dot:return s.meta=e,this.parseImportMeta(s);default:this.unexpected()}},pp$5.parseDynamicImport=function(s){if(this.next(),s.source=this.parseMaybeAssign(),!this.eat(types$1.parenR)){var e=this.start;this.eat(types$1.comma)&&this.eat(types$1.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(s,"ImportExpression")},pp$5.parseImportMeta=function(s){this.next();var e=this.containsEsc;return s.property=this.parseIdent(!0),s.property.name!=="meta"&&this.raiseRecoverable(s.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(s.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(s.start,"Cannot use 'import.meta' outside a module"),this.finishNode(s,"MetaProperty")},pp$5.parseLiteral=function(s){var e=this.startNode();return e.value=s,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1.parenL);var s=this.parseExpression();return this.expect(types$1.parenR),s},pp$5.parseParenAndDistinguishExpression=function(s,e){var n=this.start,a=this.startLoc,o,l=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var u=this.start,c=this.startLoc,f=[],d=!0,g=!1,O=new DestructuringErrors,S=this.yieldPos,b=this.awaitPos,E;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1.parenR;)if(d?d=!1:this.expect(types$1.comma),l&&this.afterTrailingComma(types$1.parenR,!0)){g=!0;break}else if(this.type===types$1.ellipsis){E=this.start,f.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else f.push(this.parseMaybeAssign(!1,O,this.parseParenItem));var k=this.lastTokEnd,$=this.lastTokEndLoc;if(this.expect(types$1.parenR),s&&!this.canInsertSemicolon()&&this.eat(types$1.arrow))return this.checkPatternErrors(O,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=S,this.awaitPos=b,this.parseParenArrowList(n,a,f,e);(!f.length||g)&&this.unexpected(this.lastTokStart),E&&this.unexpected(E),this.checkExpressionErrors(O,!0),this.yieldPos=S||this.yieldPos,this.awaitPos=b||this.awaitPos,f.length>1?(o=this.startNodeAt(u,c),o.expressions=f,this.finishNodeAt(o,"SequenceExpression",k,$)):o=f[0]}else o=this.parseParenExpression();if(this.options.preserveParens){var R=this.startNodeAt(n,a);return R.expression=o,this.finishNode(R,"ParenthesizedExpression")}else return o},pp$5.parseParenItem=function(s){return s},pp$5.parseParenArrowList=function(s,e,n,a){return this.parseArrowExpression(this.startNodeAt(s,e),n,!1,a)};var empty$2=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var s=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(types$1.dot)){s.meta=e;var n=this.containsEsc;return s.property=this.parseIdent(!0),s.property.name!=="target"&&this.raiseRecoverable(s.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(s.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(s.start,"'new.target' can only be used in functions and class static block"),this.finishNode(s,"MetaProperty")}var a=this.start,o=this.startLoc,l=this.type===types$1._import;return s.callee=this.parseSubscripts(this.parseExprAtom(),a,o,!0,!1),l&&s.callee.type==="ImportExpression"&&this.raise(a,"Cannot use new with import()"),this.eat(types$1.parenL)?s.arguments=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1):s.arguments=empty$2,this.finishNode(s,"NewExpression")},pp$5.parseTemplateElement=function(s){var e=s.isTagged,n=this.startNode();return this.type===types$1.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===types$1.backQuote,this.finishNode(n,"TemplateElement")},pp$5.parseTemplate=function(s){s===void 0&&(s={});var e=s.isTagged;e===void 0&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var a=this.parseTemplateElement({isTagged:e});for(n.quasis=[a];!a.tail;)this.type===types$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(types$1.braceR),n.quasis.push(a=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},pp$5.isAsyncProp=function(s){return!s.computed&&s.key.type==="Identifier"&&s.key.name==="async"&&(this.type===types$1.name||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(s,e){var n=this.startNode(),a=!0,o={};for(n.properties=[],this.next();!this.eat(types$1.braceR);){if(a)a=!1;else if(this.expect(types$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1.braceR))break;var l=this.parseProperty(s,e);s||this.checkPropClash(l,o,e),n.properties.push(l)}return this.finishNode(n,s?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(s,e){var n=this.startNode(),a,o,l,u;if(this.options.ecmaVersion>=9&&this.eat(types$1.ellipsis))return s?(n.argument=this.parseIdent(!1),this.type===types$1.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,e),this.type===types$1.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(s||e)&&(l=this.start,u=this.startLoc),s||(a=this.eat(types$1.star)));var c=this.containsEsc;return this.parsePropertyName(n),!s&&!c&&this.options.ecmaVersion>=8&&!a&&this.isAsyncProp(n)?(o=!0,a=this.options.ecmaVersion>=9&&this.eat(types$1.star),this.parsePropertyName(n)):o=!1,this.parsePropertyValue(n,s,a,o,l,u,e,c),this.finishNode(n,"Property")},pp$5.parsePropertyValue=function(s,e,n,a,o,l,u,c){if((n||a)&&this.type===types$1.colon&&this.unexpected(),this.eat(types$1.colon))s.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,u),s.kind="init";else if(this.options.ecmaVersion>=6&&this.type===types$1.parenL)e&&this.unexpected(),s.kind="init",s.method=!0,s.value=this.parseMethod(n,a);else if(!e&&!c&&this.options.ecmaVersion>=5&&!s.computed&&s.key.type==="Identifier"&&(s.key.name==="get"||s.key.name==="set")&&this.type!==types$1.comma&&this.type!==types$1.braceR&&this.type!==types$1.eq){(n||a)&&this.unexpected(),s.kind=s.key.name,this.parsePropertyName(s),s.value=this.parseMethod(!1);var f=s.kind==="get"?0:1;if(s.value.params.length!==f){var d=s.value.start;s.kind==="get"?this.raiseRecoverable(d,"getter should have no params"):this.raiseRecoverable(d,"setter should have exactly one param")}else s.kind==="set"&&s.value.params[0].type==="RestElement"&&this.raiseRecoverable(s.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!s.computed&&s.key.type==="Identifier"?((n||a)&&this.unexpected(),this.checkUnreserved(s.key),s.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=o),s.kind="init",e?s.value=this.parseMaybeDefault(o,l,this.copyNode(s.key)):this.type===types$1.eq&&u?(u.shorthandAssign<0&&(u.shorthandAssign=this.start),s.value=this.parseMaybeDefault(o,l,this.copyNode(s.key))):s.value=this.copyNode(s.key),s.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(s){if(this.options.ecmaVersion>=6){if(this.eat(types$1.bracketL))return s.computed=!0,s.key=this.parseMaybeAssign(),this.expect(types$1.bracketR),s.key;s.computed=!1}return s.key=this.type===types$1.num||this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(s){s.id=null,this.options.ecmaVersion>=6&&(s.generator=s.expression=!1),this.options.ecmaVersion>=8&&(s.async=!1)},pp$5.parseMethod=function(s,e,n){var a=this.startNode(),o=this.yieldPos,l=this.awaitPos,u=this.awaitIdentPos;return this.initFunction(a),this.options.ecmaVersion>=6&&(a.generator=s),this.options.ecmaVersion>=8&&(a.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e,a.generator)|SCOPE_SUPER|(n?SCOPE_DIRECT_SUPER:0)),this.expect(types$1.parenL),a.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(a,!1,!0,!1),this.yieldPos=o,this.awaitPos=l,this.awaitIdentPos=u,this.finishNode(a,"FunctionExpression")},pp$5.parseArrowExpression=function(s,e,n,a){var o=this.yieldPos,l=this.awaitPos,u=this.awaitIdentPos;return this.enterScope(functionFlags(n,!1)|SCOPE_ARROW),this.initFunction(s),this.options.ecmaVersion>=8&&(s.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,s.params=this.toAssignableList(e,!0),this.parseFunctionBody(s,!0,!1,a),this.yieldPos=o,this.awaitPos=l,this.awaitIdentPos=u,this.finishNode(s,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(s,e,n,a){var o=e&&this.type!==types$1.braceL,l=this.strict,u=!1;if(o)s.body=this.parseMaybeAssign(a),s.expression=!0,this.checkParams(s,!1);else{var c=this.options.ecmaVersion>=7&&!this.isSimpleParamList(s.params);(!l||c)&&(u=this.strictDirective(this.end),u&&c&&this.raiseRecoverable(s.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var f=this.labels;this.labels=[],u&&(this.strict=!0),this.checkParams(s,!l&&!u&&!e&&!n&&this.isSimpleParamList(s.params)),this.strict&&s.id&&this.checkLValSimple(s.id,BIND_OUTSIDE),s.body=this.parseBlock(!1,void 0,u&&!l),s.expression=!1,this.adaptDirectivePrologue(s.body.body),this.labels=f}this.exitScope()},pp$5.isSimpleParamList=function(s){for(var e=0,n=s;e<n.length;e+=1){var a=n[e];if(a.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(s,e){for(var n=Object.create(null),a=0,o=s.params;a<o.length;a+=1){var l=o[a];this.checkLValInnerPattern(l,BIND_VAR,e?null:n)}},pp$5.parseExprList=function(s,e,n,a){for(var o=[],l=!0;!this.eat(s);){if(l)l=!1;else if(this.expect(types$1.comma),e&&this.afterTrailingComma(s))break;var u=void 0;n&&this.type===types$1.comma?u=null:this.type===types$1.ellipsis?(u=this.parseSpread(a),a&&this.type===types$1.comma&&a.trailingComma<0&&(a.trailingComma=this.start)):u=this.parseMaybeAssign(!1,a),o.push(u)}return o},pp$5.checkUnreserved=function(s){var e=s.start,n=s.end,a=s.name;if(this.inGenerator&&a==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&a==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&a==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(a==="arguments"||a==="await")&&this.raise(e,"Cannot use "+a+" in class static initialization block"),this.keywords.test(a)&&this.raise(e,"Unexpected keyword '"+a+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,n).indexOf("\\")!==-1)){var o=this.strict?this.reservedWordsStrict:this.reservedWords;o.test(a)&&(!this.inAsync&&a==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+a+"' is reserved"))}},pp$5.parseIdent=function(s){var e=this.startNode();return this.type===types$1.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!s),this.finishNode(e,"Identifier"),s||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e},pp$5.parsePrivateIdent=function(){var s=this.startNode();return this.type===types$1.privateId?s.name=this.value:this.unexpected(),this.next(),this.finishNode(s,"PrivateIdentifier"),this.privateNameStack.length===0?this.raise(s.start,"Private field '#"+s.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(s),s},pp$5.parseYield=function(s){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===types$1.semi||this.canInsertSemicolon()||this.type!==types$1.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(types$1.star),e.argument=this.parseMaybeAssign(s)),this.finishNode(e,"YieldExpression")},pp$5.parseAwait=function(s){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,s),this.finishNode(e,"AwaitExpression")};var pp$4=Parser$1.prototype;pp$4.raise=function(s,e){var n=getLineInfo(this.input,s);e+=" ("+n.line+":"+n.column+")";var a=new SyntaxError(e);throw a.pos=s,a.loc=n,a.raisedAt=this.pos,a},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser$1.prototype,Scope=function s(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};pp$3.enterScope=function(s){this.scopeStack.push(new Scope(s))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(s){return s.flags&SCOPE_FUNCTION||!this.inModule&&s.flags&SCOPE_TOP},pp$3.declareName=function(s,e,n){var a=!1;if(e===BIND_LEXICAL){var o=this.currentScope();a=o.lexical.indexOf(s)>-1||o.functions.indexOf(s)>-1||o.var.indexOf(s)>-1,o.lexical.push(s),this.inModule&&o.flags&SCOPE_TOP&&delete this.undefinedExports[s]}else if(e===BIND_SIMPLE_CATCH){var l=this.currentScope();l.lexical.push(s)}else if(e===BIND_FUNCTION){var u=this.currentScope();this.treatFunctionsAsVar?a=u.lexical.indexOf(s)>-1:a=u.lexical.indexOf(s)>-1||u.var.indexOf(s)>-1,u.functions.push(s)}else for(var c=this.scopeStack.length-1;c>=0;--c){var f=this.scopeStack[c];if(f.lexical.indexOf(s)>-1&&!(f.flags&SCOPE_SIMPLE_CATCH&&f.lexical[0]===s)||!this.treatFunctionsAsVarInScope(f)&&f.functions.indexOf(s)>-1){a=!0;break}if(f.var.push(s),this.inModule&&f.flags&SCOPE_TOP&&delete this.undefinedExports[s],f.flags&SCOPE_VAR)break}a&&this.raiseRecoverable(n,"Identifier '"+s+"' has already been declared")},pp$3.checkLocalExport=function(s){this.scopeStack[0].lexical.indexOf(s.name)===-1&&this.scopeStack[0].var.indexOf(s.name)===-1&&(this.undefinedExports[s.name]=s)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var s=this.scopeStack.length-1;;s--){var e=this.scopeStack[s];if(e.flags&SCOPE_VAR)return e}},pp$3.currentThisScope=function(){for(var s=this.scopeStack.length-1;;s--){var e=this.scopeStack[s];if(e.flags&SCOPE_VAR&&!(e.flags&SCOPE_ARROW))return e}};var Node=function s(e,n,a){this.type="",this.start=n,this.end=0,e.options.locations&&(this.loc=new SourceLocation(e,a)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[n,0])},pp$2=Parser$1.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(s,e){return new Node(this,s,e)};function finishNodeAt(s,e,n,a){return s.type=e,s.end=n,this.options.locations&&(s.loc.end=a),this.options.ranges&&(s.range[1]=n),s}pp$2.finishNode=function(s,e){return finishNodeAt.call(this,s,e,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(s,e,n,a){return finishNodeAt.call(this,s,e,n,a)},pp$2.copyNode=function(s){var e=new Node(this,s.start,this.startLoc);for(var n in s)e[n]=s[n];return e};var ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" Kawi Nag_Mundari Nagm",unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(s){var e=data[s]={binary:wordsRegexp(unicodeBinaryProperties[s]+" "+unicodeGeneralCategoryValues),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[s])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var i$1=0,list$1=[9,10,11,12,13,14];i$1<list$1.length;i$1+=1){var ecmaVersion=list$1[i$1];buildUnicodeData(ecmaVersion)}var pp$1=Parser$1.prototype,RegExpValidationState=function s(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":""),this.unicodeProperties=data[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};RegExpValidationState.prototype.reset=function s(e,n,a){var o=a.indexOf("u")!==-1;this.start=e|0,this.source=n+"",this.flags=a,this.switchU=o&&this.parser.options.ecmaVersion>=6,this.switchN=o&&this.parser.options.ecmaVersion>=9},RegExpValidationState.prototype.raise=function s(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},RegExpValidationState.prototype.at=function s(e,n){n===void 0&&(n=!1);var a=this.source,o=a.length;if(e>=o)return-1;var l=a.charCodeAt(e);if(!(n||this.switchU)||l<=55295||l>=57344||e+1>=o)return l;var u=a.charCodeAt(e+1);return u>=56320&&u<=57343?(l<<10)+u-56613888:l},RegExpValidationState.prototype.nextIndex=function s(e,n){n===void 0&&(n=!1);var a=this.source,o=a.length;if(e>=o)return o;var l=a.charCodeAt(e),u;return!(n||this.switchU)||l<=55295||l>=57344||e+1>=o||(u=a.charCodeAt(e+1))<56320||u>57343?e+1:e+2},RegExpValidationState.prototype.current=function s(e){return e===void 0&&(e=!1),this.at(this.pos,e)},RegExpValidationState.prototype.lookahead=function s(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)},RegExpValidationState.prototype.advance=function s(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)},RegExpValidationState.prototype.eat=function s(e,n){return n===void 0&&(n=!1),this.current(n)===e?(this.advance(n),!0):!1},pp$1.validateRegExpFlags=function(s){for(var e=s.validFlags,n=s.flags,a=0;a<n.length;a++){var o=n.charAt(a);e.indexOf(o)===-1&&this.raise(s.start,"Invalid regular expression flag"),n.indexOf(o,a+1)>-1&&this.raise(s.start,"Duplicate regular expression flag")}},pp$1.validateRegExpPattern=function(s){this.regexp_pattern(s),!s.switchN&&this.options.ecmaVersion>=9&&s.groupNames.length>0&&(s.switchN=!0,this.regexp_pattern(s))},pp$1.regexp_pattern=function(s){s.pos=0,s.lastIntValue=0,s.lastStringValue="",s.lastAssertionIsQuantifiable=!1,s.numCapturingParens=0,s.maxBackReference=0,s.groupNames.length=0,s.backReferenceNames.length=0,this.regexp_disjunction(s),s.pos!==s.source.length&&(s.eat(41)&&s.raise("Unmatched ')'"),(s.eat(93)||s.eat(125))&&s.raise("Lone quantifier brackets")),s.maxBackReference>s.numCapturingParens&&s.raise("Invalid escape");for(var e=0,n=s.backReferenceNames;e<n.length;e+=1){var a=n[e];s.groupNames.indexOf(a)===-1&&s.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(s){for(this.regexp_alternative(s);s.eat(124);)this.regexp_alternative(s);this.regexp_eatQuantifier(s,!0)&&s.raise("Nothing to repeat"),s.eat(123)&&s.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(s){for(;s.pos<s.source.length&&this.regexp_eatTerm(s););},pp$1.regexp_eatTerm=function(s){return this.regexp_eatAssertion(s)?(s.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(s)&&s.switchU&&s.raise("Invalid quantifier"),!0):(s.switchU?this.regexp_eatAtom(s):this.regexp_eatExtendedAtom(s))?(this.regexp_eatQuantifier(s),!0):!1},pp$1.regexp_eatAssertion=function(s){var e=s.pos;if(s.lastAssertionIsQuantifiable=!1,s.eat(94)||s.eat(36))return!0;if(s.eat(92)){if(s.eat(66)||s.eat(98))return!0;s.pos=e}if(s.eat(40)&&s.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=s.eat(60)),s.eat(61)||s.eat(33))return this.regexp_disjunction(s),s.eat(41)||s.raise("Unterminated group"),s.lastAssertionIsQuantifiable=!n,!0}return s.pos=e,!1},pp$1.regexp_eatQuantifier=function(s,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(s,e)?(s.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(s,e){return s.eat(42)||s.eat(43)||s.eat(63)||this.regexp_eatBracedQuantifier(s,e)},pp$1.regexp_eatBracedQuantifier=function(s,e){var n=s.pos;if(s.eat(123)){var a=0,o=-1;if(this.regexp_eatDecimalDigits(s)&&(a=s.lastIntValue,s.eat(44)&&this.regexp_eatDecimalDigits(s)&&(o=s.lastIntValue),s.eat(125)))return o!==-1&&o<a&&!e&&s.raise("numbers out of order in {} quantifier"),!0;s.switchU&&!e&&s.raise("Incomplete quantifier"),s.pos=n}return!1},pp$1.regexp_eatAtom=function(s){return this.regexp_eatPatternCharacters(s)||s.eat(46)||this.regexp_eatReverseSolidusAtomEscape(s)||this.regexp_eatCharacterClass(s)||this.regexp_eatUncapturingGroup(s)||this.regexp_eatCapturingGroup(s)},pp$1.regexp_eatReverseSolidusAtomEscape=function(s){var e=s.pos;if(s.eat(92)){if(this.regexp_eatAtomEscape(s))return!0;s.pos=e}return!1},pp$1.regexp_eatUncapturingGroup=function(s){var e=s.pos;if(s.eat(40)){if(s.eat(63)&&s.eat(58)){if(this.regexp_disjunction(s),s.eat(41))return!0;s.raise("Unterminated group")}s.pos=e}return!1},pp$1.regexp_eatCapturingGroup=function(s){if(s.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(s):s.current()===63&&s.raise("Invalid group"),this.regexp_disjunction(s),s.eat(41))return s.numCapturingParens+=1,!0;s.raise("Unterminated group")}return!1},pp$1.regexp_eatExtendedAtom=function(s){return s.eat(46)||this.regexp_eatReverseSolidusAtomEscape(s)||this.regexp_eatCharacterClass(s)||this.regexp_eatUncapturingGroup(s)||this.regexp_eatCapturingGroup(s)||this.regexp_eatInvalidBracedQuantifier(s)||this.regexp_eatExtendedPatternCharacter(s)},pp$1.regexp_eatInvalidBracedQuantifier=function(s){return this.regexp_eatBracedQuantifier(s,!0)&&s.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(s){var e=s.current();return isSyntaxCharacter(e)?(s.lastIntValue=e,s.advance(),!0):!1};function isSyntaxCharacter(s){return s===36||s>=40&&s<=43||s===46||s===63||s>=91&&s<=94||s>=123&&s<=125}pp$1.regexp_eatPatternCharacters=function(s){for(var e=s.pos,n=0;(n=s.current())!==-1&&!isSyntaxCharacter(n);)s.advance();return s.pos!==e},pp$1.regexp_eatExtendedPatternCharacter=function(s){var e=s.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(s.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(s){if(s.eat(63)){if(this.regexp_eatGroupName(s)){s.groupNames.indexOf(s.lastStringValue)!==-1&&s.raise("Duplicate capture group name"),s.groupNames.push(s.lastStringValue);return}s.raise("Invalid group")}},pp$1.regexp_eatGroupName=function(s){if(s.lastStringValue="",s.eat(60)){if(this.regexp_eatRegExpIdentifierName(s)&&s.eat(62))return!0;s.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(s){if(s.lastStringValue="",this.regexp_eatRegExpIdentifierStart(s)){for(s.lastStringValue+=codePointToString(s.lastIntValue);this.regexp_eatRegExpIdentifierPart(s);)s.lastStringValue+=codePointToString(s.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(s){var e=s.pos,n=this.options.ecmaVersion>=11,a=s.current(n);return s.advance(n),a===92&&this.regexp_eatRegExpUnicodeEscapeSequence(s,n)&&(a=s.lastIntValue),isRegExpIdentifierStart(a)?(s.lastIntValue=a,!0):(s.pos=e,!1)};function isRegExpIdentifierStart(s){return isIdentifierStart(s,!0)||s===36||s===95}pp$1.regexp_eatRegExpIdentifierPart=function(s){var e=s.pos,n=this.options.ecmaVersion>=11,a=s.current(n);return s.advance(n),a===92&&this.regexp_eatRegExpUnicodeEscapeSequence(s,n)&&(a=s.lastIntValue),isRegExpIdentifierPart(a)?(s.lastIntValue=a,!0):(s.pos=e,!1)};function isRegExpIdentifierPart(s){return isIdentifierChar(s,!0)||s===36||s===95||s===8204||s===8205}pp$1.regexp_eatAtomEscape=function(s){return this.regexp_eatBackReference(s)||this.regexp_eatCharacterClassEscape(s)||this.regexp_eatCharacterEscape(s)||s.switchN&&this.regexp_eatKGroupName(s)?!0:(s.switchU&&(s.current()===99&&s.raise("Invalid unicode escape"),s.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(s){var e=s.pos;if(this.regexp_eatDecimalEscape(s)){var n=s.lastIntValue;if(s.switchU)return n>s.maxBackReference&&(s.maxBackReference=n),!0;if(n<=s.numCapturingParens)return!0;s.pos=e}return!1},pp$1.regexp_eatKGroupName=function(s){if(s.eat(107)){if(this.regexp_eatGroupName(s))return s.backReferenceNames.push(s.lastStringValue),!0;s.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(s){return this.regexp_eatControlEscape(s)||this.regexp_eatCControlLetter(s)||this.regexp_eatZero(s)||this.regexp_eatHexEscapeSequence(s)||this.regexp_eatRegExpUnicodeEscapeSequence(s,!1)||!s.switchU&&this.regexp_eatLegacyOctalEscapeSequence(s)||this.regexp_eatIdentityEscape(s)},pp$1.regexp_eatCControlLetter=function(s){var e=s.pos;if(s.eat(99)){if(this.regexp_eatControlLetter(s))return!0;s.pos=e}return!1},pp$1.regexp_eatZero=function(s){return s.current()===48&&!isDecimalDigit(s.lookahead())?(s.lastIntValue=0,s.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(s){var e=s.current();return e===116?(s.lastIntValue=9,s.advance(),!0):e===110?(s.lastIntValue=10,s.advance(),!0):e===118?(s.lastIntValue=11,s.advance(),!0):e===102?(s.lastIntValue=12,s.advance(),!0):e===114?(s.lastIntValue=13,s.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(s){var e=s.current();return isControlLetter(e)?(s.lastIntValue=e%32,s.advance(),!0):!1};function isControlLetter(s){return s>=65&&s<=90||s>=97&&s<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(s,e){e===void 0&&(e=!1);var n=s.pos,a=e||s.switchU;if(s.eat(117)){if(this.regexp_eatFixedHexDigits(s,4)){var o=s.lastIntValue;if(a&&o>=55296&&o<=56319){var l=s.pos;if(s.eat(92)&&s.eat(117)&&this.regexp_eatFixedHexDigits(s,4)){var u=s.lastIntValue;if(u>=56320&&u<=57343)return s.lastIntValue=(o-55296)*1024+(u-56320)+65536,!0}s.pos=l,s.lastIntValue=o}return!0}if(a&&s.eat(123)&&this.regexp_eatHexDigits(s)&&s.eat(125)&&isValidUnicode(s.lastIntValue))return!0;a&&s.raise("Invalid unicode escape"),s.pos=n}return!1};function isValidUnicode(s){return s>=0&&s<=1114111}pp$1.regexp_eatIdentityEscape=function(s){if(s.switchU)return this.regexp_eatSyntaxCharacter(s)?!0:s.eat(47)?(s.lastIntValue=47,!0):!1;var e=s.current();return e!==99&&(!s.switchN||e!==107)?(s.lastIntValue=e,s.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(s){s.lastIntValue=0;var e=s.current();if(e>=49&&e<=57){do s.lastIntValue=10*s.lastIntValue+(e-48),s.advance();while((e=s.current())>=48&&e<=57);return!0}return!1},pp$1.regexp_eatCharacterClassEscape=function(s){var e=s.current();if(isCharacterClassEscape(e))return s.lastIntValue=-1,s.advance(),!0;if(s.switchU&&this.options.ecmaVersion>=9&&(e===80||e===112)){if(s.lastIntValue=-1,s.advance(),s.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(s)&&s.eat(125))return!0;s.raise("Invalid property name")}return!1};function isCharacterClassEscape(s){return s===100||s===68||s===115||s===83||s===119||s===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(s){var e=s.pos;if(this.regexp_eatUnicodePropertyName(s)&&s.eat(61)){var n=s.lastStringValue;if(this.regexp_eatUnicodePropertyValue(s)){var a=s.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(s,n,a),!0}}if(s.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(s)){var o=s.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(s,o),!0}return!1},pp$1.regexp_validateUnicodePropertyNameAndValue=function(s,e,n){hasOwn(s.unicodeProperties.nonBinary,e)||s.raise("Invalid property name"),s.unicodeProperties.nonBinary[e].test(n)||s.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(s,e){s.unicodeProperties.binary.test(e)||s.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(s){var e=0;for(s.lastStringValue="";isUnicodePropertyNameCharacter(e=s.current());)s.lastStringValue+=codePointToString(e),s.advance();return s.lastStringValue!==""};function isUnicodePropertyNameCharacter(s){return isControlLetter(s)||s===95}pp$1.regexp_eatUnicodePropertyValue=function(s){var e=0;for(s.lastStringValue="";isUnicodePropertyValueCharacter(e=s.current());)s.lastStringValue+=codePointToString(e),s.advance();return s.lastStringValue!==""};function isUnicodePropertyValueCharacter(s){return isUnicodePropertyNameCharacter(s)||isDecimalDigit(s)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(s){return this.regexp_eatUnicodePropertyValue(s)},pp$1.regexp_eatCharacterClass=function(s){if(s.eat(91)){if(s.eat(94),this.regexp_classRanges(s),s.eat(93))return!0;s.raise("Unterminated character class")}return!1},pp$1.regexp_classRanges=function(s){for(;this.regexp_eatClassAtom(s);){var e=s.lastIntValue;if(s.eat(45)&&this.regexp_eatClassAtom(s)){var n=s.lastIntValue;s.switchU&&(e===-1||n===-1)&&s.raise("Invalid character class"),e!==-1&&n!==-1&&e>n&&s.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(s){var e=s.pos;if(s.eat(92)){if(this.regexp_eatClassEscape(s))return!0;if(s.switchU){var n=s.current();(n===99||isOctalDigit(n))&&s.raise("Invalid class escape"),s.raise("Invalid escape")}s.pos=e}var a=s.current();return a!==93?(s.lastIntValue=a,s.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(s){var e=s.pos;if(s.eat(98))return s.lastIntValue=8,!0;if(s.switchU&&s.eat(45))return s.lastIntValue=45,!0;if(!s.switchU&&s.eat(99)){if(this.regexp_eatClassControlLetter(s))return!0;s.pos=e}return this.regexp_eatCharacterClassEscape(s)||this.regexp_eatCharacterEscape(s)},pp$1.regexp_eatClassControlLetter=function(s){var e=s.current();return isDecimalDigit(e)||e===95?(s.lastIntValue=e%32,s.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(s){var e=s.pos;if(s.eat(120)){if(this.regexp_eatFixedHexDigits(s,2))return!0;s.switchU&&s.raise("Invalid escape"),s.pos=e}return!1},pp$1.regexp_eatDecimalDigits=function(s){var e=s.pos,n=0;for(s.lastIntValue=0;isDecimalDigit(n=s.current());)s.lastIntValue=10*s.lastIntValue+(n-48),s.advance();return s.pos!==e};function isDecimalDigit(s){return s>=48&&s<=57}pp$1.regexp_eatHexDigits=function(s){var e=s.pos,n=0;for(s.lastIntValue=0;isHexDigit(n=s.current());)s.lastIntValue=16*s.lastIntValue+hexToInt(n),s.advance();return s.pos!==e};function isHexDigit(s){return s>=48&&s<=57||s>=65&&s<=70||s>=97&&s<=102}function hexToInt(s){return s>=65&&s<=70?10+(s-65):s>=97&&s<=102?10+(s-97):s-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(s){if(this.regexp_eatOctalDigit(s)){var e=s.lastIntValue;if(this.regexp_eatOctalDigit(s)){var n=s.lastIntValue;e<=3&&this.regexp_eatOctalDigit(s)?s.lastIntValue=e*64+n*8+s.lastIntValue:s.lastIntValue=e*8+n}else s.lastIntValue=e;return!0}return!1},pp$1.regexp_eatOctalDigit=function(s){var e=s.current();return isOctalDigit(e)?(s.lastIntValue=e-48,s.advance(),!0):(s.lastIntValue=0,!1)};function isOctalDigit(s){return s>=48&&s<=55}pp$1.regexp_eatFixedHexDigits=function(s,e){var n=s.pos;s.lastIntValue=0;for(var a=0;a<e;++a){var o=s.current();if(!isHexDigit(o))return s.pos=n,!1;s.lastIntValue=16*s.lastIntValue+hexToInt(o),s.advance()}return!0};var Token=function s(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new SourceLocation(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},pp=Parser$1.prototype;pp.next=function(s){!s&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var s=this;return{next:function(){var e=s.getToken();return{done:e.type===types$1.eof,value:e}}}}),pp.nextToken=function(){var s=this.curContext();if((!s||!s.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1.eof);if(s.override)return s.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(s){return isIdentifierStart(s,this.options.ecmaVersion>=6)||s===92?this.readWord():this.getTokenFromCode(s)},pp.fullCharCodeAtPos=function(){var s=this.input.charCodeAt(this.pos);if(s<=55295||s>=56320)return s;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?s:(s<<10)+e-56613888},pp.skipBlockComment=function(){var s=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var a=void 0,o=e;(a=nextLineBreak(this.input,o,this.pos))>-1;)++this.curLine,o=this.lineStart=a;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,s,this.curPosition())},pp.skipLineComment=function(s){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),a=this.input.charCodeAt(this.pos+=s);this.pos<this.input.length&&!isNewLine(a);)a=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+s,this.pos),e,this.pos,n,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var s=this.input.charCodeAt(this.pos);switch(s){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(s>8&&s<14||s>=5760&&nonASCIIwhitespace.test(String.fromCharCode(s)))++this.pos;else break e}}},pp.finishToken=function(s,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=s,this.value=e,this.updateContext(n)},pp.readToken_dot=function(){var s=this.input.charCodeAt(this.pos+1);if(s>=48&&s<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&s===46&&e===46?(this.pos+=3,this.finishToken(types$1.ellipsis)):(++this.pos,this.finishToken(types$1.dot))},pp.readToken_slash=function(){var s=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):s===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.slash,1)},pp.readToken_mult_modulo_exp=function(s){var e=this.input.charCodeAt(this.pos+1),n=1,a=s===42?types$1.star:types$1.modulo;return this.options.ecmaVersion>=7&&s===42&&e===42&&(++n,a=types$1.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(types$1.assign,n+1):this.finishOp(a,n)},pp.readToken_pipe_amp=function(s){var e=this.input.charCodeAt(this.pos+1);if(e===s){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(types$1.assign,3)}return this.finishOp(s===124?types$1.logicalOR:types$1.logicalAND,2)}return e===61?this.finishOp(types$1.assign,2):this.finishOp(s===124?types$1.bitwiseOR:types$1.bitwiseAND,1)},pp.readToken_caret=function(){var s=this.input.charCodeAt(this.pos+1);return s===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.bitwiseXOR,1)},pp.readToken_plus_min=function(s){var e=this.input.charCodeAt(this.pos+1);return e===s?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1.incDec,2):e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.plusMin,1)},pp.readToken_lt_gt=function(s){var e=this.input.charCodeAt(this.pos+1),n=1;return e===s?(n=s===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(types$1.assign,n+1):this.finishOp(types$1.bitShift,n)):e===33&&s===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(n=2),this.finishOp(types$1.relational,n))},pp.readToken_eq_excl=function(s){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(types$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):s===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1.arrow)):this.finishOp(s===61?types$1.eq:types$1.prefix,1)},pp.readToken_question=function(){var s=this.options.ecmaVersion;if(s>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(types$1.questionDot,2)}if(e===63){if(s>=12){var a=this.input.charCodeAt(this.pos+2);if(a===61)return this.finishOp(types$1.assign,3)}return this.finishOp(types$1.coalesce,2)}}return this.finishOp(types$1.question,1)},pp.readToken_numberSign=function(){var s=this.options.ecmaVersion,e=35;if(s>=13&&(++this.pos,e=this.fullCharCodeAtPos(),isIdentifierStart(e,!0)||e===92))return this.finishToken(types$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},pp.getTokenFromCode=function(s){switch(s){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1.parenL);case 41:return++this.pos,this.finishToken(types$1.parenR);case 59:return++this.pos,this.finishToken(types$1.semi);case 44:return++this.pos,this.finishToken(types$1.comma);case 91:return++this.pos,this.finishToken(types$1.bracketL);case 93:return++this.pos,this.finishToken(types$1.bracketR);case 123:return++this.pos,this.finishToken(types$1.braceL);case 125:return++this.pos,this.finishToken(types$1.braceR);case 58:return++this.pos,this.finishToken(types$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(s);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(s);case 124:case 38:return this.readToken_pipe_amp(s);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(s);case 60:case 62:return this.readToken_lt_gt(s);case 61:case 33:return this.readToken_eq_excl(s);case 63:return this.readToken_question();case 126:return this.finishOp(types$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(s)+"'")},pp.finishOp=function(s,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(s,n)},pp.readRegexp=function(){for(var s,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var a=this.input.charAt(this.pos);if(lineBreak.test(a)&&this.raise(n,"Unterminated regular expression"),s)s=!1;else{if(a==="[")e=!0;else if(a==="]"&&e)e=!1;else if(a==="/"&&!e)break;s=a==="\\"}++this.pos}var o=this.input.slice(n,this.pos);++this.pos;var l=this.pos,u=this.readWord1();this.containsEsc&&this.unexpected(l);var c=this.regexpState||(this.regexpState=new RegExpValidationState(this));c.reset(n,o,u),this.validateRegExpFlags(c),this.validateRegExpPattern(c);var f=null;try{f=new RegExp(o,u)}catch{}return this.finishToken(types$1.regexp,{pattern:o,flags:u,value:f})},pp.readInt=function(s,e,n){for(var a=this.options.ecmaVersion>=12&&e===void 0,o=n&&this.input.charCodeAt(this.pos)===48,l=this.pos,u=0,c=0,f=0,d=e??1/0;f<d;++f,++this.pos){var g=this.input.charCodeAt(this.pos),O=void 0;if(a&&g===95){o&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),c===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),f===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),c=g;continue}if(g>=97?O=g-97+10:g>=65?O=g-65+10:g>=48&&g<=57?O=g-48:O=1/0,O>=s)break;c=g,u=u*s+O}return a&&c===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===l||e!=null&&this.pos-l!==e?null:u};function stringToNumber(s,e){return e?parseInt(s,8):parseFloat(s.replace(/_/g,""))}function stringToBigInt(s){return typeof BigInt!="function"?null:BigInt(s.replace(/_/g,""))}pp.readRadixNumber=function(s){var e=this.pos;this.pos+=2;var n=this.readInt(s);return n==null&&this.raise(this.start+2,"Expected number in radix "+s),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=stringToBigInt(this.input.slice(e,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,n)},pp.readNumber=function(s){var e=this.pos;!s&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var n=this.pos-e>=2&&this.input.charCodeAt(e)===48;n&&this.strict&&this.raise(e,"Invalid number");var a=this.input.charCodeAt(this.pos);if(!n&&!s&&this.options.ecmaVersion>=11&&a===110){var o=stringToBigInt(this.input.slice(e,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,o)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),a===46&&!n&&(++this.pos,this.readInt(10),a=this.input.charCodeAt(this.pos)),(a===69||a===101)&&!n&&(a=this.input.charCodeAt(++this.pos),(a===43||a===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var l=stringToNumber(this.input.slice(e,this.pos),n);return this.finishToken(types$1.num,l)},pp.readCodePoint=function(){var s=this.input.charCodeAt(this.pos),e;if(s===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e},pp.readString=function(s){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var a=this.input.charCodeAt(this.pos);if(a===s)break;a===92?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):a===8232||a===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(a)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(types$1.string,e)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(s){if(s===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw s}this.inTemplateElement=!1},pp.invalidStringToken=function(s,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(s,e)},pp.readTmplToken=function(){for(var s="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1.template||this.type===types$1.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(types$1.dollarBraceL)):(++this.pos,this.finishToken(types$1.backQuote)):(s+=this.input.slice(e,this.pos),this.finishToken(types$1.template,s));if(n===92)s+=this.input.slice(e,this.pos),s+=this.readEscapedChar(!0),e=this.pos;else if(isNewLine(n)){switch(s+=this.input.slice(e,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:s+=`
`;break;default:s+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(s){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),s){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var a=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],o=parseInt(a,8);return o>255&&(a=a.slice(0,-1),o=parseInt(a,8)),this.pos+=a.length-1,e=this.input.charCodeAt(this.pos),(a!=="0"||e===56||e===57)&&(this.strict||s)&&this.invalidStringToken(this.pos-1-a.length,s?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(o)}return isNewLine(e)?"":String.fromCharCode(e)}},pp.readHexChar=function(s){var e=this.pos,n=this.readInt(16,s);return n===null&&this.invalidStringToken(e,"Bad character escape sequence"),n},pp.readWord1=function(){this.containsEsc=!1;for(var s="",e=!0,n=this.pos,a=this.options.ecmaVersion>=6;this.pos<this.input.length;){var o=this.fullCharCodeAtPos();if(isIdentifierChar(o,a))this.pos+=o<=65535?1:2;else if(o===92){this.containsEsc=!0,s+=this.input.slice(n,this.pos);var l=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var u=this.readCodePoint();(e?isIdentifierStart:isIdentifierChar)(u,a)||this.invalidStringToken(l,"Invalid Unicode escape"),s+=codePointToString(u),n=this.pos}else break;e=!1}return s+this.input.slice(n,this.pos)},pp.readWord=function(){var s=this.readWord1(),e=types$1.name;return this.keywords.test(s)&&(e=keywords$2[s]),this.finishToken(e,s)};var version="8.8.2";Parser$1.acorn={Parser:Parser$1,version,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1,keywordTypes:keywords$2,TokContext,tokContexts:types$2,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse$3(s,e){return Parser$1.parse(s,e)}class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:e=>this.replacement=e}}replace(e,n,a,o){e&&n&&(a!=null?e[n][a]=o:e[n]=o)}remove(e,n,a){e&&n&&(a!=null?e[n].splice(a,1):delete e[n])}}class SyncWalker extends WalkerBase{constructor(e,n){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:a=>this.replacement=a},this.enter=e,this.leave=n}visit(e,n,a,o){if(e){if(this.enter){const u=this.should_skip,c=this.should_remove,f=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,e,n,a,o),this.replacement&&(e=this.replacement,this.replace(n,a,o,e)),this.should_remove&&this.remove(n,a,o);const d=this.should_skip,g=this.should_remove;if(this.should_skip=u,this.should_remove=c,this.replacement=f,d)return e;if(g)return null}let l;for(l in e){const u=e[l];if(u&&typeof u=="object")if(Array.isArray(u)){const c=u;for(let f=0;f<c.length;f+=1){const d=c[f];isNode(d)&&(this.visit(d,e,l,f)||f--)}}else isNode(u)&&this.visit(u,e,l,null)}if(this.leave){const u=this.replacement,c=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,e,n,a,o),this.replacement&&(e=this.replacement,this.replace(n,a,o,e)),this.should_remove&&this.remove(n,a,o);const f=this.should_remove;if(this.replacement=u,this.should_remove=c,f)return null}}return e}}function isNode(s){return s!==null&&typeof s=="object"&&"type"in s&&typeof s.type=="string"}function walk(s,{enter:e,leave:n}){return new SyncWalker(e,n).visit(s,null)}function peg$subclass(s,e){function n(){this.constructor=s}n.prototype=e.prototype,s.prototype=new n}function peg$SyntaxError(s,e,n,a){var o=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(o,peg$SyntaxError.prototype),o.expected=e,o.found=n,o.location=a,o.name="SyntaxError",o}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(s,e,n){return n=n||" ",s.length>e?s:(e-=s.length,n+=n.repeat(e),s+n.slice(0,e))}peg$SyntaxError.prototype.format=function(s){var e="Error: "+this.message;if(this.location){var n=null,a;for(a=0;a<s.length;a++)if(s[a].source===this.location.source){n=s[a].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,l=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,u=this.location.source+":"+l.line+":"+l.column;if(n){var c=this.location.end,f=peg$padEnd("",l.line.toString().length," "),d=n[o.line-1],g=o.line===c.line?c.column:d.length+1,O=g-o.column||1;e+=`
 --> `+u+`
`+f+` |
`+l.line+" | "+d+`
`+f+" | "+peg$padEnd("",o.column-1," ")+peg$padEnd("",O,"^")}else e+=`
 at `+u}return e},peg$SyntaxError.buildMessage=function(s,e){var n={literal:function(d){return'"'+o(d.text)+'"'},class:function(d){var g=d.parts.map(function(O){return Array.isArray(O)?l(O[0])+"-"+l(O[1]):l(O)});return"["+(d.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};function a(d){return d.charCodeAt(0).toString(16).toUpperCase()}function o(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function l(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(d){return n[d.type](d)}function c(d){var g=d.map(u),O,S;if(g.sort(),g.length>0){for(O=1,S=1;O<g.length;O++)g[O-1]!==g[O]&&(g[S]=g[O],S++);g.length=S}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function f(d){return d?'"'+o(d)+'"':"end of input"}return"Expected "+c(s)+" but "+f(e)+" found."};function peg$parse(s,e){e=e!==void 0?e:{};var n={},a=e.grammarSource,o={start:z},l=z,u=".",c="-",f="+",d="0",g=",",O="|",S='"',b="'",E="#",k="^",$="_",R="[",Z="]",he="{",j="}",K="%",se="<",de=">",ue="@",me="!",ge="(",Oe=")",be="/",Ae="*",Ne="?",Re=":",Fe="..",Ue="struct",$e="target",Ie="euclid",Xe="slow",Pe="rotL",nt="rotR",At="fast",Dt="scale",qe="//",at="cat",xe="$",Et="setcps",Ft="setbpm",ot="hush",st=/^[1-9]/,Xt=/^[eE]/,ht=/^[0-9]/,Tt=/^[ \n\r\t]/,dt=/^[0-9~]/,Kt=/^[^\n]/,Ct=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,Ht=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,Yt=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05EF-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u1100-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,It=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,Qt=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]/,Bt=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,ei=A("number"),Ye=je(".",!1),_t=p([["1","9"]],!1,!1),Le=p(["e","E"],!1,!1),ut=je("-",!1),Ot=je("+",!1),vt=je("0",!1),pt=p([["0","9"]],!1,!1),et=A("whitespace"),ti=p([" ",`
`,"\r","	"],!1,!1),jt=je(",",!1),yt=je("|",!1),Je=je('"',!1),Ke=je("'",!1),ze=A('a letter, a number, "-", "#", ".", "^", "_"'),We=p([["0","9"],"~"],!1,!1),Pt=je("#",!1),Gt=je("^",!1),ai=je("_",!1),wt=je("[",!1),si=je("]",!1),F=je("{",!1),L=je("}",!1),I=je("%",!1),U=je("<",!1),te=je(">",!1),ye=je("@",!1),Se=je("!",!1),we=je("(",!1),Be=je(")",!1),He=je("/",!1),St=je("*",!1),kt=je("?",!1),ii=je(":",!1),fi=je("..",!1),Vt=je("struct",!1),Nt=je("target",!1),ji=je("euclid",!1),Ai=je("slow",!1),Ei=je("rotL",!1),Xi=je("rotR",!1),wi=je("fast",!1),qi=je("scale",!1),Hi=je("//",!1),Pi=p([`
`],!0,!1),Mi=je("cat",!1),yi=je("$",!1),Yi=je("setcps",!1),zt=je("setbpm",!1),zi=je("hush",!1),xi=p([["a","z"],"µ",["ß","ö"],["ø","ÿ"],"ā","ă","ą","ć","ĉ","ċ","č","ď","đ","ē","ĕ","ė","ę","ě","ĝ","ğ","ġ","ģ","ĥ","ħ","ĩ","ī","ĭ","į","ı","ĳ","ĵ",["ķ","ĸ"],"ĺ","ļ","ľ","ŀ","ł","ń","ņ",["ň","ŉ"],"ŋ","ō","ŏ","ő","œ","ŕ","ŗ","ř","ś","ŝ","ş","š","ţ","ť","ŧ","ũ","ū","ŭ","ů","ű","ų","ŵ","ŷ","ź","ż",["ž","ƀ"],"ƃ","ƅ","ƈ",["ƌ","ƍ"],"ƒ","ƕ",["ƙ","ƛ"],"ƞ","ơ","ƣ","ƥ","ƨ",["ƪ","ƫ"],"ƭ","ư","ƴ","ƶ",["ƹ","ƺ"],["ƽ","ƿ"],"ǆ","ǉ","ǌ","ǎ","ǐ","ǒ","ǔ","ǖ","ǘ","ǚ",["ǜ","ǝ"],"ǟ","ǡ","ǣ","ǥ","ǧ","ǩ","ǫ","ǭ",["ǯ","ǰ"],"ǳ","ǵ","ǹ","ǻ","ǽ","ǿ","ȁ","ȃ","ȅ","ȇ","ȉ","ȋ","ȍ","ȏ","ȑ","ȓ","ȕ","ȗ","ș","ț","ȝ","ȟ","ȡ","ȣ","ȥ","ȧ","ȩ","ȫ","ȭ","ȯ","ȱ",["ȳ","ȹ"],"ȼ",["ȿ","ɀ"],"ɂ","ɇ","ɉ","ɋ","ɍ",["ɏ","ʓ"],["ʕ","ʯ"],"ͱ","ͳ","ͷ",["ͻ","ͽ"],"ΐ",["ά","ώ"],["ϐ","ϑ"],["ϕ","ϗ"],"ϙ","ϛ","ϝ","ϟ","ϡ","ϣ","ϥ","ϧ","ϩ","ϫ","ϭ",["ϯ","ϳ"],"ϵ","ϸ",["ϻ","ϼ"],["а","џ"],"ѡ","ѣ","ѥ","ѧ","ѩ","ѫ","ѭ","ѯ","ѱ","ѳ","ѵ","ѷ","ѹ","ѻ","ѽ","ѿ","ҁ","ҋ","ҍ","ҏ","ґ","ғ","ҕ","җ","ҙ","қ","ҝ","ҟ","ҡ","ң","ҥ","ҧ","ҩ","ҫ","ҭ","ү","ұ","ҳ","ҵ","ҷ","ҹ","һ","ҽ","ҿ","ӂ","ӄ","ӆ","ӈ","ӊ","ӌ",["ӎ","ӏ"],"ӑ","ӓ","ӕ","ӗ","ә","ӛ","ӝ","ӟ","ӡ","ӣ","ӥ","ӧ","ө","ӫ","ӭ","ӯ","ӱ","ӳ","ӵ","ӷ","ӹ","ӻ","ӽ","ӿ","ԁ","ԃ","ԅ","ԇ","ԉ","ԋ","ԍ","ԏ","ԑ","ԓ","ԕ","ԗ","ԙ","ԛ","ԝ","ԟ","ԡ","ԣ","ԥ","ԧ","ԩ","ԫ","ԭ","ԯ",["ՠ","ֈ"],["ა","ჺ"],["ჽ","ჿ"],["ᏸ","ᏽ"],["ᲀ","ᲈ"],["ᴀ","ᴫ"],["ᵫ","ᵷ"],["ᵹ","ᶚ"],"ḁ","ḃ","ḅ","ḇ","ḉ","ḋ","ḍ","ḏ","ḑ","ḓ","ḕ","ḗ","ḙ","ḛ","ḝ","ḟ","ḡ","ḣ","ḥ","ḧ","ḩ","ḫ","ḭ","ḯ","ḱ","ḳ","ḵ","ḷ","ḹ","ḻ","ḽ","ḿ","ṁ","ṃ","ṅ","ṇ","ṉ","ṋ","ṍ","ṏ","ṑ","ṓ","ṕ","ṗ","ṙ","ṛ","ṝ","ṟ","ṡ","ṣ","ṥ","ṧ","ṩ","ṫ","ṭ","ṯ","ṱ","ṳ","ṵ","ṷ","ṹ","ṻ","ṽ","ṿ","ẁ","ẃ","ẅ","ẇ","ẉ","ẋ","ẍ","ẏ","ẑ","ẓ",["ẕ","ẝ"],"ẟ","ạ","ả","ấ","ầ","ẩ","ẫ","ậ","ắ","ằ","ẳ","ẵ","ặ","ẹ","ẻ","ẽ","ế","ề","ể","ễ","ệ","ỉ","ị","ọ","ỏ","ố","ồ","ổ","ỗ","ộ","ớ","ờ","ở","ỡ","ợ","ụ","ủ","ứ","ừ","ử","ữ","ự","ỳ","ỵ","ỷ","ỹ","ỻ","ỽ",["ỿ","ἇ"],["ἐ","ἕ"],["ἠ","ἧ"],["ἰ","ἷ"],["ὀ","ὅ"],["ὐ","ὗ"],["ὠ","ὧ"],["ὰ","ώ"],["ᾀ","ᾇ"],["ᾐ","ᾗ"],["ᾠ","ᾧ"],["ᾰ","ᾴ"],["ᾶ","ᾷ"],"ι",["ῂ","ῄ"],["ῆ","ῇ"],["ῐ","ΐ"],["ῖ","ῗ"],["ῠ","ῧ"],["ῲ","ῴ"],["ῶ","ῷ"],"ℊ",["ℎ","ℏ"],"ℓ","ℯ","ℴ","ℹ",["ℼ","ℽ"],["ⅆ","ⅉ"],"ⅎ","ↄ",["ⰰ","ⱞ"],"ⱡ",["ⱥ","ⱦ"],"ⱨ","ⱪ","ⱬ","ⱱ",["ⱳ","ⱴ"],["ⱶ","ⱻ"],"ⲁ","ⲃ","ⲅ","ⲇ","ⲉ","ⲋ","ⲍ","ⲏ","ⲑ","ⲓ","ⲕ","ⲗ","ⲙ","ⲛ","ⲝ","ⲟ","ⲡ","ⲣ","ⲥ","ⲧ","ⲩ","ⲫ","ⲭ","ⲯ","ⲱ","ⲳ","ⲵ","ⲷ","ⲹ","ⲻ","ⲽ","ⲿ","ⳁ","ⳃ","ⳅ","ⳇ","ⳉ","ⳋ","ⳍ","ⳏ","ⳑ","ⳓ","ⳕ","ⳗ","ⳙ","ⳛ","ⳝ","ⳟ","ⳡ",["ⳣ","ⳤ"],"ⳬ","ⳮ","ⳳ",["ⴀ","ⴥ"],"ⴧ","ⴭ","ꙁ","ꙃ","ꙅ","ꙇ","ꙉ","ꙋ","ꙍ","ꙏ","ꙑ","ꙓ","ꙕ","ꙗ","ꙙ","ꙛ","ꙝ","ꙟ","ꙡ","ꙣ","ꙥ","ꙧ","ꙩ","ꙫ","ꙭ","ꚁ","ꚃ","ꚅ","ꚇ","ꚉ","ꚋ","ꚍ","ꚏ","ꚑ","ꚓ","ꚕ","ꚗ","ꚙ","ꚛ","ꜣ","ꜥ","ꜧ","ꜩ","ꜫ","ꜭ",["ꜯ","ꜱ"],"ꜳ","ꜵ","ꜷ","ꜹ","ꜻ","ꜽ","ꜿ","ꝁ","ꝃ","ꝅ","ꝇ","ꝉ","ꝋ","ꝍ","ꝏ","ꝑ","ꝓ","ꝕ","ꝗ","ꝙ","ꝛ","ꝝ","ꝟ","ꝡ","ꝣ","ꝥ","ꝧ","ꝩ","ꝫ","ꝭ","ꝯ",["ꝱ","ꝸ"],"ꝺ","ꝼ","ꝿ","ꞁ","ꞃ","ꞅ","ꞇ","ꞌ","ꞎ","ꞑ",["ꞓ","ꞕ"],"ꞗ","ꞙ","ꞛ","ꞝ","ꞟ","ꞡ","ꞣ","ꞥ","ꞧ","ꞩ","ꞯ","ꞵ","ꞷ","ꞹ","ꟺ",["ꬰ","ꭚ"],["ꭠ","ꭥ"],["ꭰ","ꮿ"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],["ａ","ｚ"]],!1,!1),ki=p([["ʰ","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ","ʹ","ͺ","ՙ","ـ",["ۥ","ۦ"],["ߴ","ߵ"],"ߺ","ࠚ","ࠤ","ࠨ","ॱ","ๆ","ໆ","ჼ","ៗ","ᡃ","ᪧ",["ᱸ","ᱽ"],["ᴬ","ᵪ"],"ᵸ",["ᶛ","ᶿ"],"ⁱ","ⁿ",["ₐ","ₜ"],["ⱼ","ⱽ"],"ⵯ","ⸯ","々",["〱","〵"],"〻",["ゝ","ゞ"],["ー","ヾ"],"ꀕ",["ꓸ","ꓽ"],"ꘌ","ꙿ",["ꚜ","ꚝ"],["ꜗ","ꜟ"],"ꝰ","ꞈ",["ꟸ","ꟹ"],"ꧏ","ꧦ","ꩰ","ꫝ",["ꫳ","ꫴ"],["ꭜ","ꭟ"],"ｰ",["ﾞ","ﾟ"]],!1,!1),Ji=p(["ª","º","ƻ",["ǀ","ǃ"],"ʔ",["א","ת"],["ׯ","ײ"],["ؠ","ؿ"],["ف","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ࠀ","ࠕ"],["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॲ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๅ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["ᄀ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛱ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៜ",["ᠠ","ᡂ"],["ᡄ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱷ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ℵ","ℸ"],["ⴰ","ⵧ"],["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"〆","〼",["ぁ","ゖ"],"ゟ",["ァ","ヺ"],"ヿ",["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꀔ"],["ꀖ","ꒌ"],["ꓐ","ꓷ"],["ꔀ","ꘋ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],"ꙮ",["ꚠ","ꛥ"],"ꞏ","ꟷ",["ꟻ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],["ꧠ","ꧤ"],["ꧧ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩯ"],["ꩱ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫜ"],["ꫠ","ꫪ"],"ꫲ",["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꯀ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["ｦ","ｯ"],["ｱ","ﾝ"],["ﾠ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),Di=p(["ǅ","ǈ","ǋ","ǲ",["ᾈ","ᾏ"],["ᾘ","ᾟ"],["ᾨ","ᾯ"],"ᾼ","ῌ","ῼ"],!1,!1),Ki=p([["A","Z"],["À","Ö"],["Ø","Þ"],"Ā","Ă","Ą","Ć","Ĉ","Ċ","Č","Ď","Đ","Ē","Ĕ","Ė","Ę","Ě","Ĝ","Ğ","Ġ","Ģ","Ĥ","Ħ","Ĩ","Ī","Ĭ","Į","İ","Ĳ","Ĵ","Ķ","Ĺ","Ļ","Ľ","Ŀ","Ł","Ń","Ņ","Ň","Ŋ","Ō","Ŏ","Ő","Œ","Ŕ","Ŗ","Ř","Ś","Ŝ","Ş","Š","Ţ","Ť","Ŧ","Ũ","Ū","Ŭ","Ů","Ű","Ų","Ŵ","Ŷ",["Ÿ","Ź"],"Ż","Ž",["Ɓ","Ƃ"],"Ƅ",["Ɔ","Ƈ"],["Ɖ","Ƌ"],["Ǝ","Ƒ"],["Ɠ","Ɣ"],["Ɩ","Ƙ"],["Ɯ","Ɲ"],["Ɵ","Ơ"],"Ƣ","Ƥ",["Ʀ","Ƨ"],"Ʃ","Ƭ",["Ʈ","Ư"],["Ʊ","Ƴ"],"Ƶ",["Ʒ","Ƹ"],"Ƽ","Ǆ","Ǉ","Ǌ","Ǎ","Ǐ","Ǒ","Ǔ","Ǖ","Ǘ","Ǚ","Ǜ","Ǟ","Ǡ","Ǣ","Ǥ","Ǧ","Ǩ","Ǫ","Ǭ","Ǯ","Ǳ","Ǵ",["Ƕ","Ǹ"],"Ǻ","Ǽ","Ǿ","Ȁ","Ȃ","Ȅ","Ȇ","Ȉ","Ȋ","Ȍ","Ȏ","Ȑ","Ȓ","Ȕ","Ȗ","Ș","Ț","Ȝ","Ȟ","Ƞ","Ȣ","Ȥ","Ȧ","Ȩ","Ȫ","Ȭ","Ȯ","Ȱ","Ȳ",["Ⱥ","Ȼ"],["Ƚ","Ⱦ"],"Ɂ",["Ƀ","Ɇ"],"Ɉ","Ɋ","Ɍ","Ɏ","Ͱ","Ͳ","Ͷ","Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ώ"],["Α","Ρ"],["Σ","Ϋ"],"Ϗ",["ϒ","ϔ"],"Ϙ","Ϛ","Ϝ","Ϟ","Ϡ","Ϣ","Ϥ","Ϧ","Ϩ","Ϫ","Ϭ","Ϯ","ϴ","Ϸ",["Ϲ","Ϻ"],["Ͻ","Я"],"Ѡ","Ѣ","Ѥ","Ѧ","Ѩ","Ѫ","Ѭ","Ѯ","Ѱ","Ѳ","Ѵ","Ѷ","Ѹ","Ѻ","Ѽ","Ѿ","Ҁ","Ҋ","Ҍ","Ҏ","Ґ","Ғ","Ҕ","Җ","Ҙ","Қ","Ҝ","Ҟ","Ҡ","Ң","Ҥ","Ҧ","Ҩ","Ҫ","Ҭ","Ү","Ұ","Ҳ","Ҵ","Ҷ","Ҹ","Һ","Ҽ","Ҿ",["Ӏ","Ӂ"],"Ӄ","Ӆ","Ӈ","Ӊ","Ӌ","Ӎ","Ӑ","Ӓ","Ӕ","Ӗ","Ә","Ӛ","Ӝ","Ӟ","Ӡ","Ӣ","Ӥ","Ӧ","Ө","Ӫ","Ӭ","Ӯ","Ӱ","Ӳ","Ӵ","Ӷ","Ӹ","Ӻ","Ӽ","Ӿ","Ԁ","Ԃ","Ԅ","Ԇ","Ԉ","Ԋ","Ԍ","Ԏ","Ԑ","Ԓ","Ԕ","Ԗ","Ԙ","Ԛ","Ԝ","Ԟ","Ԡ","Ԣ","Ԥ","Ԧ","Ԩ","Ԫ","Ԭ","Ԯ",["Ա","Ֆ"],["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["Ꭰ","Ᏽ"],["Ა","Ჺ"],["Ჽ","Ჿ"],"Ḁ","Ḃ","Ḅ","Ḇ","Ḉ","Ḋ","Ḍ","Ḏ","Ḑ","Ḓ","Ḕ","Ḗ","Ḙ","Ḛ","Ḝ","Ḟ","Ḡ","Ḣ","Ḥ","Ḧ","Ḩ","Ḫ","Ḭ","Ḯ","Ḱ","Ḳ","Ḵ","Ḷ","Ḹ","Ḻ","Ḽ","Ḿ","Ṁ","Ṃ","Ṅ","Ṇ","Ṉ","Ṋ","Ṍ","Ṏ","Ṑ","Ṓ","Ṕ","Ṗ","Ṙ","Ṛ","Ṝ","Ṟ","Ṡ","Ṣ","Ṥ","Ṧ","Ṩ","Ṫ","Ṭ","Ṯ","Ṱ","Ṳ","Ṵ","Ṷ","Ṹ","Ṻ","Ṽ","Ṿ","Ẁ","Ẃ","Ẅ","Ẇ","Ẉ","Ẋ","Ẍ","Ẏ","Ẑ","Ẓ","Ẕ","ẞ","Ạ","Ả","Ấ","Ầ","Ẩ","Ẫ","Ậ","Ắ","Ằ","Ẳ","Ẵ","Ặ","Ẹ","Ẻ","Ẽ","Ế","Ề","Ể","Ễ","Ệ","Ỉ","Ị","Ọ","Ỏ","Ố","Ồ","Ổ","Ỗ","Ộ","Ớ","Ờ","Ở","Ỡ","Ợ","Ụ","Ủ","Ứ","Ừ","Ử","Ữ","Ự","Ỳ","Ỵ","Ỷ","Ỹ","Ỻ","Ỽ","Ỿ",["Ἀ","Ἇ"],["Ἐ","Ἕ"],["Ἠ","Ἧ"],["Ἰ","Ἷ"],["Ὀ","Ὅ"],"Ὑ","Ὓ","Ὕ","Ὗ",["Ὠ","Ὧ"],["Ᾰ","Ά"],["Ὲ","Ή"],["Ῐ","Ί"],["Ῠ","Ῥ"],["Ὸ","Ώ"],"ℂ","ℇ",["ℋ","ℍ"],["ℐ","ℒ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℰ","ℳ"],["ℾ","ℿ"],"ⅅ","Ↄ",["Ⰰ","Ⱞ"],"Ⱡ",["Ɫ","Ɽ"],"Ⱨ","Ⱪ","Ⱬ",["Ɑ","Ɒ"],"Ⱳ","Ⱶ",["Ȿ","Ⲁ"],"Ⲃ","Ⲅ","Ⲇ","Ⲉ","Ⲋ","Ⲍ","Ⲏ","Ⲑ","Ⲓ","Ⲕ","Ⲗ","Ⲙ","Ⲛ","Ⲝ","Ⲟ","Ⲡ","Ⲣ","Ⲥ","Ⲧ","Ⲩ","Ⲫ","Ⲭ","Ⲯ","Ⲱ","Ⲳ","Ⲵ","Ⲷ","Ⲹ","Ⲻ","Ⲽ","Ⲿ","Ⳁ","Ⳃ","Ⳅ","Ⳇ","Ⳉ","Ⳋ","Ⳍ","Ⳏ","Ⳑ","Ⳓ","Ⳕ","Ⳗ","Ⳙ","Ⳛ","Ⳝ","Ⳟ","Ⳡ","Ⳣ","Ⳬ","Ⳮ","Ⳳ","Ꙁ","Ꙃ","Ꙅ","Ꙇ","Ꙉ","Ꙋ","Ꙍ","Ꙏ","Ꙑ","Ꙓ","Ꙕ","Ꙗ","Ꙙ","Ꙛ","Ꙝ","Ꙟ","Ꙡ","Ꙣ","Ꙥ","Ꙧ","Ꙩ","Ꙫ","Ꙭ","Ꚁ","Ꚃ","Ꚅ","Ꚇ","Ꚉ","Ꚋ","Ꚍ","Ꚏ","Ꚑ","Ꚓ","Ꚕ","Ꚗ","Ꚙ","Ꚛ","Ꜣ","Ꜥ","Ꜧ","Ꜩ","Ꜫ","Ꜭ","Ꜯ","Ꜳ","Ꜵ","Ꜷ","Ꜹ","Ꜻ","Ꜽ","Ꜿ","Ꝁ","Ꝃ","Ꝅ","Ꝇ","Ꝉ","Ꝋ","Ꝍ","Ꝏ","Ꝑ","Ꝓ","Ꝕ","Ꝗ","Ꝙ","Ꝛ","Ꝝ","Ꝟ","Ꝡ","Ꝣ","Ꝥ","Ꝧ","Ꝩ","Ꝫ","Ꝭ","Ꝯ","Ꝺ","Ꝼ",["Ᵹ","Ꝿ"],"Ꞁ","Ꞃ","Ꞅ","Ꞇ","Ꞌ","Ɥ","Ꞑ","Ꞓ","Ꞗ","Ꞙ","Ꞛ","Ꞝ","Ꞟ","Ꞡ","Ꞣ","Ꞥ","Ꞧ","Ꞩ",["Ɦ","Ɪ"],["Ʞ","Ꞵ"],"Ꞷ","Ꞹ",["Ａ","Ｚ"]],!1,!1),Fi=p([["ᛮ","ᛰ"],["Ⅰ","ↂ"],["ↅ","ↈ"],"〇",["〡","〩"],["〸","〺"],["ꛦ","ꛯ"]],!1,!1),qt=function(){return parseFloat(Vi())},en=function(M){return new lr(M.join(""))},tn=function(M){return M},Bi=function(M,re){return M.arguments_.stepsPerCycle=re,M},$i=function(M){return M},nn=function(M){return M.arguments_.alignment="slowcat",M},Ti=function(M){return re=>re.options_.weight=M},rn=function(M){return re=>re.options_.reps=M},Ni=function(M,re,fe){return ke=>ke.options_.ops.push({type_:"bjorklund",arguments_:{pulse:M,step:re,rotation:fe}})},sn=function(M){return re=>re.options_.ops.push({type_:"stretch",arguments_:{amount:M,type:"slow"}})},an=function(M){return re=>re.options_.ops.push({type_:"stretch",arguments_:{amount:M,type:"fast"}})},ni=function(M){return re=>re.options_.ops.push({type_:"degradeBy",arguments_:{amount:M,seed:An++}})},ct=function(M){return re=>re.options_.ops.push({type_:"tail",arguments_:{element:M}})},ln=function(M){return re=>re.options_.ops.push({type_:"range",arguments_:{element:M}})},hi=function(M,re){const fe=new cr(M,{ops:[],weight:1,reps:1});for(const ke of re)ke(fe);return fe},un=function(M){return new Zi(M,"fastcat")},oi=function(M){return{alignment:"stack",list:M}},cn=function(M){return{alignment:"rand",list:M,seed:An++}},di=function(M,re){return re&&re.list.length>0?new Zi([M,...re.list],re.alignment,re.seed):M},Ri=function(M,re){return new Zi(re?[M,...re.list]:[M],"polymeter")},Ii=function(M){return M},fn=function(M){return{name:"struct",args:{mini:M}}},vi=function(M){return{name:"target",args:{name:M}}},hn=function(M,re,fe){return{name:"bjorklund",args:{pulse:M,step:parseInt(re)}}},Ci=function(M){return{name:"stretch",args:{amount:M}}},pi=function(M){return{name:"shift",args:{amount:"-"+M}}},Li=function(M){return{name:"shift",args:{amount:M}}},Qi=function(M){return{name:"stretch",args:{amount:"1/"+M}}},Gi=function(M){return{name:"scale",args:{scale:M.join("")}}},Wt=function(M,re){return re},dn=function(M,re){return re.unshift(M),new Zi(re,"slowcat")},ri=function(M){return M},Ui=function(M,re){return new ur(M.name,M.args,re)},pn=function(M){return M},gn=function(M){return M},mn=function(M){return new Cn("setcps",{value:M})},_n=function(M){return new Cn("setcps",{value:M/120/2})},On=function(){return new Cn("hush")},ee=0,Ze=0,li=[{line:1,column:1}],Zt=0,gi=[],Te=0,ui;if("startRule"in e){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');l=o[e.startRule]}function Vi(){return s.substring(Ze,ee)}function mi(){return N(Ze,ee)}function je(M,re){return{type:"literal",text:M,ignoreCase:re}}function p(M,re,fe){return{type:"class",parts:M,inverted:re,ignoreCase:fe}}function v(){return{type:"end"}}function A(M){return{type:"other",description:M}}function P(M){var re=li[M],fe;if(re)return re;for(fe=M-1;!li[fe];)fe--;for(re=li[fe],re={line:re.line,column:re.column};fe<M;)s.charCodeAt(fe)===10?(re.line++,re.column=1):re.column++,fe++;return li[M]=re,re}function N(M,re,fe){var ke=P(M),Ve=P(re),mt={source:a,start:{offset:M,line:ke.line,column:ke.column},end:{offset:re,line:Ve.line,column:Ve.column}};return fe&&a&&typeof a.offset=="function"&&(mt.start=a.offset(mt.start),mt.end=a.offset(mt.end)),mt}function B(M){ee<Zt||(ee>Zt&&(Zt=ee,gi=[]),gi.push(M))}function V(M,re,fe){return new peg$SyntaxError(peg$SyntaxError.buildMessage(M,re),M,re,fe)}function z(){var M;return M=Jn(),M}function q(){var M,re;return Te++,M=ee,De(),re=pe(),re!==n?(_e(),Ce(),Ze=M,M=qt()):(ee=M,M=n),Te--,M===n&&Te===0&&B(ei),M}function le(){var M;return s.charCodeAt(ee)===46?(M=u,ee++):(M=n,Te===0&&B(Ye)),M}function oe(){var M;return st.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(_t)),M}function ve(){var M;return Xt.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(Le)),M}function Ce(){var M,re,fe,ke,Ve;if(M=ee,re=ve(),re!==n){if(fe=De(),fe===n&&(fe=Me()),fe===n&&(fe=null),ke=[],Ve=Ge(),Ve!==n)for(;Ve!==n;)ke.push(Ve),Ve=Ge();else ke=n;ke!==n?(re=[re,fe,ke],M=re):(ee=M,M=n)}else ee=M,M=n;return M}function _e(){var M,re,fe,ke;if(M=ee,re=le(),re!==n){if(fe=[],ke=Ge(),ke!==n)for(;ke!==n;)fe.push(ke),ke=Ge();else fe=n;fe!==n?(re=[re,fe],M=re):(ee=M,M=n)}else ee=M,M=n;return M}function pe(){var M,re,fe,ke;if(M=Qe(),M===n)if(M=ee,re=oe(),re!==n){for(fe=[],ke=Ge();ke!==n;)fe.push(ke),ke=Ge();re=[re,fe],M=re}else ee=M,M=n;return M}function De(){var M;return s.charCodeAt(ee)===45?(M=c,ee++):(M=n,Te===0&&B(ut)),M}function Me(){var M;return s.charCodeAt(ee)===43?(M=f,ee++):(M=n,Te===0&&B(Ot)),M}function Qe(){var M;return s.charCodeAt(ee)===48?(M=d,ee++):(M=n,Te===0&&B(vt)),M}function Ge(){var M;return ht.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(pt)),M}function Ee(){var M,re;for(Te++,M=[],Tt.test(s.charAt(ee))?(re=s.charAt(ee),ee++):(re=n,Te===0&&B(ti));re!==n;)M.push(re),Tt.test(s.charAt(ee))?(re=s.charAt(ee),ee++):(re=n,Te===0&&B(ti));return Te--,re=n,Te===0&&B(et),M}function rt(){var M,re,fe,ke;return M=ee,re=Ee(),s.charCodeAt(ee)===44?(fe=g,ee++):(fe=n,Te===0&&B(jt)),fe!==n?(ke=Ee(),re=[re,fe,ke],M=re):(ee=M,M=n),M}function $t(){var M,re,fe,ke;return M=ee,re=Ee(),s.charCodeAt(ee)===124?(fe=O,ee++):(fe=n,Te===0&&B(yt)),fe!==n?(ke=Ee(),re=[re,fe,ke],M=re):(ee=M,M=n),M}function ft(){var M;return s.charCodeAt(ee)===34?(M=S,ee++):(M=n,Te===0&&B(Je)),M===n&&(s.charCodeAt(ee)===39?(M=b,ee++):(M=n,Te===0&&B(Ke))),M}function bt(){var M;return Te++,M=Kn(),M===n&&(dt.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(We)),M===n&&(s.charCodeAt(ee)===45?(M=c,ee++):(M=n,Te===0&&B(ut)),M===n&&(s.charCodeAt(ee)===35?(M=E,ee++):(M=n,Te===0&&B(Pt)),M===n&&(s.charCodeAt(ee)===46?(M=u,ee++):(M=n,Te===0&&B(Ye)),M===n&&(s.charCodeAt(ee)===94?(M=k,ee++):(M=n,Te===0&&B(Gt)),M===n&&(s.charCodeAt(ee)===95?(M=$,ee++):(M=n,Te===0&&B(ai)))))))),Te--,M===n&&Te===0&&B(ze),M}function tt(){var M,re,fe;if(M=ee,Ee(),re=[],fe=bt(),fe!==n)for(;fe!==n;)re.push(fe),fe=bt();else re=n;return re!==n?(fe=Ee(),Ze=M,M=en(re)):(ee=M,M=n),M}function it(){var M,re,fe,ke;return M=ee,Ee(),s.charCodeAt(ee)===91?(re=R,ee++):(re=n,Te===0&&B(wt)),re!==n?(Ee(),fe=bn(),fe!==n?(Ee(),s.charCodeAt(ee)===93?(ke=Z,ee++):(ke=n,Te===0&&B(si)),ke!==n?(Ee(),Ze=M,M=tn(fe)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function Rt(){var M,re,fe,ke,Ve;return M=ee,Ee(),s.charCodeAt(ee)===123?(re=he,ee++):(re=n,Te===0&&B(F)),re!==n?(Ee(),fe=Bn(),fe!==n?(Ee(),s.charCodeAt(ee)===125?(ke=j,ee++):(ke=n,Te===0&&B(L)),ke!==n?(Ve=Mt(),Ve===n&&(Ve=null),Ee(),Ze=M,M=Bi(fe,Ve)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function Mt(){var M,re,fe;return M=ee,s.charCodeAt(ee)===37?(re=K,ee++):(re=n,Te===0&&B(I)),re!==n?(fe=Ut(),fe!==n?(Ze=M,M=$i(fe)):(ee=M,M=n)):(ee=M,M=n),M}function xt(){var M,re,fe,ke;return M=ee,Ee(),s.charCodeAt(ee)===60?(re=se,ee++):(re=n,Te===0&&B(U)),re!==n?(Ee(),fe=ci(),fe!==n?(Ee(),s.charCodeAt(ee)===62?(ke=de,ee++):(ke=n,Te===0&&B(te)),ke!==n?(Ee(),Ze=M,M=nn(fe)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function Ut(){var M;return M=tt(),M===n&&(M=it(),M===n&&(M=Rt(),M===n&&(M=xt()))),M}function Wi(){var M;return M=yn(),M===n&&(M=wn(),M===n&&(M=Pn(),M===n&&(M=Mn(),M===n&&(M=Si(),M===n&&(M=xn(),M===n&&(M=kn(),M===n&&(M=Dn()))))))),M}function yn(){var M,re,fe;return M=ee,s.charCodeAt(ee)===64?(re=ue,ee++):(re=n,Te===0&&B(ye)),re!==n?(fe=q(),fe!==n?(Ze=M,M=Ti(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Si(){var M,re,fe;return M=ee,s.charCodeAt(ee)===33?(re=me,ee++):(re=n,Te===0&&B(Se)),re!==n?(fe=q(),fe!==n?(Ze=M,M=rn(fe)):(ee=M,M=n)):(ee=M,M=n),M}function wn(){var M,re,fe,ke,Ve,mt,Jt;return M=ee,s.charCodeAt(ee)===40?(re=ge,ee++):(re=n,Te===0&&B(we)),re!==n?(Ee(),fe=bi(),fe!==n?(Ee(),ke=rt(),ke!==n?(Ee(),Ve=bi(),Ve!==n?(Ee(),rt(),Ee(),mt=bi(),mt===n&&(mt=null),Ee(),s.charCodeAt(ee)===41?(Jt=Oe,ee++):(Jt=n,Te===0&&B(Be)),Jt!==n?(Ze=M,M=Ni(fe,Ve,mt)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function Pn(){var M,re,fe;return M=ee,s.charCodeAt(ee)===47?(re=be,ee++):(re=n,Te===0&&B(He)),re!==n?(fe=Ut(),fe!==n?(Ze=M,M=sn(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Mn(){var M,re,fe;return M=ee,s.charCodeAt(ee)===42?(re=Ae,ee++):(re=n,Te===0&&B(St)),re!==n?(fe=Ut(),fe!==n?(Ze=M,M=an(fe)):(ee=M,M=n)):(ee=M,M=n),M}function xn(){var M,re,fe;return M=ee,s.charCodeAt(ee)===63?(re=Ne,ee++):(re=n,Te===0&&B(kt)),re!==n?(fe=q(),fe===n&&(fe=null),Ze=M,M=ni(fe)):(ee=M,M=n),M}function kn(){var M,re,fe;return M=ee,s.charCodeAt(ee)===58?(re=Re,ee++):(re=n,Te===0&&B(ii)),re!==n?(fe=Ut(),fe!==n?(Ze=M,M=ct(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Dn(){var M,re,fe;return M=ee,s.substr(ee,2)===Fe?(re=Fe,ee+=2):(re=n,Te===0&&B(fi)),re!==n?(fe=Ut(),fe!==n?(Ze=M,M=ln(fe)):(ee=M,M=n)):(ee=M,M=n),M}function bi(){var M,re,fe,ke;if(M=ee,re=Ut(),re!==n){for(fe=[],ke=Wi();ke!==n;)fe.push(ke),ke=Wi();Ze=M,M=hi(re,fe)}else ee=M,M=n;return M}function ci(){var M,re,fe;if(M=ee,re=[],fe=bi(),fe!==n)for(;fe!==n;)re.push(fe),fe=bi();else re=n;return re!==n&&(Ze=M,re=un(re)),M=re,M}function Sn(){var M,re,fe,ke,Ve;if(M=ee,re=[],fe=ee,ke=rt(),ke!==n?(Ve=ci(),Ve!==n?fe=Ve:(ee=fe,fe=n)):(ee=fe,fe=n),fe!==n)for(;fe!==n;)re.push(fe),fe=ee,ke=rt(),ke!==n?(Ve=ci(),Ve!==n?fe=Ve:(ee=fe,fe=n)):(ee=fe,fe=n);else re=n;return re!==n&&(Ze=M,re=oi(re)),M=re,M}function Fn(){var M,re,fe,ke,Ve;if(M=ee,re=[],fe=ee,ke=$t(),ke!==n?(Ve=ci(),Ve!==n?fe=Ve:(ee=fe,fe=n)):(ee=fe,fe=n),fe!==n)for(;fe!==n;)re.push(fe),fe=ee,ke=$t(),ke!==n?(Ve=ci(),Ve!==n?fe=Ve:(ee=fe,fe=n)):(ee=fe,fe=n);else re=n;return re!==n&&(Ze=M,re=cn(re)),M=re,M}function bn(){var M,re,fe;return M=ee,re=ci(),re!==n?(fe=Sn(),fe===n&&(fe=Fn()),fe===n&&(fe=null),Ze=M,M=di(re,fe)):(ee=M,M=n),M}function Bn(){var M,re,fe;return M=ee,re=ci(),re!==n?(fe=Sn(),fe===n&&(fe=null),Ze=M,M=Ri(re,fe)):(ee=M,M=n),M}function $n(){var M,re,fe,ke;return M=ee,Ee(),re=ft(),re!==n?(Ee(),fe=bn(),fe!==n?(Ee(),ke=ft(),ke!==n?(Ze=M,M=Ii(fe)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function Tn(){var M;return M=Vn(),M===n&&(M=Ln(),M===n&&(M=Un(),M===n&&(M=Rn(),M===n&&(M=In(),M===n&&(M=Nn(),M===n&&(M=Gn(),M===n&&(M=Qn()))))))),M}function Nn(){var M,re,fe;return M=ee,s.substr(ee,6)===Ue?(re=Ue,ee+=6):(re=n,Te===0&&B(Vt)),re!==n?(Ee(),fe=_i(),fe!==n?(Ze=M,M=fn(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Rn(){var M,re,fe,ke,Ve;return M=ee,s.substr(ee,6)===$e?(re=$e,ee+=6):(re=n,Te===0&&B(Nt)),re!==n?(Ee(),fe=ft(),fe!==n?(ke=tt(),ke!==n?(Ve=ft(),Ve!==n?(Ze=M,M=vi(ke)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function In(){var M,re,fe,ke;return M=ee,s.substr(ee,6)===Ie?(re=Ie,ee+=6):(re=n,Te===0&&B(ji)),re!==n?(Ee(),fe=pe(),fe!==n?(Ee(),ke=pe(),ke!==n?(Ee(),pe(),Ze=M,M=hn(fe,ke)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n),M}function Ln(){var M,re,fe;return M=ee,s.substr(ee,4)===Xe?(re=Xe,ee+=4):(re=n,Te===0&&B(Ai)),re!==n?(Ee(),fe=q(),fe!==n?(Ze=M,M=Ci(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Qn(){var M,re,fe;return M=ee,s.substr(ee,4)===Pe?(re=Pe,ee+=4):(re=n,Te===0&&B(Ei)),re!==n?(Ee(),fe=q(),fe!==n?(Ze=M,M=pi(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Gn(){var M,re,fe;return M=ee,s.substr(ee,4)===nt?(re=nt,ee+=4):(re=n,Te===0&&B(Xi)),re!==n?(Ee(),fe=q(),fe!==n?(Ze=M,M=Li(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Un(){var M,re,fe;return M=ee,s.substr(ee,4)===At?(re=At,ee+=4):(re=n,Te===0&&B(wi)),re!==n?(Ee(),fe=q(),fe!==n?(Ze=M,M=Qi(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Vn(){var M,re,fe,ke,Ve;if(M=ee,s.substr(ee,5)===Dt?(re=Dt,ee+=5):(re=n,Te===0&&B(qi)),re!==n)if(Ee(),fe=ft(),fe!==n){if(ke=[],Ve=bt(),Ve!==n)for(;Ve!==n;)ke.push(Ve),Ve=bt();else ke=n;ke!==n?(Ve=ft(),Ve!==n?(Ze=M,M=Gi(ke)):(ee=M,M=n)):(ee=M,M=n)}else ee=M,M=n;else ee=M,M=n;return M}function vn(){var M,re,fe,ke;if(M=ee,s.substr(ee,2)===qe?(re=qe,ee+=2):(re=n,Te===0&&B(Hi)),re!==n){for(fe=[],Kt.test(s.charAt(ee))?(ke=s.charAt(ee),ee++):(ke=n,Te===0&&B(Pi));ke!==n;)fe.push(ke),Kt.test(s.charAt(ee))?(ke=s.charAt(ee),ee++):(ke=n,Te===0&&B(Pi));re=[re,fe],M=re}else ee=M,M=n;return M}function Wn(){var M,re,fe,ke,Ve,mt,Jt,Oi;if(M=ee,s.substr(ee,3)===at?(re=at,ee+=3):(re=n,Te===0&&B(Mi)),re!==n)if(Ee(),s.charCodeAt(ee)===91?(fe=R,ee++):(fe=n,Te===0&&B(wt)),fe!==n)if(Ee(),ke=_i(),ke!==n){for(Ve=[],mt=ee,Jt=rt(),Jt!==n?(Oi=_i(),Oi!==n?(Ze=mt,mt=Wt(ke,Oi)):(ee=mt,mt=n)):(ee=mt,mt=n);mt!==n;)Ve.push(mt),mt=ee,Jt=rt(),Jt!==n?(Oi=_i(),Oi!==n?(Ze=mt,mt=Wt(ke,Oi)):(ee=mt,mt=n)):(ee=mt,mt=n);mt=Ee(),s.charCodeAt(ee)===93?(Jt=Z,ee++):(Jt=n,Te===0&&B(si)),Jt!==n?(Ze=M,M=dn(ke,Ve)):(ee=M,M=n)}else ee=M,M=n;else ee=M,M=n;else ee=M,M=n;return M}function Zn(){var M;return M=Wn(),M===n&&(M=$n()),M}function _i(){var M,re,fe,ke,Ve;if(M=ee,re=Zn(),re!==n){for(Ee(),fe=[],ke=vn();ke!==n;)fe.push(ke),ke=vn();Ze=M,M=ri(re)}else ee=M,M=n;return M===n&&(M=ee,re=Tn(),re!==n?(Ee(),s.charCodeAt(ee)===36?(fe=xe,ee++):(fe=n,Te===0&&B(yi)),fe!==n?(ke=Ee(),Ve=_i(),Ve!==n?(Ze=M,M=Ui(re,Ve)):(ee=M,M=n)):(ee=M,M=n)):(ee=M,M=n)),M}function jn(){var M,re;return M=ee,re=_i(),re!==n&&(Ze=M,re=pn(re)),M=re,M===n&&(M=vn()),M}function Xn(){var M;return M=jn(),M}function qn(){var M,re;return M=ee,Ee(),re=Hn(),re===n&&(re=Yn(),re===n&&(re=zn())),re!==n?(Ee(),Ze=M,M=gn(re)):(ee=M,M=n),M}function Hn(){var M,re,fe;return M=ee,s.substr(ee,6)===Et?(re=Et,ee+=6):(re=n,Te===0&&B(Yi)),re!==n?(Ee(),fe=q(),fe!==n?(Ze=M,M=mn(fe)):(ee=M,M=n)):(ee=M,M=n),M}function Yn(){var M,re,fe;return M=ee,s.substr(ee,6)===Ft?(re=Ft,ee+=6):(re=n,Te===0&&B(zt)),re!==n?(Ee(),fe=q(),fe!==n?(Ze=M,M=_n(fe)):(ee=M,M=n)):(ee=M,M=n),M}function zn(){var M,re;return M=ee,s.substr(ee,4)===ot?(re=ot,ee+=4):(re=n,Te===0&&B(zi)),re!==n&&(Ze=M,re=On()),M=re,M}function Jn(){var M;return M=Xn(),M===n&&(M=qn()),M}function Kn(){var M;return M=sr(),M===n&&(M=er(),M===n&&(M=rr(),M===n&&(M=ir(),M===n&&(M=nr(),M===n&&(M=ar()))))),M}function er(){var M;return Ct.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(xi)),M}function ir(){var M;return Ht.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(ki)),M}function nr(){var M;return Yt.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(Ji)),M}function rr(){var M;return It.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(Di)),M}function sr(){var M;return Qt.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(Ki)),M}function ar(){var M;return Bt.test(s.charAt(ee))?(M=s.charAt(ee),ee++):(M=n,Te===0&&B(Fi)),M}var lr=function(M){this.type_="atom",this.source_=M,this.location_=mi()},Zi=function(M,re,fe){this.type_="pattern",this.arguments_={alignment:re},fe!==void 0&&(this.arguments_.seed=fe),this.source_=M},ur=function(M,re,fe){this.type_=M,this.arguments_=re,this.source_=fe},cr=function(M,re){this.type_="element",this.source_=M,this.options_=re,this.location_=mi()},Cn=function(M,re){this.type_="command",this.name_=M,this.options_=re},An=0;if(ui=l(),ui!==n&&ee===s.length)return ui;throw ui!==n&&ee<s.length&&B(v()),V(gi,Zt<s.length?s.charAt(Zt):null,Zt<s.length?N(Zt,Zt+1):N(Zt,Zt))}const randOffset=3e-4,applyOptions=(s,e)=>(n,a)=>{const u=s.source_[a].options_?.ops;if(u)for(const c of u)switch(c.type_){case"stretch":{const f=["fast","slow"],{type:d,amount:g}=c.arguments_;if(!f.includes(d))throw new Error(`mini: stretch: type must be one of ${f.join("|")} but got ${d}`);n=reify(n)[d](e(g));break}case"bjorklund":{c.arguments_.rotation?n=n.euclidRot(e(c.arguments_.pulse),e(c.arguments_.step),e(c.arguments_.rotation)):n=n.euclid(e(c.arguments_.pulse),e(c.arguments_.step));break}case"degradeBy":{n=reify(n)._degradeByWith(rand.early(randOffset*c.arguments_.seed),c.arguments_.amount??.5);break}case"tail":{const f=e(c.arguments_.element);n=n.fmap(d=>g=>Array.isArray(d)?[...d,g]:[d,g]).appLeft(f);break}case"range":{const f=e(c.arguments_.element);n=reify(n);const d=(O,S,b=1)=>Array.from({length:Math.abs(S-O)/b+1},(E,k)=>O<S?O+k*b:O-k*b);n=((O,S)=>O.squeezeBind(b=>S.bind(E=>fastcat(...d(b,E)))))(n,f);break}default:console.warn(`operator "${c.type_}" not implemented`)}return n};function resolveReplications(s){s.source_=flatten$1(s.source_.map(e=>{const{reps:n}=e.options_||{};return n?(delete e.options_.reps,Array(n).fill(e)):[e]}))}function patternifyAST(s,e,n,a=0){n?.(s);const o=l=>patternifyAST(l,e,n,a);switch(s.type_){case"pattern":{resolveReplications(s);const l=s.source_.map(d=>o(d)).map(applyOptions(s,o)),u=s.arguments_.alignment;if(u==="stack")return stack(...l);if(u==="polymeter"){const d=s.arguments_.stepsPerCycle?o(s.arguments_.stepsPerCycle).fmap(O=>fraction$1(O)):pure(fraction$1(l.length>0?l[0].__weight:1)),g=l.map(O=>O.fast(d.fmap(S=>S.div(O.__weight||1))));return stack(...g)}if(u==="rand")return chooseInWith(rand.early(randOffset*s.arguments_.seed).segment(1),l);const c=s.source_.some(d=>!!d.options_?.weight);if(!c&&u==="slowcat")return slowcat(...l);if(c){const d=s.source_.reduce((O,S)=>O+(S.options_?.weight||1),0),g=timeCat(...s.source_.map((O,S)=>[O.options_?.weight||1,l[S]]));return u==="slowcat"?g._slow(d):(g.__weight=d,g)}const f=sequence(...l);return f.__weight=l.length,f}case"element":return o(s.source_);case"atom":{if(s.source_==="~")return silence;if(!s.location_)return console.warn("no location for",s),s.source_;const l=isNaN(Number(s.source_))?s.source_:Number(s.source_);if(a===-1)return pure(l);const[u,c]=getLeafLocation(e,s,a);return pure(l).withLoc(u,c)}case"stretch":return o(s.source_).slow(o(s.arguments_.amount));default:return console.warn(`node type "${s.type_}" not implemented -> returning silence`),silence}}const getLeafLocation=(s,e,n=0)=>{const{start:a,end:o}=e.location_,l=s?.split("").slice(a.offset,o.offset).join(""),[u=0,c=0]=l?l.split(e.source_).map(f=>f.split("").filter(d=>d===" ").length):[];return[a.offset+u+n,o.offset-c+n]},mini2ast=s=>peg$parse(s),getLeaves=s=>{const e=mini2ast(s);let n=[];return patternifyAST(e,s,a=>{a.type_==="atom"&&n.push(a)},-1),n},getLeafLocations=(s,e=0)=>getLeaves(s).map(n=>getLeafLocation(s,n,e)),mini$1=(...s)=>{const e=s.map(n=>{const a=`"${n}"`,o=mini2ast(a);return patternifyAST(o,a)});return sequence(...e)},m$1=(s,e)=>{const n=`"${s}"`,a=mini2ast(n);return patternifyAST(a,n,null,e)},h=s=>{const e=mini2ast(s);return patternifyAST(e,s)};function minify(s){return typeof s=="string"?mini$1(s):reify(s)}function miniAllStrings(){setStringParser(mini$1)}const index$9=Object.freeze(Object.defineProperty({__proto__:null,SyntaxError:peg$SyntaxError,getLeafLocation,getLeafLocations,getLeaves,h,m:m$1,mini:mini$1,mini2ast,miniAllStrings,minify,parse:peg$parse,patternifyAST},Symbol.toStringTag,{value:"Module"}));function transpiler(s,e={}){const{wrapAsync:n=!1,addReturn:a=!0,emitMiniLocations:o=!0,emitWidgets:l=!0}=e;let u=parse$3(s,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),c=[];const f=(S,b)=>{const E=getLeafLocations(`"${S}"`,b.start);c=c.concat(E)};let d=[];walk(u,{enter(S,b){if(isBackTickString(S,b)){const{quasis:E}=S,{raw:k}=E[0].value;return this.skip(),o&&f(k,S),this.replace(miniWithLocation(k,S))}if(isStringWithDoubleQuotes(S)){const{value:E}=S;return this.skip(),o&&f(E,S),this.replace(miniWithLocation(E,S))}if(isWidgetFunction(S))return l&&d.push({from:S.arguments[0].start,to:S.arguments[0].end,value:S.arguments[0].raw,min:S.arguments[1]?.value??0,max:S.arguments[2]?.value??1,step:S.arguments[3]?.value}),this.replace(widgetWithLocation(S))},leave(S,b,E,k){}});const{body:g}=u;if(!g?.[g.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(a){const{expression:S}=g[g.length-1];g[g.length-1]={type:"ReturnStatement",argument:S}}let O=escodegen.generate(u);return n&&(O=`(async ()=>{${O}})()`),o?{output:O,miniLocations:c,widgets:d}:{output:O}}function isStringWithDoubleQuotes(s,e,n){return s.type!=="Literal"?!1:s.raw[0]==='"'}function isBackTickString(s,e){return s.type==="TemplateLiteral"&&e.type!=="TaggedTemplateExpression"}function miniWithLocation(s,e){const{start:n}=e;return{type:"CallExpression",callee:{type:"Identifier",name:"m"},arguments:[{type:"Literal",value:s},{type:"Literal",value:n}],optional:!1}}function isWidgetFunction(s){return s.type==="CallExpression"&&s.callee.name==="slider"}function widgetWithLocation(s){const e="slider_"+s.arguments[0].start;return s.arguments.unshift({type:"Literal",value:e,raw:e}),s.callee.name="sliderWithID",s}if(typeof DelayNode<"u"){class s extends DelayNode{constructor(n,a,o,l){super(n),a=Math.abs(a),this.delayTime.value=o;const u=n.createGain();u.gain.value=Math.min(Math.abs(l),.995),this.feedback=u.gain;const c=n.createGain();return c.gain.value=a,this.delayGain=c,this.connect(u),this.connect(c),u.connect(this),this.connect=f=>c.connect(f),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(e,n,a){return new s(this,e,n,a)}}var reverbGen={};reverbGen.generateReverb=function(s,e){for(var n=s.audioContext||new AudioContext,a=n.sampleRate,o=s.numChannels||2,l=s.decayTime*1.5,u=Math.round(s.decayTime*a),c=Math.round(l*a),f=Math.round((s.fadeInTime||0)*a),d=Math.pow(1/1e3,1/u),g=n.createBuffer(o,c,a),O=0;O<o;O++){for(var S=g.getChannelData(O),b=0;b<c;b++)S[b]=randomSample()*Math.pow(d,b);for(var b=0;b<f;b++)S[b]*=b/f}applyGradualLowpass(g,s.lpFreqStart||0,s.lpFreqEnd||0,s.decayTime,e)},reverbGen.generateGraph=function(s,e,n,a,o){var l=document.createElement("canvas");l.width=e,l.height=n;var u=l.getContext("2d");u.fillStyle="#000",u.fillRect(0,0,l.width,l.height),u.fillStyle="#fff";for(var c=e/s.length,f=n/(o-a),d=0;d<s.length;d++)u.fillRect(d*c,n-(s[d]-a)*f,1,1);return l};var applyGradualLowpass=function(s,e,n,a,o){if(e==0){o(s);return}var l=getAllChannelData(s),u=new OfflineAudioContext(s.numberOfChannels,l[0].length,s.sampleRate),c=u.createBufferSource();c.buffer=s;var f=u.createBiquadFilter();e=Math.min(e,s.sampleRate/2),n=Math.min(n,s.sampleRate/2),f.type="lowpass",f.Q.value=1e-4,f.frequency.setValueAtTime(e,0),f.frequency.linearRampToValueAtTime(n,a),c.connect(f),f.connect(u.destination),c.start(),u.oncomplete=function(d){o(d.renderedBuffer)},u.startRendering(),window.filterNode=f},getAllChannelData=function(s){for(var e=[],n=0;n<s.numberOfChannels;n++)e[n]=s.getChannelData(n);return e},randomSample=function(){return Math.random()*2-1};typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(s,e){const n=e.sampleRate*s,a=this.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let o=0;o<e.numberOfChannels;o++){let l=e.getChannelData(o),u=a.getChannelData(o);for(let c=0;c<n;c++)u[c]=l[c]||0}return a},AudioContext.prototype.createReverb=function(s,e,n,a,o){const l=this.createConvolver();return l.generate=(u=2,c=.1,f=15e3,d=1e3,g)=>{l.duration=u,l.fade=c,l.lp=f,l.dim=d,l.ir=g,g?l.buffer=this.adjustLength(u,g):reverbGen.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:f,lpFreqEnd:d},O=>{l.buffer=O})},l.generate(s,e,n,a,o),l});var vowelFormant={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]}};if(typeof GainNode<"u"){class s extends GainNode{constructor(n,a){if(super(n),!vowelFormant[a])throw new Error("vowel: unknown vowel "+a);const{gains:o,qs:l,freqs:u}=vowelFormant[a],c=n.createGain();for(let f=0;f<5;f++){const d=n.createGain();d.gain.value=o[f];const g=n.createBiquadFilter();g.type="bandpass",g.Q.value=l[f],g.frequency.value=u[f],this.connect(g),g.connect(d),d.connect(c)}return c.gain.value=8,this.connect=f=>c.connect(f),this}}AudioContext.prototype.createVowelFilter=function(e){return new s(this,e)}}let log=s=>console.log(s);const logger$1=(...s)=>log(...s),setLogger=s=>{log=s},tokenizeNote$1=s=>{if(typeof s!="string")return[];const[e,n="",a]=s.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/)?.slice(1)||[];return e?[e,n,a?Number(a):void 0]:[]},chromas$1={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$1={"#":1,b:-1,s:1,f:-1},noteToMidi=(s,e=3)=>{const[n,a,o=e]=tokenizeNote$1(s);if(!n)throw new Error('not a note: "'+s+'"');const l=chromas$1[n.toLowerCase()],u=a?.split("").reduce((c,f)=>c+accs$1[f],0)||0;return(Number(o)+1)*12+l+u},midiToFreq$1=s=>Math.pow(2,(s-69)/12)*440,clamp=(s,e,n)=>Math.min(Math.max(s,e),n),freqToMidi$1=s=>12*Math.log(s/440)/Math.LN2+69,valueToMidi=(s,e)=>{if(typeof s!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:a}=s;if(typeof n=="number")return freqToMidi$1(n);if(typeof a=="string")return noteToMidi(a);if(typeof a=="number")return a;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e};function nanFallback(s,e){return isNaN(Number(s))?(logger$1(`"${s}" is not a number, falling back to ${e}`,"warning"),e):s}const workletsUrl="data:application/javascript;base64,Ly8gTElDRU5TRSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2My4wIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGt0cjAvV2ViRGlydC9ibG9iL21haW4vTElDRU5TRQovLyBhbGwgdGhlIGNyZWRpdCBnb2VzIHRvIGRrdHIwJ3Mgd2ViZGlydDogaHR0cHM6Ly9naXRodWIuY29tL2RrdHIwL1dlYkRpcnQvYmxvYi81Y2UzZDY5ODM2MmM1NGQ2ZTFiNjhhY2M0N2ViMjk1NWFjNjJjNzkzL2Rpc3QvQXVkaW9Xb3JrbGV0cy5qcwovLyA8MwoKY2xhc3MgQ29hcnNlUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFt7IG5hbWU6ICdjb2Fyc2UnLCBkZWZhdWx0VmFsdWU6IDEgfV07CiAgfQoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgICB0aGlzLm5vdFN0YXJ0ZWQgPSB0cnVlOwogIH0KCiAgcHJvY2VzcyhpbnB1dHMsIG91dHB1dHMsIHBhcmFtZXRlcnMpIHsKICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgY29uc3Qgb3V0cHV0ID0gb3V0cHV0c1swXTsKICAgIGNvbnN0IGNvYXJzZSA9IHBhcmFtZXRlcnMuY29hcnNlOwogICAgY29uc3QgYmxvY2tTaXplID0gMTI4OwogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKGhhc0lucHV0KSB7CiAgICAgIHRoaXMubm90U3RhcnRlZCA9IGZhbHNlOwogICAgICBvdXRwdXRbMF1bMF0gPSBpbnB1dFswXVswXTsKICAgICAgZm9yIChsZXQgbiA9IDE7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICAgIGZvciAobGV0IG8gPSAwOyBvIDwgb3V0cHV0Lmxlbmd0aDsgbysrKSB7CiAgICAgICAgICBvdXRwdXRbb11bbl0gPSBuICUgY29hcnNlID09IDAgPyBpbnB1dFswXVtuXSA6IG91dHB1dFtvXVtuIC0gMV07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5ub3RTdGFydGVkIHx8IGhhc0lucHV0OwogIH0KfQoKcmVnaXN0ZXJQcm9jZXNzb3IoJ2NvYXJzZS1wcm9jZXNzb3InLCBDb2Fyc2VQcm9jZXNzb3IpOwoKY2xhc3MgQ3J1c2hQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICByZXR1cm4gW3sgbmFtZTogJ2NydXNoJywgZGVmYXVsdFZhbHVlOiAwIH1dOwogIH0KCiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgdGhpcy5ub3RTdGFydGVkID0gdHJ1ZTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CiAgICBjb25zdCBjcnVzaCA9IHBhcmFtZXRlcnMuY3J1c2g7CiAgICBjb25zdCBibG9ja1NpemUgPSAxMjg7CiAgICBjb25zdCBoYXNJbnB1dCA9ICEoaW5wdXRbMF0gPT09IHVuZGVmaW5lZCk7CiAgICBpZiAoaGFzSW5wdXQpIHsKICAgICAgdGhpcy5ub3RTdGFydGVkID0gZmFsc2U7CiAgICAgIGlmIChjcnVzaC5sZW5ndGggPT09IDEpIHsKICAgICAgICBjb25zdCB4ID0gTWF0aC5wb3coMiwgY3J1c2hbMF0gLSAxKTsKICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGJsb2NrU2l6ZTsgbisrKSB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgucm91bmQoaW5wdXRbMF1bbl0gKiB4KSAvIHg7CiAgICAgICAgICBmb3IgKGxldCBvID0gMDsgbyA8IG91dHB1dC5sZW5ndGg7IG8rKykgewogICAgICAgICAgICBvdXRwdXRbb11bbl0gPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICAgICAgbGV0IHggPSBNYXRoLnBvdygyLCBjcnVzaFtuXSAtIDEpOwogICAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLnJvdW5kKGlucHV0WzBdW25dICogeCkgLyB4OwogICAgICAgICAgZm9yIChsZXQgbyA9IDA7IG8gPCBvdXRwdXQubGVuZ3RoOyBvKyspIHsKICAgICAgICAgICAgb3V0cHV0W29dW25dID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5ub3RTdGFydGVkIHx8IGhhc0lucHV0OwogIH0KfQpyZWdpc3RlclByb2Nlc3NvcignY3J1c2gtcHJvY2Vzc29yJywgQ3J1c2hQcm9jZXNzb3IpOwoKY2xhc3MgU2hhcGVQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICByZXR1cm4gW3sgbmFtZTogJ3NoYXBlJywgZGVmYXVsdFZhbHVlOiAwIH1dOwogIH0KCiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgdGhpcy5ub3RTdGFydGVkID0gdHJ1ZTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CiAgICBjb25zdCBzaGFwZTAgPSBwYXJhbWV0ZXJzLnNoYXBlWzBdOwogICAgY29uc3Qgc2hhcGUxID0gc2hhcGUwIDwgMSA/IHNoYXBlMCA6IDEuMCAtIDRlLTEwOwogICAgY29uc3Qgc2hhcGUgPSAoMi4wICogc2hhcGUxKSAvICgxLjAgLSBzaGFwZTEpOwogICAgY29uc3QgYmxvY2tTaXplID0gMTI4OwogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKGhhc0lucHV0KSB7CiAgICAgIHRoaXMubm90U3RhcnRlZCA9IGZhbHNlOwogICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGJsb2NrU2l6ZTsgbisrKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSAoKDEgKyBzaGFwZSkgKiBpbnB1dFswXVtuXSkgLyAoMSArIHNoYXBlICogTWF0aC5hYnMoaW5wdXRbMF1bbl0pKTsKICAgICAgICBmb3IgKGxldCBvID0gMDsgbyA8IG91dHB1dC5sZW5ndGg7IG8rKykgewogICAgICAgICAgb3V0cHV0W29dW25dID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5ub3RTdGFydGVkIHx8IGhhc0lucHV0OwogIH0KfQoKcmVnaXN0ZXJQcm9jZXNzb3IoJ3NoYXBlLXByb2Nlc3NvcicsIFNoYXBlUHJvY2Vzc29yKTsK";function gainNode(s){const e=getAudioContext().createGain();return e.gain.value=s,e}const getEnvelope=(s,e,n,a,o,l)=>{const u=getAudioContext().createGain();let c=l;u.gain.setValueAtTime(0,l),c+=s,u.gain.linearRampToValueAtTime(o,c),c+=e;let f=n*o;return u.gain.linearRampToValueAtTime(f,c),{node:u,stop:d=>(c=Math.max(d,c),u.gain.setValueAtTime(f,c),c+=a,u.gain.linearRampToValueAtTime(0,c),c)}},getExpEnvelope=(s,e,n,a,o,l)=>{n=Math.max(.001,n),o=Math.max(.001,o);const u=getAudioContext().createGain();return u.gain.setValueAtTime(1e-4,l),u.gain.exponentialRampToValueAtTime(o,l+s),u.gain.exponentialRampToValueAtTime(n*o,l+s+e),{node:u,stop:c=>{u.gain.exponentialRampToValueAtTime(1e-4,c+a)}}},getADSR=(s,e,n,a,o,l,u)=>{const c=getAudioContext().createGain();return c.gain.setValueAtTime(0,l),c.gain.linearRampToValueAtTime(o,l+s),c.gain.linearRampToValueAtTime(n*o,l+s+e),c.gain.setValueAtTime(n*o,u),c.gain.linearRampToValueAtTime(0,u+a),c},getParamADSR=(s,e,n,a,o,l,u,c,f)=>{const d=u-l,g=l+d,O=l+a*d;s.setValueAtTime(l,c),s.linearRampToValueAtTime(g,c+e),s.linearRampToValueAtTime(O,c+e+n),s.setValueAtTime(O,f),s.linearRampToValueAtTime(l,f+Math.max(o,.1))};function getCompressor(s,e,n,a,o,l){const u={threshold:e??-3,ratio:n??10,knee:a??10,attack:o??.005,release:l??.05};return new DynamicsCompressorNode(s,u)}function createFilter(s,e,n,a,o,l,u,c,f,d,g,O=.5){const S=s.createBiquadFilter();if(S.type=e,S.Q.value=a,S.frequency.value=n,!isNaN(f)&&f!==0){const b=f*O,E=clamp(2**-b*n,0,2e4),k=clamp(2**(f-b)*n,0,2e4);return getParamADSR(S.frequency,o,l,u,c,E,k,d,g),S}return S}let wetfade=s=>s<.5?1:1-(s-.5)/.5;function drywet(s,e,n=0){const a=getAudioContext();if(!n)return s;let o=a.createGain(),l=a.createGain();s.connect(o),e.connect(l),o.gain.value=wetfade(n),l.gain.value=wetfade(1-n);let u=a.createGain();return o.connect(u),l.connect(u),u}let listenerQueue=[],atom=(s,e)=>{let n,a=[],o={lc:0,l:e||0,value:s,set(l){o.value=l,o.notify()},get(){return o.lc||o.listen(()=>{})(),o.value},notify(l){n=a;let u=!listenerQueue.length;for(let c=0;c<n.length;c+=2)listenerQueue.push(n[c],o.value,l,n[c+1]);if(u){for(let c=0;c<listenerQueue.length;c+=4){let f=!1;for(let d=c+7;d<listenerQueue.length;d+=4)if(listenerQueue[d]<listenerQueue[c+3]){f=!0;break}f?listenerQueue.push(listenerQueue[c],listenerQueue[c+1],listenerQueue[c+2],listenerQueue[c+3]):listenerQueue[c](listenerQueue[c+1],listenerQueue[c+2])}listenerQueue.length=0}},listen(l,u){return a===n&&(a=a.slice()),o.lc=a.push(l,u||o.l)/2,()=>{a===n&&(a=a.slice());let c=a.indexOf(l);~c&&(a.splice(c,2),o.lc--,o.lc||o.off())}},subscribe(l,u){let c=o.listen(l,u);return l(o.value),c},off(){}};return o},map=(s={})=>{let e=atom(s);return e.setKey=function(n,a){typeof a>"u"?n in e.value&&(e.value={...e.value},delete e.value[n],e.notify(n)):e.value[n]!==a&&(e.value={...e.value,[n]:a},e.notify(n))},e};const bufferCache$1={},loadCache$1={},getCachedBuffer=s=>bufferCache$1[s];function humanFileSize(s,e){var n=e?1e3:1024;if(s<n)return s+" B";var a=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],o=-1;do s/=n,++o;while(s>=n);return s.toFixed(1)+" "+a[o]}const getSampleBufferSource=async(s,e,n,a,o,l,u)=>{let c=0;o!==void 0&&n!==void 0&&logger$1("[sampler] hap has note and freq. ignoring note","warning");let f=valueToMidi({freq:o,note:n},36);c=f-36;const d=getAudioContext();let g;if(Array.isArray(l))e=nanFallback(e,0),g=l[e%l.length];else{const E=$=>noteToMidi($)-f,k=Object.keys(l).filter($=>!$.startsWith("_")).reduce(($,R,Z)=>!$||Math.abs(E(R))<Math.abs(E($))?R:$,null);c=-E(k),g=l[k][e%l[k].length]}u&&(g=await u(g));let O=await loadBuffer(g,d,s,e);a<0&&(O=reverseBuffer(O));const S=d.createBufferSource();S.buffer=O;const b=1*Math.pow(2,c/12);return S.playbackRate.value=b,S},loadBuffer=(s,e,n,a=0)=>{const o=n?`sound "${n}:${a}"`:"sample";if(s=s.replace("#","%23"),!loadCache$1[s]){logger$1(`[sampler] load ${o}..`,"load-sample",{url:s});const l=Date.now();loadCache$1[s]=fetch(s).then(u=>u.arrayBuffer()).then(async u=>{const c=Date.now()-l,f=humanFileSize(u.byteLength);logger$1(`[sampler] load ${o}... done! loaded ${f} in ${c}ms`,"loaded-sample",{url:s});const d=await e.decodeAudioData(u);return bufferCache$1[s]=d,d})}return loadCache$1[s]};function reverseBuffer(s){const e=getAudioContext(),n=e.createBuffer(s.numberOfChannels,s.length,e.sampleRate);for(let a=0;a<s.numberOfChannels;a++)n.copyToChannel(s.getChannelData(a).slice().reverse(),a,a);return n}const getLoadedBuffer=s=>bufferCache$1[s],processSampleMap=(s,e,n=s._base||"")=>Object.entries(s).forEach(([a,o])=>{if(typeof o=="string"&&(o=[o]),typeof o!="object")throw new Error("wrong sample map format for "+a);n=o._base||n;const l=u=>(n+u).replace("github:","https://raw.githubusercontent.com/");Array.isArray(o)?o=o.map(l):o=Object.fromEntries(Object.entries(o).map(([u,c])=>[u,(typeof c=="string"?[c]:c).map(l)])),e(a,o)});let resourcePrefixHandlers={};function registerSamplesPrefix(s,e){resourcePrefixHandlers[s]=e}function getSamplesPrefixHandler(s){const e=Object.entries(resourcePrefixHandlers).find(([n])=>s.startsWith(n));if(e)return e[1]}const samples=async(s,e=s._base||"",n={})=>{if(typeof s=="string"){const l=getSamplesPrefixHandler(s);if(l)return l(s);if(s.startsWith("bubo:")){const[c,f]=s.split(":");s=`github:Bubobubobubobubo/dough-${f}`}if(s.startsWith("github:")){let[c,f]=s.split("github:");f=f.endsWith("/")?f.slice(0,-1):f,f.split("/").length===2&&(f+="/main"),s=`https://raw.githubusercontent.com/${f}/strudel.json`}if(s.startsWith("shabda:")){let[c,f]=s.split("shabda:");s=`https://shabda.ndre.gr/${f}.json?strudel=1`}if(s.startsWith("shabda/speech")){let[c,f]=s.split("shabda/speech");f=f.startsWith("/")?f.substring(1):f;let[d,g]=f.split(":"),O="f",S="en-GB";d&&([S,O]=d.split("/")),s=`https://shabda.ndre.gr/speech/${g}.json?gender=${O}&language=${S}&strudel=1'`}if(typeof fetch!="function")return;const u=s.split("/").slice(0,-1).join("/");return typeof fetch>"u"?void 0:fetch(s).then(c=>c.json()).then(c=>samples(c,e||c._base||u,n)).catch(c=>{throw console.error(c),new Error(`error loading "${s}"`)})}const{prebake:a,tag:o}=n;processSampleMap(s,(l,u)=>registerSound(l,(c,f,d)=>onTriggerSample(c,f,d,u),{type:"sample",samples:u,baseUrl:e,prebake:a,tag:o}),e)},cutGroups=[];async function onTriggerSample(s,e,n,a,o){let{s:l,freq:u,unit:c,nudge:f=0,cut:d,loop:g,clip:O=void 0,n:S=0,note:b,speed:E=1,loopBegin:k=0,begin:$=0,loopEnd:R=1,end:Z=1,vib:he,vibmod:j=.5}=e;if(E===0)return;g=l.startsWith("wt_")?1:e.loop;const K=getAudioContext(),{attack:se=.001,decay:de=.001,sustain:ue=1,release:me=.001}=e,ge=s+f,Oe=await getSampleBufferSource(l,S,b,E,u,a,o);let be;if(he>0){be=getAudioContext().createOscillator(),be.frequency.value=he;const Ie=getAudioContext().createGain();Ie.gain.value=j*100,be.connect(Ie),Ie.connect(Oe.detune),be.start(0)}if(K.currentTime>s){logger$1(`[sampler] still loading sound "${l}:${S}"`,"highlight");return}if(!Oe){logger$1(`[sampler] could not load "${l}:${S}"`,"error");return}Oe.playbackRate.value=Math.abs(E)*Oe.playbackRate.value,c==="c"&&(Oe.playbackRate.value=Oe.playbackRate.value*Oe.buffer.duration*1);const Ae=$*Oe.buffer.duration;g&&(Oe.loop=!0,Oe.loopStart=k*Oe.buffer.duration-Ae,Oe.loopEnd=R*Oe.buffer.duration-Ae),Oe.start(ge,Ae);const{node:Ne,stop:Re}=getEnvelope(se,de,ue,me,1,s);Oe.connect(Ne);const Fe=K.createGain();Ne.connect(Fe),Oe.onended=function(){Oe.disconnect(),be?.stop(),Ne.disconnect(),Fe.disconnect(),n()};const $e={node:Fe,bufferSource:Oe,stop:(Ie,Xe=O===void 0&&g===void 0)=>{let Pe=Ie;if(Xe){const At=Oe.buffer.duration/Oe.playbackRate.value;Pe=s+(Z-$)*At}const nt=Re(Pe);Oe.stop(nt)}};if(d!==void 0){const Ie=cutGroups[d];Ie&&(Ie.node.gain.setValueAtTime(1,ge),Ie.node.gain.linearRampToValueAtTime(0,ge+.01)),cutGroups[d]=$e}return $e}const soundMap=map();function registerSound(s,e,n={}){soundMap.setKey(s,{onTrigger:e,data:n})}function getSound(s){return soundMap.get()[s]}const resetLoadedSounds=()=>soundMap.set({});let audioContext;const getAudioContext=()=>{if(!audioContext){audioContext=new AudioContext;const s=audioContext.destination.maxChannelCount;audioContext.destination.channelCount=s}return audioContext};let workletsLoading;function loadWorklets(){return workletsLoading||(workletsLoading=getAudioContext().audioWorklet.addModule(workletsUrl),workletsLoading)}function getWorklet(s,e,n){const a=new AudioWorkletNode(s,e);return Object.entries(n).forEach(([o,l])=>{a.parameters.get(o).value=l}),a}async function initAudio(s={}){const{disableWorklets:e=!1}=s;typeof window<"u"&&(await getAudioContext().resume(),e?console.log("disableWorklets: AudioWorklet effects coarse, crush and shape are skipped!"):await loadWorklets().catch(n=>{console.warn("could not load AudioWorklet effects coarse, crush and shape",n)}))}async function initAudioOnFirstClick(s){return new Promise(e=>{document.addEventListener("click",async function n(){await initAudio(s),e(),document.removeEventListener("click",n)})})}let delays={},channelMerger,destinationGain;const connectToDestination=(s,e=[0,1])=>{const n=getAudioContext();channelMerger==null&&(channelMerger=new ChannelMergerNode(n,{numberOfInputs:n.destination.channelCount}),destinationGain=new GainNode(n),channelMerger.connect(destinationGain),destinationGain.connect(n.destination));const a=new StereoPannerNode(n);s.connect(a);const o=new ChannelSplitterNode(n,{numberOfOutputs:a.channelCount});a.connect(o),e.forEach((l,u)=>{o.connect(channelMerger,u%a.channelCount,clamp(l,0,n.destination.channelCount-1))})},panic=()=>{destinationGain!=null&&(destinationGain.gain.linearRampToValueAtTime(0,getAudioContext().currentTime+.01),destinationGain=null)};function getDelay(s,e,n,a){if(n=clamp(n,0,.98),!delays[s]){const l=getAudioContext().createFeedbackDelay(1,e,n);l.start?.(a),connectToDestination(l,[0,1]),delays[s]=l}return delays[s].delayTime.value!==e&&delays[s].delayTime.setValueAtTime(e,a),delays[s].feedback.value!==n&&delays[s].feedback.setValueAtTime(n,a),delays[s]}const phaserLFOs={};function getPhaser(s,e,n=1,a=.5,o=1e3,l=2e3){const u=getAudioContext(),c=u.createGain();c.gain.value=l,phaserLFOs[s]==null&&(phaserLFOs[s]=u.createOscillator(),phaserLFOs[s].frequency.value=n,phaserLFOs[s].type="sine",phaserLFOs[s].start()),phaserLFOs[s].connect(c),phaserLFOs[s].frequency.value!=n&&phaserLFOs[s].frequency.setValueAtTime(n,e);const f=2;let d=0;const g=[];for(let O=0;O<f;O++){const S=u.createBiquadFilter();S.type="notch",S.gain.value=1,S.frequency.value=o+d,S.Q.value=2-Math.min(Math.max(a*2,0),1.9),c.connect(S.detune),d+=282,O>0&&g[O-1].connect(S),g.push(S)}return g[g.length-1]}let reverbs={},hasChanged=(s,e)=>s!==void 0&&s!==e;function getReverb(s,e,n,a,o,l){if(!reverbs[s]){const c=getAudioContext().createReverb(e,n,a,o,l);connectToDestination(c,[0,1]),reverbs[s]=c}return(hasChanged(e,reverbs[s].duration)||hasChanged(n,reverbs[s].fade)||hasChanged(a,reverbs[s].lp)||hasChanged(o,reverbs[s].dim)||reverbs[s].ir!==l)&&reverbs[s].generate(e,n,a,o,l),reverbs[s]}let analyser,analyserData;function getAnalyser(s=2048){if(!analyser){const e=getAudioContext().createAnalyser();e.fftSize=s,analyser=e,analyserData=new Float32Array(analyser.frequencyBinCount)}return analyser.fftSize!==s&&(analyser.fftSize=s,analyserData=new Float32Array(analyser.frequencyBinCount)),analyser}function getAnalyzerData(s="time"){const e={time:()=>analyser?.getFloatTimeDomainData(analyserData),frequency:()=>analyser?.getFloatFrequencyData(analyserData)}[s];if(!e)throw new Error(`getAnalyzerData: ${s} not supported. use one of ${Object.keys(e).join(", ")}`);return e(),analyserData}function effectSend(s,e,n){const a=gainNode(n);return s.connect(a),a.connect(e),a}const superdough=async(s,e,n)=>{const a=getAudioContext();if(typeof s!="object")throw new Error(`expected hap.value to be an object, but got "${s}". Hint: append .note() or .s() to the end`,"error");s.duration=n;let o=a.currentTime+e,{s:l="triangle",bank:u,source:c,gain:f=.8,postgain:d=1,density:g=.03,ftype:O="12db",fanchor:S=.5,cutoff:b,lpenv:E,lpattack:k=.01,lpdecay:$=.01,lpsustain:R=1,lprelease:Z=.01,resonance:he=1,hpenv:j,hcutoff:K,hpattack:se=.01,hpdecay:de=.01,hpsustain:ue=1,hprelease:me=.01,hresonance:ge=1,bpenv:Oe,bandf:be,bpattack:Ae=.01,bpdecay:Ne=.01,bpsustain:Re=1,bprelease:Fe=.01,bandq:Ue=1,channels:$e=[1,2],phaser:Ie,phaserdepth:Xe=.75,phasersweep:Pe,phasercenter:nt,coarse:At,crush:Dt,shape:qe,pan:at,vowel:xe,delay:Et=0,delayfeedback:Ft=.5,delaytime:ot=.25,orbit:st=1,room:Xt,roomfade:ht,roomlp:Tt,roomdim:dt,roomsize:Kt,ir:Ct,i:Ht=0,velocity:Yt=1,analyze:It,fft:Qt=8,compressor:Bt,compressorRatio:ei,compressorKnee:Ye,compressorAttack:_t,compressorRelease:Le}=s;f=nanFallback(f,1),$e=(Array.isArray($e)?$e:[$e]).map(Je=>Je-1),f*=Yt;let ut=[];const Ot=()=>{ut.forEach(Je=>Je?.disconnect())};u&&l&&(l=`${u}_${l}`);let vt;if(c)vt=c(o,s,n);else if(getSound(l)){const{onTrigger:Je}=getSound(l),Ke=await Je(o,s,Ot);Ke&&(vt=Ke.node,Ke.stop(o+n))}else throw new Error(`sound ${l} not found! Is it loaded?`);if(!vt)return;if(a.currentTime>o){logger$1("[webaudio] skip hap: still loading",a.currentTime-o);return}const pt=[];if(pt.push(vt),pt.push(gainNode(f)),b!==void 0){let Je=()=>createFilter(a,"lowpass",b,he,k,$,R,Z,E,o,o+n,S);pt.push(Je()),O==="24db"&&pt.push(Je())}if(K!==void 0){let Je=()=>createFilter(a,"highpass",K,ge,se,de,ue,me,j,o,o+n,S);pt.push(Je()),O==="24db"&&pt.push(Je())}if(be!==void 0){let Je=()=>createFilter(a,"bandpass",be,Ue,Ae,Ne,Re,Fe,Oe,o,o+n,S);pt.push(Je()),O==="24db"&&pt.push(Je())}if(xe!==void 0){const Je=a.createVowelFilter(xe);pt.push(Je)}if(At!==void 0&&pt.push(getWorklet(a,"coarse-processor",{coarse:At})),Dt!==void 0&&pt.push(getWorklet(a,"crush-processor",{crush:Dt})),qe!==void 0&&pt.push(getWorklet(a,"shape-processor",{shape:qe})),Bt!==void 0&&pt.push(getCompressor(a,Bt,ei,Ye,_t,Le)),at!==void 0){const Je=a.createStereoPanner();Je.pan.value=2*at-1,pt.push(Je)}if(Ie!==void 0&&Xe>0){const Je=getPhaser(st,o,Ie,Xe,nt,Pe);pt.push(Je)}const et=new GainNode(a,{gain:d});pt.push(et),connectToDestination(et,$e);let ti;if(Et>0&&ot>0&&Ft>0){const Je=getDelay(st,ot,Ft,o);ti=effectSend(et,Je,Et)}let jt;if(Xt>0){let Je;if(Ct!==void 0){let ze,We=getSound(Ct);Array.isArray(We)?ze=We.data.samples[Ht%We.data.samples.length]:typeof We=="object"&&(ze=Object.values(We.data.samples).flat()[Ht%Object.values(We.data.samples).length]),Je=await loadBuffer(ze,a,Ct,0)}const Ke=getReverb(st,Kt,ht,Tt,dt,Je);jt=effectSend(et,Ke,Xt)}let yt;if(It){const Je=getAnalyser(2**(Qt+5));yt=effectSend(et,Je,It)}pt.slice(1).reduce((Je,Ke)=>Je.connect(Ke),pt[0]),ut=pt.concat([ti,jt,yt])},superdoughTrigger=(s,e,n,a)=>superdough(e,s-n,e.duration/a);let noiseCache={};function getNoiseBuffer(s,e){const n=getAudioContext();if(noiseCache[s])return noiseCache[s];const a=2*n.sampleRate,o=n.createBuffer(1,a,n.sampleRate),l=o.getChannelData(0);let u=0,c,f,d,g,O,S,b;c=f=d=g=O=S=b=0;for(let E=0;E<a;E++)if(s==="white")l[E]=Math.random()*2-1;else if(s==="brown"){let k=Math.random()*2-1;l[E]=(u+.02*k)/1.02,u=l[E]}else if(s==="pink"){let k=Math.random()*2-1;c=.99886*c+k*.0555179,f=.99332*f+k*.0750759,d=.969*d+k*.153852,g=.8665*g+k*.3104856,O=.55*O+k*.5329522,S=-.7616*S-k*.016898,l[E]=c+f+d+g+O+S+b+k*.5362,l[E]*=.11,b=k*.115926}else if(s==="crackle"){const k=e*.01;Math.random()<k?l[E]=Math.random()*2-1:l[E]=0}return s!=="crackle"&&(noiseCache[s]=o),o}function getNoiseOscillator(s="white",e,n=.02){const o=getAudioContext().createBufferSource();return o.buffer=getNoiseBuffer(s,n),o.loop=!0,o.start(e),{node:o,stop:l=>o.stop(l)}}function getNoiseMix(s,e,n){const a=getNoiseOscillator("pink",n);return{node:drywet(s,a.node,e),stop:l=>a?.stop(l)}}const mod$1=(s,e=1,n="sine")=>{const a=getAudioContext(),o=a.createOscillator();o.type=n,o.frequency.value=s,o.start();const l=new GainNode(a,{gain:e});return o.connect(l),{node:l,stop:u=>o.stop(u)}},fm=(s,e,n,a="sine")=>{const l=s.frequency.value*e,u=l*n;return mod$1(l,u,a)},waveforms=["sine","square","triangle","sawtooth"],noises=["pink","white","brown","crackle"];function registerSynthSounds(){[...waveforms,...noises].forEach(s=>{registerSound(s,(e,n,a)=>{let{attack:o=.001,decay:l=.05,sustain:u=.6,release:c=.01}=n,f;if(waveforms.includes(s))f=getOscillator(s,e,n);else{let{density:k}=n;f=getNoiseOscillator(s,e,k)}let{node:d,stop:g,triggerRelease:O}=f;const S=gainNode(.3),{node:b,stop:E}=getEnvelope(o,l,u,c,1,e);return d.onended=()=>{d.disconnect(),S.disconnect(),a()},{node:d.connect(S).connect(b),stop:k=>{const $=E(k);O?.(k),g($)}}},{type:"synth",prebake:!0})})}function waveformN(s,e){const n=new Float32Array(s+1),a=new Float32Array(s+1),o=getAudioContext(),l=o.createOscillator(),u={sawtooth:d=>[0,-1/d],square:d=>[0,d%2===0?0:1/d],triangle:d=>[d%2===0?0:1/(d*d),0]};if(!u[e])throw new Error(`unknown wave type ${e}`);n[0]=0,a[0]=0;let c=1;for(;c<=s;){const[d,g]=u[e](c);n[c]=d,a[c]=g,c++}const f=o.createPeriodicWave(n,a);return l.setPeriodicWave(f),l}function getOscillator(s,e,{n,note:a,freq:o,vib:l=0,vibmod:u=.5,noise:c=0,fmh:f=1,fmi:d,fmenv:g="lin",fmattack:O,fmdecay:S,fmsustain:b,fmrelease:E,fmvelocity:k,fmwave:$="sine"}){getAudioContext();let R;!n||s==="sine"?(R=getAudioContext().createOscillator(),R.type=s||"triangle"):R=waveformN(n,s),a=a||36,typeof a=="string"&&(a=noteToMidi(a)),!o&&typeof a=="number"&&(o=midiToFreq$1(a)),R.frequency.value=Number(o),R.start(e);let Z,he;if(d){const{node:se,stop:de}=fm(R,f,d,$);[O,S,b,E,k].find(ue=>ue!==void 0)?(O=O??.001,S=S??.001,b=b??1,E=E??.001,k=k??1,he=getEnvelope(O,S,b,E,k,e),g==="exp"&&(he=getExpEnvelope(O,S,b,E,k,e),he.node.maxValue=d*2,he.node.minValue=1e-5),se.connect(he.node),he.node.connect(R.frequency)):se.connect(R.frequency),Z=de}let j;if(l>0){j=getAudioContext().createOscillator(),j.frequency.value=l;const se=getAudioContext().createGain();se.gain.value=u*100,j.connect(se),se.connect(R.detune),j.start(e)}let K;return c&&(K=getNoiseMix(R,c,e)),{node:K?.node||R,stop:se=>{j?.stop(se),K?.stop(se),Z?.(se),R.stop(se)},triggerRelease:se=>{he?.stop(se)}}}function buildSamples(s=1,e=.05,n=220,a=0,o=0,l=.1,u=0,c=1,f=0,d=0,g=0,O=0,S=0,b=0,E=0,k=0,$=0,R=1,Z=0,he=0){let j=Math.PI*2,K=getAudioContext().sampleRate,se=Ie=>Ie>0?1:-1,de=f*=500*j/K/K,ue=n*=(1+e*2*Math.random()-e)*j/K,me=[],ge=0,Oe=0,be=0,Ae=1,Ne=0,Re=0,Fe=0,Ue,$e;for(a=a*K+9,Z*=K,o*=K,l*=K,$*=K,d*=500*j/K**3,E*=j/K,g*=j/K,O*=K,S=S*K|0,$e=a+Z+o+l+$|0;be<$e;me[be++]=Fe)++Re%(k*100|0)||(Fe=u?u>1?u>2?u>3?Math.sin((ge%j)**3):Math.max(Math.min(Math.tan(ge),1),-1):1-(2*ge/j%2+2)%2:1-4*Math.abs(Math.round(ge/j)-ge/j):Math.sin(ge),Fe=(S?1-he+he*Math.sin(j*be/S):1)*se(Fe)*Math.abs(Fe)**c*s*1*(be<a?be/a:be<a+Z?1-(be-a)/Z*(1-R):be<a+Z+o?R:be<$e-$?($e-be-$)/l*R:0),Fe=$?Fe/2+($>be?0:(be<$e-$?1:($e-be)/$)*me[be-$|0]/2):Fe),Ue=(n+=f+=d)*Math.cos(E*Oe++),ge+=Ue-Ue*b*(1-(Math.sin(be)+1)*1e9%2),Ae&&++Ae>O&&(n+=g,ue+=g,Ae=0),S&&!(++Ne%S)&&(n=ue,f=de,Ae||=1);return me}const getZZFX=(s,e)=>{let{s:n,note:a=36,freq:o,zrand:l=0,attack:u=0,decay:c=0,sustain:f=.8,release:d=.1,curve:g=1,slide:O=0,deltaSlide:S=0,pitchJump:b=0,pitchJumpTime:E=0,lfo:k=0,znoise:$=0,zmod:R=0,zcrush:Z=0,zdelay:he=0,tremolo:j=0,duration:K=.2,zzfx:se}=s;const de=Math.max(K-u-c,0);typeof a=="string"&&(a=noteToMidi(a)),!o&&typeof a=="number"&&(o=midiToFreq$1(a)),n=n.replace("z_","");const ue=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;g=n==="square"?0:g;const ge=buildSamples(...se||[.25,l,o,u,de,d,ue,g,O,S,b,E,k,$,R,Z,he,f,c,j]),Oe=getAudioContext(),be=Oe.createBuffer(1,ge.length,Oe.sampleRate);be.getChannelData(0).set(ge);const Ae=getAudioContext().createBufferSource();return Ae.buffer=be,Ae.start(e),{node:Ae}};function registerZZFXSounds(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(s=>{registerSound(s,(e,n,a)=>{const{node:o}=getZZFX({s,...n},e);return o.onended=()=>{o.disconnect(),a()},{node:o,stop:()=>{}}},{type:"synth",prebake:!0})})}let worklet;async function dspWorklet(s,e){const n=`dsp-worklet-${Date.now()}`,a=`${e}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,l=`data:text/javascript;base64,${btoa(a)}`;await s.audioWorklet.addModule(l);const u=new AudioWorkletNode(s,n);return{node:u,stop:()=>u.port.postMessage("stop")}}const stop=()=>{worklet&&(worklet?.stop(),worklet?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",s=>{s.data==="strudel-stop"?stop():s.data?.dough&&worklet?.node.port.postMessage(s.data)});const dough=async s=>{const e=getAudioContext();stop(),worklet=await dspWorklet(e,s),worklet.node.connect(e.destination)};function doughTrigger(s,e,n,a,o){window.postMessage({time:s,dough:e.value,currentTime:n,duration:a,cps:o})}const{Pattern,logger}=core;setLogger(logger);const hap2value=s=>(s.ensureObjectValue(),{...s.value,velocity:s.context.velocity}),webaudioOutputTrigger=(s,e,n,a)=>superdough(hap2value(e),s-n,e.duration/a),webaudioOutput=(s,e,n)=>superdough(hap2value(s),e,n);Pattern.prototype.webaudio=function(){return this.onTrigger(webaudioOutputTrigger)};function webaudioScheduler(s={}){s={getTime:()=>getAudioContext().currentTime,defaultOutput:webaudioOutput,...s};const{defaultOutput:e,getTime:n}=s;return new Cyclist({...s,onTrigger:getTrigger({defaultOutput:e,getTime:n})})}Pattern.prototype.dough=function(){return this.onTrigger(doughTrigger,1)};function drawTimeScope(s,{align:e=!0,color:n="white",thickness:a=3,scale:o=.25,pos:l=.75,trigger:u=0}={}){const c=getDrawContext(),f=getAnalyzerData("time");c.lineWidth=a,c.strokeStyle=n,c.beginPath();let d=c.canvas;const g=s.frequencyBinCount;let O=e?Array.from(f).findIndex((E,k,$)=>k&&$[k-1]>-u&&E<=-u):0;O=Math.max(O,0);const S=d.width*1/g;let b=0;for(let E=O;E<g;E++){const k=f[E]+1,$=(l-o*(k-1))*d.height;E===0?c.moveTo(b,$):c.lineTo(b,$),b+=S}c.stroke()}function drawFrequencyScope(s,{color:e="white",scale:n=.25,pos:a=.75,lean:o=.5,min:l=-150,max:u=0}={}){const c=getAnalyzerData("frequency"),f=getDrawContext(),d=f.canvas;f.fillStyle=e;const g=s.frequencyBinCount,O=d.width*1/g;let S=0;for(let b=0;b<g;b++){const k=clamp$1((c[b]-l)/(u-l),0,1)*n,$=k*d.height,R=(a-k*o)*d.height;f.fillRect(S,R,Math.max(O,1),$),S+=O}}function clearScreen(s=0,e="0,0,0"){const n=getDrawContext();s?(n.fillStyle=`rgba(${e},${1-s})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}Pattern$1.prototype.fscope=function(s={}){return this.analyze(1).draw(()=>{clearScreen(s.smear),analyser&&drawFrequencyScope(analyser,s)})},Pattern$1.prototype.tscope=function(s={}){return this.analyze(1).draw(()=>{clearScreen(s.smear),analyser&&drawTimeScope(analyser,s)})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;const index$8=Object.freeze(Object.defineProperty({__proto__:null,get analyser(){return analyser},get analyserData(){return analyserData},connectToDestination,createFilter,dough,doughTrigger,drawFrequencyScope,drawTimeScope,drywet,dspWorklet,gainNode,getADSR,getAnalyser,getAnalyzerData,getAudioContext,getCachedBuffer,getCompressor,getEnvelope,getExpEnvelope,getLoadedBuffer,getOscillator,getParamADSR,getSampleBufferSource,getSound,getZZFX,initAudio,initAudioOnFirstClick,loadBuffer,logger:logger$1,onTriggerSample,panic,processSampleMap,registerSamplesPrefix,registerSound,registerSynthSounds,registerZZFXSounds,resetLoadedSounds,reverseBuffer,samples,setLogger,soundMap,superdough,superdoughTrigger,waveformN,webaudioOutput,webaudioOutputTrigger,webaudioScheduler},Symbol.toStringTag,{value:"Module"}));class Text{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,a){let o=[];return this.decompose(0,e,o,2),a.length&&a.decompose(0,a.length,o,3),this.decompose(n,this.length,o,1),TextNode.from(o,this.length-(n-e)+a.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){let a=[];return this.decompose(e,n,a,0),TextNode.from(a,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),a=this.length-this.scanIdentical(e,-1),o=new RawTextCursor(this),l=new RawTextCursor(e);for(let u=n,c=n;;){if(o.next(u),l.next(u),u=0,o.lineBreak!=l.lineBreak||o.done!=l.done||o.value!=l.value)return!1;if(c+=o.value.length,o.done||c>=a)return!0}}iter(e=1){return new RawTextCursor(this,e)}iterRange(e,n=this.length){return new PartialTextCursor(this,e,n)}iterLines(e,n){let a;if(e==null)a=this.iter();else{n==null&&(n=this.lines+1);let o=this.line(e).from;a=this.iterRange(o,Math.max(o,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new LineCursor(a)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Text.empty:e.length<=32?new TextLeaf(e):TextNode.from(TextLeaf.split(e,[]))}}class TextLeaf extends Text{constructor(e,n=textLength(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,a,o){for(let l=0;;l++){let u=this.text[l],c=o+u.length;if((n?a:c)>=e)return new Line(o,c,a,u);o=c+1,a++}}decompose(e,n,a,o){let l=e<=0&&n>=this.length?this:new TextLeaf(sliceText(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(o&1){let u=a.pop(),c=appendText(l.text,u.text.slice(),0,l.length);if(c.length<=32)a.push(new TextLeaf(c,u.length+l.length));else{let f=c.length>>1;a.push(new TextLeaf(c.slice(0,f)),new TextLeaf(c.slice(f)))}}else a.push(l)}replace(e,n,a){if(!(a instanceof TextLeaf))return super.replace(e,n,a);let o=appendText(this.text,appendText(a.text,sliceText(this.text,0,e)),n),l=this.length+a.length-(n-e);return o.length<=32?new TextLeaf(o,l):TextNode.from(TextLeaf.split(o,[]),l)}sliceString(e,n=this.length,a=`
`){let o="";for(let l=0,u=0;l<=n&&u<this.text.length;u++){let c=this.text[u],f=l+c.length;l>e&&u&&(o+=a),e<f&&n>l&&(o+=c.slice(Math.max(0,e-l),n-l)),l=f+1}return o}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let a=[],o=-1;for(let l of e)a.push(l),o+=l.length+1,a.length==32&&(n.push(new TextLeaf(a,o)),a=[],o=-1);return o>-1&&n.push(new TextLeaf(a,o)),n}}class TextNode extends Text{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let a of e)this.lines+=a.lines}lineInner(e,n,a,o){for(let l=0;;l++){let u=this.children[l],c=o+u.length,f=a+u.lines-1;if((n?f:c)>=e)return u.lineInner(e,n,a,o);o=c+1,a=f+1}}decompose(e,n,a,o){for(let l=0,u=0;u<=n&&l<this.children.length;l++){let c=this.children[l],f=u+c.length;if(e<=f&&n>=u){let d=o&((u<=e?1:0)|(f>=n?2:0));u>=e&&f<=n&&!d?a.push(c):c.decompose(e-u,n-u,a,d)}u=f+1}}replace(e,n,a){if(a.lines<this.lines)for(let o=0,l=0;o<this.children.length;o++){let u=this.children[o],c=l+u.length;if(e>=l&&n<=c){let f=u.replace(e-l,n-l,a),d=this.lines-u.lines+f.lines;if(f.lines<d>>5-1&&f.lines>d>>5+1){let g=this.children.slice();return g[o]=f,new TextNode(g,this.length-(n-e)+a.length)}return super.replace(l,c,f)}l=c+1}return super.replace(e,n,a)}sliceString(e,n=this.length,a=`
`){let o="";for(let l=0,u=0;l<this.children.length&&u<=n;l++){let c=this.children[l],f=u+c.length;u>e&&l&&(o+=a),e<f&&n>u&&(o+=c.sliceString(e-u,n-u,a)),u=f+1}return o}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof TextNode))return 0;let a=0,[o,l,u,c]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=n,l+=n){if(o==u||l==c)return a;let f=this.children[o],d=e.children[l];if(f!=d)return a+f.scanIdentical(d,n);a+=f.length+1}}static from(e,n=e.reduce((a,o)=>a+o.length+1,-1)){let a=0;for(let b of e)a+=b.lines;if(a<32){let b=[];for(let E of e)E.flatten(b);return new TextLeaf(b,n)}let o=Math.max(32,a>>5),l=o<<1,u=o>>1,c=[],f=0,d=-1,g=[];function O(b){let E;if(b.lines>l&&b instanceof TextNode)for(let k of b.children)O(k);else b.lines>u&&(f>u||!f)?(S(),c.push(b)):b instanceof TextLeaf&&f&&(E=g[g.length-1])instanceof TextLeaf&&b.lines+E.lines<=32?(f+=b.lines,d+=b.length+1,g[g.length-1]=new TextLeaf(E.text.concat(b.text),E.length+1+b.length)):(f+b.lines>o&&S(),f+=b.lines,d+=b.length+1,g.push(b))}function S(){f!=0&&(c.push(g.length==1?g[0]:TextNode.from(g,d)),d=-1,f=g.length=0)}for(let b of e)O(b);return S(),c.length==1?c[0]:new TextNode(c,n)}}Text.empty=new TextLeaf([""],0);function textLength(s){let e=-1;for(let n of s)e+=n.length+1;return e}function appendText(s,e,n=0,a=1e9){for(let o=0,l=0,u=!0;l<s.length&&o<=a;l++){let c=s[l],f=o+c.length;f>=n&&(f>a&&(c=c.slice(0,a-o)),o<n&&(c=c.slice(n-o)),u?(e[e.length-1]+=c,u=!1):e.push(c)),o=f+1}return e}function sliceText(s,e,n){return appendText(s,[""],e,n)}class RawTextCursor{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof TextLeaf?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,o=this.nodes[a],l=this.offsets[a],u=l>>1,c=o instanceof TextLeaf?o.text.length:o.children.length;if(u==(n>0?c:0)){if(a==0)return this.done=!0,this.value="",this;n>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(n>0?0:1)){if(this.offsets[a]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(o instanceof TextLeaf){let f=o.text[u+(n<0?-1:0)];if(this.offsets[a]+=n,f.length>Math.max(0,e))return this.value=e==0?f:n>0?f.slice(e):f.slice(0,f.length-e),this;e-=f.length}else{let f=o.children[u+(n<0?-1:0)];e>f.length?(e-=f.length,this.offsets[a]+=n):(n<0&&this.offsets[a]--,this.nodes.push(f),this.offsets.push(n>0?1:(f instanceof TextLeaf?f.text.length:f.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class PartialTextCursor{constructor(e,n,a){this.value="",this.done=!1,this.cursor=new RawTextCursor(e,n>a?-1:1),this.pos=n>a?e.length:0,this.from=Math.min(n,a),this.to=Math.max(n,a)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let a=n<0?this.pos-this.from:this.to-this.pos;e>a&&(e=a),a-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*n,this.value=o.length<=a?o:n<0?o.slice(o.length-a):o.slice(0,a),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:a,value:o}=this.inner.next(e);return n?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(e,n,a,o){this.from=e,this.to=n,this.number=a,this.text=o}get length(){return this.to-this.from}}let extend="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<extend.length;s++)extend[s]+=extend[s-1];function isExtendingChar(s){for(let e=1;e<extend.length;e+=2)if(extend[e]>s)return extend[e-1]<=s;return!1}function isRegionalIndicator(s){return s>=127462&&s<=127487}const ZWJ=8205;function findClusterBreak(s,e,n=!0,a=!0){return(n?nextClusterBreak:prevClusterBreak)(s,e,a)}function nextClusterBreak(s,e,n){if(e==s.length)return e;e&&surrogateLow(s.charCodeAt(e))&&surrogateHigh(s.charCodeAt(e-1))&&e--;let a=codePointAt(s,e);for(e+=codePointSize(a);e<s.length;){let o=codePointAt(s,e);if(a==ZWJ||o==ZWJ||n&&isExtendingChar(o))e+=codePointSize(o),a=o;else if(isRegionalIndicator(o)){let l=0,u=e-2;for(;u>=0&&isRegionalIndicator(codePointAt(s,u));)l++,u-=2;if(l%2==0)break;e+=2}else break}return e}function prevClusterBreak(s,e,n){for(;e>0;){let a=nextClusterBreak(s,e-2,n);if(a<e)return a;e--}return 0}function surrogateLow(s){return s>=56320&&s<57344}function surrogateHigh(s){return s>=55296&&s<56320}function codePointAt(s,e){let n=s.charCodeAt(e);if(!surrogateHigh(n)||e+1==s.length)return n;let a=s.charCodeAt(e+1);return surrogateLow(a)?(n-55296<<10)+(a-56320)+65536:n}function fromCodePoint(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function codePointSize(s){return s<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(MapMode||(MapMode={}));class ChangeDesc{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let a=this.sections[n+1];e+=a<0?this.sections[n]:a}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,a=0,o=0;n<this.sections.length;){let l=this.sections[n++],u=this.sections[n++];u<0?(e(a,o,l),o+=l):o+=u,a+=l}}iterChangedRanges(e,n=!1){iterChanges(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let a=this.sections[n++],o=this.sections[n++];o<0?e.push(a,o):e.push(o,a)}return new ChangeDesc(e)}composeDesc(e){return this.empty?e:e.empty?this:composeSets(this,e)}mapDesc(e,n=!1){return e.empty?this:mapSet(this,e,n)}mapPos(e,n=-1,a=MapMode.Simple){let o=0,l=0;for(let u=0;u<this.sections.length;){let c=this.sections[u++],f=this.sections[u++],d=o+c;if(f<0){if(d>e)return l+(e-o);l+=c}else{if(a!=MapMode.Simple&&d>=e&&(a==MapMode.TrackDel&&o<e&&d>e||a==MapMode.TrackBefore&&o<e||a==MapMode.TrackAfter&&d>e))return null;if(d>e||d==e&&n<0&&!c)return e==o||n<0?l:l+f;l+=f}o=d}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return l}touchesRange(e,n=e){for(let a=0,o=0;a<this.sections.length&&o<=n;){let l=this.sections[a++],u=this.sections[a++],c=o+l;if(u>=0&&o<=n&&c>=e)return o<e&&c>n?"cover":!0;o=c}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let a=this.sections[n++],o=this.sections[n++];e+=(e?" ":"")+a+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(e)}static create(e){return new ChangeDesc(e)}}class ChangeSet extends ChangeDesc{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(n,a,o,l,u)=>e=e.replace(o,o+(a-n),u),!1),e}mapDesc(e,n=!1){return mapSet(this,e,n,!0)}invert(e){let n=this.sections.slice(),a=[];for(let o=0,l=0;o<n.length;o+=2){let u=n[o],c=n[o+1];if(c>=0){n[o]=c,n[o+1]=u;let f=o>>1;for(;a.length<f;)a.push(Text.empty);a.push(u?e.slice(l,l+u):Text.empty)}l+=u}return new ChangeSet(n,a)}compose(e){return this.empty?e:e.empty?this:composeSets(this,e,!0)}map(e,n=!1){return e.empty?this:mapSet(this,e,n,!0)}iterChanges(e,n=!1){iterChanges(this,e,n)}get desc(){return ChangeDesc.create(this.sections)}filter(e){let n=[],a=[],o=[],l=new SectionIter(this);e:for(let u=0,c=0;;){let f=u==e.length?1e9:e[u++];for(;c<f||c==f&&l.len==0;){if(l.done)break e;let g=Math.min(l.len,f-c);addSection(o,g,-1);let O=l.ins==-1?-1:l.off==0?l.ins:0;addSection(n,g,O),O>0&&addInsert(a,n,l.text),l.forward(g),c+=g}let d=e[u++];for(;c<d;){if(l.done)break e;let g=Math.min(l.len,d-c);addSection(n,g,-1),addSection(o,g,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(g),c+=g}}return{changes:new ChangeSet(n,a),filtered:ChangeDesc.create(o)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let a=this.sections[n],o=this.sections[n+1];o<0?e.push(a):o==0?e.push([a]):e.push([a].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,a){let o=[],l=[],u=0,c=null;function f(g=!1){if(!g&&!o.length)return;u<n&&addSection(o,n-u,-1);let O=new ChangeSet(o,l);c=c?c.compose(O.map(c)):O,o=[],l=[],u=0}function d(g){if(Array.isArray(g))for(let O of g)d(O);else if(g instanceof ChangeSet){if(g.length!=n)throw new RangeError(`Mismatched change set length (got ${g.length}, expected ${n})`);f(),c=c?c.compose(g.map(c)):g}else{let{from:O,to:S=O,insert:b}=g;if(O>S||O<0||S>n)throw new RangeError(`Invalid change range ${O} to ${S} (in doc of length ${n})`);let E=b?typeof b=="string"?Text.of(b.split(a||DefaultSplit)):b:Text.empty,k=E.length;if(O==S&&k==0)return;O<u&&f(),O>u&&addSection(o,O-u,-1),addSection(o,S-O,k),addInsert(l,o,E),u=S}}return d(e),f(!c),c}static empty(e){return new ChangeSet(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],a=[];for(let o=0;o<e.length;o++){let l=e[o];if(typeof l=="number")n.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((u,c)=>c&&typeof u!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)n.push(l[0],0);else{for(;a.length<o;)a.push(Text.empty);a[o]=Text.of(l.slice(1)),n.push(l[0],a[o].length)}}}return new ChangeSet(n,a)}static createSet(e,n){return new ChangeSet(e,n)}}function addSection(s,e,n,a=!1){if(e==0&&n<=0)return;let o=s.length-2;o>=0&&n<=0&&n==s[o+1]?s[o]+=e:e==0&&s[o]==0?s[o+1]+=n:a?(s[o]+=e,s[o+1]+=n):s.push(e,n)}function addInsert(s,e,n){if(n.length==0)return;let a=e.length-2>>1;if(a<s.length)s[s.length-1]=s[s.length-1].append(n);else{for(;s.length<a;)s.push(Text.empty);s.push(n)}}function iterChanges(s,e,n){let a=s.inserted;for(let o=0,l=0,u=0;u<s.sections.length;){let c=s.sections[u++],f=s.sections[u++];if(f<0)o+=c,l+=c;else{let d=o,g=l,O=Text.empty;for(;d+=c,g+=f,f&&a&&(O=O.append(a[u-2>>1])),!(n||u==s.sections.length||s.sections[u+1]<0);)c=s.sections[u++],f=s.sections[u++];e(o,d,l,g,O),o=d,l=g}}}function mapSet(s,e,n,a=!1){let o=[],l=a?[]:null,u=new SectionIter(s),c=new SectionIter(e);for(let f=-1;;)if(u.ins==-1&&c.ins==-1){let d=Math.min(u.len,c.len);addSection(o,d,-1),u.forward(d),c.forward(d)}else if(c.ins>=0&&(u.ins<0||f==u.i||u.off==0&&(c.len<u.len||c.len==u.len&&!n))){let d=c.len;for(addSection(o,c.ins,-1);d;){let g=Math.min(u.len,d);u.ins>=0&&f<u.i&&u.len<=g&&(addSection(o,0,u.ins),l&&addInsert(l,o,u.text),f=u.i),u.forward(g),d-=g}c.next()}else if(u.ins>=0){let d=0,g=u.len;for(;g;)if(c.ins==-1){let O=Math.min(g,c.len);d+=O,g-=O,c.forward(O)}else if(c.ins==0&&c.len<g)g-=c.len,c.next();else break;addSection(o,d,f<u.i?u.ins:0),l&&f<u.i&&addInsert(l,o,u.text),f=u.i,u.forward(u.len-g)}else{if(u.done&&c.done)return l?ChangeSet.createSet(o,l):ChangeDesc.create(o);throw new Error("Mismatched change set lengths")}}function composeSets(s,e,n=!1){let a=[],o=n?[]:null,l=new SectionIter(s),u=new SectionIter(e);for(let c=!1;;){if(l.done&&u.done)return o?ChangeSet.createSet(a,o):ChangeDesc.create(a);if(l.ins==0)addSection(a,l.len,0,c),l.next();else if(u.len==0&&!u.done)addSection(a,0,u.ins,c),o&&addInsert(o,a,u.text),u.next();else{if(l.done||u.done)throw new Error("Mismatched change set lengths");{let f=Math.min(l.len2,u.len),d=a.length;if(l.ins==-1){let g=u.ins==-1?-1:u.off?0:u.ins;addSection(a,f,g,c),o&&g&&addInsert(o,a,u.text)}else u.ins==-1?(addSection(a,l.off?0:l.len,f,c),o&&addInsert(o,a,l.textBit(f))):(addSection(a,l.off?0:l.len,u.off?0:u.ins,c),o&&!u.off&&addInsert(o,a,u.text));c=(l.ins>f||u.ins>=0&&u.len>f)&&(c||a.length>d),l.forward2(f),u.forward(f)}}}}class SectionIter{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Text.empty:e[n]}textBit(e){let{inserted:n}=this.set,a=this.i-2>>1;return a>=n.length&&!e?Text.empty:n[a].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class SelectionRange{constructor(e,n,a){this.from=e,this.to=n,this.flags=a}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,n=-1){let a,o;return this.empty?a=o=e.mapPos(this.from,n):(a=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),a==this.from&&o==this.to?this:new SelectionRange(a,o,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return EditorSelection.range(e,n);let a=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return EditorSelection.range(this.anchor,a)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(e.anchor,e.head)}static create(e,n,a){return new SelectionRange(e,n,a)}}class EditorSelection{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:EditorSelection.create(this.ranges.map(a=>a.map(e,n)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(e,n=!0){return EditorSelection.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let a=this.ranges.slice();return a[n]=e,EditorSelection.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(e.ranges.map(n=>SelectionRange.fromJSON(n)),e.main)}static single(e,n=e){return new EditorSelection([EditorSelection.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,o=0;o<e.length;o++){let l=e[o];if(l.empty?l.from<=a:l.from<a)return EditorSelection.normalized(e.slice(),n);a=l.to}return new EditorSelection(e,n)}static cursor(e,n=0,a,o){return SelectionRange.create(e,e,(n==0?0:n<0?4:8)|(a==null?3:Math.min(2,a))|(o??33554431)<<5)}static range(e,n,a,o){let l=(a??33554431)<<5|(o==null?3:Math.min(2,o));return n<e?SelectionRange.create(n,e,24|l):SelectionRange.create(e,n,(n>e?4:0)|l)}static normalized(e,n=0){let a=e[n];e.sort((o,l)=>o.from-l.from),n=e.indexOf(a);for(let o=1;o<e.length;o++){let l=e[o],u=e[o-1];if(l.empty?l.from<=u.to:l.from<u.to){let c=u.from,f=Math.max(l.to,u.to);o<=n&&n--,e.splice(--o,2,l.anchor>l.head?EditorSelection.range(f,c):EditorSelection.range(c,f))}}return new EditorSelection(e,n)}}function checkSelection(s,e){for(let n of s.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(e,n,a,o,l){this.combine=e,this.compareInput=n,this.compare=a,this.isStatic=o,this.id=nextID++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}static define(e={}){return new Facet(e.combine||(n=>n),e.compareInput||((n,a)=>n===a),e.compare||(e.combine?(n,a)=>n===a:sameArray$1),!!e.static,e.enables)}of(e){return new FacetProvider([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(e,this,2,n)}from(e,n){return n||(n=a=>a),this.compute([e],a=>n(a.field(e)))}}function sameArray$1(s,e){return s==e||s.length==e.length&&s.every((n,a)=>n===e[a])}class FacetProvider{constructor(e,n,a,o){this.dependencies=e,this.facet=n,this.type=a,this.value=o,this.id=nextID++}dynamicSlot(e){var n;let a=this.value,o=this.facet.compareInput,l=this.id,u=e[l]>>1,c=this.type==2,f=!1,d=!1,g=[];for(let O of this.dependencies)O=="doc"?f=!0:O=="selection"?d=!0:((n=e[O.id])!==null&&n!==void 0?n:1)&1||g.push(e[O.id]);return{create(O){return O.values[u]=a(O),1},update(O,S){if(f&&S.docChanged||d&&(S.docChanged||S.selection)||ensureAll(O,g)){let b=a(O);if(c?!compareArray(b,O.values[u],o):!o(b,O.values[u]))return O.values[u]=b,1}return 0},reconfigure:(O,S)=>{let b,E=S.config.address[l];if(E!=null){let k=getAddr(S,E);if(this.dependencies.every($=>$ instanceof Facet?S.facet($)===O.facet($):$ instanceof StateField?S.field($,!1)==O.field($,!1):!0)||(c?compareArray(b=a(O),k,o):o(b=a(O),k)))return O.values[u]=k,0}else b=a(O);return O.values[u]=b,1}}}}function compareArray(s,e,n){if(s.length!=e.length)return!1;for(let a=0;a<s.length;a++)if(!n(s[a],e[a]))return!1;return!0}function ensureAll(s,e){let n=!1;for(let a of e)ensureAddr(s,a)&1&&(n=!0);return n}function dynamicFacetSlot(s,e,n){let a=n.map(f=>s[f.id]),o=n.map(f=>f.type),l=a.filter(f=>!(f&1)),u=s[e.id]>>1;function c(f){let d=[];for(let g=0;g<a.length;g++){let O=getAddr(f,a[g]);if(o[g]==2)for(let S of O)d.push(S);else d.push(O)}return e.combine(d)}return{create(f){for(let d of a)ensureAddr(f,d);return f.values[u]=c(f),1},update(f,d){if(!ensureAll(f,l))return 0;let g=c(f);return e.compare(g,f.values[u])?0:(f.values[u]=g,1)},reconfigure(f,d){let g=ensureAll(f,a),O=d.config.facets[e.id],S=d.facet(e);if(O&&!g&&sameArray$1(n,O))return f.values[u]=S,0;let b=c(f);return e.compare(b,S)?(f.values[u]=S,0):(f.values[u]=b,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(e,n,a,o,l){this.id=e,this.createF=n,this.updateF=a,this.compareF=o,this.spec=l,this.provides=void 0}static define(e){let n=new StateField(nextID++,e.create,e.update,e.compare||((a,o)=>a===o),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(initField).find(a=>a.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:a=>(a.values[n]=this.create(a),1),update:(a,o)=>{let l=a.values[n],u=this.updateF(l,o);return this.compareF(l,u)?0:(a.values[n]=u,1)},reconfigure:(a,o)=>o.config.address[this.id]!=null?(a.values[n]=o.field(this),0):(a.values[n]=this.create(a),1)}}init(e){return[this,initField.of({field:this,create:e})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(s){return e=>new PrecExtension(e,s)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(e,n){this.inner=e,this.prec=n}}class Compartment{of(e){return new CompartmentInstance(this,e)}reconfigure(e){return Compartment.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class CompartmentInstance{constructor(e,n){this.compartment=e,this.inner=n}}class Configuration{constructor(e,n,a,o,l,u){for(this.base=e,this.compartments=n,this.dynamicSlots=a,this.address=o,this.staticValues=l,this.facets=u,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,a){let o=[],l=Object.create(null),u=new Map;for(let S of flatten(e,n,u))S instanceof StateField?o.push(S):(l[S.facet.id]||(l[S.facet.id]=[])).push(S);let c=Object.create(null),f=[],d=[];for(let S of o)c[S.id]=d.length<<1,d.push(b=>S.slot(b));let g=a?.config.facets;for(let S in l){let b=l[S],E=b[0].facet,k=g&&g[S]||[];if(b.every($=>$.type==0))if(c[E.id]=f.length<<1|1,sameArray$1(k,b))f.push(a.facet(E));else{let $=E.combine(b.map(R=>R.value));f.push(a&&E.compare($,a.facet(E))?a.facet(E):$)}else{for(let $ of b)$.type==0?(c[$.id]=f.length<<1|1,f.push($.value)):(c[$.id]=d.length<<1,d.push(R=>$.dynamicSlot(R)));c[E.id]=d.length<<1,d.push($=>dynamicFacetSlot($,E,b))}}let O=d.map(S=>S(c));return new Configuration(e,u,O,c,f,l)}}function flatten(s,e,n){let a=[[],[],[],[],[]],o=new Map;function l(u,c){let f=o.get(u);if(f!=null){if(f<=c)return;let d=a[f].indexOf(u);d>-1&&a[f].splice(d,1),u instanceof CompartmentInstance&&n.delete(u.compartment)}if(o.set(u,c),Array.isArray(u))for(let d of u)l(d,c);else if(u instanceof CompartmentInstance){if(n.has(u.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(u.compartment)||u.inner;n.set(u.compartment,d),l(d,c)}else if(u instanceof PrecExtension)l(u.inner,u.prec);else if(u instanceof StateField)a[c].push(u),u.provides&&l(u.provides,c);else if(u instanceof FacetProvider)a[c].push(u),u.facet.extensions&&l(u.facet.extensions,Prec_.default);else{let d=u.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${u}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(d,c)}}return l(s,Prec_.default),a.reduce((u,c)=>u.concat(c))}function ensureAddr(s,e){if(e&1)return 2;let n=e>>1,a=s.status[n];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;s.status[n]=4;let o=s.computeSlot(s,s.config.dynamicSlots[n]);return s.status[n]=2|o}function getAddr(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:s=>s.some(e=>e),static:!0}),lineSeparator=Facet.define({combine:s=>s.length?s[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:s=>s.length?s[0]:!1});class Annotation{constructor(e,n){this.type=e,this.value=n}static define(){return new AnnotationType}}class AnnotationType{of(e){return new Annotation(this,e)}}class StateEffectType{constructor(e){this.map=e}of(e){return new StateEffect(this,e)}}class StateEffect{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new StateEffect(this.type,n)}is(e){return this.type==e}static define(e={}){return new StateEffectType(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let a=[];for(let o of e){let l=o.map(n);l&&a.push(l)}return a}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(e,n,a,o,l,u){this.startState=e,this.changes=n,this.selection=a,this.effects=o,this.annotations=l,this.scrollIntoView=u,this._doc=null,this._state=null,a&&checkSelection(a,n.newLength),l.some(c=>c.type==Transaction.time)||(this.annotations=l.concat(Transaction.time.of(Date.now())))}static create(e,n,a,o,l,u){return new Transaction(e,n,a,o,l,u)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Transaction.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();function joinRanges(s,e){let n=[];for(let a=0,o=0;;){let l,u;if(a<s.length&&(o==e.length||e[o]>=s[a]))l=s[a++],u=s[a++];else if(o<e.length)l=e[o++],u=e[o++];else return n;!n.length||n[n.length-1]<l?n.push(l,u):n[n.length-1]<u&&(n[n.length-1]=u)}}function mergeTransaction(s,e,n){var a;let o,l,u;return n?(o=e.changes,l=ChangeSet.empty(e.changes.length),u=s.changes.compose(e.changes)):(o=e.changes.map(s.changes),l=s.changes.mapDesc(e.changes,!0),u=s.changes.compose(o)),{changes:u,selection:e.selection?e.selection.map(l):(a=s.selection)===null||a===void 0?void 0:a.map(o),effects:StateEffect.mapEffects(s.effects,o).concat(StateEffect.mapEffects(e.effects,l)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function resolveTransactionInner(s,e,n){let a=e.selection,o=asArray$1(e.annotations);return e.userEvent&&(o=o.concat(Transaction.userEvent.of(e.userEvent))),{changes:e.changes instanceof ChangeSet?e.changes:ChangeSet.of(e.changes||[],n,s.facet(lineSeparator)),selection:a&&(a instanceof EditorSelection?a:EditorSelection.single(a.anchor,a.head)),effects:asArray$1(e.effects),annotations:o,scrollIntoView:!!e.scrollIntoView}}function resolveTransaction(s,e,n){let a=resolveTransactionInner(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(n=!1);let u=!!e[l].sequential;a=mergeTransaction(a,resolveTransactionInner(s,e[l],u?a.changes.newLength:s.doc.length),u)}let o=Transaction.create(s,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return extendTransaction(n?filterTransaction(o):o)}function filterTransaction(s){let e=s.startState,n=!0;for(let o of e.facet(changeFilter)){let l=o(s);if(l===!1){n=!1;break}Array.isArray(l)&&(n=n===!0?l:joinRanges(n,l))}if(n!==!0){let o,l;if(n===!1)l=s.changes.invertedDesc,o=ChangeSet.empty(e.doc.length);else{let u=s.changes.filter(n);o=u.changes,l=u.filtered.mapDesc(u.changes).invertedDesc}s=Transaction.create(e,o,s.selection&&s.selection.map(l),StateEffect.mapEffects(s.effects,l),s.annotations,s.scrollIntoView)}let a=e.facet(transactionFilter);for(let o=a.length-1;o>=0;o--){let l=a[o](s);l instanceof Transaction?s=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Transaction?s=l[0]:s=resolveTransaction(e,asArray$1(l),!1)}return s}function extendTransaction(s){let e=s.startState,n=e.facet(transactionExtender),a=s;for(let o=n.length-1;o>=0;o--){let l=n[o](s);l&&Object.keys(l).length&&(a=mergeTransaction(a,resolveTransactionInner(e,l,s.changes.newLength),!0))}return a==s?s:Transaction.create(e,s.changes,s.selection,a.effects,a.annotations,a.scrollIntoView)}const none$2=[];function asArray$1(s){return s==null?none$2:Array.isArray(s)?s:[s]}var CharCategory=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar$1;try{wordChar$1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(s){}function hasWordChar(s){if(wordChar$1)return wordChar$1.test(s);for(let e=0;e<s.length;e++){let n=s[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||nonASCIISingleCaseWordChar.test(n)))return!0}return!1}function makeCategorizer(s){return e=>{if(!/\S/.test(e))return CharCategory.Space;if(hasWordChar(e))return CharCategory.Word;for(let n=0;n<s.length;n++)if(e.indexOf(s[n])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(e,n,a,o,l,u){this.config=e,this.doc=n,this.selection=a,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=l,u&&(u._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)ensureAddr(this,c<<1);this.computeSlot=null}field(e,n=!0){let a=this.config.address[e.id];if(a==null){if(n)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,a),getAddr(this,a)}update(...e){return resolveTransaction(this,e,!0)}applyTransaction(e){let n=this.config,{base:a,compartments:o}=n;for(let u of e.effects)u.is(Compartment.reconfigure)?(n&&(o=new Map,n.compartments.forEach((c,f)=>o.set(f,c)),n=null),o.set(u.value.compartment,u.value.extension)):u.is(StateEffect.reconfigure)?(n=null,a=u.value):u.is(StateEffect.appendConfig)&&(n=null,a=asArray$1(a).concat(u.value));let l;n?l=e.startState.values.slice():(n=Configuration.resolve(a,o,this),l=new EditorState(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(c,f)=>f.reconfigure(c,this),null).values),new EditorState(n,e.newDoc,e.newSelection,l,(u,c)=>c.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:EditorSelection.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,a=e(n.ranges[0]),o=this.changes(a.changes),l=[a.range],u=asArray$1(a.effects);for(let c=1;c<n.ranges.length;c++){let f=e(n.ranges[c]),d=this.changes(f.changes),g=d.map(o);for(let S=0;S<c;S++)l[S]=l[S].map(g);let O=o.mapDesc(d,!0);l.push(f.range.map(O)),o=o.compose(g),u=StateEffect.mapEffects(u,g).concat(StateEffect.mapEffects(asArray$1(f.effects),O))}return{changes:o,selection:EditorSelection.create(l,n.mainIndex),effects:u}}changes(e=[]){return e instanceof ChangeSet?e:ChangeSet.of(e,this.doc.length,this.facet(EditorState.lineSeparator))}toText(e){return Text.of(e.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(ensureAddr(this,n),getAddr(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let a in e){let o=e[a];o instanceof StateField&&this.config.address[o.id]!=null&&(n[a]=o.spec.toJSON(this.field(e[a]),this))}return n}static fromJSON(e,n={},a){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(a){for(let l in a)if(Object.prototype.hasOwnProperty.call(e,l)){let u=a[l],c=e[l];o.push(u.init(f=>u.spec.fromJSON(c,f)))}}return EditorState.create({doc:e.doc,selection:EditorSelection.fromJSON(e.selection),extensions:n.extensions?o.concat([n.extensions]):o})}static create(e={}){let n=Configuration.resolve(e.extensions||[],new Map),a=e.doc instanceof Text?e.doc:Text.of((e.doc||"").split(n.staticFacet(EditorState.lineSeparator)||DefaultSplit)),o=e.selection?e.selection instanceof EditorSelection?e.selection:EditorSelection.single(e.selection.anchor,e.selection.head):EditorSelection.single(0);return checkSelection(o,a.length),n.staticFacet(allowMultipleSelections)||(o=o.asSingle()),new EditorState(n,a,o,n.dynamicSlots.map(()=>null),(l,u)=>u.create(l),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(e,...n){for(let a of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(a,e)){e=a[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(a,o)=>{if(o=="$")return"$";let l=+(o||1);return!l||l>n.length?a:n[l-1]})),e}languageDataAt(e,n,a=-1){let o=[];for(let l of this.facet(languageData))for(let u of l(this,n,a))Object.prototype.hasOwnProperty.call(u,e)&&o.push(u[e]);return o}charCategorizer(e){return makeCategorizer(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:a,length:o}=this.doc.lineAt(e),l=this.charCategorizer(e),u=e-a,c=e-a;for(;u>0;){let f=findClusterBreak(n,u,!1);if(l(n.slice(f,u))!=CharCategory.Word)break;u=f}for(;c<o;){let f=findClusterBreak(n,c);if(l(n.slice(c,f))!=CharCategory.Word)break;c=f}return u==c?null:EditorSelection.range(u+a,c+a)}}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:s=>s.length?s[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(s,e){let n=Object.keys(s),a=Object.keys(e);return n.length==a.length&&n.every(o=>s[o]==e[o])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();function combineConfig(s,e,n={}){let a={};for(let o of s)for(let l of Object.keys(o)){let u=o[l],c=a[l];if(c===void 0)a[l]=u;else if(!(c===u||u===void 0))if(Object.hasOwnProperty.call(n,l))a[l]=n[l](c,u);else throw new Error("Config merge conflict for field "+l)}for(let o in e)a[o]===void 0&&(a[o]=e[o]);return a}class RangeValue{eq(e){return this==e}range(e,n=e){return Range$1.create(e,n,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class En{constructor(e,n,a){this.from=e,this.to=n,this.value=a}static create(e,n,a){return new En(e,n,a)}};function cmpRange(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class Chunk{constructor(e,n,a,o){this.from=e,this.to=n,this.value=a,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,n,a,o=0){let l=a?this.to:this.from;for(let u=o,c=l.length;;){if(u==c)return u;let f=u+c>>1,d=l[f]-e||(a?this.value[f].endSide:this.value[f].startSide)-n;if(f==u)return d>=0?u:c;d>=0?c=f:u=f+1}}between(e,n,a,o){for(let l=this.findIndex(n,-1e9,!0),u=this.findIndex(a,1e9,!1,l);l<u;l++)if(o(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,n){let a=[],o=[],l=[],u=-1,c=-1;for(let f=0;f<this.value.length;f++){let d=this.value[f],g=this.from[f]+e,O=this.to[f]+e,S,b;if(g==O){let E=n.mapPos(g,d.startSide,d.mapMode);if(E==null||(S=b=E,d.startSide!=d.endSide&&(b=n.mapPos(g,d.endSide),b<S)))continue}else if(S=n.mapPos(g,d.startSide),b=n.mapPos(O,d.endSide),S>b||S==b&&d.startSide>0&&d.endSide<=0)continue;(b-S||d.endSide-d.startSide)<0||(u<0&&(u=S),d.point&&(c=Math.max(c,b-S)),a.push(d),o.push(S-u),l.push(b-u))}return{mapped:a.length?new Chunk(o,l,a,c):null,pos:u}}}class RangeSet{constructor(e,n,a,o){this.chunkPos=e,this.chunk=n,this.nextLayer=a,this.maxPoint=o}static create(e,n,a,o){return new RangeSet(e,n,a,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:a=!1,filterFrom:o=0,filterTo:l=this.length}=e,u=e.filter;if(n.length==0&&!u)return this;if(a&&(n=n.slice().sort(cmpRange)),this.isEmpty)return n.length?RangeSet.of(n):this;let c=new LayerCursor(this,null,-1).goto(0),f=0,d=[],g=new RangeSetBuilder;for(;c.value||f<n.length;)if(f<n.length&&(c.from-n[f].from||c.startSide-n[f].value.startSide)>=0){let O=n[f++];g.addInner(O.from,O.to,O.value)||d.push(O)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(f==n.length||this.chunkEnd(c.chunkIndex)<n[f].from)&&(!u||o>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&g.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!u||o>c.to||l<c.from||u(c.from,c.to,c.value))&&(g.addInner(c.from,c.to,c.value)||d.push(Range$1.create(c.from,c.to,c.value))),c.next());return g.finishInner(this.nextLayer.isEmpty&&!d.length?RangeSet.empty:this.nextLayer.update({add:d,filter:u,filterFrom:o,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],a=[],o=-1;for(let u=0;u<this.chunk.length;u++){let c=this.chunkPos[u],f=this.chunk[u],d=e.touchesRange(c,c+f.length);if(d===!1)o=Math.max(o,f.maxPoint),n.push(f),a.push(e.mapPos(c));else if(d===!0){let{mapped:g,pos:O}=f.map(c,e);g&&(o=Math.max(o,g.maxPoint),n.push(g),a.push(O))}}let l=this.nextLayer.map(e);return n.length==0?l:new RangeSet(a,n,l||RangeSet.empty,o)}between(e,n,a){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],u=this.chunk[o];if(n>=l&&e<=l+u.length&&u.between(l,e-l,n-l,a)===!1)return}this.nextLayer.between(e,n,a)}}iter(e=0){return HeapCursor.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return HeapCursor.from(e).goto(n)}static compare(e,n,a,o,l=-1){let u=e.filter(O=>O.maxPoint>0||!O.isEmpty&&O.maxPoint>=l),c=n.filter(O=>O.maxPoint>0||!O.isEmpty&&O.maxPoint>=l),f=findSharedChunks(u,c,a),d=new SpanCursor(u,f,l),g=new SpanCursor(c,f,l);a.iterGaps((O,S,b)=>compare(d,O,g,S,b,o)),a.empty&&a.length==0&&compare(d,0,g,0,0,o)}static eq(e,n,a=0,o){o==null&&(o=1e9-1);let l=e.filter(g=>!g.isEmpty&&n.indexOf(g)<0),u=n.filter(g=>!g.isEmpty&&e.indexOf(g)<0);if(l.length!=u.length)return!1;if(!l.length)return!0;let c=findSharedChunks(l,u),f=new SpanCursor(l,c,0).goto(a),d=new SpanCursor(u,c,0).goto(a);for(;;){if(f.to!=d.to||!sameValues(f.active,d.active)||f.point&&(!d.point||!f.point.eq(d.point)))return!1;if(f.to>o)return!0;f.next(),d.next()}}static spans(e,n,a,o,l=-1){let u=new SpanCursor(e,null,l).goto(n),c=n,f=u.openStart;for(;;){let d=Math.min(u.to,a);if(u.point){let g=u.activeForPoint(u.to),O=u.pointFrom<n?g.length+1:Math.min(g.length,f);o.point(c,d,u.point,g,O,u.pointRank),f=Math.min(u.openEnd(d),g.length)}else d>c&&(o.span(c,d,u.active,f),f=u.openEnd(d));if(u.to>a)return f+(u.point&&u.to>a?1:0);c=u.to,u.next()}}static of(e,n=!1){let a=new RangeSetBuilder;for(let o of e instanceof Range$1?[e]:n?lazySort(e):e)a.add(o.from,o.to,o.value);return a.finish()}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(s){if(s.length>1)for(let e=s[0],n=1;n<s.length;n++){let a=s[n];if(cmpRange(e,a)>0)return s.slice().sort(cmpRange);e=a}return s}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,n,a){this.addInner(e,n,a)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(e,n,a)}addInner(e,n,a){let o=e-this.lastTo||a.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return o<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=a,this.lastFrom=e,this.lastTo=n,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let a=n.value.length-1;return this.last=n.value[a],this.lastFrom=n.from[a]+e,this.lastTo=n.to[a]+e,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function findSharedChunks(s,e,n){let a=new Map;for(let l of s)for(let u=0;u<l.chunk.length;u++)l.chunk[u].maxPoint<=0&&a.set(l.chunk[u],l.chunkPos[u]);let o=new Set;for(let l of e)for(let u=0;u<l.chunk.length;u++){let c=a.get(l.chunk[u]);c!=null&&(n?n.mapPos(c):c)==l.chunkPos[u]&&!n?.touchesRange(c,c+l.chunk[u].length)&&o.add(l.chunk[u])}return o}class LayerCursor{constructor(e,n,a,o=0){this.layer=e,this.skip=n,this.minPoint=a,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,a){for(;this.chunkIndex<this.layer.chunk.length;){let o=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(o)||this.layer.chunkEnd(this.chunkIndex)<e||o.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!a||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],a=e+n.from[this.rangeIndex];if(this.from=a,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class HeapCursor{constructor(e){this.heap=e}static from(e,n=null,a=-1){let o=[];for(let l=0;l<e.length;l++)for(let u=e[l];!u.isEmpty;u=u.nextLayer)u.maxPoint>=a&&o.push(new LayerCursor(u,n,a,l));return o.length==1?o[0]:new HeapCursor(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let a of this.heap)a.goto(e,n);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);return this.next(),this}forward(e,n){for(let a of this.heap)a.forward(e,n);for(let a=this.heap.length>>1;a>=0;a--)heapBubble(this.heap,a);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),heapBubble(this.heap,0)}}}function heapBubble(s,e){for(let n=s[e];;){let a=(e<<1)+1;if(a>=s.length)break;let o=s[a];if(a+1<s.length&&o.compare(s[a+1])>=0&&(o=s[a+1],a++),n.compare(o)<0)break;s[a]=n,s[e]=o,e=a}}class SpanCursor{constructor(e,n,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(e,n,a)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){remove(this.active,e),remove(this.activeTo,e),remove(this.activeRank,e),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(e){let n=0,{value:a,to:o,rank:l}=this.cursor;for(;n<this.activeRank.length&&this.activeRank[n]<=l;)n++;insert(this.active,n,a),insert(this.activeTo,n,o),insert(this.activeRank,n,l),e&&insert(e,n,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),a&&remove(a,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(a),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let o=a.length-1;o>=0&&a[o]<e;o--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>e||this.activeTo[a]==e&&this.active[a].endSide>=this.point.endSide)&&n.push(this.active[a]);return n.reverse()}openEnd(e){let n=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>e;a--)n++;return n}}function compare(s,e,n,a,o,l){s.goto(e),n.goto(a);let u=a+o,c=a,f=a-e;for(;;){let d=s.to+f-n.to||s.endSide-n.endSide,g=d<0?s.to+f:n.to,O=Math.min(g,u);if(s.point||n.point?s.point&&n.point&&(s.point==n.point||s.point.eq(n.point))&&sameValues(s.activeForPoint(s.to+f),n.activeForPoint(n.to))||l.comparePoint(c,O,s.point,n.point):O>c&&!sameValues(s.active,n.active)&&l.compareRange(c,O,s.active,n.active),g>u)break;c=g,d<=0&&s.next(),d>=0&&n.next()}}function sameValues(s,e){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(s[n]!=e[n]&&!s[n].eq(e[n]))return!1;return!0}function remove(s,e){for(let n=e,a=s.length-1;n<a;n++)s[n]=s[n+1];s.pop()}function insert(s,e,n){for(let a=s.length-1;a>=e;a--)s[a+1]=s[a];s[e]=n}function findMinIndex(s,e){let n=-1,a=1e9;for(let o=0;o<e.length;o++)(e[o]-a||s[o].endSide-s[n].endSide)<0&&(n=o,a=e[o]);return n}function countColumn(s,e,n=s.length){let a=0;for(let o=0;o<n;)s.charCodeAt(o)==9?(a+=e-a%e,o++):(a++,o=findClusterBreak(s,o));return a}function findColumn(s,e,n,a){for(let o=0,l=0;;){if(l>=e)return o;if(o==s.length)break;l+=s.charCodeAt(o)==9?n-l%n:1,o=findClusterBreak(s,o)}return a===!0?-1:s.length}const C$1="ͼ",COUNT=typeof Symbol>"u"?"__"+C$1:Symbol.for(C$1),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(e,n){this.rules=[];let{finish:a}=n||{};function o(u){return/^@/.test(u)?[u]:u.split(/,\s*/)}function l(u,c,f,d){let g=[],O=/^@(\w+)\b/.exec(u[0]),S=O&&O[1]=="keyframes";if(O&&c==null)return f.push(u[0]+";");for(let b in c){let E=c[b];if(/&/.test(b))l(b.split(/,\s*/).map(k=>u.map($=>k.replace(/&/,$))).reduce((k,$)=>k.concat($)),E,f);else if(E&&typeof E=="object"){if(!O)throw new RangeError("The value of a property ("+b+") should be a primitive value.");l(o(b),E,g,S)}else E!=null&&g.push(b.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+E+";")}(g.length||S)&&f.push((a&&!O&&!d?u.map(a):u).join(", ")+" {"+g.join(" ")+"}")}for(let u in e)l(o(u),e[u],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=top[COUNT]||1;return top[COUNT]=e+1,C$1+e.toString(36)}static mount(e,n){(e[SET]||new StyleSet(e)).mount(Array.isArray(n)?n:[n])}}let adoptedSet=null;class StyleSet{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(adoptedSet)return e.adoptedStyleSheets=[adoptedSet.sheet].concat(e.adoptedStyleSheets),e[SET]=adoptedSet;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),adoptedSet=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let n=e.head||e;n.insertBefore(this.styleTag,n.firstChild)}this.modules=[],e[SET]=this}mount(e){let n=this.sheet,a=0,o=0;for(let l=0;l<e.length;l++){let u=e[l],c=this.modules.indexOf(u);if(c<o&&c>-1&&(this.modules.splice(c,1),o--,c=-1),c==-1){if(this.modules.splice(o++,0,u),n)for(let f=0;f<u.rules.length;f++)n.insertRule(u.rules[f],a++)}else{for(;o<c;)a+=this.modules[o++].rules.length;a+=u.rules.length,o++}}if(!n){let l="";for(let u=0;u<this.modules.length;u++)l+=this.modules[u].getRules()+`
`;this.styleTag.textContent=l}}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},chrome$1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=mac||chrome$1&&+chrome$1[1]<57,i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(s){var e=brokenModifierNames&&(s.ctrlKey||s.altKey||s.metaKey)||ie$1&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",n=!e&&s.key||(s.shiftKey?shift:base)[s.keyCode]||s.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function getSelection(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function contains(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function deepActiveElement(s){let e=s.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hasSelection(s,e){if(!e.anchorNode)return!1;try{return contains(s,e.anchorNode)}catch{return!1}}function clientRectsFor(s){return s.nodeType==3?textRange(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function isEquivalentPosition(s,e,n,a){return n?scanFor(s,e,n,a,-1)||scanFor(s,e,n,a,1):!1}function domIndex(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function scanFor(s,e,n,a,o){for(;;){if(s==n&&e==a)return!0;if(e==(o<0?0:maxOffset(s))){if(s.nodeName=="DIV")return!1;let l=s.parentNode;if(!l||l.nodeType!=1)return!1;e=domIndex(s)+(o<0?0:1),s=l}else if(s.nodeType==1){if(s=s.childNodes[e+(o<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=o<0?maxOffset(s):0}else return!1}}function maxOffset(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function flattenRect(s,e){let n=e?s.left:s.right;return{left:n,right:n,top:s.top,bottom:s.bottom}}function windowRect(s){return{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function scrollRectIntoView(s,e,n,a,o,l,u,c){let f=s.ownerDocument,d=f.defaultView||window;for(let g=s;g;)if(g.nodeType==1){let O,S=g==f.body;if(S)O=windowRect(d);else{if(g.scrollHeight<=g.clientHeight&&g.scrollWidth<=g.clientWidth){g=g.assignedSlot||g.parentNode;continue}let k=g.getBoundingClientRect();O={left:k.left,right:k.left+g.clientWidth,top:k.top,bottom:k.top+g.clientHeight}}let b=0,E=0;if(o=="nearest")e.top<O.top?(E=-(O.top-e.top+u),n>0&&e.bottom>O.bottom+E&&(E=e.bottom-O.bottom+E+u)):e.bottom>O.bottom&&(E=e.bottom-O.bottom+u,n<0&&e.top-E<O.top&&(E=-(O.top+E-e.top+u)));else{let k=e.bottom-e.top,$=O.bottom-O.top;E=(o=="center"&&k<=$?e.top+k/2-$/2:o=="start"||o=="center"&&n<0?e.top-u:e.bottom-$+u)-O.top}if(a=="nearest"?e.left<O.left?(b=-(O.left-e.left+l),n>0&&e.right>O.right+b&&(b=e.right-O.right+b+l)):e.right>O.right&&(b=e.right-O.right+l,n<0&&e.left<O.left+b&&(b=-(O.left+b-e.left+l))):b=(a=="center"?e.left+(e.right-e.left)/2-(O.right-O.left)/2:a=="start"==c?e.left-l:e.right-(O.right-O.left)+l)-O.left,b||E)if(S)d.scrollBy(b,E);else{let k=0,$=0;if(E){let R=g.scrollTop;g.scrollTop+=E,$=g.scrollTop-R}if(b){let R=g.scrollLeft;g.scrollLeft+=b,k=g.scrollLeft-R}e={left:e.left-k,top:e.top-$,right:e.right-k,bottom:e.bottom-$},k&&Math.abs(k-b)<1&&(a="nearest"),$&&Math.abs($-E)<1&&(o="nearest")}if(S)break;g=g.assignedSlot||g.parentNode}else if(g.nodeType==11)g=g.host;else break}function scrollableParent(s){let e=s.ownerDocument;for(let n=s.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,n,a,o){this.anchorNode=e,this.anchorOffset=n,this.focusNode=a,this.focusOffset=o}}let preventScrollSupported=null;function focusPreventScroll(s){if(s.setActive)return s.setActive();if(preventScrollSupported)return s.focus(preventScrollSupported);let e=[];for(let n=s;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(s.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let n=0;n<e.length;){let a=e[n++],o=e[n++],l=e[n++];a.scrollTop!=o&&(a.scrollTop=o),a.scrollLeft!=l&&(a.scrollLeft=l)}}}let scratchRange;function textRange(s,e,n=e){let a=scratchRange||(scratchRange=document.createRange());return a.setEnd(s,n),a.setStart(s,e),a}function dispatchKey(s,e,n){let a={key:e,code:e,keyCode:n,which:n,cancelable:!0},o=new KeyboardEvent("keydown",a);o.synthetic=!0,s.dispatchEvent(o);let l=new KeyboardEvent("keyup",a);return l.synthetic=!0,s.dispatchEvent(l),o.defaultPrevented||l.defaultPrevented}function getRoot(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function clearAttributes(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function atElementStart(s,e){let n=e.focusNode,a=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=a)return!1;for(;;)if(a){if(n.nodeType!=1)return!1;let o=n.childNodes[a-1];o.contentEditable=="false"?a--:(n=o,a=maxOffset(n))}else{if(n==s)return!0;a=domIndex(n),n=n.parentNode}}class DOMPos{constructor(e,n,a=!0){this.node=e,this.offset=n,this.precise=a}static before(e,n){return new DOMPos(e.parentNode,domIndex(e),n)}static after(e,n){return new DOMPos(e.parentNode,domIndex(e)+1,n)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let a of this.children){if(a==e)return n;n+=a.length+a.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.dirty&2){let a=this.dom,o=null,l;for(let u of this.children){if(u.dirty){if(!u.dom&&(l=o?o.nextSibling:a.firstChild)){let c=ContentView.get(l);(!c||!c.parent&&c.canReuseDOM(u))&&u.reuseDOM(l)}u.sync(e,n),u.dirty=0}if(l=o?o.nextSibling:a.firstChild,n&&!n.written&&n.node==a&&l!=u.dom&&(n.written=!0),u.dom.parentNode==a)for(;l&&l!=u.dom;)l=rm$1(l);else a.insertBefore(u.dom,l);o=u.dom}for(l=o?o.nextSibling:a.firstChild,l&&n&&n.node==a&&(n.written=!0);l;)l=rm$1(l)}else if(this.dirty&1)for(let a of this.children)a.dirty&&(a.sync(e,n),a.dirty=0)}reuseDOM(e){}localPosFromDOM(e,n){let a;if(e==this.dom)a=this.dom.childNodes[n];else{let o=maxOffset(e)==0?0:n==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;o==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?o=-1:o=1),e=l}o<0?a=e:a=e.nextSibling}if(a==this.dom.firstChild)return 0;for(;a&&!ContentView.get(a);)a=a.nextSibling;if(!a)return this.length;for(let o=0,l=0;;o++){let u=this.children[o];if(u.dom==a)return l;l+=u.length+u.breakAfter}}domBoundsAround(e,n,a=0){let o=-1,l=-1,u=-1,c=-1;for(let f=0,d=a,g=a;f<this.children.length;f++){let O=this.children[f],S=d+O.length;if(d<e&&S>n)return O.domBoundsAround(e,n,d);if(S>=e&&o==-1&&(o=f,l=d),d>n&&O.dom.parentNode==this.dom){u=f,c=g;break}g=S,d=S+O.breakAfter}return{from:l,to:c<0?a+this.length:c,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.dirty|=2),n.dirty&1)return;n.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,a=noChildren){this.markDirty();for(let o=e;o<n;o++){let l=this.children[o];l.parent==this&&l.destroy()}this.children.splice(e,n-e,...a);for(let o=0;o<a.length;o++)a[o].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ChildCursor(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,a,o,l,u){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class ChildCursor{constructor(e,n,a){this.children=e,this.pos=n,this.i=a,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let a=this.children[--this.i];this.pos-=a.length+a.breakAfter}}}function replaceRange(s,e,n,a,o,l,u,c,f){let{children:d}=s,g=d.length?d[e]:null,O=l.length?l[l.length-1]:null,S=O?O.breakAfter:u;if(!(e==a&&g&&!u&&!S&&l.length<2&&g.merge(n,o,l.length?O:null,n==0,c,f))){if(a<d.length){let b=d[a];b&&o<b.length?(e==a&&(b=b.split(o),o=0),!S&&O&&b.merge(0,o,O,!0,0,f)?l[l.length-1]=b:(o&&b.merge(0,o,null,!1,0,f),l.push(b))):b?.breakAfter&&(O?O.breakAfter=1:u=1),a++}for(g&&(g.breakAfter=u,n>0&&(!u&&l.length&&g.merge(n,g.length,l[0],!1,c,0)?g.breakAfter=l.shift().breakAfter:(n<g.length||g.children.length&&g.children[g.children.length-1].length==0)&&g.merge(n,g.length,null,!1,c,0),e++));e<a&&l.length;)if(d[a-1].become(l[l.length-1]))a--,l.pop(),f=l.length?0:c;else if(d[e].become(l[0]))e++,l.shift(),c=l.length?0:f;else break;!l.length&&e&&a<d.length&&!d[e-1].breakAfter&&d[a].merge(0,0,d[e-1],!1,c,f)&&e--,(e<a||l.length)&&s.replaceChildren(e,a,l)}}function mergeChildrenInto(s,e,n,a,o,l){let u=s.childCursor(),{i:c,off:f}=u.findPos(n,1),{i:d,off:g}=u.findPos(e,-1),O=e-n;for(let S of a)O+=S.length;s.length+=O,replaceRange(s,d,g,c,f,a,0,o,l)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,a){return a&&(!(a instanceof TextView)||this.length-(n-e)+a.length>MaxJoinLen)?!1:(this.text=this.text.slice(0,e)+(a?a.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new TextView(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new DOMPos(this.dom,e)}domBoundsAround(e,n,a){return{from:a,to:a+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return textCoords(this.dom,e,n)}}class MarkView extends ContentView{constructor(e,n=[],a=0){super(),this.mark=e,this.children=n,this.length=a;for(let o of n)o.setParent(this)}setAttrs(e){if(clearAttributes(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,n){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,a,o,l,u){return a&&(!(a instanceof MarkView&&a.mark.eq(this.mark))||e&&l<=0||n<this.length&&u<=0)?!1:(mergeChildrenInto(this,e,n,a?a.children:[],l-1,u-1),this.markDirty(),!0)}split(e){let n=[],a=0,o=-1,l=0;for(let c of this.children){let f=a+c.length;f>e&&n.push(a<e?c.split(e-a):c),o<0&&a>=e&&(o=l),a=f,l++}let u=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new MarkView(this.mark,n,u)}domAtPos(e){return inlineDOMAtPos(this,e)}coordsAt(e,n){return coordsInChildren(this,e,n)}}function textCoords(s,e,n){let a=s.nodeValue.length;e>a&&(e=a);let o=e,l=e,u=0;e==0&&n<0||e==a&&n>=0?browser.chrome||browser.gecko||(e?(o--,u=1):l<a&&(l++,u=-1)):n<0?o--:l<a&&l++;let c=textRange(s,o,l).getClientRects();if(!c.length)return null;let f=c[(u?u<0:n>=0)?0:c.length-1];return browser.safari&&!u&&f.width==0&&(f=Array.prototype.find.call(c,d=>d.width)||f),u?flattenRect(f,u<0):f||null}class WidgetView extends ContentView{constructor(e,n,a){super(),this.widget=e,this.length=n,this.side=a,this.prevWidget=null}static create(e,n,a){return new(e.customView||WidgetView)(e,n,a)}split(e){let n=WidgetView.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,n,a,o,l,u){return a&&(!(a instanceof WidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||n<this.length&&u<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-n),!0)}become(e){return e instanceof WidgetView&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Text.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,a=n&&n.state.doc,o=this.posAtStart;return a?a.slice(o,o+this.length):Text.empty}domAtPos(e){return(this.length?e==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let a=this.widget.coordsAt(this.dom,e,n);if(a)return a;let o=this.dom.getClientRects(),l=null;if(!o.length)return null;for(let u=e>0?o.length-1:0;l=o[u],!(e>0?u==0:u==o.length-1||l.top<l.bottom);u+=e>0?-1:1);return this.length?l:flattenRect(l,this.side>0)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class CompositionView extends WidgetView{domAtPos(e){let{topView:n,text:a}=this.widget;return n?scanCompositionTree(e,0,n,a,this.length-n.length,(o,l)=>o.domAtPos(l),(o,l)=>new DOMPos(o,Math.min(l,o.nodeValue.length))):new DOMPos(a,Math.min(e,a.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,n){let{topView:a,text:o}=this.widget;return a?posFromDOMInCompositionTree(e,n,a,o,this.length-a.length):Math.min(n,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,n){let{topView:a,text:o}=this.widget;return a?scanCompositionTree(e,n,a,o,this.length-a.length,(l,u,c)=>l.coordsAt(u,c),(l,u,c)=>textCoords(l,u,c)):textCoords(o,e,n)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function scanCompositionTree(s,e,n,a,o,l,u){if(n instanceof MarkView){for(let c=n.dom.firstChild;c;c=c.nextSibling){let f=ContentView.get(c);if(f){let d=contains(c,a),g=f.length+(d?o:0);if(s<g||s==g&&f.getSide()<=0)return d?scanCompositionTree(s,e,f,a,o,l,u):l(f,s,e);s-=g}else{let d=scanCompositionNode(s,e,c,u);if(typeof d!="number")return d;s=d}}return l(n,n.length,-1)}else return n.dom==a?u(a,s,e):l(n,s,e)}function scanCompositionNode(s,e,n,a){if(n.nodeType==3){let o=n.nodeValue.length;if(s<=o)return a(n,s,e);s-=o}else if(n.nodeType==1&&n.contentEditable!="false")for(let o=n.firstChild;o;o=o.nextSibling){let l=scanCompositionNode(s,e,o,a);if(typeof l!="number")return l;s=l}return s}function posFromDOMInCompositionTree(s,e,n,a,o){if(n instanceof MarkView){let l=0;for(let u=n.dom.firstChild;u;u=u.nextSibling){let c=ContentView.get(u);if(c){let f=contains(u,a);if(contains(u,s))return l+(f?posFromDOMInCompositionTree(s,e,c,a,o):c.localPosFromDOM(s,e));l+=c.length+(f?o:0)}else{let f=posFromDOMInOpaqueNode(s,e,u);if(f.result!=null)return l+f.result;l+=f.size}}}else if(n.dom==a)return Math.min(e,a.nodeValue.length);return n.localPosFromDOM(s,e)}function posFromDOMInOpaqueNode(s,e,n){if(n.nodeType==3)return s==n?{result:e}:{size:n.nodeValue.length};if(n.nodeType==1&&n.contentEditable!="false"){let a=0;for(let o=n.firstChild,l=0;;o=o.nextSibling,l++){if(s==n&&l==e)return{result:a};if(!o)return{size:a};let u=posFromDOMInOpaqueNode(s,e,o);if(u.result!=null)return{result:e+u.result};a+=u.size}}else return n.contains(s)?{result:0}:{size:0}}class WidgetBufferView extends ContentView{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof WidgetBufferView&&e.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(s,e){let n=s.dom,{children:a}=s,o=0;for(let l=0;o<a.length;o++){let u=a[o],c=l+u.length;if(!(c==l&&u.getSide()<=0)){if(e>l&&e<c&&u.dom.parentNode==n)return u.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=o;l>0;l--){let u=a[l-1];if(u.dom.parentNode==n)return u.domAtPos(u.length)}for(let l=o;l<a.length;l++){let u=a[l];if(u.dom.parentNode==n)return u.domAtPos(0)}return new DOMPos(n,0)}function joinInlineInto(s,e,n){let a,{children:o}=s;n>0&&e instanceof MarkView&&o.length&&(a=o[o.length-1])instanceof MarkView&&a.mark.eq(e.mark)?joinInlineInto(a,e.children[0],n-1):(o.push(e),e.setParent(s)),s.length+=e.length}function coordsInChildren(s,e,n){let a=null,o=-1,l=null,u=-1;function c(d,g){for(let O=0,S=0;O<d.children.length&&S<=g;O++){let b=d.children[O],E=S+b.length;E>=g&&(b.children.length?c(b,g-S):(!l||l.isHidden&&n>0)&&(E>g||S==E&&b.getSide()>0)?(l=b,u=g-S):(S<g||S==E&&b.getSide()<0&&!b.isHidden)&&(a=b,o=g-S)),S=E}}c(s,e);let f=(n<0?a:l)||a||l;return f?f.coordsAt(Math.max(0,f==a?o:u),n):fallbackRect(s)}function fallbackRect(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let n=clientRectsFor(e);return n[n.length-1]||null}function combineAttrs(s,e){for(let n in s)n=="class"&&e.class?e.class+=" "+s.class:n=="style"&&e.style?e.style+=";"+s.style:e[n]=s[n];return e}function attrsEq(s,e){if(s==e)return!0;if(!s||!e)return!1;let n=Object.keys(s),a=Object.keys(e);if(n.length!=a.length)return!1;for(let o of n)if(a.indexOf(o)==-1||s[o]!==e[o])return!1;return!0}function updateAttrs(s,e,n){let a=null;if(e)for(let o in e)n&&o in n||s.removeAttribute(a=o);if(n)for(let o in n)e&&e[o]==n[o]||s.setAttribute(a=o,n[o]);return!!a}class WidgetType{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}coordsAt(e,n,a){return null}get customView(){return null}get isHidden(){return!1}destroy(e){}}var BlockType=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(e,n,a,o){super(),this.startSide=e,this.endSide=n,this.widget=a,this.spec=o}get heightRelevant(){return!1}static mark(e){return new MarkDecoration(e)}static widget(e){let n=e.side||0,a=!!e.block;return n+=a?n>0?3e8:-4e8:n>0?1e8:-1e8,new PointDecoration(e,n,n,a,e.widget||null,!1)}static replace(e){let n=!!e.block,a,o;if(e.isBlockGap)a=-5e8,o=4e8;else{let{start:l,end:u}=getInclusive(e,n);a=(l?n?-3e8:-1:5e8)-1,o=(u?n?2e8:1:-6e8)+1}return new PointDecoration(e,a,o,n,e.widget||null,!0)}static line(e){return new LineDecoration(e)}static set(e,n=!1){return RangeSet.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(e){let{start:n,end:a}=getInclusive(e);super(n?-1:5e8,a?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof MarkDecoration&&this.tagName==e.tagName&&this.class==e.class&&attrsEq(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof LineDecoration&&this.spec.class==e.spec.class&&attrsEq(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(e,n,a,o,l,u){super(n,a,l,e),this.block=o,this.isReplace=u,this.mapMode=o?n<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide<this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof PointDecoration&&widgetsEq(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}PointDecoration.prototype.point=!0;function getInclusive(s,e=!1){let{inclusiveStart:n,inclusiveEnd:a}=s;return n==null&&(n=s.inclusive),a==null&&(a=s.inclusive),{start:n??e,end:a??e}}function widgetsEq(s,e){return s==e||!!(s&&e&&s.compare(e))}function addRange(s,e,n,a=0){let o=n.length-1;o>=0&&n[o]+a>=s?n[o]=Math.max(n[o],e):n.push(s,e)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,a,o,l,u){if(a){if(!(a instanceof LineView))return!1;this.dom||a.transferDOM(this)}return o&&this.setDeco(a?a.attrs:null),mergeChildrenInto(this,e,n,a?a.children:[],l,u),!0}split(e){let n=new LineView;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:a,off:o}=this.childPos(e);o&&(n.append(this.children[a].split(o),0),this.children[a].merge(o,this.children[a].length,null,!1,0,0),a++);for(let l=a;l<this.children.length;l++)n.append(this.children[l],0);for(;a>0&&this.children[a-1].length==0;)this.children[--a].destroy();return this.children.length=a,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){attrsEq(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){joinInlineInto(this,e,n)}addLineDeco(e){let n=e.spec.attributes,a=e.spec.class;n&&(this.attrs=combineAttrs(n,this.attrs||{})),a&&(this.attrs=combineAttrs({class:a},this.attrs||{}))}domAtPos(e){return inlineDOMAtPos(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,n){var a;this.dom?this.dirty&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let o=this.dom.lastChild;for(;o&&ContentView.get(o)instanceof MarkView;)o=o.lastChild;if(!o||!this.length||o.nodeName!="BR"&&((a=ContentView.get(o))===null||a===void 0?void 0:a.isEditable)==!1&&(!browser.ios||!this.children.some(l=>l instanceof TextView))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let a of this.children){if(!(a instanceof TextView)||/[^ -~]/.test(a.text))return null;let o=clientRectsFor(a.dom);if(o.length!=1)return null;e+=o[0].width,n=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let a=coordsInChildren(this,e,n);if(!this.children.length&&a&&this.parent){let{heightOracle:o}=this.parent.view.viewState,l=a.bottom-a.top;if(Math.abs(l-o.lineHeight)<2&&o.textHeight<l){let u=(l-o.textHeight)/2;return{top:a.top+u,bottom:a.bottom-u,left:a.left,right:a.left}}}return a}become(e){return!1}get type(){return BlockType.Text}static find(e,n){for(let a=0,o=0;a<e.children.length;a++){let l=e.children[a],u=o+l.length;if(u>=n){if(l instanceof LineView)return l;if(u>n)break}o=u+l.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(e,n,a){super(),this.widget=e,this.length=n,this.type=a,this.breakAfter=0,this.prevWidget=null}merge(e,n,a,o,l,u){return a&&(!(a instanceof BlockWidgetView)||!this.widget.compare(a.widget)||e>0&&l<=0||n<this.length&&u<=0)?!1:(this.length=e+(a?a.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?DOMPos.before(this.dom):DOMPos.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let a=new BlockWidgetView(this.widget,n,this.type);return a.breakAfter=this.breakAfter,a}get children(){return noChildren}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(e){return e instanceof BlockWidgetView&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ContentBuilder{constructor(e,n,a,o){this.doc=e,this.pos=n,this.end=a,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof BlockWidgetView&&e.type==BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,n,a){for(;e>0;){if(this.textOff==this.text.length){let{value:l,lineBreak:u,done:c}=this.cursor.next(this.skip);if(this.skip=0,c)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=l,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-a)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+o)),n),a),this.atCursorPos=!0,this.textOff+=o,e-=o,a=0}}span(e,n,a,o){this.buildText(n-e,a,o),this.pos=n,this.openStart<0&&(this.openStart=o)}point(e,n,a,o,l,u){if(this.disallowBlockEffectsFor[u]&&a instanceof PointDecoration){if(a.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=n-e;if(a instanceof PointDecoration)if(a.block){let{type:f}=a;f==BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(a.widget||new NullWidget("div"),c,f))}else{let f=WidgetView.create(a.widget||new NullWidget("span"),c,c?0:a.startSide),d=this.atCursorPos&&!f.isEditable&&l<=o.length&&(e<n||a.startSide>0),g=!f.isEditable&&(e<n||l>o.length||a.startSide<=0),O=this.getLine();this.pendingBuffer==2&&!d&&!f.isEditable&&(this.pendingBuffer=0),this.flushBuffer(o),d&&(O.append(wrapMarks(new WidgetBufferView(1),o),l),l=o.length+Math.max(0,l-o.length)),O.append(wrapMarks(f,o),l),this.atCursorPos=g,this.pendingBuffer=g?e<n||l>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(a);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=l)}static build(e,n,a,o,l){let u=new ContentBuilder(e,n,a,l);return u.openEnd=RangeSet.spans(o,n,a,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function wrapMarks(s,e){for(let n of e)s=new MarkView(n,[s],s.length);return s}class NullWidget extends WidgetType{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),perLineTextDirection=Facet.define({combine:s=>s.some(e=>e)}),nativeSelectionHidden=Facet.define({combine:s=>s.some(e=>e)});class ScrollTarget{constructor(e,n="nearest",a="nearest",o=5,l=5){this.range=e,this.y=n,this.x=a,this.yMargin=o,this.xMargin=l}map(e){return e.empty?this:new ScrollTarget(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const scrollIntoView$1=StateEffect.define({map:(s,e)=>s.map(e)});function logException(s,e,n){let a=s.facet(exceptionSink);a.length?a[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const editable=Facet.define({combine:s=>s.length?s[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(e,n,a,o){this.id=e,this.create=n,this.domEventHandlers=a,this.extension=o(this)}static define(e,n){const{eventHandlers:a,provide:o,decorations:l}=n||{};return new ViewPlugin(nextPluginID++,e,a,u=>{let c=[viewPlugin.of(u)];return l&&c.push(decorations.of(f=>{let d=f.plugin(u);return d?l(d):Decoration.none})),o&&c.push(o(u)),c})}static fromClass(e,n){return ViewPlugin.define(a=>new e(a),n)}}class PluginInstance{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(a){if(logException(n.state,a,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){logException(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(a){logException(e.state,a,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),atomicRanges=Facet.define(),scrollMargins=Facet.define(),styleModule=Facet.define();class ChangedRange{constructor(e,n,a,o){this.fromA=e,this.toA=n,this.fromB=a,this.toB=o}join(e){return new ChangedRange(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,a=this;for(;n>0;n--){let o=e[n-1];if(!(o.fromA>a.toA)){if(o.toA<a.fromA)break;a=a.join(o),e.splice(n-1,1)}}return e.splice(n,0,a),e}static extendWithRanges(e,n){if(n.length==0)return e;let a=[];for(let o=0,l=0,u=0,c=0;;o++){let f=o==e.length?null:e[o],d=u-c,g=f?f.fromB:1e9;for(;l<n.length&&n[l]<g;){let O=n[l],S=n[l+1],b=Math.max(c,O),E=Math.min(g,S);if(b<=E&&new ChangedRange(b+d,E+d,b,E).addToSet(a),S>g)break;l+=2}if(!f)return a;new ChangedRange(f.fromA,f.toA,f.fromB,f.toB).addToSet(a),u=f.toA,c=f.toB}}}class ViewUpdate{constructor(e,n,a){this.view=e,this.state=n,this.transactions=a,this.flags=0,this.startState=e.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let l of a)this.changes=this.changes.compose(l.changes);let o=[];this.changes.iterChangedRanges((l,u,c,f)=>o.push(new ChangedRange(l,u,c,f))),this.changedRanges=o}static create(e,n,a){return new ViewUpdate(e,n,a)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Direction=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(s){let e=[];for(let n=0;n<s.length;n++)e.push(1<<+s[n]);return e}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),n=s.charCodeAt(1);Brackets[e]=n,Brackets[n]=-e}function charType(s){return s<=247?LowTypes[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?ArabicTypes[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8203?256:64336<=s&&s<=65023?4:s==8204?256:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{constructor(e,n,a){this.from=e,this.to=n,this.level=a}get dir(){return this.level%2?RTL:LTR}side(e,n){return this.dir==n==e?this.to:this.from}static find(e,n,a,o){let l=-1;for(let u=0;u<e.length;u++){let c=e[u];if(c.from<=n&&c.to>=n){if(c.level==a)return u;(l<0||(o!=0?o<0?c.from<n:c.to>n:e[l].level>c.level))&&(l=u)}}if(l<0)throw new RangeError("Index out of range");return l}}const types=[];function computeOrder(s,e){let n=s.length,a=e==LTR?1:2,o=e==LTR?2:1;if(!s||a==1&&!BidiRE.test(s))return trivialOrder(n);for(let u=0,c=a,f=a;u<n;u++){let d=charType(s.charCodeAt(u));d==512?d=c:d==8&&f==4&&(d=16),types[u]=d==4?2:d,d&7&&(f=d),c=d}for(let u=0,c=a,f=a;u<n;u++){let d=types[u];if(d==128)u<n-1&&c==types[u+1]&&c&24?d=types[u]=c:types[u]=256;else if(d==64){let g=u+1;for(;g<n&&types[g]==64;)g++;let O=u&&c==8||g<n&&types[g]==8?f==1?1:8:256;for(let S=u;S<g;S++)types[S]=O;u=g-1}else d==8&&f==1&&(types[u]=1);c=d,d&7&&(f=d)}for(let u=0,c=0,f=0,d,g,O;u<n;u++)if(g=Brackets[d=s.charCodeAt(u)])if(g<0){for(let S=c-3;S>=0;S-=3)if(BracketStack[S+1]==-g){let b=BracketStack[S+2],E=b&2?a:b&4?b&1?o:a:0;E&&(types[u]=types[BracketStack[S]]=E),c=S;break}}else{if(BracketStack.length==189)break;BracketStack[c++]=u,BracketStack[c++]=d,BracketStack[c++]=f}else if((O=types[u])==2||O==1){let S=O==a;f=S?0:1;for(let b=c-3;b>=0;b-=3){let E=BracketStack[b+2];if(E&2)break;if(S)BracketStack[b+2]|=2;else{if(E&4)break;BracketStack[b+2]|=4}}}for(let u=0;u<n;u++)if(types[u]==256){let c=u+1;for(;c<n&&types[c]==256;)c++;let f=(u?types[u-1]:a)==1,d=(c<n?types[c]:a)==1,g=f==d?f?1:2:a;for(let O=u;O<c;O++)types[O]=g;u=c-1}let l=[];if(a==1)for(let u=0;u<n;){let c=u,f=types[u++]!=1;for(;u<n&&f==(types[u]!=1);)u++;if(f)for(let d=u;d>c;){let g=d,O=types[--d]!=2;for(;d>c&&O==(types[d-1]!=2);)d--;l.push(new BidiSpan(d,g,O?2:1))}else l.push(new BidiSpan(c,u,0))}else for(let u=0;u<n;){let c=u,f=types[u++]==2;for(;u<n&&f==(types[u]==2);)u++;l.push(new BidiSpan(c,u,f?1:2))}return l}function trivialOrder(s){return[new BidiSpan(0,s,0)]}let movedOver="";function moveVisually(s,e,n,a,o){var l;let u=a.head-s.from,c=-1;if(u==0){if(!o||!s.length)return null;e[0].level!=n&&(u=e[0].side(!1,n),c=0)}else if(u==s.length){if(o)return null;let S=e[e.length-1];S.level!=n&&(u=S.side(!0,n),c=e.length-1)}c<0&&(c=BidiSpan.find(e,u,(l=a.bidiLevel)!==null&&l!==void 0?l:-1,a.assoc));let f=e[c];u==f.side(o,n)&&(f=e[c+=o?1:-1],u=f.side(!o,n));let d=o==(f.dir==n),g=findClusterBreak(s.text,u,d);if(movedOver=s.text.slice(Math.min(u,g),Math.max(u,g)),g!=f.side(o,n))return EditorSelection.cursor(g+s.from,d?-1:1,f.level);let O=c==(o?e.length-1:0)?null:e[c+(o?1:-1)];return!O&&f.level!=n?EditorSelection.cursor(o?s.to:s.from,o?-1:1,n):O&&O.level<f.level?EditorSelection.cursor(O.side(!o,n)+s.from,o?1:-1,O.level):EditorSelection.cursor(g+s.from,o?-1:1,f.level)}const LineBreakPlaceholder="￿";class DOMReader{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=LineBreakPlaceholder}readRange(e,n){if(!e)return this;let a=e.parentNode;for(let o=e;;){this.findPointBefore(a,o),this.readNode(o);let l=o.nextSibling;if(l==n)break;let u=ContentView.get(o),c=ContentView.get(l);(u&&c?u.breakAfter:(u?u.breakAfter:isBlockElement(o))||isBlockElement(l)&&(o.nodeName!="BR"||o.cmIgnore))&&this.lineBreak(),o=l}return this.findPointBefore(a,n),this}readTextNode(e){let n=e.nodeValue;for(let a of this.points)a.node==e&&(a.pos=this.text.length+Math.min(a.offset,n.length));for(let a=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,u=1,c;if(this.lineSeparator?(l=n.indexOf(this.lineSeparator,a),u=this.lineSeparator.length):(c=o.exec(n))&&(l=c.index,u=c[0].length),this.append(n.slice(a,l<0?n.length:l)),l<0)break;if(this.lineBreak(),u>1)for(let f of this.points)f.node==e&&f.pos>this.text.length&&(f.pos-=u-1);a=l+u}}readNode(e){if(e.cmIgnore)return;let n=ContentView.get(e),a=n&&n.overrideDOMText;if(a!=null){this.findPointInside(e,a.length);for(let o=a.iter();!o.next().done;)o.lineBreak?this.lineBreak():this.append(o.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let a of this.points)a.node==e&&e.childNodes[a.offset]==n&&(a.pos=this.text.length)}findPointInside(e,n){for(let a of this.points)(e.nodeType==3?a.node==e:e.contains(a.node))&&(a.pos=this.text.length+Math.min(n,a.offset))}}function isBlockElement(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}class DOMPoint{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class DocView extends ContentView{constructor(e){super(),this.view=e,this.compositionDeco=Decoration.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Decoration.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=computeCompositionDeco(this.view,e.changes)),(browser.ie||browser.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.updateDeco(),l=findChangedDeco(a,o,e.changes);return n=ChangedRange.extendWithRanges(n,l),this.dirty==0&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n);let{observer:a}=this.view;a.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=browser.chrome||browser.ios?{node:a.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,l),this.dirty=0,l&&(l.written||a.selectionRange.focusNode!=l.node)&&(this.forceSelection=!0),this.dom.style.height=""});let o=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.children)l instanceof BlockWidgetView&&l.widget instanceof BlockGapWidget&&o.push(l.dom);a.updateGaps(o)}updateChildren(e,n){let a=this.childCursor(n);for(let o=e.length-1;;o--){let l=o>=0?e[o]:null;if(!l)break;let{fromA:u,toA:c,fromB:f,toB:d}=l,{content:g,breakAtStart:O,openStart:S,openEnd:b}=ContentBuilder.build(this.view.state.doc,f,d,this.decorations,this.dynamicDecorationMap),{i:E,off:k}=a.findPos(c,1),{i:$,off:R}=a.findPos(u,-1);replaceRange(this,$,R,E,k,g,O,S,b)}}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let a=this.view.root.activeElement,o=a==this.dom,l=!o&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(a&&this.dom.contains(a));if(!(o||n||l))return;let u=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,f=this.domAtPos(c.anchor),d=c.empty?f:this.domAtPos(c.head);if(browser.gecko&&c.empty&&!this.compositionDeco.size&&betweenUneditable(f)){let O=document.createTextNode("");this.view.observer.ignore(()=>f.node.insertBefore(O,f.node.childNodes[f.offset]||null)),f=d=new DOMPos(O,0),u=!0}let g=this.view.observer.selectionRange;(u||!g.focusNode||!isEquivalentPosition(f.node,f.offset,g.anchorNode,g.anchorOffset)||!isEquivalentPosition(d.node,d.offset,g.focusNode,g.focusOffset))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(g.focusNode)&&inUneditable(g.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let O=getSelection(this.view.root);if(O)if(c.empty){if(browser.gecko){let S=nextToUneditable(f.node,f.offset);if(S&&S!=3){let b=nearbyTextNode(f.node,f.offset,S==1?1:-1);b&&(f=new DOMPos(b,S==1?0:b.nodeValue.length))}}O.collapse(f.node,f.offset),c.bidiLevel!=null&&g.cursorBidiLevel!=null&&(g.cursorBidiLevel=c.bidiLevel)}else if(O.extend){O.collapse(f.node,f.offset);try{O.extend(d.node,d.offset)}catch{}}else{let S=document.createRange();c.anchor>c.head&&([f,d]=[d,f]),S.setEnd(d.node,d.offset),S.setStart(f.node,f.offset),O.removeAllRanges(),O.addRange(S)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),a&&a.focus())}),this.view.observer.setSelectionRange(f,d)),this.impreciseAnchor=f.precise?null:new DOMPos(g.anchorNode,g.anchorOffset),this.impreciseHead=d.precise?null:new DOMPos(g.focusNode,g.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,n=e.state.selection.main,a=getSelection(e.root),{anchorNode:o,anchorOffset:l}=e.observer.selectionRange;if(!a||!n.empty||!n.assoc||!a.modify)return;let u=LineView.find(this,n.head);if(!u)return;let c=u.posAtStart;if(n.head==c||n.head==c+u.length)return;let f=this.coordsAt(n.head,-1),d=this.coordsAt(n.head,1);if(!f||!d||f.bottom>d.top)return;let g=this.domAtPos(n.head+n.assoc);a.collapse(g.node,g.offset),a.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let O=e.observer.selectionRange;e.docView.posFromDOM(O.anchorNode,O.anchorOffset)!=n.from&&a.collapse(o,l)}nearest(e){for(let n=e;n;){let a=ContentView.get(n);if(a&&a.rootView==this)return a;n=n.parentNode}return null}posFromDOM(e,n){let a=this.nearest(e);if(!a)throw new RangeError("Trying to find position for a DOM position outside of the document");return a.localPosFromDOM(e,n)+a.posAtStart}domAtPos(e){let{i:n,off:a}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let o=this.children[n];if(a<o.length||o instanceof LineView)break;n++,a=0}return this.children[n].domAtPos(a)}coordsAt(e,n){for(let a=this.length,o=this.children.length-1;;o--){let l=this.children[o],u=a-l.breakAfter-l.length;if(e>u||e==u&&l.type!=BlockType.WidgetBefore&&l.type!=BlockType.WidgetAfter&&(!o||n==2||this.children[o-1].breakAfter||this.children[o-1].type==BlockType.WidgetBefore&&n>-2))return l.coordsAt(e-u,n);a=u}}measureVisibleLineHeights(e){let n=[],{from:a,to:o}=e,l=this.view.contentDOM.clientWidth,u=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,f=this.view.textDirection==Direction.LTR;for(let d=0,g=0;g<this.children.length;g++){let O=this.children[g],S=d+O.length;if(S>o)break;if(d>=a){let b=O.dom.getBoundingClientRect();if(n.push(b.height),u){let E=O.dom.lastChild,k=E?clientRectsFor(E):[];if(k.length){let $=k[k.length-1],R=f?$.right-b.left:b.right-$.left;R>c&&(c=R,this.minWidth=l,this.minWidthFrom=d,this.minWidthTo=S)}}}d=S+O.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let l of this.children)if(l instanceof LineView){let u=l.measureTextSize();if(u)return u}let e=document.createElement("div"),n,a,o;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=clientRectsFor(e.firstChild)[0];n=e.getBoundingClientRect().height,a=l?l.width/27:7,o=l?l.height:n,e.remove()}),{lineHeight:n,charWidth:a,textHeight:o}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new ChildCursor(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let a=0,o=0;;o++){let l=o==n.viewports.length?null:n.viewports[o],u=l?l.from-1:this.length;if(u>a){let c=n.lineBlockAt(u).bottom-n.lineBlockAt(a).top;e.push(Decoration.replace({widget:new BlockGapWidget(c),block:!0,inclusive:!0,isBlockGap:!0}).range(a,u))}if(!l)break;a=l.to+1}return Decoration.set(e)}updateDeco(){let e=this.view.state.facet(decorations).map((n,a)=>(this.dynamicDecorationMap[a]=typeof n=="function")?n(this.view):n);for(let n=e.length;n<e.length+3;n++)this.dynamicDecorationMap[n]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:n}=e,a=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),o;if(!a)return;!n.empty&&(o=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(a={left:Math.min(a.left,o.left),top:Math.min(a.top,o.top),right:Math.max(a.right,o.right),bottom:Math.max(a.bottom,o.bottom)});let l=0,u=0,c=0,f=0;for(let g of this.view.state.facet(scrollMargins).map(O=>O(this.view)))if(g){let{left:O,right:S,top:b,bottom:E}=g;O!=null&&(l=Math.max(l,O)),S!=null&&(u=Math.max(u,S)),b!=null&&(c=Math.max(c,b)),E!=null&&(f=Math.max(f,E))}let d={left:a.left-l,top:a.top-c,right:a.right+u,bottom:a.bottom+f};scrollRectIntoView(this.view.scrollDOM,d,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Direction.LTR)}}function betweenUneditable(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}class BlockGapWidget extends WidgetType{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function compositionSurroundingNode(s){let e=s.observer.selectionRange,n=e.focusNode&&nearbyTextNode(e.focusNode,e.focusOffset,0);if(!n)return null;let a=s.docView.nearest(n);if(!a)return null;if(a instanceof LineView){let o=n;for(;o.parentNode!=a.dom;)o=o.parentNode;let l=o.previousSibling;for(;l&&!ContentView.get(l);)l=l.previousSibling;let u=l?ContentView.get(l).posAtEnd:a.posAtStart;return{from:u,to:u,node:o,text:n}}else{for(;;){let{parent:l}=a;if(!l)return null;if(l instanceof LineView)break;a=l}let o=a.posAtStart;return{from:o,to:o+a.length,node:a.dom,text:n}}}function computeCompositionDeco(s,e){let n=compositionSurroundingNode(s);if(!n)return Decoration.none;let{from:a,to:o,node:l,text:u}=n,c=e.mapPos(a,1),f=Math.max(c,e.mapPos(o,-1)),{state:d}=s,g=l.nodeType==3?l.nodeValue:new DOMReader([],d).readRange(l.firstChild,null).text;if(f-c<g.length)if(d.doc.sliceString(c,Math.min(d.doc.length,c+g.length),LineBreakPlaceholder)==g)f=c+g.length;else if(d.doc.sliceString(Math.max(0,f-g.length),f,LineBreakPlaceholder)==g)c=f-g.length;else return Decoration.none;else if(d.doc.sliceString(c,f,LineBreakPlaceholder)!=g)return Decoration.none;let O=ContentView.get(l);return O instanceof CompositionView?O=O.widget.topView:O&&(O.parent=null),Decoration.set(Decoration.replace({widget:new CompositionWidget(l,u,O),inclusive:!0}).range(c,f))}class CompositionWidget extends WidgetType{constructor(e,n,a){super(),this.top=e,this.text=n,this.topView=a}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return CompositionView}}function nearbyTextNode(s,e,n){if(n<=0)for(let a=s,o=e;;){if(a.nodeType==3)return a;if(a.nodeType==1&&o>0)a=a.childNodes[o-1],o=maxOffset(a);else break}if(n>=0)for(let a=s,o=e;;){if(a.nodeType==3)return a;if(a.nodeType==1&&o<a.childNodes.length&&n>=0)a=a.childNodes[o],o=0;else break}return null}function nextToUneditable(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}class DecorationComparator$1{constructor(){this.changes=[]}compareRange(e,n){addRange(e,n,this.changes)}comparePoint(e,n){addRange(e,n,this.changes)}}function findChangedDeco(s,e,n){let a=new DecorationComparator$1;return RangeSet.compare(s,e,n,a),a.changes}function inUneditable(s,e){for(let n=s;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function groupAt(s,e,n=1){let a=s.charCategorizer(e),o=s.doc.lineAt(e),l=e-o.from;if(o.length==0)return EditorSelection.cursor(e);l==0?n=1:l==o.length&&(n=-1);let u=l,c=l;n<0?u=findClusterBreak(o.text,l,!1):c=findClusterBreak(o.text,l);let f=a(o.text.slice(u,c));for(;u>0;){let d=findClusterBreak(o.text,u,!1);if(a(o.text.slice(d,u))!=f)break;u=d}for(;c<o.length;){let d=findClusterBreak(o.text,c);if(a(o.text.slice(c,d))!=f)break;c=d}return EditorSelection.range(u+o.from,c+o.from)}function getdx(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function getdy(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function yOverlap(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function upTop(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function upBot(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function domPosAtCoords(s,e,n){let a,o,l,u,c=!1,f,d,g,O;for(let E=s.firstChild;E;E=E.nextSibling){let k=clientRectsFor(E);for(let $=0;$<k.length;$++){let R=k[$];o&&yOverlap(o,R)&&(R=upTop(upBot(R,o.bottom),o.top));let Z=getdx(e,R),he=getdy(n,R);if(Z==0&&he==0)return E.nodeType==3?domPosInText(E,e,n):domPosAtCoords(E,e,n);if(!a||u>he||u==he&&l>Z){a=E,o=R,l=Z,u=he;let j=he?n<R.top?-1:1:Z?e<R.left?-1:1:0;c=!j||(j>0?$<k.length-1:$>0)}Z==0?n>R.bottom&&(!g||g.bottom<R.bottom)?(f=E,g=R):n<R.top&&(!O||O.top>R.top)&&(d=E,O=R):g&&yOverlap(g,R)?g=upBot(g,R.bottom):O&&yOverlap(O,R)&&(O=upTop(O,R.top))}}if(g&&g.bottom>=n?(a=f,o=g):O&&O.top<=n&&(a=d,o=O),!a)return{node:s,offset:0};let S=Math.max(o.left,Math.min(o.right,e));if(a.nodeType==3)return domPosInText(a,S,n);if(c&&a.contentEditable!="false")return domPosAtCoords(a,S,n);let b=Array.prototype.indexOf.call(s.childNodes,a)+(e>=(o.left+o.right)/2?1:0);return{node:s,offset:b}}function domPosInText(s,e,n){let a=s.nodeValue.length,o=-1,l=1e9,u=0;for(let c=0;c<a;c++){let f=textRange(s,c,c+1).getClientRects();for(let d=0;d<f.length;d++){let g=f[d];if(g.top==g.bottom)continue;u||(u=e-g.left);let O=(g.top>n?g.top-n:n-g.bottom)-1;if(g.left-1<=e&&g.right+1>=e&&O<l){let S=e>=(g.left+g.right)/2,b=S;if((browser.chrome||browser.gecko)&&textRange(s,c).getBoundingClientRect().left==g.right&&(b=!S),O<=0)return{node:s,offset:c+(b?1:0)};o=c+(b?1:0),l=O}}}return{node:s,offset:o>-1?o:u>0?s.nodeValue.length:0}}function posAtCoords(s,e,n,a=-1){var o,l;let u=s.contentDOM.getBoundingClientRect(),c=u.top+s.viewState.paddingTop,f,{docHeight:d}=s.viewState,{x:g,y:O}=e,S=O-c;if(S<0)return 0;if(S>d)return s.state.doc.length;for(let j=s.defaultLineHeight/2,K=!1;f=s.elementAtHeight(S),f.type!=BlockType.Text;)for(;S=a>0?f.bottom+j:f.top-j,!(S>=0&&S<=d);){if(K)return n?null:0;K=!0,a=-a}O=c+S;let b=f.from;if(b<s.viewport.from)return s.viewport.from==0?0:n?null:posAtCoordsImprecise(s,u,f,g,O);if(b>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:n?null:posAtCoordsImprecise(s,u,f,g,O);let E=s.dom.ownerDocument,k=s.root.elementFromPoint?s.root:E,$=k.elementFromPoint(g,O);$&&!s.contentDOM.contains($)&&($=null),$||(g=Math.max(u.left+1,Math.min(u.right-1,g)),$=k.elementFromPoint(g,O),$&&!s.contentDOM.contains($)&&($=null));let R,Z=-1;if($&&((o=s.docView.nearest($))===null||o===void 0?void 0:o.isEditable)!=!1){if(E.caretPositionFromPoint){let j=E.caretPositionFromPoint(g,O);j&&({offsetNode:R,offset:Z}=j)}else if(E.caretRangeFromPoint){let j=E.caretRangeFromPoint(g,O);j&&({startContainer:R,startOffset:Z}=j,(!s.contentDOM.contains(R)||browser.safari&&isSuspiciousSafariCaretResult(R,Z,g)||browser.chrome&&isSuspiciousChromeCaretResult(R,Z,g))&&(R=void 0))}}if(!R||!s.docView.dom.contains(R)){let j=LineView.find(s.docView,b);if(!j)return S>f.top+f.height/2?f.to:f.from;({node:R,offset:Z}=domPosAtCoords(j.dom,g,O))}let he=s.docView.nearest(R);if(!he)return null;if(he.isWidget&&((l=he.dom)===null||l===void 0?void 0:l.nodeType)==1){let j=he.dom.getBoundingClientRect();return e.y<j.top||e.y<=j.bottom&&e.x<=(j.left+j.right)/2?he.posAtStart:he.posAtEnd}else return he.localPosFromDOM(R,Z)+he.posAtStart}function posAtCoordsImprecise(s,e,n,a,o){let l=Math.round((a-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&n.height>s.defaultLineHeight*1.5){let c=Math.floor((o-n.top)/s.defaultLineHeight);l+=c*s.viewState.heightOracle.lineLength}let u=s.state.sliceDoc(n.from,n.to);return n.from+findColumn(u,l,s.state.tabSize)}function isSuspiciousSafariCaretResult(s,e,n){let a;if(s.nodeType!=3||e!=(a=s.nodeValue.length))return!1;for(let o=s.nextSibling;o;o=o.nextSibling)if(o.nodeType!=1||o.nodeName!="BR")return!1;return textRange(s,a-1,a).getBoundingClientRect().left>n}function isSuspiciousChromeCaretResult(s,e,n){if(e!=0)return!1;for(let o=s;;){let l=o.parentNode;if(!l||l.nodeType!=1||l.firstChild!=o)return!1;if(l.classList.contains("cm-line"))break;o=l}let a=s.nodeType==1?s.getBoundingClientRect():textRange(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return n-a.left>5}function moveToLineBoundary(s,e,n,a){let o=s.state.doc.lineAt(e.head),l=!a||!s.lineWrapping?null:s.coordsAtPos(e.assoc<0&&e.head>o.from?e.head-1:e.head);if(l){let f=s.dom.getBoundingClientRect(),d=s.textDirectionAt(o.from),g=s.posAtCoords({x:n==(d==Direction.LTR)?f.right-1:f.left+1,y:(l.top+l.bottom)/2});if(g!=null)return EditorSelection.cursor(g,n?-1:1)}let u=LineView.find(s.docView,e.head),c=u?n?u.posAtEnd:u.posAtStart:n?o.to:o.from;return EditorSelection.cursor(c,n?-1:1)}function moveByChar(s,e,n,a){let o=s.state.doc.lineAt(e.head),l=s.bidiSpans(o),u=s.textDirectionAt(o.from);for(let c=e,f=null;;){let d=moveVisually(o,l,u,c,n),g=movedOver;if(!d){if(o.number==(n?s.state.doc.lines:1))return c;g=`
`,o=s.state.doc.line(o.number+(n?1:-1)),l=s.bidiSpans(o),d=EditorSelection.cursor(n?o.from:o.to)}if(f){if(!f(g))return c}else{if(!a)return d;f=a(g)}c=d}}function byGroup(s,e,n){let a=s.state.charCategorizer(e),o=a(n);return l=>{let u=a(l);return o==CharCategory.Space&&(o=u),o==u}}function moveVertically(s,e,n,a){let o=e.head,l=n?1:-1;if(o==(n?s.state.doc.length:0))return EditorSelection.cursor(o,e.assoc);let u=e.goalColumn,c,f=s.contentDOM.getBoundingClientRect(),d=s.coordsAtPos(o),g=s.documentTop;if(d)u==null&&(u=d.left-f.left),c=l<0?d.top:d.bottom;else{let b=s.viewState.lineBlockAt(o);u==null&&(u=Math.min(f.right-f.left,s.defaultCharacterWidth*(o-b.from))),c=(l<0?b.top:b.bottom)+g}let O=f.left+u,S=a??s.defaultLineHeight>>1;for(let b=0;;b+=10){let E=c+(S+b)*l,k=posAtCoords(s,{x:O,y:E},!1,l);if(E<f.top||E>f.bottom||(l<0?k<o:k>o))return EditorSelection.cursor(k,e.assoc,void 0,u)}}function skipAtoms(s,e,n){let a=s.state.facet(atomicRanges).map(o=>o(s));for(;;){let o=!1;for(let l of a)l.between(n.from-1,n.from+1,(u,c,f)=>{n.from>u&&n.from<c&&(n=e.head>n.from?EditorSelection.cursor(u,1):EditorSelection.cursor(c,-1),o=!0)});if(!o)return n}}class InputState{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let n=(a,o)=>{this.ignoreDuringComposition(o)||o.type=="keydown"&&this.keydown(e,o)||(this.mustFlushObserver(o)&&e.observer.forceFlush(),this.runCustomHandlers(o.type,e,o)?o.preventDefault():a(e,o))};for(let a in handlers){let o=handlers[a];e.contentDOM.addEventListener(a,l=>{eventBelongsToEditor(e,l)&&n(o,l)},handlerOptions[a]),this.registeredEvents.push(a)}e.scrollDOM.addEventListener("mousedown",a=>{if(a.target==e.scrollDOM&&a.clientY>e.contentDOM.getBoundingClientRect().bottom&&(n(handlers.mousedown,a),!a.defaultPrevented&&a.button==2)){let o=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=o,200)}}),e.scrollDOM.addEventListener("drop",a=>{a.target==e.scrollDOM&&a.clientY>e.contentDOM.getBoundingClientRect().bottom&&n(handlers.drop,a)}),browser.chrome&&browser.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,browser.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,n){var a;let o;this.customHandlers=[];for(let l of n)if(o=(a=l.update(e).spec)===null||a===void 0?void 0:a.domEventHandlers){this.customHandlers.push({plugin:l.value,handlers:o});for(let u in o)this.registeredEvents.indexOf(u)<0&&u!="scroll"&&(this.registeredEvents.push(u),e.contentDOM.addEventListener(u,c=>{eventBelongsToEditor(e,c)&&this.runCustomHandlers(u,e,c)&&c.preventDefault()}))}}runCustomHandlers(e,n,a){for(let o of this.customHandlers){let l=o.handlers[e];if(l)try{if(l.call(o.plugin,a,n)||a.defaultPrevented)return!0}catch(u){logException(n.state,u)}}return!1}runScrollHandlers(e,n){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let a of this.customHandlers){let o=a.handlers.scroll;if(o)try{o.call(a.plugin,n,e)}catch(l){logException(e.state,l)}}}keydown(e,n){if(this.lastKeyCode=n.keyCode,this.lastKeyTime=Date.now(),n.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(n.keyCode!=27&&modifierCodes.indexOf(n.keyCode)<0&&(e.inputState.lastEscPress=0),browser.android&&browser.chrome&&!n.synthetic&&(n.keyCode==13||n.keyCode==8))return e.observer.delayAndroidKey(n.key,n.keyCode),!0;let a;return browser.ios&&!n.synthetic&&!n.altKey&&!n.metaKey&&((a=PendingKeys.find(o=>o.keyCode==n.keyCode))&&!n.ctrlKey||EmacsyPendingKeys.indexOf(n.key)>-1&&n.ctrlKey&&!n.shiftKey)?(this.pendingIOSKey=a||n,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let n=this.pendingIOSKey;return n?(this.pendingIOSKey=void 0,dispatchKey(e.contentDOM,n.key,n.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(s){return Math.max(0,s)*.7+8}class MouseSelection{constructor(e,n,a,o){this.view=e,this.style=a,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=scrollableParent(e.contentDOM);let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(e,n),this.dragMove=dragMovesSelection(e,n),this.dragging=isInPrimarySelection(e,n)&&getClickType(n)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let a=0,o=0,l=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};e.clientX<=l.left+dragScrollMargin?a=-dragScrollSpeed(l.left-e.clientX):e.clientX>=l.right-dragScrollMargin&&(a=dragScrollSpeed(e.clientX-l.right)),e.clientY<=l.top+dragScrollMargin?o=-dragScrollSpeed(l.top-e.clientY):e.clientY>=l.bottom-dragScrollMargin&&(o=dragScrollSpeed(e.clientY-l.bottom)),this.setScrollSpeed(a,o)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}select(e){let n=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!n.eq(this.view.state.selection)||n.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(s,e){let n=s.state.facet(clickAddsSelectionRange);return n.length?n[0](e):browser.mac?e.metaKey:e.ctrlKey}function dragMovesSelection(s,e){let n=s.state.facet(dragMovesSelection$1);return n.length?n[0](e):browser.mac?!e.altKey:!e.ctrlKey}function isInPrimarySelection(s,e){let{main:n}=s.state.selection;if(n.empty)return!1;let a=getSelection(s.root);if(!a||a.rangeCount==0)return!0;let o=a.getRangeAt(0).getClientRects();for(let l=0;l<o.length;l++){let u=o[l];if(u.left<=e.clientX&&u.right>=e.clientX&&u.top<=e.clientY&&u.bottom>=e.clientY)return!0}return!1}function eventBelongsToEditor(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,a;n!=s.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(a=ContentView.get(n))&&a.ignoreEvent(e))return!1;return!0}const handlers=Object.create(null),handlerOptions=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(s){let e=s.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{s.focus(),n.remove(),doPaste(s,n.value)},50)}function doPaste(s,e){let{state:n}=s,a,o=1,l=n.toText(e),u=l.lines==n.selection.ranges.length;if(lastLinewiseCopy!=null&&n.selection.ranges.every(f=>f.empty)&&lastLinewiseCopy==l.toString()){let f=-1;a=n.changeByRange(d=>{let g=n.doc.lineAt(d.from);if(g.from==f)return{range:d};f=g.from;let O=n.toText((u?l.line(o++).text:e)+n.lineBreak);return{changes:{from:g.from,insert:O},range:EditorSelection.cursor(d.from+O.length)}})}else u?a=n.changeByRange(f=>{let d=l.line(o++);return{changes:{from:f.from,to:f.to,insert:d.text},range:EditorSelection.cursor(f.from+d.length)}}):a=n.replaceSelection(l);s.dispatch(a,{userEvent:"input.paste",scrollIntoView:!0})}handlers.keydown=(s,e)=>{s.inputState.setSelectionOrigin("select"),e.keyCode==27&&(s.inputState.lastEscPress=Date.now())},handlers.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")},handlers.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")},handlerOptions.touchstart=handlerOptions.touchmove={passive:!0},handlers.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let a of s.state.facet(mouseSelectionStyle))if(n=a(s,e),n)break;if(!n&&e.button==0&&(n=basicMouseSelection(s,e)),n){let a=s.root.activeElement!=s.contentDOM;s.inputState.startMouseSelection(new MouseSelection(s,e,n,a)),a&&s.observer.ignore(()=>focusPreventScroll(s.contentDOM)),s.inputState.mouseSelection&&s.inputState.mouseSelection.start(e)}};function rangeForClick(s,e,n,a){if(a==1)return EditorSelection.cursor(e,n);if(a==2)return groupAt(s.state,e,n);{let o=LineView.find(s.docView,e),l=s.state.doc.lineAt(o?o.posAtEnd:e),u=o?o.posAtStart:l.from,c=o?o.posAtEnd:l.to;return c<s.state.doc.length&&c==l.to&&c++,EditorSelection.range(u,c)}}let insideY=(s,e)=>s>=e.top&&s<=e.bottom,inside=(s,e,n)=>insideY(e,n)&&s>=n.left&&s<=n.right;function findPositionSide(s,e,n,a){let o=LineView.find(s.docView,e);if(!o)return 1;let l=e-o.posAtStart;if(l==0)return 1;if(l==o.length)return-1;let u=o.coordsAt(l,-1);if(u&&inside(n,a,u))return-1;let c=o.coordsAt(l,1);return c&&inside(n,a,c)?1:u&&insideY(a,u)?-1:1}function queryPos(s,e){let n=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:findPositionSide(s,n,e.clientX,e.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(s){if(!BadMouseDetail)return s.detail;let e=lastMouseDown,n=lastMouseDownTime;return lastMouseDown=s,lastMouseDownTime=Date.now(),lastMouseDownCount=!e||n>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(s,e){let n=queryPos(s,e),a=getClickType(e),o=s.state.selection;return{update(l){l.docChanged&&(n.pos=l.changes.mapPos(n.pos),o=o.map(l.changes))},get(l,u,c){let f=queryPos(s,l),d,g=rangeForClick(s,f.pos,f.bias,a);if(n.pos!=f.pos&&!u){let O=rangeForClick(s,n.pos,n.bias,a),S=Math.min(O.from,g.from),b=Math.max(O.to,g.to);g=S<g.from?EditorSelection.range(S,b):EditorSelection.range(b,S)}return u?o.replaceRange(o.main.extend(g.from,g.to)):c&&a==1&&o.ranges.length>1&&(d=removeRangeAround(o,f.pos))?d:c?o.addRange(g):EditorSelection.create([g])}}}function removeRangeAround(s,e){for(let n=0;n<s.ranges.length;n++){let{from:a,to:o}=s.ranges[n];if(a<=e&&o>=e)return EditorSelection.create(s.ranges.slice(0,n).concat(s.ranges.slice(n+1)),s.mainIndex==n?0:s.mainIndex-(s.mainIndex>n?1:0))}return null}handlers.dragstart=(s,e)=>{let{selection:{main:n}}=s.state,{mouseSelection:a}=s.inputState;a&&(a.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",s.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")};function dropText(s,e,n,a){if(!n)return;let o=s.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:l}=s.inputState,u=a&&l&&l.dragging&&l.dragMove?{from:l.dragging.from,to:l.dragging.to}:null,c={from:o,insert:n},f=s.state.changes(u?[u,c]:c);s.focus(),s.dispatch({changes:f,selection:{anchor:f.mapPos(o,-1),head:f.mapPos(o,1)},userEvent:u?"move.drop":"input.drop"})}handlers.drop=(s,e)=>{if(!e.dataTransfer)return;if(s.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let a=Array(n.length),o=0,l=()=>{++o==n.length&&dropText(s,e,a.filter(u=>u!=null).join(s.state.lineBreak),!1)};for(let u=0;u<n.length;u++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(a[u]=c.result),l()},c.readAsText(n[u])}}else dropText(s,e,e.dataTransfer.getData("Text"),!0)},handlers.paste=(s,e)=>{if(s.state.readOnly)return e.preventDefault();s.observer.flush();let n=brokenClipboardAPI?null:e.clipboardData;n?(doPaste(s,n.getData("text/plain")||n.getData("text/uri-text")),e.preventDefault()):capturePaste(s)};function captureCopy(s,e){let n=s.dom.parentNode;if(!n)return;let a=n.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.value=e,a.focus(),a.selectionEnd=e.length,a.selectionStart=0,setTimeout(()=>{a.remove(),s.focus()},50)}function copiedRange(s){let e=[],n=[],a=!1;for(let o of s.selection.ranges)o.empty||(e.push(s.sliceDoc(o.from,o.to)),n.push(o));if(!e.length){let o=-1;for(let{from:l}of s.selection.ranges){let u=s.doc.lineAt(l);u.number>o&&(e.push(u.text),n.push({from:u.from,to:Math.min(s.doc.length,u.to+1)})),o=u.number}a=!0}return{text:e.join(s.lineBreak),ranges:n,linewise:a}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(s,e)=>{let{text:n,ranges:a,linewise:o}=copiedRange(s.state);if(!n&&!o)return;lastLinewiseCopy=o?n:null;let l=brokenClipboardAPI?null:e.clipboardData;l?(e.preventDefault(),l.clearData(),l.setData("text/plain",n)):captureCopy(s,n),e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:a,scrollIntoView:!0,userEvent:"delete.cut"})};const isFocusChange=Annotation.define();function focusChangeTransaction(s,e){let n=[];for(let a of s.facet(focusChangeEffect)){let o=a(s,e);o&&n.push(o)}return n?s.update({effects:n,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let n=focusChangeTransaction(s.state,e);n?s.dispatch(n):s.update([])}},10)}handlers.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),updateForFocusChange(s)},handlers.blur=s=>{s.observer.clearSelectionRange(),updateForFocusChange(s)},handlers.compositionstart=handlers.compositionupdate=s=>{s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0)},handlers.compositionend=s=>{s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,browser.chrome&&browser.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.compositionDeco.size&&s.update([])},50)},handlers.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()},handlers.beforeinput=(s,e)=>{var n;let a;if(browser.chrome&&browser.android&&(a=PendingKeys.find(o=>o.inputType==e.inputType))&&(s.observer.delayAndroidKey(a.key,a.keyCode),a.key=="Backspace"||a.key=="Delete")){let o=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>o+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}};const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];class HeightOracle{constructor(e){this.lineWrapping=e,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let a=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(a+=Math.max(0,Math.ceil((n-e-a*this.lineLength*.5)/this.lineLength))),this.lineHeight*a}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return wrappingWhiteSpace.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let a=0;a<e.length;a++){let o=e[a];o<0?a++:this.heightSamples[Math.floor(o*10)]||(n=!0,this.heightSamples[Math.floor(o*10)]=!0)}return n}refresh(e,n,a,o,l,u){let c=wrappingWhiteSpace.indexOf(e)>-1,f=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=n,this.charWidth=a,this.textHeight=o,this.lineLength=l,f){this.heightSamples={};for(let d=0;d<u.length;d++){let g=u[d];g<0?d++:this.heightSamples[Math.floor(g*10)]=!0}}return f}}class MeasuredHeights{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(e,n,a,o,l){this.from=e,this.length=n,this.top=a,this.height=o,this.type=l}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let n=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new BlockInfo(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var QueryType$1=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(e,n,a=2){this.length=e,this.height=n,this.flags=a}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>Epsilon&&(e.heightChanged=!0),this.height=n)}replace(e,n,a){return HeightMap.of(a)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,a,o){let l=this,u=a.doc;for(let c=o.length-1;c>=0;c--){let{fromA:f,toA:d,fromB:g,toB:O}=o[c],S=l.lineAt(f,QueryType$1.ByPosNoHeight,a.setDoc(n),0,0),b=S.to>=d?S:l.lineAt(d,QueryType$1.ByPosNoHeight,a,0,0);for(O+=b.to-d,d=b.to;c>0&&S.from<=o[c-1].toA;)f=o[c-1].fromA,g=o[c-1].fromB,c--,f<S.from&&(S=l.lineAt(f,QueryType$1.ByPosNoHeight,a,0,0));g+=S.from-f,f=S.from;let E=NodeBuilder.build(a.setDoc(u),e,g,O);l=l.replace(f,d,E)}return l.updateHeight(a,0)}static empty(){return new HeightMapText(0,0)}static of(e){if(e.length==1)return e[0];let n=0,a=e.length,o=0,l=0;for(;;)if(n==a)if(o>l*2){let c=e[n-1];c.break?e.splice(--n,1,c.left,null,c.right):e.splice(--n,1,c.left,c.right),a+=1+c.break,o-=c.size}else if(l>o*2){let c=e[a];c.break?e.splice(a,1,c.left,null,c.right):e.splice(a,1,c.left,c.right),a+=2+c.break,l-=c.size}else break;else if(o<l){let c=e[n++];c&&(o+=c.size)}else{let c=e[--a];c&&(l+=c.size)}let u=0;return e[n-1]==null?(u=1,n--):e[n]==null&&(u=1,a++),new HeightMapBranch(HeightMap.of(e.slice(0,n)),u,HeightMap.of(e.slice(a)))}}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(e,n,a){super(e,n),this.type=a}blockAt(e,n,a,o){return new BlockInfo(o,this.length,a,this.height,this.type)}lineAt(e,n,a,o,l){return this.blockAt(0,a,o,l)}forEachLine(e,n,a,o,l,u){e<=l+this.length&&n>=l&&u(this.blockAt(0,a,o,l))}updateHeight(e,n=0,a=!1,o){return o&&o.from<=n&&o.more&&this.setHeight(e,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(e,n){super(e,n,BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(e,n,a){let o=a[0];return a.length==1&&(o instanceof HeightMapText||o instanceof HeightMapGap&&o.flags&4)&&Math.abs(this.length-o.length)<10?(o instanceof HeightMapGap?o=new HeightMapText(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):HeightMap.of(a)}updateHeight(e,n=0,a=!1,o){return o&&o.from<=n&&o.more?this.setHeight(e,o.heights[o.index++]):(a||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(e){super(e,0)}heightMetrics(e,n){let a=e.doc.lineAt(n).number,o=e.doc.lineAt(n+this.length).number,l=o-a+1,u,c=0;if(e.lineWrapping){let f=Math.min(this.height,e.lineHeight*l);u=f/l,this.length>l+1&&(c=(this.height-f)/(this.length-l-1))}else u=this.height/l;return{firstLine:a,lastLine:o,perLine:u,perChar:c}}blockAt(e,n,a,o){let{firstLine:l,lastLine:u,perLine:c,perChar:f}=this.heightMetrics(n,o);if(n.lineWrapping){let d=o+Math.round(Math.max(0,Math.min(1,(e-a)/this.height))*this.length),g=n.doc.lineAt(d),O=c+g.length*f,S=Math.max(a,e-O/2);return new BlockInfo(g.from,g.length,S,O,BlockType.Text)}else{let d=Math.max(0,Math.min(u-l,Math.floor((e-a)/c))),{from:g,length:O}=n.doc.line(l+d);return new BlockInfo(g,O,a+c*d,c,BlockType.Text)}}lineAt(e,n,a,o,l){if(n==QueryType$1.ByHeight)return this.blockAt(e,a,o,l);if(n==QueryType$1.ByPosNoHeight){let{from:b,to:E}=a.doc.lineAt(e);return new BlockInfo(b,E-b,0,0,BlockType.Text)}let{firstLine:u,perLine:c,perChar:f}=this.heightMetrics(a,l),d=a.doc.lineAt(e),g=c+d.length*f,O=d.number-u,S=o+c*O+f*(d.from-l-O);return new BlockInfo(d.from,d.length,Math.max(o,Math.min(S,o+this.height-g)),g,BlockType.Text)}forEachLine(e,n,a,o,l,u){e=Math.max(e,l),n=Math.min(n,l+this.length);let{firstLine:c,perLine:f,perChar:d}=this.heightMetrics(a,l);for(let g=e,O=o;g<=n;){let S=a.doc.lineAt(g);if(g==e){let E=S.number-c;O+=f*E+d*(e-l-E)}let b=f+d*S.length;u(new BlockInfo(S.from,S.length,O,b,BlockType.Text)),O+=b,g=S.to+1}}replace(e,n,a){let o=this.length-n;if(o>0){let l=a[a.length-1];l instanceof HeightMapGap?a[a.length-1]=new HeightMapGap(l.length+o):a.push(null,new HeightMapGap(o-1))}if(e>0){let l=a[0];l instanceof HeightMapGap?a[0]=new HeightMapGap(e+l.length):a.unshift(new HeightMapGap(e-1),null)}return HeightMap.of(a)}decomposeLeft(e,n){n.push(new HeightMapGap(e-1),null)}decomposeRight(e,n){n.push(null,new HeightMapGap(this.length-e-1))}updateHeight(e,n=0,a=!1,o){let l=n+this.length;if(o&&o.from<=n+this.length&&o.more){let u=[],c=Math.max(n,o.from),f=-1;for(o.from>n&&u.push(new HeightMapGap(o.from-n-1).updateHeight(e,n));c<=l&&o.more;){let g=e.doc.lineAt(c).length;u.length&&u.push(null);let O=o.heights[o.index++];f==-1?f=O:Math.abs(O-f)>=Epsilon&&(f=-2);let S=new HeightMapText(g,O);S.outdated=!1,u.push(S),c+=g+1}c<=l&&u.push(null,new HeightMapGap(l-c).updateHeight(e,c));let d=HeightMap.of(u);return(f<0||Math.abs(d.height-this.height)>=Epsilon||Math.abs(f-this.heightMetrics(e,n).perLine)>=Epsilon)&&(e.heightChanged=!0),d}else(a||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(e,n,a){super(e.length+n+a.length,e.height+a.height,n|(e.outdated||a.outdated?2:0)),this.left=e,this.right=a,this.size=e.size+a.size}get break(){return this.flags&1}blockAt(e,n,a,o){let l=a+this.left.height;return e<l?this.left.blockAt(e,n,a,o):this.right.blockAt(e,n,l,o+this.left.length+this.break)}lineAt(e,n,a,o,l){let u=o+this.left.height,c=l+this.left.length+this.break,f=n==QueryType$1.ByHeight?e<u:e<c,d=f?this.left.lineAt(e,n,a,o,l):this.right.lineAt(e,n,a,u,c);if(this.break||(f?d.to<c:d.from>c))return d;let g=n==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return f?d.join(this.right.lineAt(c,g,a,u,c)):this.left.lineAt(c,g,a,o,l).join(d)}forEachLine(e,n,a,o,l,u){let c=o+this.left.height,f=l+this.left.length+this.break;if(this.break)e<f&&this.left.forEachLine(e,n,a,o,l,u),n>=f&&this.right.forEachLine(e,n,a,c,f,u);else{let d=this.lineAt(f,QueryType$1.ByPos,a,o,l);e<d.from&&this.left.forEachLine(e,d.from-1,a,o,l,u),d.to>=e&&d.from<=n&&u(d),n>d.to&&this.right.forEachLine(d.to+1,n,a,c,f,u)}}replace(e,n,a){let o=this.left.length+this.break;if(n<o)return this.balanced(this.left.replace(e,n,a),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,n-o,a));let l=[];e>0&&this.decomposeLeft(e,l);let u=l.length;for(let c of a)l.push(c);if(e>0&&mergeGaps(l,u-1),n<this.length){let c=l.length;this.decomposeRight(n,l),mergeGaps(l,c)}return HeightMap.of(l)}decomposeLeft(e,n){let a=this.left.length;if(e<=a)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(a++,e>=a&&n.push(null)),e>a&&this.right.decomposeLeft(e-a,n)}decomposeRight(e,n){let a=this.left.length,o=a+this.break;if(e>=o)return this.right.decomposeRight(e-o,n);e<a&&this.left.decomposeRight(e,n),this.break&&e<o&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?HeightMap.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,a=!1,o){let{left:l,right:u}=this,c=n+l.length+this.break,f=null;return o&&o.from<=n+l.length&&o.more?f=l=l.updateHeight(e,n,a,o):l.updateHeight(e,n,a),o&&o.from<=c+u.length&&o.more?f=u=u.updateHeight(e,c,a,o):u.updateHeight(e,c,a),f?this.balanced(l,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(s,e){let n,a;s[e]==null&&(n=s[e-1])instanceof HeightMapGap&&(a=s[e+1])instanceof HeightMapGap&&s.splice(e-1,3,new HeightMapGap(n.length+1+a.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let a=Math.min(n,this.lineEnd),o=this.nodes[this.nodes.length-1];o instanceof HeightMapText?o.length+=a-this.pos:(a>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(a-this.pos,-1)),this.writtenTo=a,n>a&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,a){if(e<n||a.heightRelevant){let o=a.widget?a.widget.estimatedHeight:0;o<0&&(o=this.oracle.lineHeight);let l=n-e;a.block?this.addBlock(new HeightMapBlock(l,o,a.type)):(l||o>=relevantWidgetHeight)&&this.addLineDeco(o,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new HeightMapText(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let a=new HeightMapGap(n-e);return this.oracle.doc.lineAt(e).to==n&&(a.flags|=4),a}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof HeightMapText)return e;let n=new HeightMapText(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine(),e.type==BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=BlockType.WidgetBefore&&(this.covering=e)}addLineDeco(e,n){let a=this.ensureLine();a.length+=n,a.collapsed+=n,a.widgetHeight=Math.max(a.widgetHeight,e),this.writtenTo=this.pos=this.pos+n}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let a=e;for(let o of this.nodes)o instanceof HeightMapText&&o.updateHeight(this.oracle,a),a+=o?o.length:1;return this.nodes}static build(e,n,a,o){let l=new NodeBuilder(a,e);return RangeSet.spans(n,a,o,l,0),l.finish(a)}}function heightRelevantDecoChanges(s,e,n){let a=new DecorationComparator;return RangeSet.compare(s,e,n,a,0),a.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,a,o){(e<n||a&&a.heightRelevant||o&&o.heightRelevant)&&addRange(e,n,this.changes,5)}}function visiblePixelRange(s,e){let n=s.getBoundingClientRect(),a=s.ownerDocument,o=a.defaultView||window,l=Math.max(0,n.left),u=Math.min(o.innerWidth,n.right),c=Math.max(0,n.top),f=Math.min(o.innerHeight,n.bottom);for(let d=s.parentNode;d&&d!=a.body;)if(d.nodeType==1){let g=d,O=window.getComputedStyle(g);if((g.scrollHeight>g.clientHeight||g.scrollWidth>g.clientWidth)&&O.overflow!="visible"){let S=g.getBoundingClientRect();l=Math.max(l,S.left),u=Math.min(u,S.right),c=Math.max(c,S.top),f=d==s.parentNode?S.bottom:Math.min(f,S.bottom)}d=O.position=="absolute"||O.position=="fixed"?g.offsetParent:g.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:l-n.left,right:Math.max(l,u)-n.left,top:c-(n.top+e),bottom:Math.max(c,f)-(n.top+e)}}function fullPixelRange(s,e){let n=s.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class LineGap{constructor(e,n,a){this.from=e,this.to=n,this.size=a}static same(e,n){if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++){let o=e[a],l=n[a];if(o.from!=l.from||o.to!=l.to||o.size!=l.size)return!1}return!0}draw(e){return Decoration.replace({widget:new LineGapWidget(this.size,e)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(contentAttributes).some(a=>typeof a!="function"&&a.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(n),this.stateDeco=e.facet(decorations).filter(a=>typeof a!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(e.doc),[new ChangedRange(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(a=>a.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let a=0;a<=1;a++){let o=a?n.head:n.anchor;if(!e.some(({from:l,to:u})=>o>=l&&o<=u)){let{from:l,to:u}=this.lineBlockAt(o);e.push(new Viewport(l,u))}}this.viewports=e.sort((a,o)=>a.from-o.from),this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:scaleBlock(e,this.scaler))})}update(e,n=null){this.state=e.state;let a=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(d=>typeof d!="function");let o=e.changedRanges,l=ChangedRange.extendWithRanges(o,heightRelevantDecoChanges(a,this.stateDeco,e?e.changes:ChangeSet.empty(this.state.doc.length))),u=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=u&&(e.flags|=2);let c=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<c.from||n.range.head>c.to)||!this.viewportIsAppropriate(c))&&(c=this.getViewport(0,n));let f=!e.changes.empty||e.flags&2||c.from!=this.viewport.from||c.to!=this.viewport.to;this.viewport=c,this.updateForViewport(),f&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,a=window.getComputedStyle(n),o=this.heightOracle,l=a.whiteSpace;this.defaultTextDirection=a.direction=="rtl"?Direction.RTL:Direction.LTR;let u=this.heightOracle.mustRefreshForWrapping(l),c=n.getBoundingClientRect(),f=u||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,g=0,O=parseInt(a.paddingTop)||0,S=parseInt(a.paddingBottom)||0;(this.paddingTop!=O||this.paddingBottom!=S)&&(this.paddingTop=O,this.paddingBottom=S,d|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(f=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=8);let b=(this.printing?fullPixelRange:visiblePixelRange)(n,this.paddingTop),E=b.top-this.pixelViewport.top,k=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let $=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if($!=this.inView&&(this.inView=$,$&&(f=!0)),!this.inView&&!this.scrollTarget)return 0;let R=c.width;if((this.contentDOMWidth!=R||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=8),f){let he=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(he)&&(u=!0),u||o.lineWrapping&&Math.abs(R-this.contentDOMWidth)>o.charWidth){let{lineHeight:j,charWidth:K,textHeight:se}=e.docView.measureTextSize();u=j>0&&o.refresh(l,j,K,se,R/K,he),u&&(e.docView.minWidth=0,d|=8)}E>0&&k>0?g=Math.max(E,k):E<0&&k<0&&(g=Math.min(E,k)),o.heightChanged=!1;for(let j of this.viewports){let K=j.from==this.viewport.from?he:e.docView.measureVisibleLineHeights(j);this.heightMap=(u?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,u,new MeasuredHeights(j.from,K))}o.heightChanged&&(d|=2)}let Z=!this.viewportIsAppropriate(this.viewport,g)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Z&&(this.viewport=this.getViewport(g,this.scrollTarget)),this.updateForViewport(),(d&2||Z)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let a=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,l=this.heightOracle,{visibleTop:u,visibleBottom:c}=this,f=new Viewport(o.lineAt(u-a*1e3,QueryType$1.ByHeight,l,0,0).from,o.lineAt(c+(1-a)*1e3,QueryType$1.ByHeight,l,0,0).to);if(n){let{head:d}=n.range;if(d<f.from||d>f.to){let g=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),O=o.lineAt(d,QueryType$1.ByPos,l,0,0),S;n.y=="center"?S=(O.top+O.bottom)/2-g/2:n.y=="start"||n.y=="nearest"&&d<f.from?S=O.top:S=O.bottom-g,f=new Viewport(o.lineAt(S-1e3/2,QueryType$1.ByHeight,l,0,0).from,o.lineAt(S+g+1e3/2,QueryType$1.ByHeight,l,0,0).to)}}return f}mapViewport(e,n){let a=n.mapPos(e.from,-1),o=n.mapPos(e.to,1);return new Viewport(this.heightMap.lineAt(a,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},a=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(n,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:c}=this;return(e==0||o<=u-Math.max(10,Math.min(-a,250)))&&(n==this.state.doc.length||l>=c+Math.max(10,Math.min(a,250)))&&o>u-2*1e3&&l<c+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let a=[];for(let o of e)n.touchesRange(o.from,o.to)||a.push(new LineGap(n.mapPos(o.from),n.mapPos(o.to),o.size));return a}ensureLineGaps(e,n){let a=this.heightOracle.lineWrapping,o=a?1e4:2e3,l=o>>1,u=o<<1;if(this.defaultTextDirection!=Direction.LTR&&!a)return[];let c=[],f=(d,g,O,S)=>{if(g-d<l)return;let b=this.state.selection.main,E=[b.from];b.empty||E.push(b.to);for(let $ of E)if($>d&&$<g){f(d,$-10,O,S),f($+10,g,O,S);return}let k=find(e,$=>$.from>=O.from&&$.to<=O.to&&Math.abs($.from-d)<l&&Math.abs($.to-g)<l&&!E.some(R=>$.from<R&&$.to>R));if(!k){if(g<O.to&&n&&a&&n.visibleRanges.some($=>$.from<=g&&$.to>=g)){let $=n.moveToLineBoundary(EditorSelection.cursor(g),!1,!0).head;$>d&&(g=$)}k=new LineGap(d,g,this.gapSize(O,d,g,S))}c.push(k)};for(let d of this.viewportLines){if(d.length<u)continue;let g=lineStructure(d.from,d.to,this.stateDeco);if(g.total<u)continue;let O=this.scrollTarget?this.scrollTarget.range.head:null,S,b;if(a){let E=o/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,$;if(O!=null){let R=findFraction(g,O),Z=((this.visibleBottom-this.visibleTop)/2+E)/d.height;k=R-Z,$=R+Z}else k=(this.visibleTop-d.top-E)/d.height,$=(this.visibleBottom-d.top+E)/d.height;S=findPosition(g,k),b=findPosition(g,$)}else{let E=g.total*this.heightOracle.charWidth,k=o*this.heightOracle.charWidth,$,R;if(O!=null){let Z=findFraction(g,O),he=((this.pixelViewport.right-this.pixelViewport.left)/2+k)/E;$=Z-he,R=Z+he}else $=(this.pixelViewport.left-k)/E,R=(this.pixelViewport.right+k)/E;S=findPosition(g,$),b=findPosition(g,R)}S>d.from&&f(d.from,S,d,g),b<d.to&&f(b,d.to,d,g)}return c}gapSize(e,n,a,o){let l=findFraction(o,a)-findFraction(o,n);return this.heightOracle.lineWrapping?e.height*l:o.total*this.heightOracle.charWidth*l}updateLineGaps(e){LineGap.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Decoration.set(e.map(n=>n.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(o,l){n.push({from:o,to:l})},point(){}},20);let a=n.length!=this.visibleRanges.length||this.visibleRanges.some((o,l)=>o.from!=n[l].from||o.to!=n[l].to);return this.visibleRanges=n,a?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||scaleBlock(this.heightMap.lineAt(e,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(e),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}elementAtHeight(e){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(e,n){this.from=e,this.to=n}}function lineStructure(s,e,n){let a=[],o=s,l=0;return RangeSet.spans(n,s,e,{span(){},point(u,c){u>o&&(a.push({from:o,to:u}),l+=u-o),o=c}},20),o<e&&(a.push({from:o,to:e}),l+=e-o),{total:l,ranges:a}}function findPosition({total:s,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let a=Math.floor(s*n);for(let o=0;;o++){let{from:l,to:u}=e[o],c=u-l;if(a<=c)return l+a;a-=c}}function findFraction(s,e){let n=0;for(let{from:a,to:o}of s.ranges){if(e<=o){n+=e-a;break}n+=o-a}return n/s.total}function find(s,e){for(let n of s)if(e(n))return n}const IdScaler={toDOM(s){return s},fromDOM(s){return s},scale:1};class BigScaler{constructor(e,n,a){let o=0,l=0,u=0;this.viewports=a.map(({from:c,to:f})=>{let d=n.lineAt(c,QueryType$1.ByPos,e,0,0).top,g=n.lineAt(f,QueryType$1.ByPos,e,0,0).bottom;return o+=g-d,{from:c,to:f,top:d,bottom:g,domTop:0,domBottom:0}}),this.scale=(7e6-o)/(n.height-o);for(let c of this.viewports)c.domTop=u+(c.top-l)*this.scale,u=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let n=0,a=0,o=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.top)return o+(e-a)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);a=l.bottom,o=l.domBottom}}fromDOM(e){for(let n=0,a=0,o=0;;n++){let l=n<this.viewports.length?this.viewports[n]:null;if(!l||e<l.domTop)return a+(e-o)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);a=l.bottom,o=l.domBottom}}}function scaleBlock(s,e){if(e.scale==1)return s;let n=e.toDOM(s.top),a=e.toDOM(s.bottom);return new BlockInfo(s.from,s.length,n,a-n,Array.isArray(s.type)?s.type.map(o=>scaleBlock(o,e)):s.type)}const theme$1=Facet.define({combine:s=>s.join(" ")}),darkTheme=Facet.define({combine:s=>s.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(s,e,n){return new StyleModule(e,{finish(a){return/&/.test(a)?a.replace(/&\w*/,o=>{if(o=="&")return s;if(!n||!n[o])throw new RangeError(`Unsupported selector: ${o}`);return n[o]}):s+" "+a}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs);class DOMChange{constructor(e,n,a,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:l,impreciseAnchor:u}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,a,0))){let c=l||u?[]:selectionPoints(e),f=new DOMReader(c,e.state);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=selectionFromPoints(c,this.bounds.from)}else{let c=e.observer.selectionRange,f=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!contains(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=u&&u.node==c.anchorNode&&u.offset==c.anchorOffset||!contains(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset);this.newSel=EditorSelection.single(d,f)}}}function applyDOMChange(s,e){let n,{newSel:a}=e,o=s.state.selection.main;if(e.bounds){let{from:l,to:u}=e.bounds,c=o.from,f=null;(s.inputState.lastKeyCode===8&&s.inputState.lastKeyTime>Date.now()-100||browser.android&&e.text.length<u-l)&&(c=o.to,f="end");let d=findDiff(s.state.doc.sliceString(l,u,LineBreakPlaceholder),e.text,c-l,f);d&&(browser.chrome&&s.inputState.lastKeyCode==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&d.toB--,n={from:l+d.from,to:l+d.toA,insert:Text.of(e.text.slice(d.from,d.toB).split(LineBreakPlaceholder))})}else a&&(!s.hasFocus&&s.state.facet(editable)||a.main.eq(o))&&(a=null);if(!n&&!a)return!1;if(!n&&e.typeOver&&!o.empty&&a&&a.main.empty?n={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,o.to)}:n&&n.from>=o.from&&n.to<=o.to&&(n.from!=o.from||n.to!=o.to)&&o.to-o.from-(n.to-n.from)<=4?n={from:o.from,to:o.to,insert:s.state.doc.slice(o.from,n.from).append(n.insert).append(s.state.doc.slice(n.to,o.to))}:(browser.mac||browser.android)&&n&&n.from==n.to&&n.from==o.head-1&&/^\. ?$/.test(n.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(a&&n.insert.length==2&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),n={from:o.from,to:o.to,insert:Text.of([" "])}):browser.chrome&&n&&n.from==n.to&&n.from==o.head&&n.insert.toString()==`
 `&&s.lineWrapping&&(a&&(a=EditorSelection.single(a.main.anchor-1,a.main.head-1)),n={from:o.from,to:o.to,insert:Text.of([" "])}),n){let l=s.state;if(browser.ios&&s.inputState.flushIOSKey(s)||browser.android&&(n.from==o.from&&n.to==o.to&&n.insert.length==1&&n.insert.lines==2&&dispatchKey(s.contentDOM,"Enter",13)||n.from==o.from-1&&n.to==o.to&&n.insert.length==0&&dispatchKey(s.contentDOM,"Backspace",8)||n.from==o.from&&n.to==o.to+1&&n.insert.length==0&&dispatchKey(s.contentDOM,"Delete",46)))return!0;let u=n.insert.toString();if(s.state.facet(inputHandler$1).some(d=>d(s,n.from,n.to,u)))return!0;s.inputState.composing>=0&&s.inputState.composing++;let c;if(n.from>=o.from&&n.to<=o.to&&n.to-n.from>=(o.to-o.from)/3&&(!a||a.main.empty&&a.main.from==n.from+n.insert.length)&&s.inputState.composing<0){let d=o.from<n.from?l.sliceDoc(o.from,n.from):"",g=o.to>n.to?l.sliceDoc(n.to,o.to):"";c=l.replaceSelection(s.state.toText(d+n.insert.sliceString(0,void 0,s.state.lineBreak)+g))}else{let d=l.changes(n),g=a&&a.main.to<=d.newLength?a.main:void 0;if(l.selection.ranges.length>1&&s.inputState.composing>=0&&n.to<=o.to&&n.to>=o.to-10){let O=s.state.sliceDoc(n.from,n.to),S=compositionSurroundingNode(s)||s.state.doc.lineAt(o.head),b=o.to-n.to,E=o.to-o.from;c=l.changeByRange(k=>{if(k.from==o.from&&k.to==o.to)return{changes:d,range:g||k.map(d)};let $=k.to-b,R=$-O.length;if(k.to-k.from!=E||s.state.sliceDoc(R,$)!=O||S&&k.to>=S.from&&k.from<=S.to)return{range:k};let Z=l.changes({from:R,to:$,insert:n.insert}),he=k.to-o.to;return{changes:Z,range:g?EditorSelection.range(Math.max(0,g.anchor+he),Math.max(0,g.head+he)):k.map(Z)}})}else c={changes:d,selection:g&&l.selection.replaceRange(g)}}let f="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,f+=".compose",s.inputState.compositionFirstChange&&(f+=".start",s.inputState.compositionFirstChange=!1)),s.dispatch(c,{scrollIntoView:!0,userEvent:f}),!0}else if(a&&!a.main.eq(o)){let l=!1,u="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(l=!0),u=s.inputState.lastSelectionOrigin),s.dispatch({selection:a,scrollIntoView:l,userEvent:u}),!0}else return!1}function findDiff(s,e,n,a){let o=Math.min(s.length,e.length),l=0;for(;l<o&&s.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==o&&s.length==e.length)return null;let u=s.length,c=e.length;for(;u>0&&c>0&&s.charCodeAt(u-1)==e.charCodeAt(c-1);)u--,c--;if(a=="end"){let f=Math.max(0,l-Math.min(u,c));n-=u+f-l}if(u<l&&s.length<e.length){let f=n<=l&&n>=u?l-n:0;l-=f,c=l+(c-u),u=l}else if(c<l){let f=n<=l&&n>=c?l-n:0;l-=f,u=l+(u-c),c=l}return{from:l,toA:u,toB:c}}function selectionPoints(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:n,anchorOffset:a,focusNode:o,focusOffset:l}=s.observer.selectionRange;return n&&(e.push(new DOMPoint(n,a)),(o!=n||l!=a)&&e.push(new DOMPoint(o,l))),e}function selectionFromPoints(s,e){if(s.length==0)return null;let n=s[0].pos,a=s.length==2?s[1].pos:n;return n>-1&&a>-1?EditorSelection.single(n+e,a+e):null}const observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(e){this.view=e,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let a of n)this.queue.push(a);(browser.ie&&browser.ie_version<=11||browser.ios&&e.composing)&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,a)=>n!=e[a]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:a}=this,o=this.selectionRange;if(a.state.facet(editable)?a.root.activeElement!=this.dom:!hasSelection(a.dom,o))return;let l=o.anchorNode&&a.docView.nearest(o.anchorNode);if(l&&l.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!a.state.selection.main.empty&&o.focusNode&&isEquivalentPosition(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=browser.safari&&e.root.nodeType==11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariSelectionRangeHack(this.view)||getSelection(e.root);if(!n||this.selectionRange.eq(n))return!1;let a=hasSelection(this.dom,n);return a&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),a&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let a=this.dom;a;)if(a.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==a?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(a),a=a.assignedSlot||a.parentNode;else if(a.nodeType==11)a=a.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let a of this.scrollTargets)a.removeEventListener("scroll",this.onScroll);for(let a of this.scrollTargets=n)a.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var a;if(!this.delayedAndroidKey){let o=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),!this.flush()&&l.force&&dispatchKey(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(o)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((a=this.delayedAndroidKey)===null||a===void 0)&&a.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,a=-1,o=!1;for(let l of e){let u=this.readMutation(l);u&&(u.typeOver&&(o=!0),n==-1?{from:n,to:a}=u:(n=Math.min(u.from,n),a=Math.max(u.to,a)))}return{from:n,to:a,typeOver:o}}readChange(){let{from:e,to:n,typeOver:a}=this.processRecords(),o=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);return e<0&&!o?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new DOMChange(this.view,e,n,a))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return!1;let a=this.view.state,o=applyDOMChange(this.view,n);return this.view.state==a&&this.view.update([]),o}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.dirty|=4),e.type=="childList"){let a=findChild(n,e.previousSibling||e.target.previousSibling,-1),o=findChild(n,e.nextSibling||e.target.nextSibling,1);return{from:a?n.posAfter(a):n.posAtStart,to:o?n.posBefore(o):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,a,o;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(a=this.resizeScroll)===null||a===void 0||a.disconnect(),(o=this.resizeContent)===null||o===void 0||o.disconnect();for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function findChild(s,e,n){for(;e;){let a=ContentView.get(e);if(a&&a.parent==s)return a;let o=e.parentNode;e=o!=s.dom?o:n>0?e.nextSibling:e.previousSibling}return null}function safariSelectionRangeHack(s){let e=null;function n(f){f.preventDefault(),f.stopImmediatePropagation(),e=f.getTargetRanges()[0]}if(s.contentDOM.addEventListener("beforeinput",n,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let a=e.startContainer,o=e.startOffset,l=e.endContainer,u=e.endOffset,c=s.docView.domAtPos(s.state.selection.main.anchor);return isEquivalentPosition(c.node,c.offset,l,u)&&([a,o,l,u]=[l,u,a,o]),{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}}class EditorView{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(n=>this.update([n])),this.dispatch=this.dispatch.bind(this),this._root=e.root||getRoot(e.parent)||document,this.viewState=new ViewState(e.state||EditorState.create(e)),this.plugins=this.state.facet(viewPlugin).map(n=>new PluginInstance(n));for(let n of this.plugins)n.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Transaction?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,a=!1,o,l=this.state;for(let S of e){if(S.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=S.state}if(this.destroyed){this.viewState.state=l;return}let u=this.hasFocus,c=0,f=null;e.some(S=>S.annotation(isFocusChange))?(this.inputState.notifiedFocused=u,c=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,f=focusChangeTransaction(l,u),f||(c=1));let d=this.observer.delayedAndroidKey,g=null;if(d?(this.observer.clearDelayedAndroidKey(),g=this.observer.readChange(),(g&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(g=null)):this.observer.clear(),l.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(l);o=ViewUpdate.create(this,l,e),o.flags|=c;let O=this.viewState.scrollTarget;try{this.updateState=2;for(let S of e){if(O&&(O=O.map(S.changes)),S.scrollIntoView){let{main:b}=S.state.selection;O=new ScrollTarget(b.empty?b:EditorSelection.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of S.effects)b.is(scrollIntoView$1)&&(O=b.value)}this.viewState.update(o,O),this.bidiCache=CachedOrder.update(this.bidiCache,o.changes),o.empty||(this.updatePlugins(o),this.inputState.update(o)),n=this.docView.update(o),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),a=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(S=>S.isUserEvent("select.pointer")))}finally{this.updateState=0}if(o.startState.facet(theme$1)!=o.state.facet(theme$1)&&(this.viewState.mustMeasureContent=!0),(n||a||O||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!o.empty)for(let S of this.state.facet(updateListener))S(o);(f||g)&&Promise.resolve().then(()=>{f&&this.state==f.startState&&this.dispatch(f),g&&!applyDOMChange(this,g)&&d.force&&dispatchKey(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let a of this.plugins)a.destroy(this);this.viewState=new ViewState(e),this.plugins=e.facet(viewPlugin).map(a=>new PluginInstance(a)),this.pluginMap.clear();for(let a of this.plugins)a.update(this);this.docView=new DocView(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(viewPlugin),a=e.state.facet(viewPlugin);if(n!=a){let o=[];for(let l of a){let u=n.indexOf(l);if(u<0)o.push(new PluginInstance(l));else{let c=this.plugins[u];c.mustUpdate=e,o.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=o,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let o of this.plugins)o.mustUpdate=e;for(let o=0;o<this.plugins.length;o++)this.plugins[o].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,{scrollHeight:a,scrollTop:o,clientHeight:l}=this.scrollDOM,u=o>a-l-4?a:o;try{for(let c=0;;c++){this.updateState=1;let f=this.viewport,d=this.viewState.lineBlockAtHeight(u),g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let O=[];g&4||([this.measureRequests,O]=[O,this.measureRequests]);let S=O.map($=>{try{return $.read(this)}catch(R){return logException(this.state,R),BadMeasure}}),b=ViewUpdate.create(this,this.state,[]),E=!1,k=!1;b.flags|=g,n?n.flags|=g:n=b,this.updateState=2,b.empty||(this.updatePlugins(b),this.inputState.update(b),this.updateAttrs(),E=this.docView.update(b));for(let $=0;$<O.length;$++)if(S[$]!=BadMeasure)try{let R=O[$];R.write&&R.write(S[$],this)}catch(R){logException(this.state,R)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,k=!0;else{let $=this.viewState.lineBlockAt(d.from).top-d.top;($>1||$<-1)&&(this.scrollDOM.scrollTop+=$,k=!0)}if(E&&this.docView.updateSelection(!0),this.viewport.from==f.from&&this.viewport.to==f.to&&!k&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let c of this.state.facet(updateListener))c(n)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme$1)}updateAttrs(){let e=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,n);let a=this.observer.ignore(()=>{let o=updateAttrs(this.contentDOM,this.contentAttrs,n),l=updateAttrs(this.dom,this.editorAttrs,e);return o||l});return this.editorAttrs=e,this.contentAttrs=n,a}showAnnouncements(e){let n=!0;for(let a of e)for(let o of a.effects)if(o.is(EditorView.announce)){n&&(this.announceDOM.textContent=""),n=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=o.value}}mountStyles(){this.styleModules=this.state.facet(styleModule),StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(a=>a.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,a){return skipAtoms(this,e,moveByChar(this,e,n,a))}moveByGroup(e,n){return skipAtoms(this,e,moveByChar(this,e,n,a=>byGroup(this,e.head,a)))}moveToLineBoundary(e,n,a=!0){return moveToLineBoundary(this,e,n,a)}moveVertically(e,n,a){return skipAtoms(this,e,moveVertically(this,e,n,a))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),posAtCoords(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let a=this.docView.coordsAt(e,n);if(!a||a.left==a.right)return a;let o=this.state.doc.lineAt(e),l=this.bidiSpans(o),u=l[BidiSpan.find(l,e-o.from,-1,n)];return flattenRect(a,u.dir==Direction.LTR==n>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(perLineTextDirection)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>MaxBidiLine)return trivialOrder(e.length);let n=this.textDirectionAt(e.from);for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n)return o.order;let a=computeOrder(e.text,n);return this.bidiCache.push(new CachedOrder(e.from,e.to,n,a)),a}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return scrollIntoView$1.of(new ScrollTarget(typeof e=="number"?EditorSelection.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}static domEventHandlers(e){return ViewPlugin.define(()=>({}),{eventHandlers:e})}static theme(e,n){let a=StyleModule.newName(),o=[theme$1.of(a),styleModule.of(buildTheme(`.${a}`,e))];return n&&n.dark&&o.push(darkTheme.of(!0)),o}static baseTheme(e){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,e,lightDarkIDs)))}static findFromDOM(e){var n;let a=e.querySelector(".cm-content"),o=a&&ContentView.get(a)||ContentView.get(e);return((n=o?.rootView)===null||n===void 0?void 0:n.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler$1,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.atomicRanges=atomicRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(e,n,a,o){this.from=e,this.to=n,this.dir=a,this.order=o}static update(e,n){if(n.empty)return e;let a=[],o=e.length?e[e.length-1].dir:Direction.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let u=e[l];u.dir==o&&!n.touchesRange(u.from,u.to)&&a.push(new CachedOrder(n.mapPos(u.from,1),n.mapPos(u.to,-1),u.dir,u.order))}return a}}function attrsFromFacet(s,e,n){for(let a=s.state.facet(e),o=a.length-1;o>=0;o--){let l=a[o],u=typeof l=="function"?l(s):l;u&&combineAttrs(u,n)}return n}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(s,e){const n=s.split(/-(?!$)/);let a=n[n.length-1];a=="Space"&&(a=" ");let o,l,u,c;for(let f=0;f<n.length-1;++f){const d=n[f];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))o=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))u=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return o&&(a="Alt-"+a),l&&(a="Ctrl-"+a),c&&(a="Meta-"+a),u&&(a="Shift-"+a),a}function modifiers(s,e,n){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),n!==!1&&e.shiftKey&&(s="Shift-"+s),s}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(s,e){return runHandlers(getKeymap(e.state),s,e,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(s){let e=s.facet(keymap),n=Keymaps.get(e);return n||Keymaps.set(e,n=buildKeymap(e.reduce((a,o)=>a.concat(o),[]))),n}function runScopeHandlers(s,e,n){return runHandlers(getKeymap(s.state),e,s,n)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(s,e=currentPlatform){let n=Object.create(null),a=Object.create(null),o=(u,c)=>{let f=a[u];if(f==null)a[u]=c;else if(f!=c)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},l=(u,c,f,d)=>{var g,O;let S=n[u]||(n[u]=Object.create(null)),b=c.split(/ (?!$)/).map($=>normalizeKeyName($,e));for(let $=1;$<b.length;$++){let R=b.slice(0,$).join(" ");o(R,!0),S[R]||(S[R]={preventDefault:!0,run:[Z=>{let he=storedPrefix={view:Z,prefix:R,scope:u};return setTimeout(()=>{storedPrefix==he&&(storedPrefix=null)},PrefixTimeout),!0}]})}let E=b.join(" ");o(E,!1);let k=S[E]||(S[E]={preventDefault:!1,run:((O=(g=S._any)===null||g===void 0?void 0:g.run)===null||O===void 0?void 0:O.slice())||[]});f&&k.run.push(f),d&&(k.preventDefault=!0)};for(let u of s){let c=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let d of c){let g=n[d]||(n[d]=Object.create(null));g._any||(g._any={preventDefault:!1,run:[]});for(let O in g)g[O].run.push(u.any)}let f=u[e]||u.key;if(f)for(let d of c)l(d,f,u.run,u.preventDefault),u.shift&&l(d,"Shift-"+f,u.shift,u.preventDefault)}return n}function runHandlers(s,e,n,a){let o=keyName(e),l=codePointAt(o,0),u=codePointSize(l)==o.length&&o!=" ",c="",f=!1;storedPrefix&&storedPrefix.view==n&&storedPrefix.scope==a&&(c=storedPrefix.prefix+" ",(f=modifierCodes.indexOf(e.keyCode)<0)&&(storedPrefix=null));let d=new Set,g=E=>{if(E){for(let k of E.run)if(!d.has(k)&&(d.add(k),k(n,e)))return!0;E.preventDefault&&(f=!0)}return!1},O=s[a],S,b;if(O){if(g(O[c+modifiers(o,e,!u)]))return!0;if(u&&(e.altKey||e.metaKey||e.ctrlKey)&&!(browser.windows&&e.ctrlKey&&e.altKey)&&(S=base[e.keyCode])&&S!=o){if(g(O[c+modifiers(S,e,!0)]))return!0;if(e.shiftKey&&(b=shift[e.keyCode])!=o&&b!=S&&g(O[c+modifiers(b,e,!1)]))return!0}else if(u&&e.shiftKey&&g(O[c+modifiers(o,e,!0)]))return!0;if(g(O._any))return!0}return f}const CanHidePrimary=!browser.ios,themeSpec$2={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};CanHidePrimary&&(themeSpec$2[".cm-line"].caretColor="transparent !important");function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,n=[];for(let a of s.state.selection.ranges){let o=s.lineBlockAt(a.head);o.from>e&&(n.push(lineDeco.range(o.from)),e=o.from)}return Decoration.set(n)}},{decorations:s=>s.decorations}),Outside="-10000px";class TooltipViewManager{constructor(e,n,a){this.facet=n,this.createTooltipView=a,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o),this.tooltipViews=this.tooltips.map(a)}update(e){var n;let a=e.state.facet(this.facet),o=a.filter(u=>u);if(a===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let l=[];for(let u=0;u<o.length;u++){let c=o[u],f=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let g=this.tooltips[d];g&&g.create==c.create&&(f=d)}if(f<0)l[u]=this.createTooltipView(c);else{let d=l[u]=this.tooltipViews[f];d.update&&d.update(e)}}}for(let u of this.tooltipViews)l.indexOf(u)<0&&(u.dom.remove(),(n=u.destroy)===null||n===void 0||n.call(u));return this.input=a,this.tooltips=o,this.tooltipViews=l,!0}}function windowSpace(s){let{win:e}=s;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const tooltipConfig=Facet.define({combine:s=>{var e,n,a;return{position:browser.ios?"absolute":((e=s.find(o=>o.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=s.find(o=>o.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((a=s.find(o=>o.tooltipSpace))===null||a===void 0?void 0:a.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(tooltipConfig);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(s,showTooltip,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s);e&&this.observeIntersection();let n=e||s.geometryChanged,a=s.state.facet(tooltipConfig);if(a.position!=this.position){this.position=a.position;for(let o of this.manager.tooltipViews)o.dom.style.position=this.position;n=!0}if(a.parent!=this.parent){this.parent&&this.container.remove(),this.parent=a.parent,this.createContainer();for(let o of this.manager.tooltipViews)this.container.appendChild(o.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(s){let e=s.create(this.view);if(e.dom.classList.add("cm-tooltip"),s.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=Outside,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var s,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(s=n.destroy)===null||s===void 0||s.call(n);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=this.view.dom.getBoundingClientRect();return{editor:s,parent:this.parent?this.container.getBoundingClientRect():s,pos:this.manager.tooltips.map((e,n)=>{let a=this.manager.tooltipViews[n];return a.getCoords?a.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view)}}writeMeasure(s){var e;let{editor:n,space:a}=s,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let u=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:f}=c,d=s.pos[l],g=s.size[l];if(!d||d.bottom<=Math.max(n.top,a.top)||d.top>=Math.min(n.bottom,a.bottom)||d.right<Math.max(n.left,a.left)-.1||d.left>Math.min(n.right,a.right)+.1){f.style.top=Outside;continue}let O=u.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,S=O?7:0,b=g.right-g.left,E=(e=knownHeight.get(c))!==null&&e!==void 0?e:g.bottom-g.top,k=c.offset||noOffset,$=this.view.textDirection==Direction.LTR,R=g.width>a.right-a.left?$?a.left:a.right-g.width:$?Math.min(d.left-(O?14:0)+k.x,a.right-b):Math.max(a.left,d.left-b+(O?14:0)-k.x),Z=!!u.above;!u.strictSide&&(Z?d.top-(g.bottom-g.top)-k.y<a.top:d.bottom+(g.bottom-g.top)+k.y>a.bottom)&&Z==a.bottom-d.bottom>d.top-a.top&&(Z=!Z);let he=(Z?d.top-a.top:a.bottom-d.bottom)-S;if(he<E&&c.resize!==!1){if(he<this.view.defaultLineHeight){f.style.top=Outside;continue}knownHeight.set(c,E),f.style.height=(E=he)+"px"}else f.style.height&&(f.style.height="");let j=Z?d.top-E-S-k.y:d.bottom+S+k.y,K=R+b;if(c.overlap!==!0)for(let se of o)se.left<K&&se.right>R&&se.top<j+E&&se.bottom>j&&(j=Z?se.top-E-2-S:se.bottom+S+2);this.position=="absolute"?(f.style.top=j-s.parent.top+"px",f.style.left=R-s.parent.left+"px"):(f.style.top=j+"px",f.style.left=R+"px"),O&&(O.style.left=`${d.left+($?k.x:-k.x)-(R+14-7)}px`),c.overlap!==!0&&o.push({left:R,top:j,right:K,bottom:j+E}),f.classList.toggle("cm-tooltip-above",Z),f.classList.toggle("cm-tooltip-below",!Z),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Outside}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define();class HoverTooltipHost{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(e,showHoverTooltip,n=>this.createHostedView(n))}static create(e){return new HoverTooltipHost(e)}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],s=>{let e=s.facet(showHoverTooltip).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.filter(n=>n.end!=null).map(n=>n.end)),create:HoverTooltipHost.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class HoverPlugin{constructor(e,n,a,o,l){this.view=e,this.source=n,this.field=a,this.setHover=o,this.hoverTime=l,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,n=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(n==null)return;let a=this.view.coordsAtPos(n);if(a==null||e.y<a.top||e.y>a.bottom||e.x<a.left-this.view.defaultCharacterWidth||e.x>a.right+this.view.defaultCharacterWidth)return;let o=this.view.bidiSpans(this.view.state.doc.lineAt(n)).find(c=>c.from<=n&&c.to>=n),l=o&&o.dir==Direction.RTL?-1:1,u=this.source(this.view,n,e.x<a.left?-l:l);if(u?.then){let c=this.pending={pos:n};u.then(f=>{this.pending==c&&(this.pending=null,f&&this.view.dispatch({effects:this.setHover.of(f)}))},f=>logException(this.view.state,f,"hover tooltip"))}else u&&this.view.dispatch({effects:this.setHover.of(u)})}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let a=this.active;if(a&&!isInTooltip(this.lastMove.target)||this.pending){let{pos:o}=a||this.pending,l=(n=a?.end)!==null&&n!==void 0?n:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!isOverRange(this.view,o,l,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!isInTooltip(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function isInTooltip(s){for(let e=s;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function isOverRange(s,e,n,a,o,l){let u=document.createRange(),c=s.domAtPos(e),f=s.domAtPos(n);u.setEnd(f.node,f.offset),u.setStart(c.node,c.offset);let d=u.getClientRects();u.detach();for(let g=0;g<d.length;g++){let O=d[g];if(Math.max(O.top-o,o-O.bottom,O.left-a,a-O.right)<=l)return!0}return!1}function hoverTooltip(s,e={}){let n=StateEffect.define(),a=StateField.define({create(){return null},update(o,l){if(o&&(e.hideOnChange&&(l.docChanged||l.selection)||e.hideOn&&e.hideOn(l,o)))return null;if(o&&l.docChanged){let u=l.changes.mapPos(o.pos,-1,MapMode.TrackDel);if(u==null)return null;let c=Object.assign(Object.create(null),o);c.pos=u,o.end!=null&&(c.end=l.changes.mapPos(o.end)),o=c}for(let u of l.effects)u.is(n)&&(o=u.value),u.is(closeHoverTooltipEffect)&&(o=null);return o},provide:o=>showHoverTooltip.from(o)});return[a,ViewPlugin.define(o=>new HoverPlugin(o,s,a,n,e.hoverTime||300)),showHoverTooltipHost]}function getTooltip(s,e){let n=s.plugin(tooltipPlugin);if(!n)return null;let a=n.manager.tooltips.indexOf(e);return a<0?null:n.manager.tooltipViews[a]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(s){let e,n;for(let a of s)e=e||a.topContainer,n=n||a.bottomContainer;return{topContainer:e,bottomContainer:n}}});function getPanel(s,e){let n=s.plugin(panelPlugin),a=n?n.specs.indexOf(e):-1;return a>-1?n.panels[a]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(s){this.input=s.state.facet(showPanel),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(s));let e=s.state.facet(panelConfig);this.top=new PanelGroup(s,!0,e.topContainer),this.bottom=new PanelGroup(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(s){let e=s.state.facet(panelConfig);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new PanelGroup(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=s.state.facet(showPanel);if(n!=this.input){let a=n.filter(f=>f),o=[],l=[],u=[],c=[];for(let f of a){let d=this.specs.indexOf(f),g;d<0?(g=f(s.view),c.push(g)):(g=this.panels[d],g.update&&g.update(s)),o.push(g),(g.top?l:u).push(g)}this.specs=a,this.panels=o,this.top.sync(l),this.bottom.sync(u);for(let f of c)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let a of this.panels)a.update&&a.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>EditorView.scrollMargins.of(e=>{let n=e.plugin(s);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class PanelGroup{constructor(e,n,a){this.view=e,this.top=n,this.container=a,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=rm(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=rm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function rm(s){let e=s.nextSibling;return s.remove(),e}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),activeGutters=Facet.define(),unfixGutters=Facet.define({combine:s=>s.some(e=>e)});function gutters(s){let e=[gutterView];return s&&s.fixed===!1&&e.push(unfixGutters.of(!0)),e}const gutterView=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=s.state.facet(activeGutters).map(e=>new SingleGutterView(s,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!s.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}update(s){if(this.updateGutters(s)){let e=this.prevViewport,n=s.view.viewport,a=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(a<(n.to-n.from)*.8)}s.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&this.dom.remove();let n=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),a=[],o=this.gutters.map(l=>new UpdateContext(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks){let u;if(Array.isArray(l.type)){for(let c of l.type)if(c.type==BlockType.Text){u=c;break}}else u=l.type==BlockType.Text?l:void 0;if(u){a.length&&(a=[]),advanceCursor(n,a,l.from);for(let c of o)c.line(this.view,u,a)}}for(let l of o)l.finish();s&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(s){let e=s.startState.facet(activeGutters),n=s.state.facet(activeGutters),a=s.docChanged||s.heightChanged||s.viewportChanged||!RangeSet.eq(s.startState.facet(gutterLineClass),s.state.facet(gutterLineClass),s.view.viewport.from,s.view.viewport.to);if(e==n)for(let o of this.gutters)o.update(s)&&(a=!0);else{a=!0;let o=[];for(let l of n){let u=e.indexOf(l);u<0?o.push(new SingleGutterView(this.view,l)):(this.gutters[u].update(s),o.push(this.gutters[u]))}for(let l of this.gutters)l.dom.remove(),o.indexOf(l)<0&&l.destroy();for(let l of o)this.dom.appendChild(l.dom);this.gutters=o}return a}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove()}},{provide:s=>EditorView.scrollMargins.of(e=>{let n=e.plugin(s);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Direction.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}})});function asArray(s){return Array.isArray(s)?s:[s]}function advanceCursor(s,e,n){for(;s.value&&s.from<=n;)s.from==n&&e.push(s.value),s.next()}class UpdateContext{constructor(e,n,a){this.gutter=e,this.height=a,this.i=0,this.cursor=RangeSet.iter(e.markers,n.from)}line(e,n,a){let o=[];advanceCursor(this.cursor,o,n.from),a.length&&(o=o.concat(a));let l=this.gutter.config.lineMarker(e,n,o);l&&o.unshift(l);let u=this.gutter;if(o.length==0&&!u.config.renderEmptyElements)return;let c=n.top-this.height;if(this.i==u.elements.length){let f=new GutterElement(e,n.height,c,o);u.elements.push(f),u.dom.appendChild(f.dom)}else u.elements[this.i].update(e,n.height,c,o);this.height=n.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class SingleGutterView{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let a in n.domEventHandlers)this.dom.addEventListener(a,o=>{let l=o.target,u;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let f=l.getBoundingClientRect();u=(f.top+f.bottom)/2}else u=o.clientY;let c=e.lineBlockAtHeight(u-e.documentTop);n.domEventHandlers[a](e,c,o)&&o.preventDefault()});this.markers=asArray(n.markers(e)),n.initialSpacer&&(this.spacer=new GutterElement(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=asArray(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let o=this.config.updateSpacer(this.spacer.markers[0],e);o!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[o])}let a=e.view.viewport;return!RangeSet.eq(this.markers,n,a.from,a.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class GutterElement{constructor(e,n,a,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,a,o)}update(e,n,a,o){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=a&&(this.dom.style.marginTop=(this.above=a)?a+"px":""),sameMarkers(this.markers,o)||this.setMarkers(e,o)}setMarkers(e,n){let a="cm-gutterElement",o=this.dom.firstChild;for(let l=0,u=0;;){let c=u,f=l<n.length?n[l++]:null,d=!1;if(f){let g=f.elementClass;g&&(a+=" "+g);for(let O=u;O<this.markers.length;O++)if(this.markers[O].compare(f)){c=O,d=!0;break}}else c=this.markers.length;for(;u<c;){let g=this.markers[u++];if(g.toDOM){g.destroy(o);let O=o.nextSibling;o.remove(),o=O}}if(!f)break;f.toDOM&&(d?o=o.nextSibling:this.dom.insertBefore(f.toDOM(e),o)),d&&u++}this.dom.className=a,this.markers=n}destroy(){this.setMarkers(null,[])}}function sameMarkers(s,e){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!s[n].compare(e[n]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberConfig=Facet.define({combine(s){return combineConfig(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let a=Object.assign({},e);for(let o in n){let l=a[o],u=n[o];a[o]=l?(c,f,d)=>l(c,f,d)||u(c,f,d):u}return a}})}});class NumberMarker extends GutterMarker{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(s,e){return s.state.facet(lineNumberConfig).formatNumber(e,s.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lineNumberMarkers)},lineMarker(e,n,a){return a.some(o=>o.toDOM)?null:new NumberMarker(formatNumber(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:e=>e.startState.facet(lineNumberConfig)!=e.state.facet(lineNumberConfig),initialSpacer(e){return new NumberMarker(formatNumber(e,maxLineNumber(e.state.doc.lines)))},updateSpacer(e,n){let a=formatNumber(n.view,maxLineNumber(n.view.state.doc.lines));return a==e.number?e:new NumberMarker(a)},domEventHandlers:s.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(s={}){return[lineNumberConfig.of(s),gutters(),lineNumberGutter]}function maxLineNumber(s){let e=9;for(;e<s;)e=e*10+9;return e}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],s=>{let e=[],n=-1;for(let a of s.selection.ranges){let o=s.doc.lineAt(a.head).from;o>n&&(n=o,e.push(activeLineGutterMarker.range(o)))}return RangeSet.of(e)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(e,n){this.from=e,this.to=n}}class NodeProp{constructor(e={}){this.id=nextPropID++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=NodeType.match(e)),n=>{let a=e(n);return a===void 0?null:[this,a]}}}NodeProp.closedBy=new NodeProp({deserialize:s=>s.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:s=>s.split(" ")}),NodeProp.group=new NodeProp({deserialize:s=>s.split(" ")}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});const noProps=Object.create(null);class NodeType{constructor(e,n,a,o=0){this.name=e,this.props=n,this.id=a,this.flags=o}static define(e){let n=e.props&&e.props.length?Object.create(null):noProps,a=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),o=new NodeType(e.name||"",n,e.id,a);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(o)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[l[0].id]=l[1]}}return o}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(NodeProp.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let a in e)for(let o of a.split(" "))n[o]=e[a];return a=>{for(let o=a.prop(NodeProp.group),l=-1;l<(o?o.length:0);l++){let u=n[l<0?a.name:o[l]];if(u)return u}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let a of this.types){let o=null;for(let l of e){let u=l(a);u&&(o||(o=Object.assign({},a.props)),o[u[0].id]=u[1])}n.push(o?new NodeType(a.name,o,a.id,a.flags):a)}return new NodeSet(n)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(e,n,a,o,l){if(this.type=e,this.children=n,this.positions=a,this.length=o,this.props=null,l&&l.length){this.props=Object.create(null);for(let[u,c]of l)this.props[typeof u=="number"?u:u.id]=c}}toString(){let e=this.prop(NodeProp.mounted);if(e&&!e.overlay)return e.tree.toString();let n="";for(let a of this.children){let o=a.toString();o&&(n&&(n+=","),n+=o)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new TreeCursor(this.topNode,e)}cursorAt(e,n=0,a=0){let o=CachedNode.get(this)||this.topNode,l=new TreeCursor(o);return l.moveTo(e,n),CachedNode.set(this,l._tree),l}get topNode(){return new TreeNode(this,0,0,null)}resolve(e,n=0){let a=resolveNode(CachedNode.get(this)||this.topNode,e,n,!1);return CachedNode.set(this,a),a}resolveInner(e,n=0){let a=resolveNode(CachedInnerNode.get(this)||this.topNode,e,n,!0);return CachedInnerNode.set(this,a),a}iterate(e){let{enter:n,leave:a,from:o=0,to:l=this.length}=e;for(let u=this.cursor((e.mode||0)|IterMode.IncludeAnonymous);;){let c=!1;if(u.from<=l&&u.to>=o&&(u.type.isAnonymous||n(u)!==!1)){if(u.firstChild())continue;c=!0}for(;c&&a&&!u.type.isAnonymous&&a(u),!u.nextSibling();){if(!u.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(n,a,o)=>new Tree(this.type,n,a,o,this.propValues),e.makeTree||((n,a,o)=>new Tree(NodeType.none,n,a,o)))}static build(e){return buildTree(e)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(e,n,a){this.buffer=e,this.length=n,this.set=a}get type(){return NodeType.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],a=this.buffer[e+3],o=this.set.types[n],l=o.name;if(/\W/.test(l)&&!o.isError&&(l=JSON.stringify(l)),e+=4,a==e)return l;let u=[];for(;e<a;)u.push(this.childString(e)),e=this.buffer[e+3];return l+"("+u.join(",")+")"}findChild(e,n,a,o,l){let{buffer:u}=this,c=-1;for(let f=e;f!=n&&!(checkSide(l,o,u[f+1],u[f+2])&&(c=f,a>0));f=u[f+3]);return c}slice(e,n,a){let o=this.buffer,l=new Uint16Array(n-e),u=0;for(let c=e,f=0;c<n;){l[f++]=o[c++],l[f++]=o[c++]-a;let d=l[f++]=o[c++]-a;l[f++]=o[c++]-e,u=Math.max(u,d)}return new TreeBuffer(l,u,this.set)}}function checkSide(s,e,n,a){switch(s){case-2:return n<e;case-1:return a>=e&&n<e;case 0:return n<e&&a>e;case 1:return n<=e&&a>e;case 2:return a>e;case 4:return!0}}function enterUnfinishedNodesBefore(s,e){let n=s.childBefore(e);for(;n;){let a=n.lastChild;if(!a||a.to!=n.to)break;a.type.isError&&a.from==a.to?(s=n,n=a.prevSibling):n=a}return s}function resolveNode(s,e,n,a){for(var o;s.from==s.to||(n<1?s.from>=e:s.from>e)||(n>-1?s.to<=e:s.to<e);){let u=!a&&s instanceof TreeNode&&s.index<0?null:s.parent;if(!u)return s;s=u}let l=a?0:IterMode.IgnoreOverlays;if(a)for(let u=s,c=u.parent;c;u=c,c=u.parent)u instanceof TreeNode&&u.index<0&&((o=c.enter(e,n,l))===null||o===void 0?void 0:o.from)!=u.from&&(s=c);for(;;){let u=s.enter(e,n,l);if(!u)return s;s=u}}class TreeNode{constructor(e,n,a,o){this._tree=e,this.from=n,this.index=a,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,a,o,l=0){for(let u=this;;){for(let{children:c,positions:f}=u._tree,d=n>0?c.length:-1;e!=d;e+=n){let g=c[e],O=f[e]+u.from;if(checkSide(o,a,O,O+g.length)){if(g instanceof TreeBuffer){if(l&IterMode.ExcludeBuffers)continue;let S=g.findChild(0,g.buffer.length,n,a-O,o);if(S>-1)return new BufferNode(new BufferContext(u,g,e,O),null,S)}else if(l&IterMode.IncludeAnonymous||!g.type.isAnonymous||hasChild(g)){let S;if(!(l&IterMode.IgnoreMounts)&&g.props&&(S=g.prop(NodeProp.mounted))&&!S.overlay)return new TreeNode(S.tree,O,e,u);let b=new TreeNode(g,O,e,u);return l&IterMode.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(n<0?g.children.length-1:0,n,a,o)}}}if(l&IterMode.IncludeAnonymous||!u.type.isAnonymous||(u.index>=0?e=u.index+n:e=n<0?-1:u._parent._tree.children.length,u=u._parent,!u))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,a=0){let o;if(!(a&IterMode.IgnoreOverlays)&&(o=this._tree.prop(NodeProp.mounted))&&o.overlay){let l=e-this.from;for(let{from:u,to:c}of o.overlay)if((n>0?u<=l:u<l)&&(n<0?c>=l:c>l))return new TreeNode(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,a)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new TreeCursor(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}getChild(e,n=null,a=null){let o=getChildren(this,e,n,a);return o.length?o[0]:null}getChildren(e,n=null,a=null){return getChildren(this,e,n,a)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}function getChildren(s,e,n,a){let o=s.cursor(),l=[];if(!o.firstChild())return l;if(n!=null){for(;!o.type.is(n);)if(!o.nextSibling())return l}for(;;){if(a!=null&&o.type.is(a))return l;if(o.type.is(e)&&l.push(o.node),!o.nextSibling())return a==null?l:[]}}function matchNodeContext(s,e,n=e.length-1){for(let a=s.parent;n>=0;a=a.parent){if(!a)return!1;if(!a.type.isAnonymous){if(e[n]&&e[n]!=a.name)return!1;n--}}return!0}class BufferContext{constructor(e,n,a,o){this.parent=e,this.buffer=n,this.index=a,this.start=o}}class BufferNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,a){this.context=e,this._parent=n,this.index=a,this.type=e.buffer.set.types[e.buffer.buffer[a]]}child(e,n,a){let{buffer:o}=this.context,l=o.findChild(this.index+4,o.buffer[this.index+3],e,n-this.context.start,a);return l<0?null:new BufferNode(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,a=0){if(a&IterMode.ExcludeBuffers)return null;let{buffer:o}=this.context,l=o.findChild(this.index+4,o.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return l<0?null:new BufferNode(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new BufferNode(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new BufferNode(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}cursor(e=0){return new TreeCursor(this,e)}get tree(){return null}toTree(){let e=[],n=[],{buffer:a}=this.context,o=this.index+4,l=a.buffer[this.index+3];if(l>o){let u=a.buffer[this.index+1];e.push(a.slice(o,l,u)),n.push(0)}return new Tree(this.type,e,n,this.to-this.from)}resolve(e,n=0){return resolveNode(this,e,n,!1)}resolveInner(e,n=0){return resolveNode(this,e,n,!0)}enterUnfinishedNodesBefore(e){return enterUnfinishedNodesBefore(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,n=null,a=null){let o=getChildren(this,e,n,a);return o.length?o[0]:null}getChildren(e,n=null,a=null){return getChildren(this,e,n,a)}get node(){return this}matchContext(e){return matchNodeContext(this,e)}}class TreeCursor{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof TreeNode)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let a=e._parent;a;a=a._parent)this.stack.unshift(a.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:a,buffer:o}=this.buffer;return this.type=n||o.set.types[o.buffer[e]],this.from=a+o.buffer[e+1],this.to=a+o.buffer[e+2],!0}yield(e){return e?e instanceof TreeNode?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,a){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,a,this.mode));let{buffer:o}=this.buffer,l=o.findChild(this.index+4,o.buffer[this.index+3],e,n-this.buffer.start,a);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,a=this.mode){return this.buffer?a&IterMode.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,a))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,a=this.stack.length-1;if(e<0){let o=a<0?0:this.stack[a]+4;if(this.index!=o)return this.yieldBuf(n.findChild(o,this.index,-1,0,4))}else{let o=n.buffer[this.index+3];if(o<(a<0?n.buffer.length:n.buffer[this.stack[a]+3]))return this.yieldBuf(o)}return a<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,a,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(o.buffer.buffer[l+3]<this.index)return!1;({index:n,parent:a}=o)}else({index:n,_parent:a}=this._tree);for(;a;{index:n,_parent:a}=a)if(n>-1)for(let l=n+e,u=e<0?-1:a._tree.children.length;l!=u;l+=e){let c=a._tree.children[l];if(this.mode&IterMode.IncludeAnonymous||c instanceof TreeBuffer||!c.type.isAnonymous||hasChild(c))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,a=0;if(e&&e.context==this.buffer)e:for(let o=this.index,l=this.stack.length;l>=0;){for(let u=e;u;u=u._parent)if(u.index==o){if(o==this.index)return u;n=u,a=l+1;break e}o=this.stack[--l]}for(let o=a;o<this.stack.length;o++)n=new BufferNode(this.buffer,n,this.stack[o]);return this.bufferNode=new BufferNode(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let a=0;;){let o=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){a++;continue}this.type.isAnonymous||(o=!0)}for(;o&&n&&n(this),o=this.type.isAnonymous,!this.nextSibling();){if(!a)return;this.parent(),a--,o=!0}}}matchContext(e){if(!this.buffer)return matchNodeContext(this.node,e);let{buffer:n}=this.buffer,{types:a}=n.set;for(let o=e.length-1,l=this.stack.length-1;o>=0;l--){if(l<0)return matchNodeContext(this.node,e,o);let u=a[n.buffer[this.stack[l]]];if(!u.isAnonymous){if(e[o]&&e[o]!=u.name)return!1;o--}}return!0}}function hasChild(s){return s.children.some(e=>e instanceof TreeBuffer||!e.type.isAnonymous||hasChild(e))}function buildTree(s){var e;let{buffer:n,nodeSet:a,maxBufferLength:o=DefaultBufferLength,reused:l=[],minRepeatType:u=a.types.length}=s,c=Array.isArray(n)?new FlatBufferCursor(n,n.length):n,f=a.types,d=0,g=0;function O(j,K,se,de,ue){let{id:me,start:ge,end:Oe,size:be}=c,Ae=g;for(;be<0;)if(c.next(),be==-1){let $e=l[me];se.push($e),de.push(ge-j);return}else if(be==-3){d=me;return}else if(be==-4){g=me;return}else throw new RangeError(`Unrecognized record size: ${be}`);let Ne=f[me],Re,Fe,Ue=ge-j;if(Oe-ge<=o&&(Fe=k(c.pos-K,ue))){let $e=new Uint16Array(Fe.size-Fe.skip),Ie=c.pos-Fe.size,Xe=$e.length;for(;c.pos>Ie;)Xe=$(Fe.start,$e,Xe);Re=new TreeBuffer($e,Oe-Fe.start,a),Ue=Fe.start-j}else{let $e=c.pos-be;c.next();let Ie=[],Xe=[],Pe=me>=u?me:-1,nt=0,At=Oe;for(;c.pos>$e;)Pe>=0&&c.id==Pe&&c.size>=0?(c.end<=At-o&&(b(Ie,Xe,ge,nt,c.end,At,Pe,Ae),nt=Ie.length,At=c.end),c.next()):O(ge,$e,Ie,Xe,Pe);if(Pe>=0&&nt>0&&nt<Ie.length&&b(Ie,Xe,ge,nt,ge,At,Pe,Ae),Ie.reverse(),Xe.reverse(),Pe>-1&&nt>0){let Dt=S(Ne);Re=balanceRange(Ne,Ie,Xe,0,Ie.length,0,Oe-ge,Dt,Dt)}else Re=E(Ne,Ie,Xe,Oe-ge,Ae-Oe)}se.push(Re),de.push(Ue)}function S(j){return(K,se,de)=>{let ue=0,me=K.length-1,ge,Oe;if(me>=0&&(ge=K[me])instanceof Tree){if(!me&&ge.type==j&&ge.length==de)return ge;(Oe=ge.prop(NodeProp.lookAhead))&&(ue=se[me]+ge.length+Oe)}return E(j,K,se,de,ue)}}function b(j,K,se,de,ue,me,ge,Oe){let be=[],Ae=[];for(;j.length>de;)be.push(j.pop()),Ae.push(K.pop()+se-ue);j.push(E(a.types[ge],be,Ae,me-ue,Oe-me)),K.push(ue-se)}function E(j,K,se,de,ue=0,me){if(d){let ge=[NodeProp.contextHash,d];me=me?[ge].concat(me):[ge]}if(ue>25){let ge=[NodeProp.lookAhead,ue];me=me?[ge].concat(me):[ge]}return new Tree(j,K,se,de,me)}function k(j,K){let se=c.fork(),de=0,ue=0,me=0,ge=se.end-o,Oe={size:0,start:0,skip:0};e:for(let be=se.pos-j;se.pos>be;){let Ae=se.size;if(se.id==K&&Ae>=0){Oe.size=de,Oe.start=ue,Oe.skip=me,me+=4,de+=4,se.next();continue}let Ne=se.pos-Ae;if(Ae<0||Ne<be||se.start<ge)break;let Re=se.id>=u?4:0,Fe=se.start;for(se.next();se.pos>Ne;){if(se.size<0)if(se.size==-3)Re+=4;else break e;else se.id>=u&&(Re+=4);se.next()}ue=Fe,de+=Ae,me+=Re}return(K<0||de==j)&&(Oe.size=de,Oe.start=ue,Oe.skip=me),Oe.size>4?Oe:void 0}function $(j,K,se){let{id:de,start:ue,end:me,size:ge}=c;if(c.next(),ge>=0&&de<u){let Oe=se;if(ge>4){let be=c.pos-(ge-4);for(;c.pos>be;)se=$(j,K,se)}K[--se]=Oe,K[--se]=me-j,K[--se]=ue-j,K[--se]=de}else ge==-3?d=de:ge==-4&&(g=de);return se}let R=[],Z=[];for(;c.pos>0;)O(s.start||0,s.bufferStart||0,R,Z,-1);let he=(e=s.length)!==null&&e!==void 0?e:R.length?Z[0]+R[0].length:0;return new Tree(f[s.topID],R.reverse(),Z.reverse(),he)}const nodeSizeCache=new WeakMap;function nodeSize(s,e){if(!s.isAnonymous||e instanceof TreeBuffer||e.type!=s)return 1;let n=nodeSizeCache.get(e);if(n==null){n=1;for(let a of e.children){if(a.type!=s||!(a instanceof Tree)){n=1;break}n+=nodeSize(s,a)}nodeSizeCache.set(e,n)}return n}function balanceRange(s,e,n,a,o,l,u,c,f){let d=0;for(let E=a;E<o;E++)d+=nodeSize(s,e[E]);let g=Math.ceil(d*1.5/8),O=[],S=[];function b(E,k,$,R,Z){for(let he=$;he<R;){let j=he,K=k[he],se=nodeSize(s,E[he]);for(he++;he<R;he++){let de=nodeSize(s,E[he]);if(se+de>=g)break;se+=de}if(he==j+1){if(se>g){let de=E[j];b(de.children,de.positions,0,de.children.length,k[j]+Z);continue}O.push(E[j])}else{let de=k[he-1]+E[he-1].length-K;O.push(balanceRange(s,E,k,j,he,K,de,null,f))}S.push(K+Z-l)}}return b(e,n,a,o,0),(c||f)(O,S,u)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(e,n,a){let o=this.map.get(e);o||this.map.set(e,o=new Map),o.set(n,a)}getBuffer(e,n){let a=this.map.get(e);return a&&a.get(n)}set(e,n){e instanceof BufferNode?this.setBuffer(e.context.buffer,e.index,n):e instanceof TreeNode&&this.map.set(e.tree,n)}get(e){return e instanceof BufferNode?this.getBuffer(e.context.buffer,e.index):e instanceof TreeNode?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class TreeFragment{constructor(e,n,a,o,l=!1,u=!1){this.from=e,this.to=n,this.tree=a,this.offset=o,this.open=(l?1:0)|(u?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],a=!1){let o=[new TreeFragment(0,e.length,e,0,!1,a)];for(let l of n)l.to>e.length&&o.push(l);return o}static applyChanges(e,n,a=128){if(!n.length)return e;let o=[],l=1,u=e.length?e[0]:null;for(let c=0,f=0,d=0;;c++){let g=c<n.length?n[c]:null,O=g?g.fromA:1e9;if(O-f>=a)for(;u&&u.from<O;){let S=u;if(f>=S.from||O<=S.to||d){let b=Math.max(S.from,f)-d,E=Math.min(S.to,O)-d;S=b>=E?null:new TreeFragment(b,E,S.tree,S.offset+d,c>0,!!g)}if(S&&o.push(S),u.to>O)break;u=l<e.length?e[l++]:null}if(!g)break;f=g.toA,d=g.toA-g.toB}return o}}class Parser{startParse(e,n,a){return typeof e=="string"&&(e=new StringInput(e)),a=a?a.length?a.map(o=>new Range(o.from,o.to)):[new Range(0,0)]:[new Range(0,e.length)],this.createParse(e,n||[],a)}parse(e,n,a){let o=this.startParse(e,n,a);for(;;){let l=o.advance();if(l)return l}}}class StringInput{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(e,n,a){this.set=e,this.base=n,this.modified=a,this.id=nextTagID++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let n=new Tag([],null,[]);if(n.set.push(n),e)for(let a of e.set)n.set.push(a);return n}static defineModifier(){let e=new Modifier;return n=>n.modified.indexOf(e)>-1?n:Modifier.get(n.base||n,n.modified.concat(e).sort((a,o)=>a.id-o.id))}}let nextModifierID=0;class Modifier{constructor(){this.instances=[],this.id=nextModifierID++}static get(e,n){if(!n.length)return e;let a=n[0].instances.find(c=>c.base==e&&sameArray(n,c.modified));if(a)return a;let o=[],l=new Tag(o,e,n);for(let c of n)c.instances.push(l);let u=powerSet(n);for(let c of e.set)if(!c.modified.length)for(let f of u)o.push(Modifier.get(c,f));return l}}function sameArray(s,e){return s.length==e.length&&s.every((n,a)=>n==e[a])}function powerSet(s){let e=[[]];for(let n=0;n<s.length;n++)for(let a=0,o=e.length;a<o;a++)e.push(e[a].concat(s[n]));return e.sort((n,a)=>a.length-n.length)}function styleTags(s){let e=Object.create(null);for(let n in s){let a=s[n];Array.isArray(a)||(a=[a]);for(let o of n.split(" "))if(o){let l=[],u=2,c=o;for(let O=0;;){if(c=="..."&&O>0&&O+3==o.length){u=1;break}let S=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!S)throw new RangeError("Invalid path: "+o);if(l.push(S[0]=="*"?"":S[0][0]=='"'?JSON.parse(S[0]):S[0]),O+=S[0].length,O==o.length)break;let b=o[O++];if(O==o.length&&b=="!"){u=0;break}if(b!="/")throw new RangeError("Invalid path: "+o);c=o.slice(O)}let f=l.length-1,d=l[f];if(!d)throw new RangeError("Invalid path: "+o);let g=new Rule(a,u,f>0?l.slice(0,f):null);e[d]=g.sort(e[d])}}return ruleNodeProp.add(e)}const ruleNodeProp=new NodeProp;class Rule{constructor(e,n,a,o){this.tags=e,this.mode=n,this.context=a,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(s,e){let n=Object.create(null);for(let l of s)if(!Array.isArray(l.tag))n[l.tag.id]=l.class;else for(let u of l.tag)n[u.id]=l.class;let{scope:a,all:o=null}=e||{};return{style:l=>{let u=o;for(let c of l)for(let f of c.set){let d=n[f.id];if(d){u=u?u+" "+d:d;break}}return u},scope:a}}function highlightTags(s,e){let n=null;for(let a of s){let o=a.style(e);o&&(n=n?n+" "+o:o)}return n}function highlightTree(s,e,n,a=0,o=s.length){let l=new HighlightBuilder(a,Array.isArray(e)?e:[e],n);l.highlightRange(s.cursor(),a,o,"",l.highlighters),l.flush(o)}class HighlightBuilder{constructor(e,n,a){this.at=e,this.highlighters=n,this.span=a,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,a,o,l){let{type:u,from:c,to:f}=e;if(c>=a||f<=n)return;u.isTop&&(l=this.highlighters.filter(b=>!b.scope||b.scope(u)));let d=o,g=getStyleTags(e)||Rule.empty,O=highlightTags(l,g.tags);if(O&&(d&&(d+=" "),d+=O,g.mode==1&&(o+=(o?" ":"")+O)),this.startSpan(e.from,d),g.opaque)return;let S=e.tree&&e.tree.prop(NodeProp.mounted);if(S&&S.overlay){let b=e.node.enter(S.overlay[0].from+c,1),E=this.highlighters.filter($=>!$.scope||$.scope(S.tree.type)),k=e.firstChild();for(let $=0,R=c;;$++){let Z=$<S.overlay.length?S.overlay[$]:null,he=Z?Z.from+c:f,j=Math.max(n,R),K=Math.min(a,he);if(j<K&&k)for(;e.from<K&&(this.highlightRange(e,j,K,o,l),this.startSpan(Math.min(K,e.to),d),!(e.to>=he||!e.nextSibling())););if(!Z||he>a)break;R=Z.to+c,R>n&&(this.highlightRange(b.cursor(),Math.max(n,Z.from+c),Math.min(a,R),o,E),this.startSpan(R,d))}k&&e.parent()}else if(e.firstChild()){do if(!(e.to<=n)){if(e.from>=a)break;this.highlightRange(e,n,a,o,l),this.startSpan(Math.min(a,e.to),d)}while(e.nextSibling());e.parent()}}}function getStyleTags(s){let e=s.type.prop(ruleNodeProp);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const t=Tag.define,comment=t(),name$2=t(),typeName=t(name$2),propertyName=t(name$2),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation$1=t(),bracket=t(punctuation$1),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:name$2,variableName:t(name$2),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name$2),labelName:t(name$2),namespace:t(name$2),macroName:t(name$2),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation:punctuation$1,separator:t(punctuation$1),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(s){return Facet.define({combine:s?e=>e.concat(s):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(e,n,a=[],o=""){this.data=e,this.name=o,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=n,this.extension=[language.of(this),EditorState.languageData.of((l,u,c)=>{let f=topNodeAt(l,u,c),d=f.type.prop(languageDataProp);if(!d)return[];let g=l.facet(d),O=f.type.prop(sublanguageProp);if(O){let S=f.resolve(u-f.from,c);for(let b of O)if(b.test(S,l)){let E=l.facet(b.facet);return b.type=="replace"?E:E.concat(g)}}return g})].concat(a)}isActiveAt(e,n,a=-1){return topNodeAt(e,n,a).type.prop(languageDataProp)==this.data}findRegions(e){let n=e.facet(language);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let a=[],o=(l,u)=>{if(l.prop(languageDataProp)==this.data){a.push({from:u,to:u+l.length});return}let c=l.prop(NodeProp.mounted);if(c){if(c.tree.prop(languageDataProp)==this.data){if(c.overlay)for(let f of c.overlay)a.push({from:f.from+u,to:f.to+u});else a.push({from:u,to:u+l.length});return}else if(c.overlay){let f=a.length;if(o(c.tree,c.overlay[0].from+u),a.length>f)return}}for(let f=0;f<l.children.length;f++){let d=l.children[f];d instanceof Tree&&o(d,l.positions[f]+u)}};return o(syntaxTree(e),0),a}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(s,e,n){let a=s.facet(language),o=syntaxTree(s).topNode;if(!a||a.allowsNesting)for(let l=o;l;l=l.enter(e,n,IterMode.ExcludeBuffers))l.type.isTop&&(o=l);return o}class LRLanguage extends Language{constructor(e,n,a){super(e,n,[],a),this.parser=n}static define(e){let n=defineLanguageFacet(e.languageData);return new LRLanguage(n,e.parser.configure({props:[languageDataProp.add(a=>a.isTop?n:void 0)]}),e.name)}configure(e,n){return new LRLanguage(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(s){let e=s.field(Language.state,!1);return e?e.tree:Tree.empty}function ensureSyntaxTree(s,e,n=50){var a;let o=(a=s.field(Language.state,!1))===null||a===void 0?void 0:a.context;if(!o)return null;let l=o.viewport;o.updateViewport({from:0,to:e});let u=o.isDone(e)||o.work(n,e)?o.tree:null;return o.updateViewport(l),u}class DocInput{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let a=this.cursorPos-this.string.length;return e<a||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-a,n-a)}}let currentContext=null;class ParseContext{constructor(e,n,a=[],o,l,u,c,f){this.parser=e,this.state=n,this.fragments=a,this.tree=o,this.treeLen=l,this.viewport=u,this.skipped=c,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(e,n,a){return new ParseContext(e,n,[],Tree.empty,0,a,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Tree.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var a;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(a=this.parse.stoppedAt)!==null&&a!==void 0?a:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=currentContext;currentContext=this;try{return e()}finally{currentContext=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=cutFragments(e,n.from,n.to);return e}changes(e,n){let{fragments:a,tree:o,treeLen:l,viewport:u,skipped:c}=this;if(this.takeTree(),!e.empty){let f=[];if(e.iterChangedRanges((d,g,O,S)=>f.push({fromA:d,toA:g,fromB:O,toB:S})),a=TreeFragment.applyChanges(a,f),o=Tree.empty,l=0,u={from:e.mapPos(u.from,-1),to:e.mapPos(u.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let g=e.mapPos(d.from,1),O=e.mapPos(d.to,-1);g<O&&c.push({from:g,to:O})}}}return new ParseContext(this.parser,n,a,o,l,u,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let a=0;a<this.skipped.length;a++){let{from:o,to:l}=this.skipped[a];o<e.to&&l>e.from&&(this.fragments=cutFragments(this.fragments,o,l),this.skipped.splice(a--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Parser{createParse(n,a,o){let l=o[0].from,u=o[o.length-1].to;return{parsedPos:l,advance(){let f=currentContext;if(f){for(let d of o)f.tempSkipped.push(d);e&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,e]):e)}return this.parsedPos=u,new Tree(NodeType.none,[],[],u-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return currentContext}}function cutFragments(s,e,n){return TreeFragment.applyChanges(s,[{fromA:e,toA:n,fromB:e,toB:n}])}class LanguageState{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),a=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,a)||n.takeTree(),new LanguageState(n)}static init(e){let n=Math.min(3e3,e.doc.length),a=ParseContext.create(e.facet(language).parser,e,{from:0,to:n});return a.work(20,n)||a.takeTree(),new LanguageState(a)}}Language.state=StateField.define({create:LanguageState.init,update(s,e){for(let n of e.effects)if(n.is(Language.setState))return n.value;return e.startState.facet(language)!=e.state.facet(language)?LanguageState.init(e.state):s.apply(e)}});let requestIdle=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(requestIdle=s=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(s,{timeout:500-100})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Language.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Language.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=requestIdle(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:a,viewport:{to:o}}=this.view,l=a.field(Language.state);if(l.tree==l.context.tree&&l.context.isDone(o+1e5))return;let u=Date.now()+Math.min(this.chunkBudget,100,e&&!isInputPending?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<o&&a.doc.length>o+1e3,f=l.context.work(()=>isInputPending&&isInputPending()||Date.now()>u,o+(c?0:1e5));this.chunkBudget-=Date.now()-n,(f||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(l.context))})),this.chunkBudget>0&&!(f&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>logException(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(s){return s.length?s[0]:null},enables:s=>[Language.state,parseWorker,EditorView.contentAttributes.compute([s],e=>{let n=e.facet(s);return n&&n.name?{"data-language":n.name}:{}})]});class LanguageSupport{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function getIndentUnit(s){let e=s.facet(indentUnit);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function indentString(s,e){let n="",a=s.tabSize,o=s.facet(indentUnit)[0];if(o=="	"){for(;e>=a;)n+="	",e-=a;o=" "}for(let l=0;l<e;l++)n+=o;return n}function getIndentation(s,e){s instanceof EditorState&&(s=new IndentContext(s));for(let a of s.state.facet(indentService)){let o=a(s,e);if(o!==void 0)return o}let n=syntaxTree(s.state);return n?syntaxIndentation(s,n,e):null}class IndentContext{constructor(e,n={}){this.state=e,this.options=n,this.unit=getIndentUnit(e)}lineAt(e,n=1){let a=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:l}=this.options;return o!=null&&o>=a.from&&o<=a.to?l&&o==e?{text:"",from:e}:(n<0?o<e:o<=e)?{text:a.text.slice(o-a.from),from:o}:{text:a.text.slice(0,o-a.from),from:a.from}:a}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:a,from:o}=this.lineAt(e,n);return a.slice(e-o,Math.min(a.length,e+100-o))}column(e,n=1){let{text:a,from:o}=this.lineAt(e,n),l=this.countColumn(a,e-o),u=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return u>-1&&(l+=u-this.countColumn(a,a.search(/\S|$/))),l}countColumn(e,n=e.length){return countColumn(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:a,from:o}=this.lineAt(e,n),l=this.options.overrideIndentation;if(l){let u=l(o);if(u>-1)return u}return this.countColumn(a,a.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(s,e,n){return indentFrom(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,s)}function ignoreClosed(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function indentStrategy(s){let e=s.type.prop(indentNodeProp);if(e)return e;let n=s.firstChild,a;if(n&&(a=n.type.prop(NodeProp.closedBy))){let o=s.lastChild,l=o&&a.indexOf(o.name)>-1;return u=>delimitedStrategy(u,!0,1,void 0,l&&!ignoreClosed(u)?o.from:void 0)}return s.parent==null?topIndent:null}function indentFrom(s,e,n){for(;s;s=s.parent){let a=indentStrategy(s);if(a)return a(TreeIndentContext.create(n,e,s))}return null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(e,n,a){super(e.state,e.options),this.base=e,this.pos=n,this.node=a}static create(e,n,a){return new TreeIndentContext(e,n,a)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let n=this.node.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(isParent(n,this.node))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?indentFrom(e,this.pos,this.base):0}}function isParent(s,e){for(let n=e;n;n=n.parent)if(s==n)return!0;return!1}function bracketedAligned(s){let e=s.node,n=e.childAfter(e.from),a=e.lastChild;if(!n)return null;let o=s.options.simulateBreak,l=s.state.doc.lineAt(n.from),u=o==null||o<=l.from?l.to:Math.min(l.to,o);for(let c=n.to;;){let f=e.childAfter(c);if(!f||f==a)return null;if(!f.type.isSkipped)return f.from<u?n:null;c=f.to}}function delimitedIndent({closing:s,align:e=!0,units:n=1}){return a=>delimitedStrategy(a,e,n,s)}function delimitedStrategy(s,e,n,a,o){let l=s.textAfter,u=l.match(/^\s*/)[0].length,c=a&&l.slice(u,u+a.length)==a||o==s.pos+u,f=e?bracketedAligned(s):null;return f?c?s.column(f.from):s.column(f.to):s.baseIndent+(c?0:s.unit*n)}const flatIndent=s=>s.baseIndent;function continuedIndent({except:s,units:e=1}={}){return n=>{let a=s&&s.test(n.textAfter);return n.baseIndent+(a?0:e*n.unit)}}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(s){let e=s.firstChild,n=s.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?s.to:n.from}:null}function syntaxFolding(s,e,n){let a=syntaxTree(s);if(a.length<n)return null;let o=a.resolveInner(n,1),l=null;for(let u=o;u;u=u.parent){if(u.to<=n||u.from>n)continue;if(l&&u.from<e)break;let c=u.type.prop(foldNodeProp);if(c&&(u.to<a.length-50||a.length==s.doc.length||!isUnfinished(u))){let f=c(u,s);f&&f.from<=n&&f.from>=e&&f.to>n&&(l=f)}}return l}function isUnfinished(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function foldable(s,e,n){for(let a of s.facet(foldService)){let o=a(s,e,n);if(o)return o}return syntaxFolding(s,e,n)}function mapRange(s,e){let n=e.mapPos(s.from,1),a=e.mapPos(s.to,-1);return n>=a?void 0:{from:n,to:a}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(s){let e=[];for(let{head:n}of s.state.selection.ranges)e.some(a=>a.from<=n&&a.to>=n)||e.push(s.lineBlockAt(n));return e}const foldState=StateField.define({create(){return Decoration.none},update(s,e){s=s.map(e.changes);for(let n of e.effects)n.is(foldEffect)&&!foldExists(s,n.value.from,n.value.to)?s=s.update({add:[foldWidget.range(n.value.from,n.value.to)]}):n.is(unfoldEffect)&&(s=s.update({filter:(a,o)=>n.value.from!=a||n.value.to!=o,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:a}=e.selection.main;s.between(a,a,(o,l)=>{o<a&&l>a&&(n=!0)}),n&&(s=s.update({filterFrom:a,filterTo:a,filter:(o,l)=>l<=a||o>=a}))}return s},provide:s=>EditorView.decorations.from(s),toJSON(s,e){let n=[];return s.between(0,e.doc.length,(a,o)=>{n.push(a,o)}),n},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<s.length;){let a=s[n++],o=s[n++];if(typeof a!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(foldWidget.range(a,o))}return Decoration.set(e,!0)}});function findFold(s,e,n){var a;let o=null;return(a=s.field(foldState,!1))===null||a===void 0||a.between(e,n,(l,u)=>{(!o||o.from>l)&&(o={from:l,to:u})}),o}function foldExists(s,e,n){let a=!1;return s.between(e,e,(o,l)=>{o==e&&l==n&&(a=!0)}),a}function maybeEnable(s,e){return s.field(foldState,!1)?e:e.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=s=>{for(let e of selectedLines(s)){let n=foldable(s.state,e.from,e.to);if(n)return s.dispatch({effects:maybeEnable(s.state,[foldEffect.of(n),announceFold(s,n)])}),!0}return!1},unfoldCode=s=>{if(!s.state.field(foldState,!1))return!1;let e=[];for(let n of selectedLines(s)){let a=findFold(s.state,n.from,n.to);a&&e.push(unfoldEffect.of(a),announceFold(s,a,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function announceFold(s,e,n=!0){let a=s.state.doc.lineAt(e.from).number,o=s.state.doc.lineAt(e.to).number;return EditorView.announce.of(`${s.state.phrase(n?"Folded lines":"Unfolded lines")} ${a} ${s.state.phrase("to")} ${o}.`)}const foldAll=s=>{let{state:e}=s,n=[];for(let a=0;a<e.doc.length;){let o=s.lineBlockAt(a),l=foldable(e,o.from,o.to);l&&n.push(foldEffect.of(l)),a=(l?s.lineBlockAt(l.to):o).to+1}return n.length&&s.dispatch({effects:maybeEnable(s.state,n)}),!!n.length},unfoldAll=s=>{let e=s.state.field(foldState,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,s.state.doc.length,(a,o)=>{n.push(unfoldEffect.of({from:a,to:o}))}),s.dispatch({effects:n}),!0},defaultConfig={placeholderDOM:null,placeholderText:"…"},foldConfig=Facet.define({combine(s){return combineConfig(s,defaultConfig)}});function codeFolding(s){let e=[foldState,baseTheme$1$1];return s&&e.push(foldConfig.of(s)),e}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(s){let{state:e}=s,n=e.facet(foldConfig),a=l=>{let u=s.lineBlockAt(s.posAtDOM(l.target)),c=findFold(s.state,u.from,u.to);c&&s.dispatch({effects:unfoldEffect.of(c)}),l.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(s,a);let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",e.phrase("folded code")),o.title=e.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=a,o}}}),baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(e,n){this.specs=e;let a;function o(c){let f=StyleModule.newName();return(a||(a=Object.create(null)))["."+f]=c,f}const l=typeof n.all=="string"?n.all:n.all?o(n.all):void 0,u=n.scope;this.scope=u instanceof Language?c=>c.prop(languageDataProp)==u.data:u?c=>c==u:void 0,this.style=tagHighlighter(e.map(c=>({tag:c.tag,class:c.class||o(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=a?new StyleModule(a):null,this.themeType=n.themeType}static define(e,n){return new HighlightStyle(e,n||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(s){return s.length?[s[0]]:null}});function getHighlighters(s){let e=s.facet(highlighterFacet);return e.length?e:s.facet(fallbackHighlighter)}function syntaxHighlighting(s,e){let n=[treeHighlighter],a;return s instanceof HighlightStyle&&(s.module&&n.push(EditorView.styleModule.of(s.module)),a=s.themeType),e?.fallback?n.push(fallbackHighlighter.of(s)):a?n.push(highlighterFacet.computeN([EditorView.darkTheme],o=>o.facet(EditorView.darkTheme)==(a=="dark")?[s]:[])):n.push(highlighterFacet.of(s)),n}class TreeHighlighter{constructor(e){this.markCache=Object.create(null),this.tree=syntaxTree(e.state),this.decorations=this.buildDeco(e,getHighlighters(e.state))}update(e){let n=syntaxTree(e.state),a=getHighlighters(e.state),o=a!=getHighlighters(e.startState);n.length<e.view.viewport.to&&!o&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||o)&&(this.tree=n,this.decorations=this.buildDeco(e.view,a))}buildDeco(e,n){if(!n||!this.tree.length)return Decoration.none;let a=new RangeSetBuilder;for(let{from:o,to:l}of e.visibleRanges)highlightTree(this.tree,n,(u,c,f)=>{a.add(u,c,this.markCache[f]||(this.markCache[f]=Decoration.mark({class:f})))},o,l);return a.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:s=>s.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingHandle=new NodeProp;function matchingNodes(s,e,n){let a=s.prop(e<0?NodeProp.openedBy:NodeProp.closedBy);if(a)return a;if(s.name.length==1){let o=n.indexOf(s.name);if(o>-1&&o%2==(e<0?1:0))return[n[o+e]]}return null}function findHandle(s){let e=s.type.prop(bracketMatchingHandle);return e?e(s.node):s}function matchBrackets(s,e,n,a={}){let o=a.maxScanDistance||DefaultScanDist,l=a.brackets||DefaultBrackets,u=syntaxTree(s),c=u.resolveInner(e,n);for(let f=c;f;f=f.parent){let d=matchingNodes(f.type,n,l);if(d&&f.from<f.to){let g=findHandle(f);if(g&&(n>0?e>=g.from&&e<g.to:e>g.from&&e<=g.to))return matchMarkedBrackets(s,e,n,f,g,d,l)}}return matchPlainBrackets(s,e,n,u,c.type,o,l)}function matchMarkedBrackets(s,e,n,a,o,l,u){let c=a.parent,f={from:o.from,to:o.to},d=0,g=c?.cursor();if(g&&(n<0?g.childBefore(a.from):g.childAfter(a.to)))do if(n<0?g.to<=a.from:g.from>=a.to){if(d==0&&l.indexOf(g.type.name)>-1&&g.from<g.to){let O=findHandle(g);return{start:f,end:O?{from:O.from,to:O.to}:void 0,matched:!0}}else if(matchingNodes(g.type,n,u))d++;else if(matchingNodes(g.type,-n,u)){if(d==0){let O=findHandle(g);return{start:f,end:O&&O.from<O.to?{from:O.from,to:O.to}:void 0,matched:!1}}d--}}while(n<0?g.prevSibling():g.nextSibling());return{start:f,matched:!1}}function matchPlainBrackets(s,e,n,a,o,l,u){let c=n<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),f=u.indexOf(c);if(f<0||f%2==0!=n>0)return null;let d={from:n<0?e-1:e,to:n>0?e+1:e},g=s.doc.iterRange(e,n>0?s.doc.length:0),O=0;for(let S=0;!g.next().done&&S<=l;){let b=g.value;n<0&&(S+=b.length);let E=e+S*n;for(let k=n>0?0:b.length-1,$=n>0?b.length:-1;k!=$;k+=n){let R=u.indexOf(b[k]);if(!(R<0||a.resolveInner(E+k,1).type!=o))if(R%2==0==n>0)O++;else{if(O==1)return{start:d,end:{from:E+k,to:E+k+1},matched:R>>1==f>>1};O--}}n>0&&(S+=b.length)}return g.done?{start:d,matched:!1}:null}function countCol(s,e,n,a=0,o=0){e==null&&(e=s.search(/[^\s\u00a0]/),e==-1&&(e=s.length));let l=o;for(let u=a;u<e;u++)s.charCodeAt(u)==9?l+=n-l%n:l++;return l}class StringStream{constructor(e,n,a,o){this.string=e,this.tabSize=n,this.indentUnit=a,this.overrideIndent=o,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),a;if(typeof e=="string"?a=n==e:a=n&&(e instanceof RegExp?e.test(n):e(n)),a)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:countCol(this.string,null,this.tabSize)}match(e,n,a){if(typeof e=="string"){let o=u=>a?u.toLowerCase():u,l=this.string.substr(this.pos,e.length);return o(l)==o(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&n!==!1&&(this.pos+=o[0].length),o)}}current(){return this.string.slice(this.start,this.pos)}}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],defaultTable=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[s]=createTokenType(noTokens,e);function warnForPart(s,e){warned.indexOf(s)>-1||(warned.push(s),console.warn(e))}function createTokenType(s,e){let n=null;for(let l of e.split(".")){let u=s[l]||tags[l];u?typeof u=="function"?n?n=u(n):warnForPart(l,`Modifier ${l} used at start of tag`):n?warnForPart(l,`Tag ${l} used as modifier`):n=u:warnForPart(l,`Unknown highlighting tag ${l}`)}if(!n)return 0;let a=e.replace(/ /g,"_"),o=NodeType.define({id:typeArray.length,name:a,props:[styleTags({[a]:n})]});return typeArray.push(o),o.id}function toSet(s){let e=Object.keys(s).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(s){let e=Object.create(null),n=Object.create(null);for(let{label:o}of s){e[o[0]]=!0;for(let l=1;l<o.length;l++)n[o[l]]=!0}let a=toSet(e)+toSet(n)+"*$";return[new RegExp("^"+a),new RegExp(a)]}function completeFromList(s){let e=s.map(o=>typeof o=="string"?{label:o}:o),[n,a]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:prefixMatch(e);return o=>{let l=o.matchBefore(a);return l||o.explicit?{from:l?l.from:o.pos,options:e,validFor:n}:null}}function ifNotIn(s,e){return n=>{for(let a=syntaxTree(n.state).resolveInner(n.pos,-1);a;a=a.parent){if(s.indexOf(a.name)>-1)return null;if(a.type.isTop)break}return e(n)}}class Option{constructor(e,n,a,o){this.completion=e,this.source=n,this.match=a,this.score=o}}function cur(s){return s.selection.main.from}const pickedCompletion=Annotation.define();function insertCompletionText(s,e,n,a){let{main:o}=s.selection,l=n-o.from,u=a-o.from;return Object.assign(Object.assign({},s.changeByRange(c=>c!=o&&n!=a&&s.sliceDoc(c.from+l,c.from+u)!=s.sliceDoc(n,a)?{range:c}:{changes:{from:c.from+l,to:a==o.from?c.to:c.from+u,insert:e},range:EditorSelection.cursor(c.from+l+e.length)})),{userEvent:"input.complete"})}function applyCompletion(s,e){const n=e.completion.apply||e.completion.label;let a=e.source;typeof n=="string"?s.dispatch(Object.assign(Object.assign({},insertCompletionText(s.state,n,a.from,a.to)),{annotations:pickedCompletion.of(e.completion)})):n(s,e.completion,a.from,a.to)}const SourceCache=new WeakMap;function asSource(s){if(!Array.isArray(s))return s;let e=SourceCache.get(s);return e||SourceCache.set(s,e=completeFromList(s)),e}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let n=0;n<e.length;){let a=codePointAt(e,n),o=codePointSize(a);this.chars.push(a);let l=e.slice(n,n+o),u=l.toUpperCase();this.folded.push(codePointAt(u==l?l.toLowerCase():u,0)),n+=o}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:n,folded:a,any:o,precise:l,byWord:u}=this;if(n.length==1){let Z=codePointAt(e,0),he=codePointSize(Z),j=he==e.length?0:-100;if(Z!=n[0])if(Z==a[0])j+=-200;else return null;return[j,0,he]}let c=e.indexOf(this.pattern);if(c==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let f=n.length,d=0;if(c<0){for(let Z=0,he=Math.min(e.length,200);Z<he&&d<f;){let j=codePointAt(e,Z);(j==n[d]||j==a[d])&&(o[d++]=Z),Z+=codePointSize(j)}if(d<f)return null}let g=0,O=0,S=!1,b=0,E=-1,k=-1,$=/[a-z]/.test(e),R=!0;for(let Z=0,he=Math.min(e.length,200),j=0;Z<he&&O<f;){let K=codePointAt(e,Z);c<0&&(g<f&&K==n[g]&&(l[g++]=Z),b<f&&(K==n[b]||K==a[b]?(b==0&&(E=Z),k=Z+1,b++):b=0));let se,de=K<255?K>=48&&K<=57||K>=97&&K<=122?2:K>=65&&K<=90?1:0:(se=fromCodePoint(K))!=se.toLowerCase()?1:se!=se.toUpperCase()?2:0;(!Z||de==1&&$||j==0&&de!=0)&&(n[O]==K||a[O]==K&&(S=!0)?u[O++]=Z:u.length&&(R=!1)),j=de,Z+=codePointSize(K)}return O==f&&u[0]==0&&R?this.result(-100+(S?-200:0),u,e):b==f&&E==0?[-200-e.length+(k==e.length?0:-100),0,k]:c>-1?[-700-e.length,c,c+this.pattern.length]:b==f?[-200+-700-e.length,E,k]:O==f?this.result(-100+(S?-200:0)+-700+(R?0:-1100),u,e):n.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,n,a){let o=[e-a.length],l=1;for(let u of n){let c=u+(this.astral?codePointSize(codePointAt(a,u)):1);l>1&&o[l-1]==u?o[l-1]=c:(o[l++]=u,o[l++]=c)}return o}}const completionConfig=Facet.define({combine(s){return combineConfig(s,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>a=>joinClass(e(a),n(a)),optionClass:(e,n)=>a=>joinClass(e(a),n(a)),addToOptions:(e,n)=>e.concat(n)})}});function joinClass(s,e){return s?e?s+" "+e:s:e}function defaultPositionInfo(s,e,n,a,o){let l=s.textDirection==Direction.RTL,u=l,c=!1,f="top",d,g,O=e.left-o.left,S=o.right-e.right,b=a.right-a.left,E=a.bottom-a.top;if(u&&O<Math.min(b,S)?u=!1:!u&&S<Math.min(b,O)&&(u=!0),b<=(u?O:S))d=Math.max(o.top,Math.min(n.top,o.bottom-E))-e.top,g=Math.min(400,u?O:S);else{c=!0,g=Math.min(400,(l?e.right:o.right-e.left)-30);let k=o.bottom-e.bottom;k>=E||k>e.top?d=n.bottom-e.top:(f="bottom",d=e.bottom-n.top)}return{style:`${f}: ${d}px; max-width: ${g}px`,class:"cm-completionInfo-"+(c?l?"left-narrow":"right-narrow":u?"left":"right")}}function optionContent(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(n){let a=document.createElement("div");return a.classList.add("cm-completionIcon"),n.type&&a.classList.add(...n.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),a.setAttribute("aria-hidden","true"),a},position:20}),e.push({render(n,a,o){let l=document.createElement("span");l.className="cm-completionLabel";let{label:u}=n,c=0;for(let f=1;f<o.length;){let d=o[f++],g=o[f++];d>c&&l.appendChild(document.createTextNode(u.slice(c,d)));let O=l.appendChild(document.createElement("span"));O.appendChild(document.createTextNode(u.slice(d,g))),O.className="cm-completionMatchedText",c=g}return c<u.length&&l.appendChild(document.createTextNode(u.slice(c))),l},position:50},{render(n){if(!n.detail)return null;let a=document.createElement("span");return a.className="cm-completionDetail",a.textContent=n.detail,a},position:80}),e.sort((n,a)=>n.position-a.position).map(n=>n.render)}function rangeAroundSelected(s,e,n){if(s<=n)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let o=Math.floor(e/n);return{from:o*n,to:(o+1)*n}}let a=Math.floor((s-e)/n);return{from:s-(a+1)*n,to:s-a*n}}class CompletionTooltip{constructor(e,n){this.view=e,this.stateField=n,this.info=null,this.placeInfoReq={read:()=>this.measureInfo(),write:c=>this.placeInfo(c),key:this},this.space=null,this.currentClass="";let a=e.state.field(n),{options:o,selected:l}=a.open,u=e.state.facet(completionConfig);this.optionContent=optionContent(u),this.optionClass=u.optionClass,this.tooltipClass=u.tooltipClass,this.range=rangeAroundSelected(o.length,l,u.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",c=>{for(let f=c.target,d;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(d=/-(\d+)$/.exec(f.id))&&+d[1]<o.length){applyCompletion(e,o[+d[1]]),c.preventDefault();return}}),this.dom.addEventListener("focusout",c=>{let f=e.state.field(this.stateField,!1);f&&f.tooltip&&e.state.facet(completionConfig).closeOnBlur&&c.relatedTarget!=e.contentDOM&&e.dispatch({effects:closeCompletionEffect.of(null)})}),this.list=this.dom.appendChild(this.createListBox(o,a.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var n,a,o;let l=e.state.field(this.stateField),u=e.startState.field(this.stateField);this.updateTooltipClass(e.state),l!=u&&(this.updateSel(),((n=l.open)===null||n===void 0?void 0:n.disabled)!=((a=u.open)===null||a===void 0?void 0:a.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((o=l.open)===null||o===void 0)&&o.disabled)))}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let a of this.currentClass.split(" "))a&&this.dom.classList.remove(a);for(let a of n.split(" "))a&&this.dom.classList.add(a);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=rangeAroundSelected(n.options.length,n.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(n.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(n.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:a}=n.options[n.selected],{info:o}=a;if(!o)return;let l=typeof o=="string"?document.createTextNode(o):o(a);if(!l)return;"then"in l?l.then(u=>{u&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(u)}).catch(u=>logException(this.view.state,u,"completion info")):this.addInfoPane(l)}}addInfoPane(e){let n=this.info=document.createElement("div");n.className="cm-tooltip cm-completionInfo",n.appendChild(e),this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let a=this.list.firstChild,o=this.range.from;a;a=a.nextSibling,o++)a.nodeName!="LI"||!a.id?o--:o==e?a.hasAttribute("aria-selected")||(a.setAttribute("aria-selected","true"),n=a):a.hasAttribute("aria-selected")&&a.removeAttribute("aria-selected");return n&&scrollIntoView(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),a=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),l=this.space;if(!l){let u=this.dom.ownerDocument.defaultView||window;l={left:0,top:0,right:u.innerWidth,bottom:u.innerHeight}}return o.top>Math.min(l.bottom,n.bottom)-10||o.bottom<Math.max(l.top,n.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,n,o,a,l)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,a){const o=document.createElement("ul");o.id=n,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let l=null;for(let u=a.from;u<a.to;u++){let{completion:c,match:f}=e[u],{section:d}=c;if(d){let S=typeof d=="string"?d:d.name;if(S!=l&&(u>a.from||a.from==0))if(l=S,typeof d!="string"&&d.header)o.appendChild(d.header(d));else{let b=o.appendChild(document.createElement("completion-section"));b.textContent=S}}const g=o.appendChild(document.createElement("li"));g.id=n+"-"+u,g.setAttribute("role","option");let O=this.optionClass(c);O&&(g.className=O);for(let S of this.optionContent){let b=S(c,this.view.state,f);b&&g.appendChild(b)}}return a.from&&o.classList.add("cm-completionListIncompleteTop"),a.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}}function completionTooltip(s){return e=>new CompletionTooltip(e,s)}function scrollIntoView(s,e){let n=s.getBoundingClientRect(),a=e.getBoundingClientRect();a.top<n.top?s.scrollTop-=n.top-a.top:a.bottom>n.bottom&&(s.scrollTop+=a.bottom-n.bottom)}function score(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function sortOptions(s,e){let n=[],a=null,o=f=>{n.push(f);let{section:d}=f.completion;if(d){a||(a=[]);let g=typeof d=="string"?d:d.name;a.some(O=>O.name==g)||a.push(typeof d=="string"?{name:g}:d)}};for(let f of s)if(f.hasResult())if(f.result.filter===!1){let d=f.result.getMatch;for(let g of f.result.options){let O=[1e9-n.length];if(d)for(let S of d(g))O.push(S);o(new Option(g,f,O,O[0]))}}else{let d=new FuzzyMatcher(e.sliceDoc(f.from,f.to)),g;for(let O of f.result.options)(g=d.match(O.label))&&o(new Option(O,f,g,g[0]+(O.boost||0)))}if(a){let f=Object.create(null),d=0,g=(O,S)=>{var b,E;return((b=O.rank)!==null&&b!==void 0?b:1e9)-((E=S.rank)!==null&&E!==void 0?E:1e9)||(O.name<S.name?-1:1)};for(let O of a.sort(g))d-=1e5,f[O.name]=d;for(let O of n){let{section:S}=O.completion;S&&(O.score+=f[typeof S=="string"?S:S.name])}}let l=[],u=null,c=e.facet(completionConfig).compareCompletions;for(let f of n.sort((d,g)=>g.score-d.score||c(d.completion,g.completion)))!u||u.label!=f.completion.label||u.detail!=f.completion.detail||u.type!=null&&f.completion.type!=null&&u.type!=f.completion.type||u.apply!=f.completion.apply?l.push(f):score(f.completion)>score(u)&&(l[l.length-1]=f),u=f.completion;return l}class CompletionDialog{constructor(e,n,a,o,l,u){this.options=e,this.attrs=n,this.tooltip=a,this.timestamp=o,this.selected=l,this.disabled=u}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,a,o,l){let u=sortOptions(e,n);if(!u.length)return o&&e.some(f=>f.state==1)?new CompletionDialog(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let c=n.facet(completionConfig).selectOnOpen?0:-1;if(o&&o.selected!=c&&o.selected!=-1){let f=o.options[o.selected].completion;for(let d=0;d<u.length;d++)if(u[d].completion==f){c=d;break}}return new CompletionDialog(u,makeAttrs(a,c),{pos:e.reduce((f,d)=>d.hasResult()?Math.min(f,d.from):f,1e8),create:completionTooltip(completionState),above:l.aboveCursor},o?o.timestamp:Date.now(),c,!1)}map(e){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class CompletionState{constructor(e,n,a){this.active=e,this.id=n,this.open=a}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,a=n.facet(completionConfig),l=(a.override||n.languageDataAt("autocomplete",cur(n)).map(asSource)).map(c=>(this.active.find(d=>d.source==c)||new ActiveSource(c,this.active.some(d=>d.state!=0)?1:0)).update(e,a));l.length==this.active.length&&l.every((c,f)=>c==this.active[f])&&(l=this.active);let u=this.open;u&&e.docChanged&&(u=u.map(e.changes)),e.selection||l.some(c=>c.hasResult()&&e.changes.touchesRange(c.from,c.to))||!sameResults(l,this.active)?u=CompletionDialog.build(l,n,this.id,u,a):u&&u.disabled&&!l.some(c=>c.state==1)&&(u=null),!u&&l.every(c=>c.state!=1)&&l.some(c=>c.hasResult())&&(l=l.map(c=>c.hasResult()?new ActiveSource(c.source,0):c));for(let c of e.effects)c.is(setSelectedEffect)&&(u=u&&u.setSelected(c.value,this.id));return l==this.active&&u==this.open?this:new CompletionState(l,this.id,u)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:baseAttrs}}function sameResults(s,e){if(s==e)return!0;for(let n=0,a=0;;){for(;n<s.length&&!s[n].hasResult;)n++;for(;a<e.length&&!e[a].hasResult;)a++;let o=n==s.length,l=a==e.length;if(o||l)return o==l;if(s[n++].result!=e[a++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"};function makeAttrs(s,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(n["aria-activedescendant"]=s+"-"+e),n}const none$1=[];function getUserEvent(s){return s.isUserEvent("input.type")?"input":s.isUserEvent("delete.backward")?"delete":null}class ActiveSource{constructor(e,n,a=-1){this.source=e,this.state=n,this.explicitPos=a}hasResult(){return!1}update(e,n){let a=getUserEvent(e),o=this;a?o=o.handleUserEvent(e,a,n):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new ActiveSource(o.source,0));for(let l of e.effects)if(l.is(startCompletionEffect))o=new ActiveSource(o.source,1,l.value?cur(e.state):-1);else if(l.is(closeCompletionEffect))o=new ActiveSource(o.source,0);else if(l.is(setActiveEffect))for(let u of l.value)u.source==o.source&&(o=u);return o}handleUserEvent(e,n,a){return n=="delete"||!a.activateOnTyping?this.map(e.changes):new ActiveSource(this.source,1)}handleChange(e){return e.changes.touchesRange(cur(e.startState))?new ActiveSource(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,e.mapPos(this.explicitPos))}}const setActiveEffect=StateEffect.define({map(s,e){return s.map(n=>n.map(e))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(s,e){return s.update(e)},provide:s=>[showTooltip.from(s,e=>e.tooltip),EditorView.contentAttributes.from(s,e=>e.attrs)]});function moveCompletionSelection(s,e="option"){return n=>{let a=n.state.field(completionState,!1);if(!a||!a.open||a.open.disabled||Date.now()-a.open.timestamp<n.state.facet(completionConfig).interactionDelay)return!1;let o=1,l;e=="page"&&(l=getTooltip(n,a.open.tooltip))&&(o=Math.max(2,Math.floor(l.dom.offsetHeight/l.dom.querySelector("li").offsetHeight)-1));let{length:u}=a.open.options,c=a.open.selected>-1?a.open.selected+o*(s?1:-1):s?0:u-1;return c<0?c=e=="page"?0:u-1:c>=u&&(c=e=="page"?u-1:0),n.dispatch({effects:setSelectedEffect.of(c)}),!0}}const acceptCompletion=s=>{let e=s.state.field(completionState,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<s.state.facet(completionConfig).interactionDelay?!1:(e.open.disabled||applyCompletion(s,e.open.options[e.open.selected]),!0)},startCompletion=s=>s.state.field(completionState,!1)?(s.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=s=>{let e=s.state.field(completionState,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(s.dispatch({effects:closeCompletionEffect.of(null)}),!0)},baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(e,n,a,o){this.field=e,this.line=n,this.from=a,this.to=o}}class FieldRange{constructor(e,n,a){this.field=e,this.from=n,this.to=a}map(e){let n=e.mapPos(this.from,-1,MapMode.TrackDel),a=e.mapPos(this.to,1,MapMode.TrackDel);return n==null||a==null?null:new FieldRange(this.field,n,a)}}class Snippet{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let a=[],o=[n],l=e.doc.lineAt(n),u=/^\s*/.exec(l.text)[0];for(let f of this.lines){if(a.length){let d=u,g=/^\t*/.exec(f)[0].length;for(let O=0;O<g;O++)d+=e.facet(indentUnit);o.push(n+d.length-g),f=d+f.slice(g)}a.push(f),n+=f.length+1}let c=this.fieldPositions.map(f=>new FieldRange(f.field,o[f.line]+f.from,o[f.line]+f.to));return{text:a,ranges:c}}static parse(e){let n=[],a=[],o=[],l;for(let u of e.split(/\r\n?|\n/)){for(;l=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(u);){let c=l[1]?+l[1]:null,f=l[2]||l[3]||"",d=-1;for(let g=0;g<n.length;g++)(c!=null?n[g].seq==c:f&&n[g].name==f)&&(d=g);if(d<0){let g=0;for(;g<n.length&&(c==null||n[g].seq!=null&&n[g].seq<c);)g++;n.splice(g,0,{seq:c,name:f}),d=g;for(let O of o)O.field>=d&&O.field++}o.push(new FieldPos(d,a.length,l.index,l.index+f.length)),u=u.slice(0,l.index)+f+u.slice(l.index+l[0].length)}for(let c;c=/\\([{}])/.exec(u);){u=u.slice(0,c.index)+c[1]+u.slice(c.index+c[0].length);for(let f of o)f.line==a.length&&f.from>c.index&&(f.from--,f.to--)}a.push(u)}return new Snippet(a,o)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let s=document.createElement("span");return s.className="cm-snippetFieldPosition",s}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(e,n){this.ranges=e,this.active=n,this.deco=Decoration.set(e.map(a=>(a.from==a.to?fieldMarker:fieldRange).range(a.from,a.to)))}map(e){let n=[];for(let a of this.ranges){let o=a.map(e);if(!o)return null;n.push(o)}return new ActiveSnippet(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(a=>a.field==this.active&&a.from<=n.from&&a.to>=n.to))}}const setActive=StateEffect.define({map(s,e){return s&&s.map(e)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(s,e){for(let n of e.effects){if(n.is(setActive))return n.value;if(n.is(moveToField)&&s)return new ActiveSnippet(s.ranges,n.value)}return s&&e.docChanged&&(s=s.map(e.changes)),s&&e.selection&&!s.selectionInsideField(e.selection)&&(s=null),s},provide:s=>EditorView.decorations.from(s,e=>e?e.deco:Decoration.none)});function fieldSelection(s,e){return EditorSelection.create(s.filter(n=>n.field==e).map(n=>EditorSelection.range(n.from,n.to)))}function snippet(s){let e=Snippet.parse(s);return(n,a,o,l)=>{let{text:u,ranges:c}=e.instantiate(n.state,o),f={changes:{from:o,to:l,insert:Text.of(u)},scrollIntoView:!0,annotations:a?pickedCompletion.of(a):void 0};if(c.length&&(f.selection=fieldSelection(c,0)),c.length>1){let d=new ActiveSnippet(c,0),g=f.effects=[setActive.of(d)];n.state.field(snippetState,!1)===void 0&&g.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}n.dispatch(n.state.update(f))}}function moveField(s){return({state:e,dispatch:n})=>{let a=e.field(snippetState,!1);if(!a||s<0&&a.active==0)return!1;let o=a.active+s,l=s>0&&!a.ranges.some(u=>u.field==o+s);return n(e.update({selection:fieldSelection(a.ranges,o),effects:setActive.of(l?null:new ActiveSnippet(a.ranges,o))})),!0}}const clearSnippet=({state:s,dispatch:e})=>s.field(snippetState,!1)?(e(s.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(s){return s.length?s[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],s=>s.facet(snippetKeymap)));function snippetCompletion(s,e){return Object.assign(Object.assign({},e),{apply:snippet(s)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(s,e){let n=e.state.field(snippetState,!1),a;if(!n||(a=e.posAtCoords({x:s.clientX,y:s.clientY}))==null)return!1;let o=n.ranges.find(l=>l.from<=a&&l.to>=a);return!o||o.field==n.active?!1:(e.dispatch({selection:fieldSelection(n.ranges,o.field),effects:setActive.of(n.ranges.some(l=>l.field>o.field)?new ActiveSnippet(n.ranges,o.field):null)}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(s,e){let n=e.mapPos(s,-1,MapMode.TrackAfter);return n??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(s,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,a=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(a,-1)&&(s=RangeSet.empty)}s=s.map(e.changes);for(let n of e.effects)n.is(closeBracketEffect)&&(s=s.update({add:[closedBracket.range(n.value,n.value+1)]}));return s}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(s){for(let e=0;e<definedClosing.length;e+=2)if(definedClosing.charCodeAt(e)==s)return definedClosing.charAt(e+1);return fromCodePoint(s<128?s:s+1)}function config(s,e){return s.languageDataAt("closeBrackets",e)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((s,e,n,a)=>{if((android$1?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let o=s.state.selection.main;if(a.length>2||a.length==2&&codePointSize(codePointAt(a,0))==1||e!=o.from||n!=o.to)return!1;let l=insertBracket(s.state,a);return l?(s.dispatch(l),!0):!1}),deleteBracketPair=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let a=config(s,s.selection.main.head).brackets||defaults.brackets,o=null,l=s.changeByRange(u=>{if(u.empty){let c=prevChar(s.doc,u.head);for(let f of a)if(f==c&&nextChar(s.doc,u.head)==closing(codePointAt(f,0)))return{changes:{from:u.head-f.length,to:u.head+f.length},range:EditorSelection.cursor(u.head-f.length)}}return{range:o=u}});return o||e(s.update(l,{scrollIntoView:!0,userEvent:"delete.backward"})),!o};function insertBracket(s,e){let n=config(s,s.selection.main.head),a=n.brackets||defaults.brackets;for(let o of a){let l=closing(codePointAt(o,0));if(e==o)return l==o?handleSame(s,o,a.indexOf(o+o+o)>-1,n):handleOpen(s,o,l,n.before||defaults.before);if(e==l&&closedBracketAt(s,s.selection.main.from))return handleClose(s,o,l)}return null}function closedBracketAt(s,e){let n=!1;return s.field(bracketState).between(0,s.doc.length,a=>{a==e&&(n=!0)}),n}function nextChar(s,e){let n=s.sliceString(e,e+2);return n.slice(0,codePointSize(codePointAt(n,0)))}function prevChar(s,e){let n=s.sliceString(e-2,e);return codePointSize(codePointAt(n,0))==n.length?n:n.slice(1)}function handleOpen(s,e,n,a){let o=null,l=s.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:n,from:u.to}],effects:closeBracketEffect.of(u.to+e.length),range:EditorSelection.range(u.anchor+e.length,u.head+e.length)};let c=nextChar(s.doc,u.head);return!c||/\s/.test(c)||a.indexOf(c)>-1?{changes:{insert:e+n,from:u.head},effects:closeBracketEffect.of(u.head+e.length),range:EditorSelection.cursor(u.head+e.length)}:{range:o=u}});return o?null:s.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(s,e,n){let a=null,o=s.changeByRange(l=>l.empty&&nextChar(s.doc,l.head)==n?{changes:{from:l.head,to:l.head+n.length,insert:n},range:EditorSelection.cursor(l.head+n.length)}:a={range:l});return a?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(s,e,n,a){let o=a.stringPrefixes||defaults.stringPrefixes,l=null,u=s.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:closeBracketEffect.of(c.to+e.length),range:EditorSelection.range(c.anchor+e.length,c.head+e.length)};let f=c.head,d=nextChar(s.doc,f),g;if(d==e){if(nodeStart(s,f))return{changes:{insert:e+e,from:f},effects:closeBracketEffect.of(f+e.length),range:EditorSelection.cursor(f+e.length)};if(closedBracketAt(s,f)){let S=n&&s.sliceDoc(f,f+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:f,to:f+S.length,insert:S},range:EditorSelection.cursor(f+S.length)}}}else{if(n&&s.sliceDoc(f-2*e.length,f)==e+e&&(g=canStartStringAt(s,f-2*e.length,o))>-1&&nodeStart(s,g))return{changes:{insert:e+e+e+e,from:f},effects:closeBracketEffect.of(f+e.length),range:EditorSelection.cursor(f+e.length)};if(s.charCategorizer(f)(d)!=CharCategory.Word&&canStartStringAt(s,f,o)>-1&&!probablyInString(s,f,e,o))return{changes:{insert:e+e,from:f},effects:closeBracketEffect.of(f+e.length),range:EditorSelection.cursor(f+e.length)}}return{range:l=c}});return l?null:s.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(s,e){let n=syntaxTree(s).resolveInner(e+1);return n.parent&&n.from==e}function probablyInString(s,e,n,a){let o=syntaxTree(s).resolveInner(e,-1),l=a.reduce((u,c)=>Math.max(u,c.length),0);for(let u=0;u<5;u++){let c=s.sliceDoc(o.from,Math.min(o.to,o.from+n.length+l)),f=c.indexOf(n);if(!f||f>-1&&a.indexOf(c.slice(0,f))>-1){let g=o.firstChild;for(;g&&g.from==o.from&&g.to-g.from>n.length+f;){if(s.sliceDoc(g.to-n.length,g.to)==n)return!1;g=g.firstChild}return!0}let d=o.to==e&&o.parent;if(!d)break;o=d}return!1}function canStartStringAt(s,e,n){let a=s.charCategorizer(e);if(a(s.sliceDoc(e-1,e))!=CharCategory.Word)return e;for(let o of n){let l=e-o.length;if(s.sliceDoc(l,e)==o&&a(s.sliceDoc(l-1,l))!=CharCategory.Word)return l}return-1}const toggleComment=s=>{let{state:e}=s,n=e.doc.lineAt(e.selection.main.from),a=getConfig(s.state,n.from);return a.line?toggleLineComment(s):a.block?toggleBlockCommentByLine(s):!1};function command(s,e){return({state:n,dispatch:a})=>{if(n.readOnly)return!1;let o=s(e,n);return o?(a(n.update(o)),!0):!1}}const toggleLineComment=command(changeLineComment,0),lineComment=command(changeLineComment,1),lineUncomment=command(changeLineComment,2),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((s,e)=>changeBlockComment(s,e,selectedLineRanges(e)),0);function getConfig(s,e){let n=s.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const SearchMargin=50;function findBlockComment(s,{open:e,close:n},a,o){let l=s.sliceDoc(a-SearchMargin,a),u=s.sliceDoc(o,o+SearchMargin),c=/\s*$/.exec(l)[0].length,f=/^\s*/.exec(u)[0].length,d=l.length-c;if(l.slice(d-e.length,d)==e&&u.slice(f,f+n.length)==n)return{open:{pos:a-c,margin:c&&1},close:{pos:o+f,margin:f&&1}};let g,O;o-a<=2*SearchMargin?g=O=s.sliceDoc(a,o):(g=s.sliceDoc(a,a+SearchMargin),O=s.sliceDoc(o-SearchMargin,o));let S=/^\s*/.exec(g)[0].length,b=/\s*$/.exec(O)[0].length,E=O.length-b-n.length;return g.slice(S,S+e.length)==e&&O.slice(E,E+n.length)==n?{open:{pos:a+S+e.length,margin:/\s/.test(g.charAt(S+e.length))?1:0},close:{pos:o-b-n.length,margin:/\s/.test(O.charAt(E-1))?1:0}}:null}function selectedLineRanges(s){let e=[];for(let n of s.selection.ranges){let a=s.doc.lineAt(n.from),o=n.to<=a.to?a:s.doc.lineAt(n.to),l=e.length-1;l>=0&&e[l].to>a.from?e[l].to=o.to:e.push({from:a.from+/^\s*/.exec(a.text)[0].length,to:o.to})}return e}function changeBlockComment(s,e,n=e.selection.ranges){let a=n.map(l=>getConfig(e,l.from).block);if(!a.every(l=>l))return null;let o=n.map((l,u)=>findBlockComment(e,a[u],l.from,l.to));if(s!=2&&!o.every(l=>l))return{changes:e.changes(n.map((l,u)=>o[u]?[]:[{from:l.from,insert:a[u].open+" "},{from:l.to,insert:" "+a[u].close}]))};if(s!=1&&o.some(l=>l)){let l=[];for(let u=0,c;u<o.length;u++)if(c=o[u]){let f=a[u],{open:d,close:g}=c;l.push({from:d.pos-f.open.length,to:d.pos+d.margin},{from:g.pos-g.margin,to:g.pos+f.close.length})}return{changes:l}}return null}function changeLineComment(s,e,n=e.selection.ranges){let a=[],o=-1;for(let{from:l,to:u}of n){let c=a.length,f=1e9,d=getConfig(e,l).line;if(d){for(let g=l;g<=u;){let O=e.doc.lineAt(g);if(O.from>o&&(l==u||u>O.from)){o=O.from;let S=/^\s*/.exec(O.text)[0].length,b=S==O.length,E=O.text.slice(S,S+d.length)==d?S:-1;S<O.text.length&&S<f&&(f=S),a.push({line:O,comment:E,token:d,indent:S,empty:b,single:!1})}g=O.to+1}if(f<1e9)for(let g=c;g<a.length;g++)a[g].indent<a[g].line.text.length&&(a[g].indent=f);a.length==c+1&&(a[c].single=!0)}}if(s!=2&&a.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:f,indent:d,empty:g,single:O}of a)(O||!g)&&l.push({from:c.from+d,insert:f+" "});let u=e.changes(l);return{changes:u,selection:e.selection.map(u,1)}}else if(s!=1&&a.some(l=>l.comment>=0)){let l=[];for(let{line:u,comment:c,token:f}of a)if(c>=0){let d=u.from+c,g=d+f.length;u.text[g-u.from]==" "&&g++,l.push({from:d,to:g})}return{changes:l}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(s){return combineConfig(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(a,o)=>e(a,o)||n(a,o)})}});function changeEnd(s){let e=0;return s.iterChangedRanges((n,a)=>e=a),e}const historyField_=StateField.define({create(){return HistoryState.empty},update(s,e){let n=e.state.facet(historyConfig),a=e.annotation(fromHistory);if(a){let f=e.docChanged?EditorSelection.single(changeEnd(e.changes)):void 0,d=HistEvent.fromTransaction(e,f),g=a.side,O=g==0?s.undone:s.done;return d?O=updateBranch(O,O.length,n.minDepth,d):O=addSelection(O,e.startState.selection),new HistoryState(g==0?a.rest:O,g==0?O:a.rest)}let o=e.annotation(isolateHistory);if((o=="full"||o=="before")&&(s=s.isolate()),e.annotation(Transaction.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let l=HistEvent.fromTransaction(e),u=e.annotation(Transaction.time),c=e.annotation(Transaction.userEvent);return l?s=s.addChanges(l,u,c,n,e):e.selection&&(s=s.addSelection(e.startState.selection,u,c,n.newGroupDelay)),(o=="full"||o=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new HistoryState(s.done.map(HistEvent.fromJSON),s.undone.map(HistEvent.fromJSON))}});function history(s={}){return[historyField_,historyConfig.of(s),EditorView.domEventHandlers({beforeinput(e,n){let a=e.inputType=="historyUndo"?undo:e.inputType=="historyRedo"?redo:null;return a?(e.preventDefault(),a(n)):!1}})]}function cmd(s,e){return function({state:n,dispatch:a}){if(!e&&n.readOnly)return!1;let o=n.field(historyField_,!1);if(!o)return!1;let l=o.pop(s,n,e);return l?(a(l),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(e,n,a,o,l){this.changes=e,this.effects=n,this.mapped=a,this.startSelection=o,this.selectionsAfter=l}setSelAfter(e){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,a;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(a=this.startSelection)===null||a===void 0?void 0:a.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new HistEvent(e.changes&&ChangeSet.fromJSON(e.changes),[],e.mapped&&ChangeDesc.fromJSON(e.mapped),e.startSelection&&EditorSelection.fromJSON(e.startSelection),e.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(e,n){let a=none;for(let o of e.startState.facet(invertedEffects)){let l=o(e);l.length&&(a=a.concat(l))}return!a.length&&e.changes.empty?null:new HistEvent(e.changes.invert(e.startState.doc),a,void 0,n||e.startState.selection,none)}static selection(e){return new HistEvent(void 0,none,void 0,void 0,e)}}function updateBranch(s,e,n,a){let o=e+1>n+20?e-n-1:0,l=s.slice(o,e);return l.push(a),l}function isAdjacent(s,e){let n=[],a=!1;return s.iterChangedRanges((o,l)=>n.push(o,l)),e.iterChangedRanges((o,l,u,c)=>{for(let f=0;f<n.length;){let d=n[f++],g=n[f++];c>=d&&u<=g&&(a=!0)}}),a}function eqSelectionShape(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((n,a)=>n.empty!=e.ranges[a].empty).length===0}function conc(s,e){return s.length?e.length?s.concat(e):s:e}const none=[],MaxSelectionsPerEvent=200;function addSelection(s,e){if(s.length){let n=s[s.length-1],a=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-MaxSelectionsPerEvent));return a.length&&a[a.length-1].eq(e)?s:(a.push(e),updateBranch(s,s.length-1,1e9,n.setSelAfter(a)))}else return[HistEvent.selection([e])]}function popSelection(s){let e=s[s.length-1],n=s.slice();return n[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function addMappingToBranch(s,e){if(!s.length)return s;let n=s.length,a=none;for(;n;){let o=mapEvent(s[n-1],e,a);if(o.changes&&!o.changes.empty||o.effects.length){let l=s.slice(0,n);return l[n-1]=o,l}else e=o.mapped,n--,a=o.selectionsAfter}return a.length?[HistEvent.selection(a)]:none}function mapEvent(s,e,n){let a=conc(s.selectionsAfter.length?s.selectionsAfter.map(c=>c.map(e)):none,n);if(!s.changes)return HistEvent.selection(a);let o=s.changes.map(e),l=e.mapDesc(s.changes,!0),u=s.mapped?s.mapped.composeDesc(l):l;return new HistEvent(o,StateEffect.mapEffects(s.effects,e),u,s.startSelection.map(l),a)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(e,n,a=0,o=void 0){this.done=e,this.undone=n,this.prevTime=a,this.prevUserEvent=o}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(e,n,a,o,l){let u=this.done,c=u[u.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!a||joinableUserEvent.test(a))&&(!c.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(l,isAdjacent(c.changes,e.changes))||a=="input.type.compose")?u=updateBranch(u,u.length-1,o.minDepth,new HistEvent(e.changes.compose(c.changes),conc(e.effects,c.effects),c.mapped,c.startSelection,none)):u=updateBranch(u,u.length,o.minDepth,e),new HistoryState(u,none,n,a)}addSelection(e,n,a,o){let l=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return l.length>0&&n-this.prevTime<o&&a==this.prevUserEvent&&a&&/^select($|\.)/.test(a)&&eqSelectionShape(l[l.length-1],e)?this:new HistoryState(addSelection(this.done,e),this.undone,n,a)}addMapping(e){return new HistoryState(addMappingToBranch(this.done,e),addMappingToBranch(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,a){let o=e==0?this.done:this.undone;if(o.length==0)return null;let l=o[o.length-1];if(a&&l.selectionsAfter.length)return n.update({selection:l.selectionsAfter[l.selectionsAfter.length-1],annotations:fromHistory.of({side:e,rest:popSelection(o)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(l.changes){let u=o.length==1?none:o.slice(0,o.length-1);return l.mapped&&(u=addMappingToBranch(u,l.mapped)),n.update({changes:l.changes,selection:l.startSelection,effects:l.effects,annotations:fromHistory.of({side:e,rest:u}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(s,e){return EditorSelection.create(s.ranges.map(e),s.mainIndex)}function setSel(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:s,dispatch:e},n){let a=updateSel(s.selection,n);return a.eq(s.selection)?!1:(e(setSel(s,a)),!0)}function rangeEnd(s,e){return EditorSelection.cursor(e?s.to:s.from)}function cursorByChar(s,e){return moveSel(s,n=>n.empty?s.moveByChar(n,e):rangeEnd(n,e))}function ltrAtCursor(s){return s.textDirectionAt(s.state.selection.main.head)==Direction.LTR}const cursorCharLeft=s=>cursorByChar(s,!ltrAtCursor(s)),cursorCharRight=s=>cursorByChar(s,ltrAtCursor(s)),cursorCharBackward=s=>cursorByChar(s,!1);function cursorByGroup(s,e){return moveSel(s,n=>n.empty?s.moveByGroup(n,e):rangeEnd(n,e))}const cursorGroupLeft=s=>cursorByGroup(s,!ltrAtCursor(s)),cursorGroupRight=s=>cursorByGroup(s,ltrAtCursor(s));function interestingNode(s,e,n){if(e.type.prop(n))return!0;let a=e.to-e.from;return a&&(a>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function moveBySyntax(s,e,n){let a=syntaxTree(s).resolveInner(e.head),o=n?NodeProp.closedBy:NodeProp.openedBy;for(let f=e.head;;){let d=n?a.childAfter(f):a.childBefore(f);if(!d)break;interestingNode(s,d,o)?a=d:f=n?d.to:d.from}let l=a.type.prop(o),u,c;return l&&(u=n?matchBrackets(s,a.from,1):matchBrackets(s,a.to,-1))&&u.matched?c=n?u.end.to:u.end.from:c=n?a.to:a.from,EditorSelection.cursor(c,n?-1:1)}const cursorSyntaxLeft=s=>moveSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),cursorSyntaxRight=s=>moveSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function cursorByLine(s,e){return moveSel(s,n=>{if(!n.empty)return rangeEnd(n,e);let a=s.moveVertically(n,e);return a.head!=n.head?a:s.moveToLineBoundary(n,e)})}const cursorLineUp=s=>cursorByLine(s,!1),cursorLineDown=s=>cursorByLine(s,!0);function pageInfo(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,n=0,a=0,o;if(e){for(let l of s.state.facet(EditorView.scrollMargins)){let u=l(s);u?.top&&(n=Math.max(u?.top,n)),u?.bottom&&(a=Math.max(u?.bottom,a))}o=s.scrollDOM.clientHeight-n-a}else o=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:a,selfScroll:e,height:Math.max(s.defaultLineHeight,o-5)}}function cursorByPage(s,e){let n=pageInfo(s),{state:a}=s,o=updateSel(a.selection,u=>u.empty?s.moveVertically(u,e,n.height):rangeEnd(u,e));if(o.eq(a.selection))return!1;let l;if(n.selfScroll){let u=s.coordsAtPos(a.selection.main.head),c=s.scrollDOM.getBoundingClientRect(),f=c.top+n.marginTop,d=c.bottom-n.marginBottom;u&&u.top>f&&u.bottom<d&&(l=EditorView.scrollIntoView(o.main.head,{y:"start",yMargin:u.top-f}))}return s.dispatch(setSel(a,o),{effects:l}),!0}const cursorPageUp=s=>cursorByPage(s,!1),cursorPageDown=s=>cursorByPage(s,!0);function moveByLineBoundary(s,e,n){let a=s.lineBlockAt(e.head),o=s.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?a.to:a.from)&&(o=s.moveToLineBoundary(e,n,!1)),!n&&o.head==a.from&&a.length){let l=/^\s*/.exec(s.state.sliceDoc(a.from,Math.min(a.from+100,a.to)))[0].length;l&&e.head!=a.from+l&&(o=EditorSelection.cursor(a.from+l))}return o}const cursorLineBoundaryForward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!0)),cursorLineBoundaryBackward=s=>moveSel(s,e=>moveByLineBoundary(s,e,!1)),cursorLineBoundaryLeft=s=>moveSel(s,e=>moveByLineBoundary(s,e,!ltrAtCursor(s))),cursorLineBoundaryRight=s=>moveSel(s,e=>moveByLineBoundary(s,e,ltrAtCursor(s))),cursorLineStart=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from,1)),cursorLineEnd=s=>moveSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to,-1));function toMatchingBracket(s,e,n){let a=!1,o=updateSel(s.selection,l=>{let u=matchBrackets(s,l.head,-1)||matchBrackets(s,l.head,1)||l.head>0&&matchBrackets(s,l.head-1,1)||l.head<s.doc.length&&matchBrackets(s,l.head+1,-1);if(!u||!u.end)return l;a=!0;let c=u.start.from==l.head?u.end.to:u.end.from;return n?EditorSelection.range(l.anchor,c):EditorSelection.cursor(c)});return a?(e(setSel(s,o)),!0):!1}const cursorMatchingBracket=({state:s,dispatch:e})=>toMatchingBracket(s,e,!1);function extendSel(s,e){let n=updateSel(s.state.selection,a=>{let o=e(a);return EditorSelection.range(a.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(s.state.selection)?!1:(s.dispatch(setSel(s.state,n)),!0)}function selectByChar(s,e){return extendSel(s,n=>s.moveByChar(n,e))}const selectCharLeft=s=>selectByChar(s,!ltrAtCursor(s)),selectCharRight=s=>selectByChar(s,ltrAtCursor(s));function selectByGroup(s,e){return extendSel(s,n=>s.moveByGroup(n,e))}const selectGroupLeft=s=>selectByGroup(s,!ltrAtCursor(s)),selectGroupRight=s=>selectByGroup(s,ltrAtCursor(s)),selectSyntaxLeft=s=>extendSel(s,e=>moveBySyntax(s.state,e,!ltrAtCursor(s))),selectSyntaxRight=s=>extendSel(s,e=>moveBySyntax(s.state,e,ltrAtCursor(s)));function selectByLine(s,e){return extendSel(s,n=>s.moveVertically(n,e))}const selectLineUp=s=>selectByLine(s,!1),selectLineDown=s=>selectByLine(s,!0);function selectByPage(s,e){return extendSel(s,n=>s.moveVertically(n,e,pageInfo(s).height))}const selectPageUp=s=>selectByPage(s,!1),selectPageDown=s=>selectByPage(s,!0),selectLineBoundaryForward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!0)),selectLineBoundaryBackward=s=>extendSel(s,e=>moveByLineBoundary(s,e,!1)),selectLineBoundaryLeft=s=>extendSel(s,e=>moveByLineBoundary(s,e,!ltrAtCursor(s))),selectLineBoundaryRight=s=>extendSel(s,e=>moveByLineBoundary(s,e,ltrAtCursor(s))),selectLineStart=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).from)),selectLineEnd=s=>extendSel(s,e=>EditorSelection.cursor(s.lineBlockAt(e.head).to)),cursorDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:0})),!0),cursorDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.doc.length})),!0),selectDocStart=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:0})),!0),selectDocEnd=({state:s,dispatch:e})=>(e(setSel(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),selectAll=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),selectLine=({state:s,dispatch:e})=>{let n=selectedLineBlocks(s).map(({from:a,to:o})=>EditorSelection.range(a,Math.min(o+1,s.doc.length)));return e(s.update({selection:EditorSelection.create(n),userEvent:"select"})),!0},selectParentSyntax=({state:s,dispatch:e})=>{let n=updateSel(s.selection,a=>{var o;let l=syntaxTree(s).resolveInner(a.head,1);for(;!(l.from<a.from&&l.to>=a.to||l.to>a.to&&l.from<=a.from||!(!((o=l.parent)===null||o===void 0)&&o.parent));)l=l.parent;return EditorSelection.range(l.to,l.from)});return e(setSel(s,n)),!0},simplifySelection=({state:s,dispatch:e})=>{let n=s.selection,a=null;return n.ranges.length>1?a=EditorSelection.create([n.main]):n.main.empty||(a=EditorSelection.create([EditorSelection.cursor(n.main.head)])),a?(e(setSel(s,a)),!0):!1};function deleteBy(s,e){if(s.state.readOnly)return!1;let n="delete.selection",{state:a}=s,o=a.changeByRange(l=>{let{from:u,to:c}=l;if(u==c){let f=e(u);f<u?(n="delete.backward",f=skipAtomic(s,f,!1)):f>u&&(n="delete.forward",f=skipAtomic(s,f,!0)),u=Math.min(u,f),c=Math.max(c,f)}else u=skipAtomic(s,u,!1),c=skipAtomic(s,c,!0);return u==c?{range:l}:{changes:{from:u,to:c},range:EditorSelection.cursor(u)}});return o.changes.empty?!1:(s.dispatch(a.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?EditorView.announce.of(a.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(s,e,n){if(s instanceof EditorView)for(let a of s.state.facet(EditorView.atomicRanges).map(o=>o(s)))a.between(e,e,(o,l)=>{o<e&&l>e&&(e=n?l:o)});return e}const deleteByChar=(s,e)=>deleteBy(s,n=>{let{state:a}=s,o=a.doc.lineAt(n),l,u;if(!e&&n>o.from&&n<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,n-o.from))){if(l[l.length-1]=="	")return n-1;let c=countColumn(l,a.tabSize),f=c%getIndentUnit(a)||getIndentUnit(a);for(let d=0;d<f&&l[l.length-1-d]==" ";d++)n--;u=n}else u=findClusterBreak(o.text,n-o.from,e,e)+o.from,u==n&&o.number!=(e?a.doc.lines:1)&&(u+=e?1:-1);return u}),deleteCharBackward=s=>deleteByChar(s,!1),deleteCharForward=s=>deleteByChar(s,!0),deleteByGroup=(s,e)=>deleteBy(s,n=>{let a=n,{state:o}=s,l=o.doc.lineAt(a),u=o.charCategorizer(a);for(let c=null;;){if(a==(e?l.to:l.from)){a==n&&l.number!=(e?o.doc.lines:1)&&(a+=e?1:-1);break}let f=findClusterBreak(l.text,a-l.from,e)+l.from,d=l.text.slice(Math.min(a,f)-l.from,Math.max(a,f)-l.from),g=u(d);if(c!=null&&g!=c)break;(d!=" "||a!=n)&&(c=g),a=f}return a}),deleteGroupBackward=s=>deleteByGroup(s,!1),deleteGroupForward=s=>deleteByGroup(s,!0),deleteToLineEnd=s=>deleteBy(s,e=>{let n=s.lineBlockAt(e).to;return e<n?n:Math.min(s.state.doc.length,e+1)}),deleteToLineStart=s=>deleteBy(s,e=>{let n=s.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}),splitLine=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=s.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:Text.of(["",""])},range:EditorSelection.cursor(a.from)}));return e(s.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=s.changeByRange(a=>{if(!a.empty||a.from==0||a.from==s.doc.length)return{range:a};let o=a.from,l=s.doc.lineAt(o),u=o==l.from?o-1:findClusterBreak(l.text,o-l.from,!1)+l.from,c=o==l.to?o+1:findClusterBreak(l.text,o-l.from,!0)+l.from;return{changes:{from:u,to:c,insert:s.doc.slice(o,c).append(s.doc.slice(u,o))},range:EditorSelection.cursor(c)}});return n.changes.empty?!1:(e(s.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(s){let e=[],n=-1;for(let a of s.selection.ranges){let o=s.doc.lineAt(a.from),l=s.doc.lineAt(a.to);if(!a.empty&&a.to==l.from&&(l=s.doc.lineAt(a.to-1)),n>=o.number){let u=e[e.length-1];u.to=l.to,u.ranges.push(a)}else e.push({from:o.from,to:l.to,ranges:[a]});n=l.number+1}return e}function moveLine(s,e,n){if(s.readOnly)return!1;let a=[],o=[];for(let l of selectedLineBlocks(s)){if(n?l.to==s.doc.length:l.from==0)continue;let u=s.doc.lineAt(n?l.to+1:l.from-1),c=u.length+1;if(n){a.push({from:l.to,to:u.to},{from:l.from,insert:u.text+s.lineBreak});for(let f of l.ranges)o.push(EditorSelection.range(Math.min(s.doc.length,f.anchor+c),Math.min(s.doc.length,f.head+c)))}else{a.push({from:u.from,to:l.from},{from:l.to,insert:s.lineBreak+u.text});for(let f of l.ranges)o.push(EditorSelection.range(f.anchor-c,f.head-c))}}return a.length?(e(s.update({changes:a,scrollIntoView:!0,selection:EditorSelection.create(o,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:s,dispatch:e})=>moveLine(s,e,!1),moveLineDown=({state:s,dispatch:e})=>moveLine(s,e,!0);function copyLine(s,e,n){if(s.readOnly)return!1;let a=[];for(let o of selectedLineBlocks(s))n?a.push({from:o.from,insert:s.doc.slice(o.from,o.to)+s.lineBreak}):a.push({from:o.to,insert:s.lineBreak+s.doc.slice(o.from,o.to)});return e(s.update({changes:a,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:s,dispatch:e})=>copyLine(s,e,!1),copyLineDown=({state:s,dispatch:e})=>copyLine(s,e,!0),deleteLine=s=>{if(s.state.readOnly)return!1;let{state:e}=s,n=e.changes(selectedLineBlocks(e).map(({from:o,to:l})=>(o>0?o--:l<e.doc.length&&l++,{from:o,to:l}))),a=updateSel(e.selection,o=>s.moveVertically(o,!0)).map(n);return s.dispatch({changes:n,selection:a,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=syntaxTree(s).resolveInner(e),a=n.childBefore(e),o=n.childAfter(e),l;return a&&o&&a.to<=e&&o.from>=e&&(l=a.type.prop(NodeProp.closedBy))&&l.indexOf(o.name)>-1&&s.doc.lineAt(a.to).from==s.doc.lineAt(o.from).from?{from:a.to,to:o.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(s){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let a=e.changeByRange(o=>{let{from:l,to:u}=o,c=e.doc.lineAt(l),f=!s&&l==u&&isBetweenBrackets(e,l);s&&(l=u=(u<=c.to?c:e.doc.lineAt(u)).to);let d=new IndentContext(e,{simulateBreak:l,simulateDoubleBreak:!!f}),g=getIndentation(d,l);for(g==null&&(g=/^\s*/.exec(e.doc.lineAt(l).text)[0].length);u<c.to&&/\s/.test(c.text[u-c.from]);)u++;f?{from:l,to:u}=f:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let O=["",indentString(e,g)];return f&&O.push(indentString(e,d.lineIndent(c.from,-1))),{changes:{from:l,to:u,insert:Text.of(O)},range:EditorSelection.cursor(l+1+O[1].length)}});return n(e.update(a,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(s,e){let n=-1;return s.changeByRange(a=>{let o=[];for(let u=a.from;u<=a.to;){let c=s.doc.lineAt(u);c.number>n&&(a.empty||a.to>c.from)&&(e(c,o,a),n=c.number),u=c.to+1}let l=s.changes(o);return{changes:o,range:EditorSelection.range(l.mapPos(a.anchor,1),l.mapPos(a.head,1))}})}const indentSelection=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=Object.create(null),a=new IndentContext(s,{overrideIndentation:l=>{let u=n[l];return u??-1}}),o=changeBySelectedLine(s,(l,u,c)=>{let f=getIndentation(a,l.from);if(f==null)return;/\S/.test(l.text)||(f=0);let d=/^\s*/.exec(l.text)[0],g=indentString(s,f);(d!=g||c.from<l.from+d.length)&&(n[l.from]=f,u.push({from:l.from,to:l.from+d.length,insert:g}))});return o.changes.empty||e(s.update(o,{userEvent:"indent"})),!0},indentMore=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(n,a)=>{a.push({from:n.from,insert:s.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(changeBySelectedLine(s,(n,a)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let l=countColumn(o,s.tabSize),u=0,c=indentString(s,Math.max(0,l-getIndentUnit(s)));for(;u<o.length&&u<c.length&&o.charCodeAt(u)==c.charCodeAt(u);)u++;a.push({from:n.from+u,to:n.from+o.length,insert:c.slice(u)})}),{userEvent:"delete.dedent"})),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd}].concat(emacsStyleKeymap.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment}].concat(standardKeymap);class Stack{constructor(e,n,a,o,l,u,c,f,d,g=0,O){this.p=e,this.stack=n,this.state=a,this.reducePos=o,this.pos=l,this.score=u,this.buffer=c,this.bufferBase=f,this.curContext=d,this.lookAhead=g,this.parent=O}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,a=0){let o=e.parser.context;return new Stack(e,[],n,a,a,0,[],0,o?new StackContext(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let n=e>>19,a=e&65535,{parser:o}=this.p,l=o.dynamicPrecedence(a);if(l&&(this.score+=l),n==0){this.pushState(o.getGoto(this.state,a,!0),this.reducePos),a<o.minRepeatTerm&&this.storeNode(a,this.reducePos,this.reducePos,4,!0),this.reduceContext(a,this.reducePos);return}let u=this.stack.length-(n-1)*3-(e&262144?6:0),c=u?this.stack[u-2]:0,f=this.reducePos-c;f>=2e3&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=f));let d=u?this.stack[u-1]:0,g=this.bufferBase+this.buffer.length-d;if(a<o.minRepeatTerm||e&131072){let O=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(a,c,O,g+4,!0)}if(e&262144)this.state=this.stack[u];else{let O=this.stack[u-3];this.state=o.getGoto(O,a,!0)}for(;this.stack.length>u;)this.stack.pop();this.reduceContext(a,c)}storeNode(e,n,a,o=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let u=this,c=this.buffer.length;if(c==0&&u.parent&&(c=u.bufferBase-u.parent.bufferBase,u=u.parent),c>0&&u.buffer[c-4]==0&&u.buffer[c-1]>-1){if(n==a)return;if(u.buffer[c-2]>=n){u.buffer[c-2]=a;return}}}if(!l||this.pos==a)this.buffer.push(e,n,a,o);else{let u=this.buffer.length;if(u>0&&this.buffer[u-4]!=0)for(;u>0&&this.buffer[u-2]>a;)this.buffer[u]=this.buffer[u-4],this.buffer[u+1]=this.buffer[u-3],this.buffer[u+2]=this.buffer[u-2],this.buffer[u+3]=this.buffer[u-1],u-=4,o>4&&(o-=4);this.buffer[u]=e,this.buffer[u+1]=n,this.buffer[u+2]=a,this.buffer[u+3]=o}}shift(e,n,a){let o=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=a,this.shiftContext(n,o),n<=this.p.parser.maxNode&&this.buffer.push(n,o,a,4);else{let l=e,{parser:u}=this.p;(a>this.pos||n<=u.maxNode)&&(this.pos=a,u.stateFlag(l,1)||(this.reducePos=a)),this.pushState(l,o),this.shiftContext(n,o),n<=u.maxNode&&this.buffer.push(n,o,a,4)}}apply(e,n,a){e&65536?this.reduce(e):this.shift(e,n,a)}useNode(e,n){let a=this.p.reused.length-1;(a<0||this.p.reused[a]!=e)&&(this.p.reused.push(e),a++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(n,o),this.buffer.push(a,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let a=e.buffer.slice(n),o=e.bufferBase+n;for(;e&&o==e.bufferBase;)e=e.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,a,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let a=e<=this.p.parser.maxNode;a&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,a?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new SimulatedStack(this);;){let a=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(a==0)return!1;if(!(a&65536))return!0;n.reduce(a)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let o=[];for(let l=0,u;l<n.length;l+=2)(u=n[l+1])!=this.state&&this.p.parser.hasAction(u,e)&&o.push(n[l],u);if(this.stack.length<120)for(let l=0;o.length<8&&l<n.length;l+=2){let u=n[l+1];o.some((c,f)=>f&1&&c==u)||o.push(n[l],u)}n=o}let a=[];for(let o=0;o<n.length&&a.length<4;o+=2){let l=n[o+1];if(l==this.state)continue;let u=this.split();u.pushState(l,this.pos),u.storeNode(0,u.pos,u.pos,4,!0),u.shiftContext(n[o],this.pos),u.score-=200,a.push(u)}return a}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(e&65536))return!1;let{parser:n}=this.p;if(!n.validAction(this.state,e)){let a=e>>19,o=e&65535,l=this.stack.length-a*3;if(l<0||n.getGoto(this.stack[l],o,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new StackContext(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}var Recover;(function(s){s[s.Insert=200]="Insert",s[s.Delete=190]="Delete",s[s.Reduce=100]="Reduce",s[s.MaxNext=4]="MaxNext",s[s.MaxInsertStackDepth=300]="MaxInsertStackDepth",s[s.DampenInsertStackDepth=120]="DampenInsertStackDepth",s[s.MinBigReduction=2e3]="MinBigReduction"})(Recover||(Recover={}));class SimulatedStack{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,a=e>>19;a==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(a-1)*3;let o=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=o}}class StackBufferCursor{constructor(e,n,a){this.stack=e,this.pos=n,this.index=a,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new StackBufferCursor(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(s,e=Uint16Array){if(typeof s!="string")return s;let n=null;for(let a=0,o=0;a<s.length;){let l=0;for(;;){let u=s.charCodeAt(a++),c=!1;if(u==126){l=65535;break}u>=92&&u--,u>=34&&u--;let f=u-32;if(f>=46&&(f-=46,c=!0),l+=f,c)break;l*=46}n?n[o++]=l:n=new e(l)}return n}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let a=this.range,o=this.rangeIndex,l=this.pos+e;for(;l<a.from;){if(!o)return null;let u=this.ranges[--o];l-=a.from-u.to,a=u}for(;n<0?l>a.to:l>=a.to;){if(o==this.ranges.length-1)return null;let u=this.ranges[++o];l+=u.from-a.to,a=u}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,a,o;if(n>=0&&n<this.chunk.length)a=this.pos+e,o=this.chunk.charCodeAt(n);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(a=l,a>=this.chunk2Pos&&a<this.chunk2Pos+this.chunk2.length)o=this.chunk2.charCodeAt(a-this.chunk2Pos);else{let u=this.rangeIndex,c=this.range;for(;c.to<=a;)c=this.ranges[++u];this.chunk2=this.input.chunk(this.chunk2Pos=a),a+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-a)),o=this.chunk2.charCodeAt(0)}}return a>=this.token.lookAhead&&(this.token.lookAhead=a+1),o}acceptToken(e,n=0){let a=n?this.resolveOffset(n,-1):this.pos;if(a==null||a<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=a}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=nullToken,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let a="";for(let o of this.ranges){if(o.from>=n)break;o.to>e&&(a+=this.input.read(Math.max(o.from,e),Math.min(o.to,n)))}return a}}class TokenGroup{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:a}=n.p;readToken(this.data,e,n,this.id,a.data,a.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(e,n,a){this.precTable=n,this.elseToken=a,this.data=typeof e=="string"?decodeArray(e):e}token(e,n){let a=e.pos,o;for(;o=e.pos,readToken(this.data,e,n,0,this.data,this.precTable),!(e.token.value>-1);){if(this.elseToken==null)return;if(e.next<0)break;e.advance(),e.reset(o+1,e.token)}o>a&&(e.reset(a,e.token),e.acceptToken(this.elseToken,o-a))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function readToken(s,e,n,a,o,l){let u=0,c=1<<a,{dialect:f}=n.p.parser;e:for(;c&s[u];){let d=s[u+1];for(let b=u+3;b<d;b+=2)if((s[b+1]&c)>0){let E=s[b];if(f.allows(E)&&(e.token.value==-1||e.token.value==E||overrides(E,e.token.value,o,l))){e.acceptToken(E);break}}let g=e.next,O=0,S=s[u+2];if(e.next<0&&S>O&&s[d+S*3-3]==65535&&s[d+S*3-3]==65535){u=s[d+S*3-1];continue e}for(;O<S;){let b=O+S>>1,E=d+b+(b<<1),k=s[E],$=s[E+1]||65536;if(g<k)S=b;else if(g>=$)O=b+1;else{u=s[E+2],e.advance();continue e}}break}}function findOffset(s,e,n){for(let a=e,o;(o=s[a])!=65535;a++)if(o==n)return a-e;return-1}function overrides(s,e,n,a){let o=findOffset(n,a,e);return o<0||findOffset(n,a,s)<o}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let stackIDs=null;var Safety;(function(s){s[s.Margin=25]="Margin"})(Safety||(Safety={}));function cutAt(s,e,n){let a=s.cursor(IterMode.IncludeAnonymous);for(a.moveTo(e);;)if(!(n<0?a.childBefore(e):a.childAfter(e)))for(;;){if((n<0?a.to<e:a.from>e)&&!a.type.isError)return n<0?Math.max(0,Math.min(a.to-1,e-25)):Math.min(s.length,Math.max(a.from+1,e+25));if(n<0?a.prevSibling():a.nextSibling())break;if(!a.parent())return n<0?0:s.length}}class FragmentCursor{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?cutAt(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?cutAt(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let a=this.trees[n],o=this.index[n];if(o==a.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=a.children[o],u=this.start[n]+a.positions[o];if(u>e)return this.nextStart=u,null;if(l instanceof Tree){if(u==e){if(u<this.safeFrom)return null;let c=u+l.length;if(c<=this.safeTo){let f=l.prop(NodeProp.lookAhead);if(!f||c+f<this.fragment.to)return l}}this.index[n]++,u+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(u),this.index.push(0))}else this.index[n]++,this.nextStart=u+l.length}}}class TokenCache{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(a=>new CachedToken)}getActions(e){let n=0,a=null,{parser:o}=e.p,{tokenizers:l}=o,u=o.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,f=0;for(let d=0;d<l.length;d++){if(!(1<<d&u))continue;let g=l[d],O=this.tokens[d];if(!(a&&!g.fallback)&&((g.contextual||O.start!=e.pos||O.mask!=u||O.context!=c)&&(this.updateCachedToken(O,g,e),O.mask=u,O.context=c),O.lookAhead>O.end+25&&(f=Math.max(O.lookAhead,f)),O.value!=0)){let S=n;if(O.extended>-1&&(n=this.addActions(e,O.extended,O.end,n)),n=this.addActions(e,O.value,O.end,n),!g.extend&&(a=O,n>S))break}}for(;this.actions.length>n;)this.actions.pop();return f&&e.setLookAhead(f),!a&&e.pos==this.stream.end&&(a=new CachedToken,a.value=e.p.parser.eofTerm,a.start=a.end=e.pos,n=this.addActions(e,a.value,a.end,n)),this.mainToken=a,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new CachedToken,{pos:a,p:o}=e;return n.start=a,n.end=Math.min(a+1,o.stream.end),n.value=a==o.stream.end?o.parser.eofTerm:0,n}updateCachedToken(e,n,a){let o=this.stream.clipPos(a.pos);if(n.token(this.stream.reset(o,e),a),e.value>-1){let{parser:l}=a.p;for(let u=0;u<l.specialized.length;u++)if(l.specialized[u]==e.value){let c=l.specializers[u](this.stream.read(e.start,e.end),a);if(c>=0&&a.p.parser.dialect.allows(c>>1)){c&1?e.extended=c>>1:e.value=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,n,a,o){for(let l=0;l<o;l+=3)if(this.actions[l]==e)return o;return this.actions[o++]=e,this.actions[o++]=n,this.actions[o++]=a,o}addActions(e,n,a,o){let{state:l}=e,{parser:u}=e.p,{data:c}=u;for(let f=0;f<2;f++)for(let d=u.stateSlot(l,f?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=pair(c,d+2);else{o==0&&c[d+1]==2&&(o=this.putAction(pair(c,d+2),n,a,o));break}c[d]==n&&(o=this.putAction(pair(c,d+1),n,a,o))}return o}}var Rec;(function(s){s[s.Distance=5]="Distance",s[s.MaxRemainingPerStep=3]="MaxRemainingPerStep",s[s.MinBufferLengthPrune=500]="MinBufferLengthPrune",s[s.ForceReduceLimit=10]="ForceReduceLimit",s[s.CutDepth=15e3]="CutDepth",s[s.CutTo=9e3]="CutTo",s[s.MaxLeftAssociativeReductionCount=1e3]="MaxLeftAssociativeReductionCount"})(Rec||(Rec={}));class Parse{constructor(e,n,a,o){this.parser=e,this.input=n,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(n,o),this.tokens=new TokenCache(e,this.stream),this.topTerm=e.top[1];let{from:l}=o[0];this.stacks=[Stack.start(this,e.top[0],l)],this.fragments=a.length&&this.stream.end-l>e.bufferLength*4?new FragmentCursor(a,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,a=this.stacks=[],o,l;if(this.bigReductionCount>1e3&&e.length==1){let[u]=e;for(;u.forceReduce()&&u.stack.length&&u.stack[u.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let u=0;u<e.length;u++){let c=e[u];for(;;){if(this.tokens.mainToken=null,c.pos>n)a.push(c);else{if(this.advanceStack(c,a,e))continue;{o||(o=[],l=[]),o.push(c);let f=this.tokens.getMainToken(c);l.push(f.value,f.end)}}break}}if(!a.length){let u=o&&findFinished(o);if(u)return this.stackToTree(u);if(this.parser.strict)throw verbose&&o&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&o){let u=this.stoppedAt!=null&&o[0].pos>this.stoppedAt?o[0]:this.runRecovery(o,l,a);if(u)return this.stackToTree(u.forceAll())}if(this.recovering){let u=this.recovering==1?1:this.recovering*3;if(a.length>u)for(a.sort((c,f)=>f.score-c.score);a.length>u;)a.pop();a.some(c=>c.reducePos>n)&&this.recovering--}else if(a.length>1)e:for(let u=0;u<a.length-1;u++){let c=a[u];for(let f=u+1;f<a.length;f++){let d=a[f];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)a.splice(f--,1);else{a.splice(u--,1);continue e}}}this.minStackPos=a[0].pos;for(let u=1;u<a.length;u++)a[u].pos<this.minStackPos&&(this.minStackPos=a[u].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,a){let o=e.pos,{parser:l}=this,u=verbose?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,g=d?e.curContext.hash:0;for(let O=this.fragments.nodeAt(o);O;){let S=this.parser.nodeSet.types[O.type.id]==O.type?l.getGoto(e.state,O.type.id):-1;if(S>-1&&O.length&&(!d||(O.prop(NodeProp.contextHash)||0)==g))return e.useNode(O,S),verbose&&console.log(u+this.stackID(e)+` (via reuse of ${l.getName(O.type.id)})`),!0;if(!(O instanceof Tree)||O.children.length==0||O.positions[0]>0)break;let b=O.children[0];if(b instanceof Tree&&O.positions[0]==0)O=b;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),verbose&&console.log(u+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let f=this.tokens.getActions(e);for(let d=0;d<f.length;){let g=f[d++],O=f[d++],S=f[d++],b=d==f.length||!a,E=b?e:e.split();if(E.apply(g,O,S),verbose&&console.log(u+this.stackID(E)+` (via ${g&65536?`reduce of ${l.getName(g&65535)}`:"shift"} for ${l.getName(O)} @ ${o}${E==e?"":", split"})`),b)return!0;E.pos>o?n.push(E):a.push(E)}return!1}advanceFully(e,n){let a=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>a)return pushStackDedup(e,n),!0}}runRecovery(e,n,a){let o=null,l=!1;for(let u=0;u<e.length;u++){let c=e[u],f=n[u<<1],d=n[(u<<1)+1],g=verbose?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),verbose&&console.log(g+this.stackID(c)+" (restarted)"),this.advanceFully(c,a))))continue;let O=c.split(),S=g;for(let b=0;O.forceReduce()&&b<10&&(verbose&&console.log(S+this.stackID(O)+" (via force-reduce)"),!this.advanceFully(O,a));b++)verbose&&(S=this.stackID(O)+" -> ");for(let b of c.recoverByInsert(f))verbose&&console.log(g+this.stackID(b)+" (via recover-insert)"),this.advanceFully(b,a);this.stream.end>c.pos?(d==c.pos&&(d++,f=0),c.recoverByDelete(f,d),verbose&&console.log(g+this.stackID(c)+` (via recover-delete ${this.parser.getName(f)})`),pushStackDedup(c,a)):(!o||o.score<c.score)&&(o=c)}return o}stackToTree(e){return e.close(),Tree.build({buffer:StackBufferCursor.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(stackIDs||(stackIDs=new WeakMap)).get(e);return n||stackIDs.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function pushStackDedup(s,e){for(let n=0;n<e.length;n++){let a=e[n];if(a.pos==s.pos&&a.sameState(s)){e[n].score<s.score&&(e[n]=s);return}}e.push(s)}class Dialect{constructor(e,n,a){this.source=e,this.flags=n,this.disabled=a}allows(e){return!this.disabled||this.disabled[e]==0}}const id=s=>s;class ContextTracker{constructor(e){this.start=e.start,this.shift=e.shift||id,this.reduce=e.reduce||id,this.reuse=e.reuse||id,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class LRParser extends Parser{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let c=0;c<e.repeatNodeCount;c++)n.push("");let a=Object.keys(e.topRules).map(c=>e.topRules[c][1]),o=[];for(let c=0;c<n.length;c++)o.push([]);function l(c,f,d){o[c].push([f,f.deserialize(String(d))])}if(e.nodeProps)for(let c of e.nodeProps){let f=c[0];typeof f=="string"&&(f=NodeProp[f]);for(let d=1;d<c.length;){let g=c[d++];if(g>=0)l(g,f,c[d++]);else{let O=c[d+-g];for(let S=-g;S>0;S--)l(c[d++],f,O);d++}}}this.nodeSet=new NodeSet(n.map((c,f)=>NodeType.define({name:f>=this.minRepeatTerm?void 0:c,id:f,props:o[f],top:a.indexOf(f)>-1,error:f==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(f)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let u=decodeArray(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(e.states,Uint32Array),this.data=decodeArray(e.stateData),this.goto=decodeArray(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new TokenGroup(u,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,a){let o=new Parse(this,e,n,a);for(let l of this.wrappers)o=l(o,e,n,a);return o}getGoto(e,n,a=!1){let o=this.goto;if(n>=o[0])return-1;for(let l=o[n+1];;){let u=o[l++],c=u&1,f=o[l++];if(c&&a)return f;for(let d=l+(u>>1);l<d;l++)if(o[l]==e)return f;if(c)return-1}}hasAction(e,n){let a=this.data;for(let o=0;o<2;o++)for(let l=this.stateSlot(e,o?2:1),u;;l+=3){if((u=a[l])==65535)if(a[l+1]==1)u=a[l=pair(a,l+2)];else{if(a[l+1]==2)return pair(a,l+2);break}if(u==n||u==0)return pair(a,l+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){if(n==this.stateSlot(e,4))return!0;for(let a=this.stateSlot(e,1);;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=pair(this.data,a+2);else return!1;if(n==pair(this.data,a+1))return!0}}nextStates(e){let n=[];for(let a=this.stateSlot(e,1);;a+=3){if(this.data[a]==65535)if(this.data[a+1]==1)a=pair(this.data,a+2);else break;if(!(this.data[a+2]&1)){let o=this.data[a+1];n.some((l,u)=>u&1&&l==o)||n.push(this.data[a],o)}}return n}configure(e){let n=Object.assign(Object.create(LRParser.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let a=this.topRules[e.top];if(!a)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=a}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(a=>{let o=e.tokenizers.find(l=>l.from==a);return o?o.to:a})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((a,o)=>{let l=e.specializers.find(c=>c.from==a.external);if(!l)return a;let u=Object.assign(Object.assign({},a),{external:l.to});return n.specializers[o]=getSpecializer(u),u})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),a=n.map(()=>!1);if(e)for(let l of e.split(" ")){let u=n.indexOf(l);u>=0&&(a[u]=!0)}let o=null;for(let l=0;l<n.length;l++)if(!a[l])for(let u=this.dialects[n[l]],c;(c=this.data[u++])!=65535;)(o||(o=new Uint8Array(this.maxTerm+1)))[c]=1;return new Dialect(e,a,o)}static deserialize(e){return new LRParser(e)}}function pair(s,e){return s[e]|s[e+1]<<16}function findFinished(s){let e=null;for(let n of s){let a=n.p.stoppedAt;(n.pos==n.p.stream.end||a!=null&&n.pos>a)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function getSpecializer(s){if(s.external){let e=s.extend?1:0;return(n,a)=>s.external(n,a)<<1|e}return s.get}const noSemi=301,incdec=1,incdecPrefix=2,insertSemi=302,spaces=304,newline=305,LineComment=3,BlockComment=4,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,trackNewline=new ContextTracker({start:!1,shift(s,e){return e==LineComment||e==BlockComment||e==spaces?s:e==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((s,e)=>{let{next:n}=s;(n==braceR||n==-1||e.context)&&e.canShift(insertSemi)&&s.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((s,e)=>{let{next:n}=s,a;space.indexOf(n)>-1||n==slash&&((a=s.peek(1))==slash||a==star)||n!=braceR&&n!=semicolon&&n!=-1&&!e.context&&e.canShift(noSemi)&&s.acceptToken(noSemi)},{contextual:!0}),incdecToken=new ExternalTokenizer((s,e)=>{let{next:n}=s;if((n==plus||n==minus)&&(s.advance(),n==s.next)){s.advance();let a=!e.context&&e.canShift(incdec);s.acceptToken(a?incdec:incdecPrefix)}},{contextual:!0}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,LineComment:tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:14,as:19,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:70,void:74,typeof:78,super:96,new:130,delete:146,yield:155,await:159,class:164,public:219,private:219,protected:219,readonly:221,instanceof:240,satisfies:243,in:244,const:246,import:278,keyof:333,unique:337,infer:343,is:379,abstract:399,implements:401,type:403,let:406,var:408,interface:415,enum:419,namespace:425,module:427,declare:431,global:435,for:456,of:465,while:468,with:472,do:476,if:480,else:482,switch:486,case:492,try:498,catch:502,finally:506,return:510,throw:514,break:518,continue:522,debugger:526},spec_word={__proto__:null,async:117,get:119,set:121,public:181,private:181,protected:181,static:183,abstract:185,override:187,readonly:193,accessor:195,new:383},spec_LessThan={__proto__:null,"<":137},parser=LRParser.deserialize({version:14,states:"$BhO`QUOOO%QQUOOO'TQWOOP(_OSOOO*mQ(CjO'#CfO*tOpO'#CgO+SO!bO'#CgO+bO07`O'#DZO-sQUO'#DaO.TQUO'#DlO%QQUO'#DvO0[QUO'#EOOOQ(CY'#EW'#EWO0rQSO'#ETOOQO'#I_'#I_O0zQSO'#GjOOQO'#Eh'#EhO1VQSO'#EgO1[QSO'#EgO3^Q(CjO'#JbO5}Q(CjO'#JcO6kQSO'#FVO6pQ#tO'#FnOOQ(CY'#F_'#F_O6{O&jO'#F_O7ZQ,UO'#FuO8qQSO'#FtOOQ(CY'#Jc'#JcOOQ(CW'#Jb'#JbOOQQ'#J|'#J|O8vQSO'#IOO8{Q(C[O'#IPOOQQ'#JO'#JOOOQQ'#IT'#ITQ`QUOOO%QQUO'#DnO9TQUO'#DzO%QQUO'#D|O9[QSO'#GjO9aQ,UO'#ClO9oQSO'#EfO9zQSO'#EqO:PQ,UO'#F^O:nQSO'#GjO:sQSO'#GnO;OQSO'#GnO;^QSO'#GqO;^QSO'#GrO;^QSO'#GtO9[QSO'#GwO;}QSO'#GzO=`QSO'#CbO=pQSO'#HXO=xQSO'#H_O=xQSO'#HaO`QUO'#HcO=xQSO'#HeO=xQSO'#HhO=}QSO'#HnO>SQ(C]O'#HtO%QQUO'#HvO>_Q(C]O'#HxO>jQ(C]O'#HzO8{Q(C[O'#H|O>uQ(CjO'#CfO?wQWO'#DfQOQSOOO@_QSO'#EPO9aQ,UO'#EfO@jQSO'#EfO@uQ`O'#F^OOQQ'#Cd'#CdOOQ(CW'#Dk'#DkOOQ(CW'#Jf'#JfO%QQUO'#JfOBOQWO'#E_OOQ(CW'#E^'#E^OBYQ(C`O'#E_OBtQWO'#ESOOQO'#Ji'#JiOCYQWO'#ESOCgQWO'#E_OC}QWO'#EeODQQWO'#E_O@}QWO'#E_OBtQWO'#E_PDkO?MpO'#C`POOO)CDm)CDmOOOO'#IU'#IUODvOpO,59ROOQ(CY,59R,59ROOOO'#IV'#IVOEUO!bO,59RO%QQUO'#D]OOOO'#IX'#IXOEdO07`O,59uOOQ(CY,59u,59uOErQUO'#IYOFVQSO'#JdOHXQbO'#JdO+pQUO'#JdOH`QSO,59{OHvQSO'#EhOITQSO'#JqOI`QSO'#JpOI`QSO'#JpOIhQSO,5;UOImQSO'#JoOOQ(CY,5:W,5:WOItQUO,5:WOKuQ(CjO,5:bOLfQSO,5:jOLkQSO'#JmOMeQ(C[O'#JnO:sQSO'#JmOMlQSO'#JmOMtQSO,5;TOMyQSO'#JmOOQ(CY'#Cf'#CfO%QQUO'#EOONmQ`O,5:oOOQO'#Jj'#JjOOQO-E<]-E<]O9[QSO,5=UO! TQSO,5=UO! YQUO,5;RO!#]Q,UO'#EcO!$pQSO,5;RO!&YQ,UO'#DpO!&aQUO'#DuO!&kQWO,5;[O!&sQWO,5;[O%QQUO,5;[OOQQ'#E}'#E}OOQQ'#FP'#FPO%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]O%QQUO,5;]OOQQ'#FT'#FTO!'RQUO,5;nOOQ(CY,5;s,5;sOOQ(CY,5;t,5;tO!)UQSO,5;tOOQ(CY,5;u,5;uO%QQUO'#IeO!)^Q(C[O,5<bO!#]Q,UO,5;]O!){Q,UO,5;]O%QQUO,5;qO!*SQ#tO'#FdO!+PQ#tO'#JuO!*kQ#tO'#JuO!+WQ#tO'#JuOOQO'#Ju'#JuO!+lQ#tO,5;|OOOO,5<Y,5<YO!+}QUO'#FpOOOO'#Id'#IdO6{O&jO,5;yO!,UQ#tO'#FrOOQ(CY,5;y,5;yO!,uQ7[O'#CrOOQ(CY'#Cv'#CvO!-YQSO'#CvO!-_O07`O'#CzO!-{Q,UO,5<_O!.SQSO,5<aO!/iQMhO'#GPO!/vQSO'#GQO!/{QSO'#GQO!0QQMhO'#GUO!1PQWO'#GYO!1rQ7[O'#J]OOQ(CY'#J]'#J]O!1|QSO'#J[O!2[QSO'#JZO!2dQSO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#DO'#DOOOQ(CY'#DQ'#DQO0uQSO'#DSO!$uQ,UO'#FwO!$uQ,UO'#FyO!2lQSO'#F{O!2qQSO'#F|O!/{QSO'#GSO!$uQ,UO'#GXO!2vQSO'#EiO!3bQSO,5<`O`QUO,5>jOOQQ'#JW'#JWOOQQ,5>k,5>kOOQQ-E<R-E<RO!5aQ(CjO,5:YO!7}Q(CjO,5:fO%QQUO,5:fO!:hQ(CjO,5:hOOQ(CW'#Co'#CoO!;XQ,UO,5=UO!;gQ(C[O'#JXO8qQSO'#JXO=}QSO,59WO!;xQWO,59WO!<QQ,UO,59WO9aQ,UO,59WO!<]QSO,5;RO!<eQSO'#HWO!<vQSO'#KQO%QQUO,5;vO!=OQWO,5;xO!=TQSO,5=qO!=YQSO,5=qO!=_QSO,5=qO8{Q(C[O,5=qO!=mQSO'#EjO!>gQWO'#EkOOQ(CW'#Jo'#JoO!>nQ(C[O'#J}O8{Q(C[O,5=YO;^QSO,5=`OOQO'#Cr'#CrO!>yQWO,5=]O!?RQ,UO,5=^O!?^QSO,5=`O!?cQ`O,5=cO=}QSO'#G|O9[QSO'#HOO!?kQSO'#HOO9aQ,UO'#HRO!?pQSO'#HROOQQ,5=f,5=fO!?uQSO'#HSO!?}QSO'#ClO!@SQSO,58|O!@^QSO,58|O!BfQUO,58|OOQQ,58|,58|O!BsQ(C[O,58|O%QQUO,58|O!COQUO'#HZOOQQ'#H['#H[OOQQ'#H]'#H]O`QUO,5=sO!C`QSO,5=sO`QUO,5=yO`QUO,5={O!CeQSO,5=}O`QUO,5>PO!CjQSO,5>SO!CoQUO,5>YOOQQ,5>`,5>`O%QQUO,5>`O8{Q(C[O,5>bOOQQ,5>d,5>dO!GvQSO,5>dOOQQ,5>f,5>fO!GvQSO,5>fOOQQ,5>h,5>hO!G{QWO'#DXO%QQUO'#JfO!HjQWO'#JfO!IXQWO'#DgO!IjQWO'#DgO!K{QUO'#DgO!LSQSO'#JeO!L[QSO,5:QO!LaQSO'#ElO!LoQSO'#JrO!LwQSO,5;VO!L|QWO'#DgO!MZQWO'#EROOQ(CY,5:k,5:kO%QQUO,5:kO!MbQSO,5:kO=}QSO,5;QO!;xQWO,5;QO!<QQ,UO,5;QO9aQ,UO,5;QO!MjQSO,5@QO!MoQ!LQO,5:oO!NrQ(C`O,5:yOBtQWO,5:nO# ^QWO,5:nO# kQWO,5:yO#!RQWO,5:yO#!lQWO,5:yOBtQWO,5:yO=}QSO,5:nOOQ(CW'#Eb'#EbOOQO,5:y,5:yO%QQUO,5:yO##]Q(C[O,5:yO##hQ(C[O,5:yO!;xQWO,5:nOOQO,5;P,5;PO##vQ(C[O,5:yPOOO'#IS'#ISP#$[O?MpO,58zPOOO,58z,58zOOOO-E<S-E<SOOQ(CY1G.m1G.mOOOO-E<T-E<TO#$gQ`O,59wOOOO-E<V-E<VOOQ(CY1G/a1G/aO#$lQbO,5>tO+pQUO,5>tOOQO,5>z,5>zO#$vQUO'#IYOOQO-E<W-E<WO#%TQSO,5@OO#%]QbO,5@OO#%dQSO,5@[OOQ(CY1G/g1G/gO%QQUO,5@]O#%lQSO'#I`OOQO-E<^-E<^O#%dQSO,5@[OOQ(CW1G0p1G0pOOQ(CY1G/r1G/rOOQ(CY1G0U1G0UO#&QQSO,5@XO:sQSO,5@XO#&YQSO,5@XO%QQUO,5@YO#&hQ(C[O,5@YO#&yQ(C[O,5@YO#'QQSO'#IbO#&QQSO,5@XOOQ(CW1G0o1G0oO!&kQWO,5:qO!&vQWO,5:qOOQO,5:s,5:sO#'oQSO,5:sO#'wQ,UO1G2pO9[QSO1G2pOOQ(CY1G0m1G0mO#(VQ(CjO1G0mO#)[Q(ChO,5:}OOQ(CY'#GO'#GOO#)xQ(CjO'#J]O! YQUO1G0mO#,QQ,UO'#JgO#,[QSO,5:[O#,aQbO'#JhO%QQUO'#JhO#,kQSO,5:aOOQ(CY'#DX'#DXOOQ(CY1G0v1G0vO%QQUO1G0vOOQ(CY1G1`1G1`O#,pQSO1G0vO#/XQ(CjO1G0wO#/`Q(CjO1G0wO#1yQ(CjO1G0wO#2QQ(CjO1G0wO#4[Q(CjO1G0wO#4rQ(CjO1G0wO#7lQ(CjO1G0wO#7sQ(CjO1G0wO#:^Q(CjO1G0wO#:eQ(CjO1G0wO#<]Q(CjO1G0wO#?]Q$IUO'#CfO#AZQ$IUO1G1YO#CXQ$IUO'#JcO!)XQSO1G1`O#ClQ(CjO,5?POOQ(CW-E<c-E<cO#D`Q(CjO1G0wOOQ(CY1G0w1G0wO#FkQ(CjO1G1]O#G_Q#tO,5<QO#GgQ#tO,5<RO#GoQ#tO'#FiO#HWQSO'#FhOOQO'#Jv'#JvOOQO'#Ic'#IcO#H]Q#tO1G1hOOQ(CY1G1h1G1hOOOO1G1s1G1sO#HnQ$IUO'#JbO#HxQSO,5<[O!'RQUO,5<[OOOO-E<b-E<bOOQ(CY1G1e1G1eO#H}QWO'#JuOOQ(CY,5<^,5<^O#IVQWO,5<^OOQ(CY,59b,59bO!#]Q,UO'#C|OOOO'#IW'#IWO#I[O07`O,59fOOQ(CY,59f,59fO%QQUO1G1yO!2qQSO'#IgO#IgQSO,5<rOOQ(CY,5<o,5<oOOQO'#Ge'#GeO!$uQ,UO,5=OOOQO'#Gg'#GgO!$uQ,UO,5=QO!#]Q,UO,5=SOOQO1G1{1G1{O#IuQ`O'#CoO#JYQ`O,5<kO#JaQSO'#JyO9[QSO'#JyO#JoQSO,5<mO!$uQ,UO,5<lO#JtQSO'#GRO#KPQSO,5<lO#KUQ`O'#GOO#KcQ`O'#JzO#KmQSO'#JzO!#]Q,UO'#JzO#KrQSO,5<pO#KwQWO'#GZO!0zQWO'#GZO#LYQSO'#G]O#L_QSO'#G_O!/{QSO'#GbO#LdQ(C[O'#IiO#LoQWO,5<tOOQ(CY,5<t,5<tO#LvQWO'#GZO#MUQWO'#G[O#M^QWO'#G[OOQ(CY,5=T,5=TO!$uQ,UO,5?vO!$uQ,UO,5?vO#McQSO'#IjO#MnQSO,5?uO#MvQSO,59]O#NgQ,UO,59nOOQ(CY,59n,59nO$ YQ,UO,5<cO$ {Q,UO,5<eO?oQSO,5<gOOQ(CY,5<h,5<hO$!VQSO,5<nO$![Q,UO,5<sO! YQUO1G1zO$!lQSO1G1zOOQQ1G4U1G4UOOQ(CY1G/t1G/tO!)UQSO1G/tO$$kQ(CjO1G0QOOQQ1G2p1G2pO!#]Q,UO1G2pO%QQUO1G2pO$%[QSO1G2pO$%gQ,UO'#EcOOQ(CW,5?s,5?sO$%qQ(C[O,5?sOOQQ1G.r1G.rO=}QSO1G.rO!;xQWO1G.rO!<QQ,UO1G.rO$&SQSO1G0mO$&XQSO'#CfO$&dQSO'#KRO$&lQSO,5=rO$&qQSO'#KRO$&vQSO'#KRO$'RQSO'#IrO$'aQSO,5@lO$'iQbO1G1bOOQ(CY1G1d1G1dO9[QSO1G3]O?oQSO1G3]O$'pQSO1G3]O$'uQSO1G3]OOQQ1G3]1G3]O:sQSO'#JpO:sQSO'#ElO%QQUO'#ElO:sQSO'#IlO$'zQ(C[O,5@iOOQQ1G2t1G2tO!?^QSO1G2zO!#]Q,UO1G2wO$(VQSO1G2wOOQQ1G2x1G2xO!#]Q,UO1G2xO$([QSO1G2xO$(dQWO'#GvOOQQ1G2z1G2zO!0zQWO'#InO!?cQ`O1G2}OOQQ1G2}1G2}OOQQ,5=h,5=hO$(lQ,UO,5=jO9[QSO,5=jO#L_QSO,5=mO8qQSO,5=mO!;xQWO,5=mO!<QQ,UO,5=mO9aQ,UO,5=mO$(zQSO'#KPO$)VQSO,5=nOOQQ1G.h1G.hO$)[Q(C[O1G.hO?oQSO1G.hO$)gQSO1G.hO8{Q(C[O1G.hO$)rQbO,5@nO$*VQSO,5@nO$*bQUO,5=uO$*iQSO,5=uO:sQSO,5@nOOQQ1G3_1G3_O`QUO1G3_OOQQ1G3e1G3eOOQQ1G3g1G3gO=xQSO1G3iO$*nQUO1G3kO$.oQUO'#HjOOQQ1G3n1G3nO$.|QSO'#HpO=}QSO'#HrOOQQ1G3t1G3tO$/UQUO1G3tO8{Q(C[O1G3zOOQQ1G3|1G3|OOQ(CW'#GV'#GVO8{Q(C[O1G4OO8{Q(C[O1G4QO$3YQSO,5@QO!'RQUO,5;WO:sQSO,5;WO=}QSO,5:RO!'RQUO,5:RO!;xQWO,5:RO$3_Q$IUO,5:ROOQO,5;W,5;WO$3iQWO'#IZO$4PQSO,5@POOQ(CY1G/l1G/lO$4XQWO'#IaO$4cQSO,5@^OOQ(CW1G0q1G0qO!IjQWO,5:ROOQO'#I^'#I^O$4kQWO,5:mOOQ(CY,5:m,5:mO!MeQSO1G0VOOQ(CY1G0V1G0VO%QQUO1G0VOOQ(CY1G0l1G0lO=}QSO1G0lO!;xQWO1G0lO!<QQ,UO1G0lOOQ(CW1G5l1G5lO=}QSO1G0YOOQO1G0e1G0eO%QQUO1G0eO$4rQ(C[O1G0eO$4}Q(C[O1G0eO!;xQWO1G0YOBtQWO1G0YO$5]Q(C`O1G0eO$5wQWO1G0YOBtQWO1G0eO$6UQWO1G0eO$6lQWO1G0eO$7VQ(C[O1G0eOOQO1G0Y1G0YO$7kQ(CjO1G0ePOOO-E<Q-E<QPOOO1G.f1G.fOOOO1G/c1G/cO$7uQ`O,5<bO$7}QbO1G4`OOQO1G4f1G4fO%QQUO,5>tO$8XQSO1G5jO$8aQSO1G5vO$8iQbO1G5wO:sQSO,5>zO$8sQSO1G5sO$8sQSO1G5sO:sQSO1G5sO$8{Q(CjO1G5tO%QQUO1G5tO$9]Q(C[O1G5tO$9nQSO,5>|O:sQSO,5>|OOQO,5>|,5>|O$:SQSO,5>|OOQO-E<`-E<`OOQO1G0]1G0]OOQO1G0_1G0_O!)XQSO1G0_OOQQ7+([7+([O!#]Q,UO7+([O%QQUO7+([O$:bQSO7+([O$:mQ,UO7+([O$:{Q(CjO,59nO$=TQ(CjO,5<cO$?`Q(CjO,5<eO$AkQ(CjO,5<sOOQ(CY7+&X7+&XO$C|Q(CjO7+&XO$DpQ,UO'#I[O$DzQSO,5@ROOQ(CY1G/v1G/vO$ESQUO'#I]O$EaQSO,5@SO$EiQbO,5@SOOQ(CY1G/{1G/{O$EsQSO7+&bOOQ(CY7+&b7+&bO$ExQ$IUO,5:bO%QQUO7+&tO$FSQ$IUO,5:YO$FaQ$IUO,5:fO$FkQ$IUO,5:hOOQ(CY7+&z7+&zOOQO1G1l1G1lOOQO1G1m1G1mO$FuQ#tO,5<TO!'RQUO,5<SOOQO-E<a-E<aOOQ(CY7+'S7+'SOOOO7+'_7+'_OOOO1G1v1G1vO$GQQSO1G1vOOQ(CY1G1x1G1xO$GVQ`O,59hOOOO-E<U-E<UOOQ(CY1G/Q1G/QO$G^Q(CjO7+'eOOQ(CY,5?R,5?RO$HQQSO,5?ROOQ(CY1G2^1G2^P$HVQSO'#IgPOQ(CY-E<e-E<eO$HyQ,UO1G2jO$IlQ,UO1G2lO$IvQ`O1G2nOOQ(CY1G2V1G2VO$I}QSO'#IfO$J]QSO,5@eO$J]QSO,5@eO$JeQSO,5@eO$JpQSO,5@eOOQO1G2X1G2XO$KOQ,UO1G2WO!$uQ,UO1G2WO$K`QMhO'#IhO$KpQSO,5@fO!#]Q,UO,5@fO$KxQ`O,5@fOOQ(CY1G2[1G2[OOQ(CW,5<u,5<uOOQ(CW,5<v,5<vO$LSQSO,5<vOBoQSO,5<vO!;xQWO,5<uOOQO'#G^'#G^O$LXQSO,5<wOOQ(CW,5<y,5<yO$LSQSO,5<|OOQO,5?T,5?TOOQO-E<g-E<gOOQ(CY1G2`1G2`O!0zQWO,5<uO$LaQSO,5<vO#LYQSO,5<wO!0zQWO,5<vO$LlQ,UO1G5bO$LvQ,UO1G5bOOQO,5?U,5?UOOQO-E<h-E<hOOQO1G.w1G.wO!=OQWO,59pO%QQUO,59pO$MTQSO1G2RO!$uQ,UO1G2YO$MYQ(CjO7+'fOOQ(CY7+'f7+'fO! YQUO7+'fOOQ(CY7+%`7+%`O$M|Q`O'#J{O!MeQSO7+([O$NWQbO7+([O$:eQSO7+([O$N_Q(ChO'#CfO$NrQ(ChO,5<zO% dQSO,5<zOOQ(CW1G5_1G5_OOQQ7+$^7+$^O=}QSO7+$^O!;xQWO7+$^O! YQUO7+&XO% iQSO'#IqO% }QSO,5@mOOQO1G3^1G3^O9[QSO,5@mO% }QSO,5@mO%!VQSO,5@mOOQO,5?^,5?^OOQO-E<p-E<pOOQ(CY7+&|7+&|O%![QSO7+(wO8{Q(C[O7+(wO9[QSO7+(wO?oQSO7+(wO%!aQSO,5;WOOQ(CW,5?W,5?WOOQ(CW-E<j-E<jOOQQ7+(f7+(fO%!fQ(ChO7+(cO!#]Q,UO7+(cO%!pQ`O7+(dOOQQ7+(d7+(dO!#]Q,UO7+(dO%!wQSO'#KOO%#SQSO,5=bOOQO,5?Y,5?YOOQO-E<l-E<lOOQQ7+(i7+(iO%$`QWO'#HPOOQQ1G3U1G3UO!#]Q,UO1G3UO%QQUO1G3UO%$gQSO1G3UO%$rQ,UO1G3UO8{Q(C[O1G3XO#L_QSO1G3XO8qQSO1G3XO!;xQWO1G3XO!<QQ,UO1G3XO%%QQSO'#IpO%%]QSO,5@kO%%eQWO,5@kOOQ(CW1G3Y1G3YOOQQ7+$S7+$SO?oQSO7+$SO8{Q(C[O7+$SO%%pQSO7+$SO%QQUO1G6YO%QQUO1G6ZO%%uQUO1G3aO%%|QSO1G3aO%&RQUO1G3aO%&YQ(C[O1G6YOOQQ7+(y7+(yO8{Q(C[O7+)TO`QUO7+)VOOQQ'#KU'#KUOOQQ'#Is'#IsO%&dQUO,5>UOOQQ,5>U,5>UO%QQUO'#HkO%&qQSO'#HmOOQQ,5>[,5>[O:sQSO,5>[OOQQ,5>^,5>^OOQQ7+)`7+)`OOQQ7+)f7+)fOOQQ7+)j7+)jOOQQ7+)l7+)lO%&vQWO1G5lO%'[Q$IUO1G0rO%'fQSO1G0rOOQO1G/m1G/mO%'qQ$IUO1G/mO=}QSO1G/mO!'RQUO'#DgOOQO,5>u,5>uOOQO-E<X-E<XOOQO,5>{,5>{OOQO-E<_-E<_O!;xQWO1G/mOOQO-E<[-E<[OOQ(CY1G0X1G0XOOQ(CY7+%q7+%qO!MeQSO7+%qOOQ(CY7+&W7+&WO=}QSO7+&WO!;xQWO7+&WOOQO7+%t7+%tO$7kQ(CjO7+&POOQO7+&P7+&PO%QQUO7+&PO%'{Q(C[O7+&PO=}QSO7+%tO!;xQWO7+%tO%(WQ(C[O7+&POBtQWO7+%tO%(fQ(C[O7+&PO%(zQ(C`O7+&PO%)UQWO7+%tOBtQWO7+&PO%)cQWO7+&PO%)yQSO7++_O%)yQSO7++_O%*RQ(CjO7++`O%QQUO7++`OOQO1G4h1G4hO:sQSO1G4hO%*cQSO1G4hOOQO7+%y7+%yO!MeQSO<<KvO$NWQbO<<KvO%*qQSO<<KvOOQQ<<Kv<<KvO!#]Q,UO<<KvO%QQUO<<KvO%*yQSO<<KvO%+UQ(CjO1G2jO%-aQ(CjO1G2lO%/lQ(CjO1G2WO%1}Q,UO,5>vOOQO-E<Y-E<YO%2XQbO,5>wO%QQUO,5>wOOQO-E<Z-E<ZO%2cQSO1G5nOOQ(CY<<I|<<I|O%2kQ$IUO1G0mO%4uQ$IUO1G0wO%4|Q$IUO1G0wO%7QQ$IUO1G0wO%7XQ$IUO1G0wO%8|Q$IUO1G0wO%9dQ$IUO1G0wO%;wQ$IUO1G0wO%<OQ$IUO1G0wO%>SQ$IUO1G0wO%>ZQ$IUO1G0wO%@RQ$IUO1G0wO%@fQ(CjO<<J`O%AkQ$IUO1G0wO%CaQ$IUO'#J]O%EdQ$IUO1G1]O%EqQ$IUO1G0QO!'RQUO'#FkOOQO'#Jw'#JwOOQO1G1o1G1oO%E{QSO1G1nO%FQQ$IUO,5?POOOO7+'b7+'bOOOO1G/S1G/SOOQ(CY1G4m1G4mO!$uQ,UO7+(YO%F[QSO,5?QO9[QSO,5?QOOQO-E<d-E<dO%FjQSO1G6PO%FjQSO1G6PO%FrQSO1G6PO%F}Q,UO7+'rO%G_Q`O,5?SO%GiQSO,5?SO!#]Q,UO,5?SOOQO-E<f-E<fO%GnQ`O1G6QO%GxQSO1G6QOOQ(CW1G2b1G2bO$LSQSO1G2bOOQ(CW1G2a1G2aO%HQQSO1G2cO!#]Q,UO1G2cOOQ(CW1G2h1G2hO!;xQWO1G2aOBoQSO1G2bO%HVQSO1G2cO%H_QSO1G2bO!$uQ,UO7+*|OOQ(CY1G/[1G/[O%HjQSO1G/[OOQ(CY7+'m7+'mO%HoQ,UO7+'tO%IPQ(CjO<<KQOOQ(CY<<KQ<<KQO!#]Q,UO'#IkO%IsQSO,5@gO!#]Q,UO1G2fOOQQ<<Gx<<GxO=}QSO<<GxO%I{Q(CjO<<IsOOQ(CY<<Is<<IsOOQO,5?],5?]O%JoQSO,5?]O$&vQSO,5?]OOQO-E<o-E<oO%JtQSO1G6XO%JtQSO1G6XO9[QSO1G6XO?oQSO<<LcOOQQ<<Lc<<LcO%J|QSO<<LcO8{Q(C[O<<LcO%KRQSO1G0rOOQQ<<K}<<K}O%!fQ(ChO<<K}OOQQ<<LO<<LOO%!pQ`O<<LOO%KWQWO'#ImO%KcQSO,5@jO!'RQUO,5@jOOQQ1G2|1G2|O%KkQ(C`O'#JfO%LVQUO'#JfO%L^QWO'#E_O%LwQ(C[O'#E_OBYQ(C`O'#E_O(VQWO'#HQOOQO'#Io'#IoO8{Q(C[O'#IoO%M]QWO,5=kOOQQ,5=k,5=kO%MuQWO'#E_O%LmQWO'#E_O%M|QWO'#E_O%NgQWO'#E_O& WQWO'#HQO& iQSO7+(pO& nQSO7+(pOOQQ7+(p7+(pO!#]Q,UO7+(pO%QQUO7+(pO& vQSO7+(pOOQQ7+(s7+(sO8{Q(C[O7+(sO#L_QSO7+(sO8qQSO7+(sO!;xQWO7+(sO&!RQSO,5?[OOQO-E<n-E<nOOQO'#HT'#HTO&!^QSO1G6VO8{Q(C[O<<GnOOQQ<<Gn<<GnO?oQSO<<GnO&!fQSO7++tO&!kQSO7++uOOQQ7+({7+({O&!pQSO7+({O&!uQUO7+({O&!|QSO7+({O%QQUO7++tO%QQUO7++uOOQQ<<Lo<<LoOOQQ<<Lq<<LqOOQQ-E<q-E<qOOQQ1G3p1G3pO&#RQSO,5>VOOQQ,5>X,5>XO&#WQSO1G3vO:sQSO7+&^O!'RQUO7+&^OOQO7+%X7+%XO&#]Q$IUO1G5wO=}QSO7+%XOOQ(CY<<I]<<I]OOQ(CY<<Ir<<IrO=}QSO<<IrOOQO<<Ik<<IkO$7kQ(CjO<<IkO%QQUO<<IkOOQO<<I`<<I`O=}QSO<<I`O&#gQ(C[O<<IkO!;xQWO<<I`O&#rQ(C[O<<IkOBtQWO<<I`O&$QQ(C[O<<IkO&$fQ(C`O<<IkO&$pQWO<<I`OBtQWO<<IkO&$}QSO<<NyO&%VQ(CjO<<NzOOQO7+*S7+*SO:sQSO7+*SOOQQANAbANAbO&%gQSOANAbO!#]Q,UOANAbO!MeQSOANAbO$NWQbOANAbO%QQUOANAbO&%oQ(CjO7+'rO&(QQ(CjO7+'tO&*cQbO1G4cO&*mQ$IUO7+&XO&*zQ$IUO,59nO&,}Q$IUO,5<cO&/QQ$IUO,5<eO&1TQ$IUO,5<sO&2yQ$IUO7+'eO&3WQ$IUO7+'fO&3eQSO,5<VOOQO7+'Y7+'YO&3jQ,UO<<KtOOQO1G4l1G4lO&3qQSO1G4lO&3|QSO1G4lO&4[QSO7++kO&4[QSO7++kO!#]Q,UO1G4nO&4dQ`O1G4nO&4nQSO7++lOOQ(CW7+'|7+'|O$LSQSO7+'}O&4vQ`O7+'}OOQ(CW7+'{7+'{O$LSQSO7+'|O&4}QSO7+'}O!#]Q,UO7+'}OBoQSO7+'|O&5SQ,UO<<NhOOQ(CY7+$v7+$vO&5^Q`O,5?VOOQO-E<i-E<iO&5hQ(ChO7+(QOOQQAN=dAN=dO9[QSO1G4wOOQO1G4w1G4wO&5xQSO1G4wO&5}QSO7++sO&5}QSO7++sO8{Q(C[OANA}O?oQSOANA}OOQQANA}ANA}OOQQANAiANAiOOQQANAjANAjO&6VQSO,5?XOOQO-E<k-E<kO&6bQ$IUO1G6UO#L_QSO,5=lO8qQSO,5=lO&8rQbO'#CfO&8|QWO,5:yO&9WQWO,5:yO&9eQWO,5:yO!;xQWO,5=lOOQO,5?Z,5?ZOOQO-E<m-E<mOOQQ1G3V1G3VO%LVQUO,5<wO%KkQ(C`O,5=lO!NrQ(C`O,5:yO(VQWO,5=lO&9xQWO,5=lO&:ZQWO,5:yOOQQ<<L[<<L[O!#]Q,UO<<L[O& iQSO<<L[O&:tQSO<<L[O%QQUO<<L[OOQQ<<L_<<L_O8{Q(C[O<<L_O#L_QSO<<L_O8qQSO<<L_O&:|QWO1G4vO&;XQSO7++qOOQQAN=YAN=YO8{Q(C[OAN=YOOQQ<= `<= `OOQQ<= a<= aOOQQ<<Lg<<LgO&;aQSO<<LgO&;fQUO<<LgO&;mQSO<= `O&;rQSO<= aOOQQ1G3q1G3qO=}QSO7+)bO&;wQSO<<IxO&<SQ$IUO<<IxOOQO<<Hs<<HsOOQ(CYAN?^AN?^OOQOAN?VAN?VO$7kQ(CjOAN?VOOQOAN>zAN>zO%QQUOAN?VO=}QSOAN>zO&<^Q(C[OAN?VO!;xQWOAN>zO&<iQ(C[OAN?VOBtQWOAN>zO&<wQ(C[OAN?VOOQO<<Mn<<MnOOQQG26|G26|O!#]Q,UOG26|O!MeQSOG26|O&=]QSOG26|O$NWQbOG26|O&=eQ$IUO<<J`O&=rQ$IUO1G2WO&?hQ$IUO1G2jO&AkQ$IUO1G2lO&CnQ$IUO<<KQO&C{Q$IUO<<IsOOQO1G1q1G1qO!$uQ,UOANA`OOQO7+*W7+*WO&DYQSO7+*WO&DeQSO<= VO&DmQ`O7+*YOOQ(CW<<Ki<<KiO$LSQSO<<KiOOQ(CW<<Kh<<KhO&DwQ`O<<KiO$LSQSO<<KhOOQO7+*c7+*cO9[QSO7+*cO&EOQSO<= _OOQQG27iG27iO8{Q(C[OG27iO!'RQUO1G4sO&EWQSO7++pO8{Q(C[O1G3WO#L_QSO1G3WO&E`QWO1G0eO&EjQWO1G0eO8qQSO1G3WO!;xQWO1G3WO(VQWO1G3WO%KkQ(C`O1G3WO$5]Q(C`O1G0eO&EwQWO1G3WO& iQSOANAvOOQQANAvANAvO!#]Q,UOANAvO&FYQSOANAvOOQQANAyANAyO8{Q(C[OANAyO#L_QSOANAyOOQO'#HU'#HUOOQO7+*b7+*bOOQQG22tG22tOOQQANBRANBRO&FbQSOANBROOQQANDzANDzOOQQAND{AND{OOQQ<<L|<<L|O!'RQUOAN?dOOQOG24qG24qO$7kQ(CjOG24qOOQOG24fG24fO%QQUOG24qO=}QSOG24fO&FgQ(C[OG24qO!;xQWOG24fO&FrQ(C[OG24qO!MeQSOLD,hOOQQLD,hLD,hO!#]Q,UOLD,hO&GQQSOLD,hO&GYQ$IUO7+'rO&IOQ$IUO7+'tO&JtQ,UOG26zOOQO<<Mr<<MrOOQ(CWANATANATO$LSQSOANATOOQ(CWANASANASOOQO<<M}<<M}OOQQLD-TLD-TO&KUQ$IUO7+*_OOQO7+(r7+(rO8{Q(C[O7+(rO&K`QWO7+&PO#L_QSO7+(rO8qQSO7+(rO!;xQWO7+(rO(VQWO7+(rOOQQG27bG27bO& iQSOG27bO!#]Q,UOG27bOOQQG27eG27eO8{Q(C[OG27eOOQQG27mG27mO&KjQ$IUOG25OOOQOLD*]LD*]O$7kQ(CjOLD*]OOQOLD*QLD*QO%QQUOLD*]O=}QSOLD*QO&KtQ(C[OLD*]OOQQ!$(!S!$(!SO!MeQSO!$(!SO!#]Q,UO!$(!SO&LPQ(CjOG26zOOQ(CWG26oG26oOOQO<<L^<<L^O8{Q(C[O<<L^O#L_QSO<<L^O8qQSO<<L^O!;xQWO<<L^OOQQLD,|LD,|O& iQSOLD,|OOQQLD-PLD-POOQO!$'Mw!$'MwO$7kQ(CjO!$'MwOOQO!$'Ml!$'MlO%QQUO!$'MwOOQQ!)9En!)9EnO!MeQSO!)9EnOOQOANAxANAxO8{Q(C[OANAxO#L_QSOANAxO8qQSOANAxOOQQ!$(!h!$(!hOOQO!)9Cc!)9CcO$7kQ(CjO!)9CcOOQQ!.K;Y!.K;YO&NbQ$IUOG26zOOQOG27dG27dO8{Q(C[OG27dO#L_QSOG27dOOQO!.K8}!.K8}OOQOLD-OLD-OO8{Q(C[OLD-OOOQO!$(!j!$(!jO!'RQUO'#DvO0rQSO'#ETO'!WQbO'#JbO!'RQUO'#DnO'!_QUO'#DzO!'RQUO'#D|O'!fQbO'#CfO'$|QbO'#CfO'%^QUO,5;RO!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO,5;]O!'RQUO'#IeO''aQSO,5<bO''iQ,UO,5;]O'(|Q,UO,5;]O!'RQUO,5;qO0uQSO'#DSO0uQSO'#DSO!#]Q,UO'#FwO''iQ,UO'#FwO!#]Q,UO'#FyO''iQ,UO'#FyO!#]Q,UO'#GXO''iQ,UO'#GXO!'RQUO,5:fO!'RQUO,5@]O'%^QUO1G0mO')TQ$IUO'#CfO!'RQUO1G1yO!#]Q,UO,5=OO''iQ,UO,5=OO!#]Q,UO,5=QO''iQ,UO,5=QO!#]Q,UO,5<lO''iQ,UO,5<lO'%^QUO1G1zO!'RQUO7+&tO!#]Q,UO1G2WO''iQ,UO1G2WO!#]Q,UO1G2YO''iQ,UO1G2YO'%^QUO7+'fO'%^QUO7+&XO!#]Q,UOANA`O''iQ,UOANA`O')_QSO'#EgO')dQSO'#EgO')lQSO'#FVO')qQSO'#EqO')vQSO'#JqO'*RQSO'#JoO'*^QSO,5;RO'*cQ,UO,5<_O'*jQSO'#GQO'*oQSO'#GQO'*tQSO,5<`O'*|QSO,5;RO'+UQ$IUO1G1YO'+]QSO,5<lO'+bQSO,5<lO'+gQSO,5<nO'+lQSO,5<nO'+qQSO1G1zO'+vQSO1G0mO'+{Q,UO<<KtO',SQ,UO<<KtO7ZQ,UO'#FuO8qQSO'#FtO@jQSO'#EfO!'RQUO,5;nO!/{QSO'#GQO!/{QSO'#GQO!/{QSO'#GSO!/{QSO'#GSO!$uQ,UO7+(YO!$uQ,UO7+(YO$IvQ`O1G2nO$IvQ`O1G2nO!#]Q,UO,5=SO!#]Q,UO,5=S",stateData:"'-[~O'lOS'mOSROS'nRQ~OPYOQYOV!TO^pOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O#o}O$PzO$TfO%_{O%a!OO%c|O%d|O%g!PO%i!QO%l!RO%m!RO%o!SO%|!UO&S!VO&U!WO&W!XO&Y!YO&]!ZO&c![O&i!]O&k!^O&m!_O&o!`O&q!aO'sSO'uTO'xUO(QVO(_[O(liO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO's!bO'uTO'xUO(QVO(_[O(liO~O^!qOl!kO|!lO![!rO!]!pO!^!pO!x;oO!|!vO!}!tO#O!uO#P!sO#S!wO#T!wO't!iO'uTO'xUO(T!jO(_!nO~O'n!xO~OPYXXYX^YXkYXyYXzYX|YX!VYX!eYX!fYX!hYX!lYX#WYX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX'jYX(QYX(`YX(gYX(hYX~O!a$yX~P(dO[!zO'u!|O'v!zO'w!|O~O[!}O'w!|O'x!|O'y!}O~Oq#PO!O#QO(R#QO(S#SO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO's;tO'uTO'xUO(QVO(_[O(liO~O!U#WO!V#TO!S(WP!S(dP~P+pO!W#`O~P`OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!X!cO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO'uTO'xUO(QVO(_[O(liO~O!U#fO!x]O#a#iO#b#fO's;uO!g(aP~P.[O!h#kO's#jO~O!t#oO!x]O%_#pO~O#c#qO~O!a#rO#c#qO~OP$YOX$aOk#}Oy#vOz#wO|#xO!V$^O!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO#u$VO(QVO(`$WO(g#yO(h#zO~O^(UX'j(UX'h(UX!g(UX!S(UX!X(UX%`(UX!a(UX~P1dO#W$bO#z$bOP(VXX(VXk(VXy(VXz(VX|(VX!V(VX!e(VX!h(VX!l(VX#f(VX#g(VX#h(VX#i(VX#j(VX#k(VX#l(VX#m(VX#n(VX#p(VX#r(VX#t(VX#u(VX(Q(VX(`(VX(g(VX(h(VX!X(VX%`(VX~O^(VX!f(VX'j(VX'h(VX!S(VX!g(VXo(VX!a(VX~P3zO#W$bO~O$V$dO$X$cO$`$iO~O!X$jO$TfO$c$kO$e$mO~Oi%POk$qOl$pOm$pOs%QOu%ROw%SO|$xO!X$yO!c%XO!h$uO#b%YO$P%VO$l%TO$n%UO$q%WO's$oO'uTO'xUO'|%OO(Q$rOd'}P~O!h%ZO~O!a%]O~O^%^O'j%^O~O't!iO~P%QO's%eO~O!h%ZO's%eO't!iO'|%OO~Ob%lO!h%ZO's%eO~O#n$PO~Oy%qO!X%nO!h%pO%a%tO's%eO't!iO'uTO'xUO](tP~O!t#oO~O|%vO!X%wO's%eO~O|%vO!X%wO%i%{O's%eO~O's%|O~O#o}O%a!OO%c|O%d|O%g!PO%i!QO%l!RO%m!RO~Oa&VOb&UO!t&SO%_&TO%q&RO~P;cOa&YObwO!X&XO!tvO!x]O#o}O%_{O%c|O%d|O%g!PO%i!QO%l!RO%m!RO%o!SO~O_&]O#W&`O%a&ZO't!iO~P<bO!h&aO!q&eO~O!h#kO~O!XXO~O^%^O'i&mO'j%^O~O^%^O'i&pO'j%^O~O^%^O'i&rO'j%^O~O'hYX!SYXoYX!gYX&QYX!XYX%`YX!aYX~P(dO!['PO!]&xO!^&xO't!iO'uTO'xUO~Ol&vO|&uO!U&yO(T&tO!W(XP!W(fP~P?cOg'SO!X'QO's%eO~Ob'XO!h%ZO's%eO~Oy%qO!h%pO~Ol!kO|!lO!['^O!]']O!^']O!}'`O#O'`O#P'_O#S'bO#T'bO't!iO'uTO'xUO(T!jO(_!nO~O!x;oO!|'aO~P@}O^%^O!a#rO!h%ZO!l'hO#W'fO'j%^O'|%OO(`'dO~Ol!kO|!lO'uTO'xUO(T!jO(_!nO~O!]']O!^']O't!iO~PBtO!['^O!]']O!^']O#S'bO#T'bO't!iO~PBtO!XXO!['^O!]']O!^']O#P'_O#S'bO#T'bO't!iO~PBtO'o'lO'p'lO'q'nO~O[!zO'u'pO'v!zO'w'pO~O[!}O'w'pO'x'pO'y!}O~Oq#PO!O#QO(R#QO(S'tO~O!U'vO!S&|X!S'SX!V&|X!V'SX~P+pO!V'xO!S(WX~OP$YOX$aOk#}Oy#vOz#wO|#xO!V'xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO#u$VO(QVO(`$WO(g#yO(h#zO~O!S(WX~PF_O!S'}O~O!S(cX!V(cX!a(cX!g(cX(`(cX~O#W(cX#c#[X!W(cX~PHeO#W(OO!S(eX!V(eX~O!V(PO!S(dX~O!S(SO~O#W$bO~PHeO!W(TO~P`Oy#vOz#wO|#xO!f#tO!h#uO(QVOP!jaX!jak!ja!V!ja!e!ja!l!ja#f!ja#g!ja#h!ja#i!ja#j!ja#k!ja#l!ja#m!ja#n!ja#p!ja#r!ja#t!ja#u!ja(`!ja(g!ja(h!ja~O^!ja'j!ja'h!ja!S!ja!g!jao!ja!X!ja%`!ja!a!ja~PI{O!g(UO~O|%vO!X%wO!x]O#a(XO#b(WO's%eO~O!a#rO#W(YO(`'dO!V(bX^(bX'j(bX~O!g(bX~PMPO!V(]O!g(aX~O!g(_O~O|%vO!X%wO#b(WO's%eO~Oy(`Oz(aO!f#tO!h#uO!x!wa|!wa~O!t!wa%_!wa!X!wa#a!wa#b!wa's!wa~PNXO!t(eO~OPYOQYOa!gOb!fOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!XXO!csO!hZO!kYO!lYO!mYO!otO!quO!t!eO$P!hO$TfO's!bO'uTO'xUO(QVO(_[O(liO~Oi%POk$qOl$pOm$pOs%QOu%ROw<XO|$xO!X$yO!c=cO!h$uO#b<_O$P%VO$l<ZO$n<]O$q%WO's(iO'uTO'xUO'|%OO(Q$rO~O#c(kO~Oi%POk$qOl$pOm$pOs%QOu%ROw%SO|$xO!X$yO!c%XO!h$uO#b%YO$P%VO$l%TO$n%UO$q%WO's(iO'uTO'xUO'|%OO(Q$rO~Od(ZP~P!$uO!U(oO!g([P~P%QO(T(qO(_[O~O|(sO!h#uO(T(qO(_[O~OP;nOQ;nOa=_Ob!fOikOk;nOlkOmkOskOu;nOw;nO|WO!QkO!RkO!X!cO!c;qO!hZO!k;nO!l;nO!m;nO!o;rO!q;sO!t!eO$P!hO$TfO's)RO'uTO'xUO(QVO(_[O(l=]O~Oz)UO!h#uO~O!V$^O^$ja'j$ja'h$ja!g$ja!S$ja!X$ja%`$ja!a$ja~O#o)YO~P!#]Oy)]O!a)[O!X$WX$S$WX$V$WX$X$WX$`$WX~O!a)[O!X(iX$S(iX$V(iX$X(iX$`(iX~Oy)]O~P!*kOy)]O!X(iX$S(iX$V(iX$X(iX$`(iX~O!X)_O$S)cO$V)^O$X)^O$`)dO~O!U)gO~P!'RO$V$dO$X$cO$`)kO~Og$rXy$rX|$rX!f$rX(g$rX(h$rX~OdfXd$rXgfX!VfX#WfX~P!,aOl)mO~Oq)nO(R)oO(S)qO~Og)zOy)sO|)tO(g)vO(h)xO~Od)rO~P!-jOd){O~Oi%POk$qOl$pOm$pOs%QOu%ROw<XO|$xO!X$yO!c=cO!h$uO#b<_O$P%VO$l<ZO$n<]O$q%WO'uTO'xUO'|%OO(Q$rO~O!U*PO's)|O!g(mP~P!.XO#c*RO~O!h*SO~O!U*XO's*UO!S(nP~P!.XOk*eO|*]O![*cO!]*[O!^*[O!h*SO#S*dO%V*_O't!iO(T!jO~O!W*bO~P!0_O!f#tOg(PXy(PX|(PX(g(PX(h(PX!V(PX#W(PX~Od(PX#x(PX~P!1WOg*hO#W*gOd(OX!V(OX~O!V*iOd'}X~O's%|Od'}P~O!h*pO~O's(iO~O|%vO!U#fO!X%wO!x]O#a#iO#b#fO's%eO!g(aP~O!a#rO#c*tO~OP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO#u$VO(QVO(`$WO(g#yO(h#zO~O^!ba!V!ba'j!ba'h!ba!S!ba!g!bao!ba!X!ba%`!ba!a!ba~P!3jOy#vOz#wO|#xO!f#tO!h#uO(QVOP!naX!nak!na!V!na!e!na!l!na#f!na#g!na#h!na#i!na#j!na#k!na#l!na#m!na#n!na#p!na#r!na#t!na#u!na(`!na(g!na(h!na~O^!na'j!na'h!na!S!na!g!nao!na!X!na%`!na!a!na~P!6TOy#vOz#wO|#xO!f#tO!h#uO(QVOP!paX!pak!pa!V!pa!e!pa!l!pa#f!pa#g!pa#h!pa#i!pa#j!pa#k!pa#l!pa#m!pa#n!pa#p!pa#r!pa#t!pa#u!pa(`!pa(g!pa(h!pa~O^!pa'j!pa'h!pa!S!pa!g!pao!pa!X!pa%`!pa!a!pa~P!8nOg*|O!X'QO%`*{O'|%OO~O!a+OO!X'{X^'{X!V'{X'j'{X~O!h%ZO'|%OO~O!h%ZO's%eO'|%OO~O!a#rO#c(kO~O%a+[O's+WO'uTO'xUO!W(uP~O!V+]O](tX~O(T(qO~OX+aO~O]+bO~O!X%nO's%eO't!iO](tP~O|%vO!U+fO!V(PO!X%wO's%eO!S(dP~Ol&|O|+hO!U+gO'uTO'xUO(T(qO~O!W(fP~P!>RO!V+iO^(qX'j(qX~O#W+mO'|%OO~Og+pO!X$yO'|%OO~O!X+rO~Oy+tO!XXO~O!t+yO~Ob,OO~O's#jO!W(sP~Ob%lO~O%a!OO's%|O~P<bOX,UO],TO~OPYOQYOaxObwOikOkYOlkOmkOskOuYOwYO|WO!QkO!RkO!csO!hZO!kYO!lYO!mYO!otO!quO!tvO!x]O$TfO%_{O'uTO'xUO(QVO(_[O(liO~O!X!cO$P!hO's!bO~P!@fO],TO^%^O'j%^O~O^,YO#o,[O%c,[O%d,[O~P%QO!h&aO~O&S,aO~O!X,cO~O&e,eO&g,fOP&baQ&baV&ba^&baa&bab&bai&bak&bal&bam&bas&bau&baw&ba|&ba!Q&ba!R&ba!X&ba!c&ba!h&ba!k&ba!l&ba!m&ba!o&ba!q&ba!t&ba!x&ba#o&ba$P&ba$T&ba%_&ba%a&ba%c&ba%d&ba%g&ba%i&ba%l&ba%m&ba%o&ba%|&ba&S&ba&U&ba&W&ba&Y&ba&]&ba&c&ba&i&ba&k&ba&m&ba&o&ba&q&ba'h&ba's&ba'u&ba'x&ba(Q&ba(_&ba(l&ba!W&ba&Z&ba_&ba&`&ba~O's,kO~O!V{X!V!_X!W{X!W!_X!a{X!a!_X!h!_X#W{X'|!_X~O!a,pO#W,oO!V#`X!V(YX!W#`X!W(YX!a(YX!h(YX'|(YX~O!a,rO!h%ZO'|%OO!V!ZX!W!ZX~Ol!kO|!lO'uTO'xUO(T!jO~OP;nOQ;nOa=_Ob!fOikOk;nOlkOmkOskOu;nOw;nO|WO!QkO!RkO!X!cO!c;qO!hZO!k;nO!l;nO!m;nO!o;rO!q;sO!t!eO$P!hO$TfO'uTO'xUO(QVO(_[O(l=]O~O's<dO~P!I{O!V,vO!W(XX~O!W,xO~O!a,pO#W,oO!V#`X!W#`X~O!V,yO!W(fX~O!W,{O~O!],|O!^,|O't!iO~P!IjO!W-PO~P'TOg-SO!X'QO~O!S-XO~Ol!wa![!wa!]!wa!^!wa!|!wa!}!wa#O!wa#P!wa#S!wa#T!wa't!wa'u!wa'x!wa(T!wa(_!wa~PNXO^%^O!a#rO!h%ZO!l-^O#W-[O'j%^O'|%OO(`'dO~O!]-`O!^-`O't!iO~PBtO![-bO!]-`O!^-`O#S-cO#T-cO't!iO~PBtO![-bO!]-`O!^-`O#P-dO#S-cO#T-cO't!iO~PBtO![-bO!]-`O!^-`O!}-eO#O-eO#P-dO#S-cO#T-cO't!iO~PBtO^%^O#W-[O'j%^O~O^%^O!a#rO#W-[O'j%^O~O^%^O!a#rO!l-^O#W-[O'j%^O(`'dO~O'o'lO'p'lO'q-jO~Oo-kO~O!S&|a!V&|a~P!3jO!U-oO!S&|X!V&|X~P%QO!V'xO!S(Wa~O!S(Wa~PF_O!V(PO!S(da~O|%vO!U-sO!X%wO's%eO!S'SX!V'SX~O!V(]O!g(aa~O|%vO!X%wO#b-vO's%eO~O#W-xO!V(ba!g(ba^(ba'j(ba~O!a#rO~P#&hO|%vO!U-{O!X%wO!x]O#a-}O#b-{O's%eO!V'UX!g'UX~Oz.RO!h#uO~Og.UO!X'QO%`.TO'|%OO~O^#Zi!V#Zi'j#Zi'h#Zi!S#Zi!g#Zio#Zi!X#Zi%`#Zi!a#Zi~P!3jOg=iOy)sO|)tO(g)vO(h)xO~O#c#Va^#Va#W#Va'j#Va!V#Va!g#Va!X#Va!S#Va~P#(yO#c(PXP(PXX(PX^(PXk(PXz(PX!e(PX!h(PX!l(PX#f(PX#g(PX#h(PX#i(PX#j(PX#k(PX#l(PX#m(PX#n(PX#p(PX#r(PX#t(PX#u(PX'j(PX(Q(PX(`(PX!g(PX!S(PX'h(PXo(PX!X(PX%`(PX!a(PX~P!1WO!V._Od(ZX~P!-jOd.aO~O!V.bO!g([X~P!3jO!g.eO~O!S.gO~OP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO(QVOX#ei^#eik#ei!V#ei!e#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei'j#ei(`#ei(g#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~O#f#ei~P#,uO#f#{O~P#,uOP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O(QVOX#ei^#ei!V#ei!e#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei'j#ei(`#ei(g#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~Ok#ei~P#/gOk#}O~P#/gOP$YOk#}Oy#vOz#wO|#xO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO(QVO^#ei!V#ei#p#ei#r#ei#t#ei#u#ei'j#ei(`#ei(g#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~OX#ei!e#ei#k#ei#l#ei#m#ei#n#ei~P#2XOX$aO!e$PO#k$PO#l$PO#m$`O#n$PO~P#2XOP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO(QVO^#ei!V#ei#r#ei#t#ei#u#ei'j#ei(`#ei(h#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~O(g#ei~P#5YO(g#yO~P#5YOP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO(QVO(g#yO^#ei!V#ei#t#ei#u#ei'j#ei(`#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~O(h#ei~P#7zO(h#zO~P#7zOP$YOX$aOk#}Oy#vOz#wO|#xO!e$PO!f#tO!h#uO!l$YO#f#{O#g#|O#h#|O#i#|O#j$OO#k$PO#l$PO#m$`O#n$PO#p$QO#r$SO#t$UO(QVO(g#yO(h#zO~O^#ei!V#ei#u#ei'j#ei(`#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~P#:lOPYXXYXkYXyYXzYX|YX!eYX!fYX!hYX!lYX#WYX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX(QYX(`YX(gYX(hYX!VYX!WYX~O#xYX~P#=VOP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O#r<OO#t<QO#u<RO(QVO(`$WO(g#yO(h#zO~O#x.iO~P#?dOP(VXX(VXk(VXy(VXz(VX|(VX!e(VX!f(VX!h(VX!l(VX#f(VX#g(VX#h(VX#i(VX#j(VX#k(VX#l(VX#m(VX#p(VX#r(VX#t(VX#u(VX(Q(VX(`(VX(g(VX(h(VX!V(VX~O#W<WO#z<WO#n(VX#x(VX!W(VX~P#AbO^'Xa!V'Xa'j'Xa'h'Xa!g'Xa!S'Xao'Xa!X'Xa%`'Xa!a'Xa~P!3jOP#eiX#ei^#eik#eiz#ei!V#ei!e#ei!f#ei!h#ei!l#ei#f#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei'j#ei(Q#ei(`#ei'h#ei!S#ei!g#eio#ei!X#ei%`#ei!a#ei~P#(yO^#yi!V#yi'j#yi'h#yi!S#yi!g#yio#yi!X#yi%`#yi!a#yi~P!3jO$V.nO$X.nO~O$V.oO$X.oO~O!a)[O#W.pO!X$]X$S$]X$V$]X$X$]X$`$]X~O!U.qO~O!X)_O$S.sO$V)^O$X)^O$`.tO~O!V<SO!W(UX~P#?dO!W.uO~O!a)[O$`(iX~O$`.wO~Oq)nO(R)oO(S.zO~Ol.}O!S/OO'uTO'xUO~O!VcX!acX!gcX!g$rX(`cX~P!,aO!g/UO~P#(yO!V/VO!a#rO(`'dO!g(mX~O!g/[O~O!U*PO's%eO!g(mP~O#c/^O~O!S$rX!V$rX!a$yX~P!,aO!V/_O!S(nX~P#(yO!a/aO~O!S/cO~Ok/gO!a#rO!h%ZO'|%OO(`'dO~O's/iO~O!a+OO~O^%^O!V/mO'j%^O~O!W/oO~P!0_O!]/pO!^/pO't!iO(T!jO~O|/rO(T!jO~O#S/sO~O's%|Od'^X!V'^X~O!V*iOd'}a~Od/xO~Oy/yOz/yO|/zOgva(gva(hva!Vva#Wva~Odva#xva~P#M{Oy)sO|)tOg$ka(g$ka(h$ka!V$ka#W$ka~Od$ka#x$ka~P#NqOy)sO|)tOg$ma(g$ma(h$ma!V$ma#W$ma~Od$ma#x$ma~P$ dO#c/|O~Od${a!V${a#W${a#x${a~P!-jO#c0PO~Oy#vOz#wO|#xO!f#tO!h#uO(QVOP!niX!nik!ni!V!ni!e!ni!l!ni#f!ni#g!ni#h!ni#i!ni#j!ni#k!ni#l!ni#m!ni#n!ni#p!ni#r!ni#t!ni#u!ni(`!ni(g!ni(h!ni~O^!ni'j!ni'h!ni!S!ni!g!nio!ni!X!ni%`!ni!a!ni~P$!qOg.UO!X'QO%`.TO~Oi0WO's0VO~P!.[O!a+OO!X'{a^'{a!V'{a'j'{a~O#c0^O~OXYX!VcX!WcX~O!V0_O!W(uX~O!W0aO~OX0bO~O's+WO'uTO'xUO~O!X%nO's%eO]'fX!V'fX~O!V+]O](ta~O!g0gO~P!3jOX0jO~O]0kO~O!V+iO^(qa'j(qa~O#W0qO~Og0tO!X$yO~O(T(qO!W(rP~Og0}O!X0zO%`0|O'|%OO~OX1XO!V1VO!W(sX~O!W1YO~O]1[O^%^O'j%^O~O's#jO'uTO'xUO~O#W$bO#n1_O#z$bO&Q1`O^(VX~P#AbO#W$bO#n1_O&Q1`O~O^1aO~P%QO^1cO~O&Z1gOP&XiQ&XiV&Xi^&Xia&Xib&Xii&Xik&Xil&Xim&Xis&Xiu&Xiw&Xi|&Xi!Q&Xi!R&Xi!X&Xi!c&Xi!h&Xi!k&Xi!l&Xi!m&Xi!o&Xi!q&Xi!t&Xi!x&Xi#o&Xi$P&Xi$T&Xi%_&Xi%a&Xi%c&Xi%d&Xi%g&Xi%i&Xi%l&Xi%m&Xi%o&Xi%|&Xi&S&Xi&U&Xi&W&Xi&Y&Xi&]&Xi&c&Xi&i&Xi&k&Xi&m&Xi&o&Xi&q&Xi'h&Xi's&Xi'u&Xi'x&Xi(Q&Xi(_&Xi(l&Xi!W&Xi_&Xi&`&Xi~O_1mO!W1kO&`1lO~P`O!XXO!h1oO~O&g,fOP&biQ&biV&bi^&bia&bib&bii&bik&bil&bim&bis&biu&biw&bi|&bi!Q&bi!R&bi!X&bi!c&bi!h&bi!k&bi!l&bi!m&bi!o&bi!q&bi!t&bi!x&bi#o&bi$P&bi$T&bi%_&bi%a&bi%c&bi%d&bi%g&bi%i&bi%l&bi%m&bi%o&bi%|&bi&S&bi&U&bi&W&bi&Y&bi&]&bi&c&bi&i&bi&k&bi&m&bi&o&bi&q&bi'h&bi's&bi'u&bi'x&bi(Q&bi(_&bi(l&bi!W&bi&Z&bi_&bi&`&bi~O!S1uO~O!V!Za!W!Za~P#?dOl!kO|!lO!U1{O(T!jO!V&}X!W&}X~P?cO!V,vO!W(Xa~O!V'TX!W'TX~P!>RO!V,yO!W(fa~O!W2SO~P'TO^%^O#W2]O'j%^O~O^%^O!a#rO#W2]O'j%^O~O^%^O!a#rO!h%ZO!l2aO#W2]O'j%^O'|%OO(`'dO~O!]2bO!^2bO't!iO~PBtO![2eO!]2bO!^2bO#S2fO#T2fO't!iO~PBtO![2eO!]2bO!^2bO#P2gO#S2fO#T2fO't!iO~PBtO^%^O!a#rO!l2aO#W2]O'j%^O(`'dO~O^%^O'j%^O~P!3jO!V$^Oo$ja~O!S&|i!V&|i~P!3jO!V'xO!S(Wi~O!V(PO!S(di~O!S(ei!V(ei~P!3jO!V(]O!g(ai~O!V(bi!g(bi^(bi'j(bi~P!3jO#W2kO!V(bi!g(bi^(bi'j(bi~O|%vO!X%wO!x]O#a2nO#b2mO's%eO~O|%vO!X%wO#b2mO's%eO~Og2uO!X'QO%`2tO~Og2uO!X'QO%`2tO'|%OO~O#cvaPvaXva^vakva!eva!fva!hva!lva#fva#gva#hva#iva#jva#kva#lva#mva#nva#pva#rva#tva#uva'jva(Qva(`va!gva!Sva'hvaova!Xva%`va!ava~P#M{O#c$kaP$kaX$ka^$kak$kaz$ka!e$ka!f$ka!h$ka!l$ka#f$ka#g$ka#h$ka#i$ka#j$ka#k$ka#l$ka#m$ka#n$ka#p$ka#r$ka#t$ka#u$ka'j$ka(Q$ka(`$ka!g$ka!S$ka'h$kao$ka!X$ka%`$ka!a$ka~P#NqO#c$maP$maX$ma^$mak$maz$ma!e$ma!f$ma!h$ma!l$ma#f$ma#g$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#p$ma#r$ma#t$ma#u$ma'j$ma(Q$ma(`$ma!g$ma!S$ma'h$mao$ma!X$ma%`$ma!a$ma~P$ dO#c${aP${aX${a^${ak${az${a!V${a!e${a!f${a!h${a!l${a#f${a#g${a#h${a#i${a#j${a#k${a#l${a#m${a#n${a#p${a#r${a#t${a#u${a'j${a(Q${a(`${a!g${a!S${a'h${a#W${ao${a!X${a%`${a!a${a~P#(yO^#Zq!V#Zq'j#Zq'h#Zq!S#Zq!g#Zqo#Zq!X#Zq%`#Zq!a#Zq~P!3jOd'OX!V'OX~P!$uO!V._Od(Za~O!U2}O!V'PX!g'PX~P%QO!V.bO!g([a~O!V.bO!g([a~P!3jO!S3QO~O#x!ja!W!ja~PI{O#x!ba!V!ba!W!ba~P#?dO#x!na!W!na~P!6TO#x!pa!W!pa~P!8nO!X3dO$TfO$^3eO~O!W3iO~Oo3jO~P#(yO^$gq!V$gq'j$gq'h$gq!S$gq!g$gqo$gq!X$gq%`$gq!a$gq~P!3jO!S3kO~Ol.}O'uTO'xUO~Oy)sO|)tO(h)xOg%Wi(g%Wi!V%Wi#W%Wi~Od%Wi#x%Wi~P$HbOy)sO|)tOg%Yi(g%Yi(h%Yi!V%Yi#W%Yi~Od%Yi#x%Yi~P$ITO(`$WO~P#(yO!U3nO's%eO!V'YX!g'YX~O!V/VO!g(ma~O!V/VO!a#rO!g(ma~O!V/VO!a#rO(`'dO!g(ma~Od$ti!V$ti#W$ti#x$ti~P!-jO!U3vO's*UO!S'[X!V'[X~P!.XO!V/_O!S(na~O!V/_O!S(na~P#(yO!a#rO~O!a#rO#n4OO~Ok4RO!a#rO(`'dO~Od(Oi!V(Oi~P!-jO#W4UOd(Oi!V(Oi~P!-jO!g4XO~O^$hq!V$hq'j$hq'h$hq!S$hq!g$hqo$hq!X$hq%`$hq!a$hq~P!3jO!V4]O!X(oX~P#(yO!f#tO~P3zO!X$rX%TYX^$rX!V$rX'j$rX~P!,aO%T4_OghXyhX|hX!XhX(ghX(hhX^hX!VhX'jhX~O%T4_O~O%a4fO's+WO'uTO'xUO!V'eX!W'eX~O!V0_O!W(ua~OX4jO~O]4kO~O!S4oO~O^%^O'j%^O~P#(yO!X$yO~P#(yO!V4tO#W4vO!W(rX~O!W4wO~Ol!kO|4yO![5WO!]4}O!^4}O!x;oO!|5VO!}5UO#O5UO#P5TO#S5SO#T!wO't!iO'uTO'xUO(T!jO(_!nO~O!W5RO~P%#XOg5]O!X0zO%`5[O~Og5]O!X0zO%`5[O'|%OO~O's#jO!V'dX!W'dX~O!V1VO!W(sa~O'uTO'xUO(T5fO~O]5jO~O!g5mO~P%QO^5oO~O^5oO~P%QO#n5qO&Q5rO~PMPO_1mO!W5vO&`1lO~P`O!a5xO~O!a5zO!V(Yi!W(Yi!a(Yi!h(Yi'|(Yi~O!V#`i!W#`i~P#?dO#W5{O!V#`i!W#`i~O!V!Zi!W!Zi~P#?dO^%^O#W6UO'j%^O~O^%^O!a#rO#W6UO'j%^O~O^%^O!a#rO!l6ZO#W6UO'j%^O(`'dO~O!h%ZO'|%OO~P%(fO!]6[O!^6[O't!iO~PBtO![6_O!]6[O!^6[O#S6`O#T6`O't!iO~PBtO!V(]O!g(aq~O!V(bq!g(bq^(bq'j(bq~P!3jO|%vO!X%wO#b6dO's%eO~O!X'QO%`6gO~Og6jO!X'QO%`6gO~O#c%WiP%WiX%Wi^%Wik%Wiz%Wi!e%Wi!f%Wi!h%Wi!l%Wi#f%Wi#g%Wi#h%Wi#i%Wi#j%Wi#k%Wi#l%Wi#m%Wi#n%Wi#p%Wi#r%Wi#t%Wi#u%Wi'j%Wi(Q%Wi(`%Wi!g%Wi!S%Wi'h%Wio%Wi!X%Wi%`%Wi!a%Wi~P$HbO#c%YiP%YiX%Yi^%Yik%Yiz%Yi!e%Yi!f%Yi!h%Yi!l%Yi#f%Yi#g%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#p%Yi#r%Yi#t%Yi#u%Yi'j%Yi(Q%Yi(`%Yi!g%Yi!S%Yi'h%Yio%Yi!X%Yi%`%Yi!a%Yi~P$ITO#c$tiP$tiX$ti^$tik$tiz$ti!V$ti!e$ti!f$ti!h$ti!l$ti#f$ti#g$ti#h$ti#i$ti#j$ti#k$ti#l$ti#m$ti#n$ti#p$ti#r$ti#t$ti#u$ti'j$ti(Q$ti(`$ti!g$ti!S$ti'h$ti#W$tio$ti!X$ti%`$ti!a$ti~P#(yOd'Oa!V'Oa~P!-jO!V'Pa!g'Pa~P!3jO!V.bO!g([i~O#x#Zi!V#Zi!W#Zi~P#?dOP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO(QVOX#eik#ei!e#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei#x#ei(`#ei(g#ei(h#ei!V#ei!W#ei~O#f#ei~P%2xO#f;wO~P%2xOP$YOy#vOz#wO|#xO!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO(QVOX#ei!e#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei#x#ei(`#ei(g#ei(h#ei!V#ei!W#ei~Ok#ei~P%5TOk;yO~P%5TOP$YOk;yOy#vOz#wO|#xO!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO(QVO#p#ei#r#ei#t#ei#u#ei#x#ei(`#ei(g#ei(h#ei!V#ei!W#ei~OX#ei!e#ei#k#ei#l#ei#m#ei#n#ei~P%7`OX<VO!e;{O#k;{O#l;{O#m<UO#n;{O~P%7`OP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O(QVO#r#ei#t#ei#u#ei#x#ei(`#ei(h#ei!V#ei!W#ei~O(g#ei~P%9zO(g#yO~P%9zOP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O#r<OO(QVO(g#yO#t#ei#u#ei#x#ei(`#ei!V#ei!W#ei~O(h#ei~P%<VO(h#zO~P%<VOP$YOX<VOk;yOy#vOz#wO|#xO!e;{O!f#tO!h#uO!l$YO#f;wO#g;xO#h;xO#i;xO#j;zO#k;{O#l;{O#m<UO#n;{O#p;|O#r<OO#t<QO(QVO(g#yO(h#zO~O#u#ei#x#ei(`#ei!V#ei!W#ei~P%>bO^#vy!V#vy'j#vy'h#vy!S#vy!g#vyo#vy!X#vy%`#vy!a#vy~P!3jOg=jOy)sO|)tO(g)vO(h)xO~OP#eiX#eik#eiz#ei!e#ei!f#ei!h#ei!l#ei#f#ei#g#ei#h#ei#i#ei#j#ei#k#ei#l#ei#m#ei#n#ei#p#ei#r#ei#t#ei#u#ei#x#ei(Q#ei(`#ei!V#ei!W#ei~P%AYO!f#tOP(PXX(PXg(PXk(PXy(PXz(PX|(PX!e(PX!h(PX!l(PX#f(PX#g(PX#h(PX#i(PX#j(PX#k(PX#l(PX#m(PX#n(PX#p(PX#r(PX#t(PX#u(PX#x(PX(Q(PX(`(PX(g(PX(h(PX!V(PX!W(PX~O#x#yi!V#yi!W#yi~P#?dO#x!ni!W!ni~P$!qO!W6vO~O!V'Xa!W'Xa~P#?dO!a#rO(`'dO!V'Ya!g'Ya~O!V/VO!g(mi~O!V/VO!a#rO!g(mi~Od$tq!V$tq#W$tq#x$tq~P!-jO!S'[a!V'[a~P#(yO!a6}O~O!V/_O!S(ni~P#(yO!V/_O!S(ni~O!S7RO~O!a#rO#n7WO~Ok7XO!a#rO(`'dO~O!S7ZO~Od$vq!V$vq#W$vq#x$vq~P!-jO^$hy!V$hy'j$hy'h$hy!S$hy!g$hyo$hy!X$hy%`$hy!a$hy~P!3jO!V4]O!X(oa~O^#Zy!V#Zy'j#Zy'h#Zy!S#Zy!g#Zyo#Zy!X#Zy%`#Zy!a#Zy~P!3jOX7`O~O!V0_O!W(ui~O]7fO~O!a5zO~O(T(qO!V'aX!W'aX~O!V4tO!W(ra~O!h%ZO'|%OO^(YX!a(YX!l(YX#W(YX'j(YX(`(YX~O's7oO~P.[O!x;oO!|7rO!}7qO#O7qO#P7pO#S'bO#T'bO~PBtO^%^O!a#rO!l'hO#W'fO'j%^O(`'dO~O!W7vO~P%#XOl!kO'uTO'xUO(T!jO(_!nO~O|7wO~P%MdO![7{O!]7zO!^7zO#P7pO#S'bO#T'bO't!iO~PBtO![7{O!]7zO!^7zO!}7|O#O7|O#P7pO#S'bO#T'bO't!iO~PBtO!]7zO!^7zO't!iO(T!jO(_!nO~O!X0zO~O!X0zO%`8OO~Og8RO!X0zO%`8OO~OX8WO!V'da!W'da~O!V1VO!W(si~O!g8[O~O!g8]O~O!g8^O~O!g8^O~P%QO^8`O~O!a8cO~O!g8dO~O!V(ei!W(ei~P#?dO^%^O#W8lO'j%^O~O^%^O!a#rO#W8lO'j%^O~O^%^O!a#rO!l8pO#W8lO'j%^O(`'dO~O!h%ZO'|%OO~P&$QO!]8qO!^8qO't!iO~PBtO!V(]O!g(ay~O!V(by!g(by^(by'j(by~P!3jO!X'QO%`8uO~O#c$tqP$tqX$tq^$tqk$tqz$tq!V$tq!e$tq!f$tq!h$tq!l$tq#f$tq#g$tq#h$tq#i$tq#j$tq#k$tq#l$tq#m$tq#n$tq#p$tq#r$tq#t$tq#u$tq'j$tq(Q$tq(`$tq!g$tq!S$tq'h$tq#W$tqo$tq!X$tq%`$tq!a$tq~P#(yO#c$vqP$vqX$vq^$vqk$vqz$vq!V$vq!e$vq!f$vq!h$vq!l$vq#f$vq#g$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#p$vq#r$vq#t$vq#u$vq'j$vq(Q$vq(`$vq!g$vq!S$vq'h$vq#W$vqo$vq!X$vq%`$vq!a$vq~P#(yO!V'Pi!g'Pi~P!3jO#x#Zq!V#Zq!W#Zq~P#?dOy/yOz/yO|/zOPvaXvagvakva!eva!fva!hva!lva#fva#gva#hva#iva#jva#kva#lva#mva#nva#pva#rva#tva#uva#xva(Qva(`va(gva(hva!Vva!Wva~Oy)sO|)tOP$kaX$kag$kak$kaz$ka!e$ka!f$ka!h$ka!l$ka#f$ka#g$ka#h$ka#i$ka#j$ka#k$ka#l$ka#m$ka#n$ka#p$ka#r$ka#t$ka#u$ka#x$ka(Q$ka(`$ka(g$ka(h$ka!V$ka!W$ka~Oy)sO|)tOP$maX$mag$mak$maz$ma!e$ma!f$ma!h$ma!l$ma#f$ma#g$ma#h$ma#i$ma#j$ma#k$ma#l$ma#m$ma#n$ma#p$ma#r$ma#t$ma#u$ma#x$ma(Q$ma(`$ma(g$ma(h$ma!V$ma!W$ma~OP${aX${ak${az${a!e${a!f${a!h${a!l${a#f${a#g${a#h${a#i${a#j${a#k${a#l${a#m${a#n${a#p${a#r${a#t${a#u${a#x${a(Q${a(`${a!V${a!W${a~P%AYO#x$gq!V$gq!W$gq~P#?dO#x$hq!V$hq!W$hq~P#?dO!W9PO~O#x9QO~P!-jO!a#rO!V'Yi!g'Yi~O!a#rO(`'dO!V'Yi!g'Yi~O!V/VO!g(mq~O!S'[i!V'[i~P#(yO!V/_O!S(nq~O!S9WO~P#(yO!S9WO~Od(Oy!V(Oy~P!-jO!V'_a!X'_a~P#(yO!X%Sq^%Sq!V%Sq'j%Sq~P#(yOX9]O~O!V0_O!W(uq~O#W9aO!V'aa!W'aa~O!V4tO!W(ri~P#?dOPYXXYXkYXyYXzYX|YX!SYX!VYX!eYX!fYX!hYX!lYX#WYX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX(QYX(`YX(gYX(hYX~O!a%QX#n%QX~P&6lO#S-cO#T-cO~PBtO#P9eO#S-cO#T-cO~PBtO!}9fO#O9fO#P9eO#S-cO#T-cO~PBtO!]9iO!^9iO't!iO(T!jO(_!nO~O![9lO!]9iO!^9iO#P9eO#S-cO#T-cO't!iO~PBtO!X0zO%`9oO~O'uTO'xUO(T9tO~O!V1VO!W(sq~O!g9wO~O!g9wO~P%QO!g9yO~O!g9zO~O#W9|O!V#`y!W#`y~O!V#`y!W#`y~P#?dO^%^O#W:QO'j%^O~O^%^O!a#rO#W:QO'j%^O~O^%^O!a#rO!l:UO#W:QO'j%^O(`'dO~O!X'QO%`:XO~O#x#vy!V#vy!W#vy~P#?dOP$tiX$tik$tiz$ti!e$ti!f$ti!h$ti!l$ti#f$ti#g$ti#h$ti#i$ti#j$ti#k$ti#l$ti#m$ti#n$ti#p$ti#r$ti#t$ti#u$ti#x$ti(Q$ti(`$ti!V$ti!W$ti~P%AYOy)sO|)tO(h)xOP%WiX%Wig%Wik%Wiz%Wi!e%Wi!f%Wi!h%Wi!l%Wi#f%Wi#g%Wi#h%Wi#i%Wi#j%Wi#k%Wi#l%Wi#m%Wi#n%Wi#p%Wi#r%Wi#t%Wi#u%Wi#x%Wi(Q%Wi(`%Wi(g%Wi!V%Wi!W%Wi~Oy)sO|)tOP%YiX%Yig%Yik%Yiz%Yi!e%Yi!f%Yi!h%Yi!l%Yi#f%Yi#g%Yi#h%Yi#i%Yi#j%Yi#k%Yi#l%Yi#m%Yi#n%Yi#p%Yi#r%Yi#t%Yi#u%Yi#x%Yi(Q%Yi(`%Yi(g%Yi(h%Yi!V%Yi!W%Yi~O#x$hy!V$hy!W$hy~P#?dO#x#Zy!V#Zy!W#Zy~P#?dO!a#rO!V'Yq!g'Yq~O!V/VO!g(my~O!S'[q!V'[q~P#(yO!S:`O~P#(yO!V0_O!W(uy~O!V4tO!W(rq~O#S2fO#T2fO~PBtO#P:gO#S2fO#T2fO~PBtO!]:kO!^:kO't!iO(T!jO(_!nO~O!X0zO%`:nO~O!g:qO~O^%^O#W:vO'j%^O~O^%^O!a#rO#W:vO'j%^O~O!X'QO%`:{O~OP$tqX$tqk$tqz$tq!e$tq!f$tq!h$tq!l$tq#f$tq#g$tq#h$tq#i$tq#j$tq#k$tq#l$tq#m$tq#n$tq#p$tq#r$tq#t$tq#u$tq#x$tq(Q$tq(`$tq!V$tq!W$tq~P%AYOP$vqX$vqk$vqz$vq!e$vq!f$vq!h$vq!l$vq#f$vq#g$vq#h$vq#i$vq#j$vq#k$vq#l$vq#m$vq#n$vq#p$vq#r$vq#t$vq#u$vq#x$vq(Q$vq(`$vq!V$vq!W$vq~P%AYOd%[!Z!V%[!Z#W%[!Z#x%[!Z~P!-jO!V'aq!W'aq~P#?dO#S6`O#T6`O~PBtO!V#`!Z!W#`!Z~P#?dO^%^O#W;ZO'j%^O~O#c%[!ZP%[!ZX%[!Z^%[!Zk%[!Zz%[!Z!V%[!Z!e%[!Z!f%[!Z!h%[!Z!l%[!Z#f%[!Z#g%[!Z#h%[!Z#i%[!Z#j%[!Z#k%[!Z#l%[!Z#m%[!Z#n%[!Z#p%[!Z#r%[!Z#t%[!Z#u%[!Z'j%[!Z(Q%[!Z(`%[!Z!g%[!Z!S%[!Z'h%[!Z#W%[!Zo%[!Z!X%[!Z%`%[!Z!a%[!Z~P#(yOP%[!ZX%[!Zk%[!Zz%[!Z!e%[!Z!f%[!Z!h%[!Z!l%[!Z#f%[!Z#g%[!Z#h%[!Z#i%[!Z#j%[!Z#k%[!Z#l%[!Z#m%[!Z#n%[!Z#p%[!Z#r%[!Z#t%[!Z#u%[!Z#x%[!Z(Q%[!Z(`%[!Z!V%[!Z!W%[!Z~P%AYOo(UX~P1dO't!iO~P!'RO!ScX!VcX#WcX~P&6lOPYXXYXkYXyYXzYX|YX!VYX!VcX!eYX!fYX!hYX!lYX#WYX#WcX#ccX#fYX#gYX#hYX#iYX#jYX#kYX#lYX#mYX#nYX#pYX#rYX#tYX#uYX#zYX(QYX(`YX(gYX(hYX~O!acX!gYX!gcX(`cX~P'!sOP;nOQ;nOa=_Ob!fOikOk;nOlkOmkOskOu;nOw;nO|WO!QkO!RkO!XXO!c;qO!hZO!k;nO!l;nO!m;nO!o;rO!q;sO!t!eO$P!hO$TfO's)RO'uTO'xUO(QVO(_[O(l=]O~O!V<SO!W$ja~Oi%POk$qOl$pOm$pOs%QOu%ROw<YO|$xO!X$yO!c=dO!h$uO#b<`O$P%VO$l<[O$n<^O$q%WO's(iO'uTO'xUO'|%OO(Q$rO~O#o)YO~P''iO!WYX!WcX~P'!sO#c;vO~O!a#rO#c;vO~O#W<WO~O#n;{O~O#W<bO!V(eX!W(eX~O#W<WO!V(cX!W(cX~O#c<cO~Od<eO~P!-jO#c<jO~O#c<kO~O!a#rO#c<lO~O!a#rO#c<cO~O#x<mO~P#?dO#c<nO~O#c<oO~O#c<pO~O#c<qO~O#c<rO~O#c<sO~O#x<tO~P!-jO#x<uO~P!-jO$T~!f!|#O#P#S#a#b#m(l$l$n$q%T%_%`%a%g%i%l%m%o%q~'nR$T(l#g!R'l't#hl#f#iky'm(T'm's$V$X$V~",goto:"$/X(yPPPP(zP(}P)_P+a/fPPPP6iPP7OP<|@mPAQPAQPPPAQPBpPAQPAQPAQPBtPPByPCdPH`PPPHdPPPPHdKfPPPKlMlPHdP!!SPPPP!$eHdPPPHdPHdP!&vHdP!*]!+_!+dP!,U!,Y!,UPPPP!/f!1kPP!1t!3OP!+_HdHd!6b!9m!>v!>v!BnPPP!BuHdPPPPPPPPPPP!FTP!GiPPHd!HyPHdPHdHdHdHdPHd!J`PP!MiP#!nP#!r#!|##Q##QP!MfP##U##UP#&ZP#&_HdHd#&e#)iAQPAQPAQAQP#*sAQAQ#,mAQ#.zAQ#0nAQAQ#1[#3W#3W#3[#3d#3W#3lP#3WPAQ#4hAQ#5pAQAQ6iPPP#6{PP#7e#7eP#7eP#7z#7ePP#8QP#7wP#7w#8d!1p#7w#9O#9U6f(}#9X(}P#9`#9`#9`P(}P(}P(}P(}PP(}P#9f#9iP#9i(}P#9mP#9pP(}P(}P(}P(}P(}P(}(}PP#9v#9|#:W#:^#:d#:j#:p#;O#;U#;[#;f#;l#<h#<w#<}#=a#=g#=m#={#>b#?r#@Q#@W#@^#@d#@j#@t#@z#AQ#A[#An#AtPPPPPPPPPP#AzPPPPPPP#Bn#FYP#Gu#G|#HUPPPP#L`$ U$'t$'w$'z$)w$)z$)}$*UPP$*[$*`$+X$,X$,]$,qPP$,u$,{$-PP$-S$-W$-Z$.P$.g$.l$.o$.r$.x$.{$/P$/TR!yRmpOXr!X#a%]&d&f&g&i,^,c1g1jU!pQ'Q-OQ%ctQ%kwQ%rzQ&[!TS&x!c,vQ'W!f[']!m!r!s!t!u!vS*[$y*aQ+U%lQ+c%tQ+}&UQ,|'PQ-W'XW-`'^'_'`'aQ/p*cQ1U,OU2b-b-d-eS4}0z5QS6[2e2gU7z5U5V5WQ8q6_S9i7{7|Q:k9lR<a;r%QdOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t+h,Y,^,c-S-[-o-x.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2}4y5]5o5q5r6U7w8R8`8l:Q:v;ZS#m];o!r)T$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q*l%SQ+Z%nQ,P&XQ,W&aQ.X<XQ0T*|Q0X+OQ0d+[Q1^,UQ2q.UQ4e0_Q5d1VQ6i2uQ6o<YQ7b4fR8x6j'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`#S!kQ!m!p!r!s!t!u!v!w&x'P'Q']'^'_'`'a'b,v,|-O-`-b-c-d-e0z2b2e2f2g4z5Q5S5T5U5V6[6_6`7p7q7r7|8q9e9f:g$Y$pi#r#t$`$a$u$x%T%U%Y)n)w)y)z*R*X*g*h*{+O+m+p.T._/^/_/a/|0q0t0|2t3l3v4O4U4]4_5[6g6}7W8O8u9Q9o:X:n:{<U<V<Z<[<]<^<_<`<f<g<h<i<j<k<n<o<p<q<t<u=]=e=f=i=jQ%uzQ&v!cS&|%w,yQ+Z%nS.})t/PQ/{*pQ0d+[Q0i+bQ1],TQ1^,UQ4e0_Q4n0kQ5g1XQ5h1[Q7b4fQ7e4kQ8Z5jQ9`7fR9u8WpmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jR,R&]&x`OPXYrstux!X!^!g!l#P#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u'S'f'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=_=`[#YWZ#T#W&y'vQ%fvQ%jwS%oz%t!U%x|}#d#f#i%Z%v(P(W(X(]+f+g+i,[,p-s-v-z-{-}1o2m2n5z6dQ&Q!RQ'T!eQ'V!fQ(d#oS*O$u*SS+T%k%lQ+X%nQ+x&SQ+|&US-V'W'XQ.W(eQ/Z*PQ0]+UQ0c+[Q0e+]Q0h+aQ1P+yS1T+},OQ2X-WQ3m/VQ4d0_Q4h0bQ4m0jQ5c1UQ6z3nQ7a4fQ7d4jQ9[7`R:b9]v$wi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=f!`%hw!f!o%j%k%l&w'V'W'X'['i*Z+T+U,s-V-W-_-a/h0]2Q2X2`2d4Q6Y6^8o:TQ*}%fQ+n%}Q+q&OQ+{&UQ.V(dQ1O+xU1S+|+},OQ2v.WQ5^1PS5b1T1US7n4x4|Q8V5cU9g7s7x7yU:i9h9j9kQ;R:jQ;a;S!z=a#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jg=b<U<V<[<^<`<g<i<k<o<q<uW$|i%O*i=]S%}!O&ZQ&O!PQ&P!QR+l%{$Z${i#r#t$`$a$u$x%T%U%Y)n)w)y)z*R*X*g*h*{+O+m+p.T._/^/_/a/|0q0t0|2t3l3v4O4U4]4_5[6g6}7W8O8u9Q9o:X:n:{<U<V<Z<[<]<^<_<`<f<g<h<i<j<k<n<o<p<q<t<u=]=e=f=i=jT)o$r)pV*m%S<X<YU&|!c%w,yS(r#v#wQ+`%qS.P(`(aQ0u+rQ4V/yR7j4t'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`$o$]c#V#b%a%b%d'u'{(g(n(v(w(x(y(z({(|(})O)P)Q)S)V)Z)e*y+_,t-h-m-r-w.^.d.h.j.k.l.{/}1v1y2Z2j2|3R3S3T3U3V3W3X3Y3Z3[3]3^3_3b3c3h4Z4b5}6T6b6m6n6s6t7l8f8j8y8}9O:O:d:r:t;X;d;p=ST#QV#R'PkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q&z!cR1|,v!z!kQ!c!m!p!r!s!t!u!v!w&x'P'Q']'^'_'`'a'b,v,|-O-`-b-c-d-e2b2e2f2g4z5S5T6[6_6`7p7q7r8q9e9f:gS*Z$y*aS/h*[*cQ/q*dQ0w+tQ4Q/pQ4T/sS4x0z5QS7s4}5WS7x5U5VS9h7z7{Q9j7|S:j9i9lR;S:klpOXr!X#a%]&d&f&g&i,^,c1g1jQ&k![Q'j!tS(f#q;vQ+R%iQ+v&QQ+w&RQ-T'UQ-g'cS.](k<cS0O*t<lQ0Z+SQ0y+uQ1n,eQ1p,fQ1x,qQ2V-UQ2Y-YS4[0P<rQ4`0[S4c0^<sQ5|1zQ6Q2WQ6V2_Q7_4aQ8g6OQ8h6RQ8k6WQ9{8dQ:P8mQ:u:RR;Y:w$j$[c#V#b%b%d'u'{(g(n(v(w(x(y(z({(|(})O)P)Q)S)V)Z)e*y+_,t-h-m-r-w.^.d.h.k.l.{/}1v1y2Z2j2|3R3S3T3U3V3W3X3Y3Z3[3]3^3_3b3c3h4Z4b5}6T6b6m6n6s6t7l8f8j8y8}9O:O:d:r:t;X;d;p=SS(c#l'ZU*f$z(j3aS*x%a.jQ2r0TQ6f2qQ8w6iR:Y8x$j$Zc#V#b%b%d'u'{(g(n(v(w(x(y(z({(|(})O)P)Q)S)V)Z)e*y+_,t-h-m-r-w.^.d.h.k.l.{/}1v1y2Z2j2|3R3S3T3U3V3W3X3Y3Z3[3]3^3_3b3c3h4Z4b5}6T6b6m6n6s6t7l8f8j8y8}9O:O:d:r:t;X;d;p=SS(b#l'ZS(t#w$[S*w%a.jS.Q(a(cQ.m)UQ0Q*xR2o.R'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`S#m];oQ&f!VQ&g!WQ&i!YQ&j!ZR1f,aQ'R!eQ*z%fQ-R'TS.S(d*}Q2T-QW2s.V.W0S0UQ6P2UU6e2p2r2vS8t6f6hS:W8v8wS:y:V:YQ;[:zR;e;]V!qQ'Q-O!_^OQXZ_r!T!X!m#a#d%Z%]&Z&]&d&f&g&i'Q(],^,c-O-z0z1g1j4z5QT#m];o%[yOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZS(r#v#wS.P(`(a!s<y$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`U!oQ'Q-OY'[!m!s!t!u!vS'i!p!rW'k!w4z5S5TS-_']'^U-a'_'`'aW-f'b7p7q7rS2`-`-bU2c-c9e9fS2d-d-eS4|0z5QS6Y2b2eS6]2f:gQ6^2gS7s4}5WS7y5U5VS8o6[6_Q8r6`S9h7z7{Q9k7|Q:T8qS:j9i9lR;S:kU!qQ'Q-OT5O0z5QU'h!o4{4|S([#e1dU-^'['k7yQ/Y*OQ/f*ZU2a-a-f9kQ3r/ZS3{/g/qS6Z2c2dQ6y3mS7U4R4TS8p6]6^Q9S6zQ9Z7XR:U8rQ#sbU'g!o4{4|S(Z#e1dQ*u%[Q+P%gQ+V%mW-]'['h'k7yQ-y([Q/X*OQ/e*ZQ/k*^Q0Y+QQ1Q+zW2^-^-a-f9kS3q/Y/ZS3z/f/qQ3}/jQ4P/lQ5`1RU6X2a2c2dQ6x3mQ6|3rS7Q3{4TQ7V4SQ8T5aU8n6Z6]6^S9R6y6zQ9V7RQ9X7UQ9c7mQ9r8US:S8p8rQ:^9SQ:_9WQ:a9ZQ:f9dQ:p9sQ:x:UQ:}:`Q;P:hQ;_;QQ;h;`Q;l;iQ<|<wQ=X=QR=Y=R%[aOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZS#sx!g!r<v$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`R<|=_%[bOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZQ%[j!`%gw!f!o%j%k%l&w'V'W'X'['i*Z+T+U,s-V-W-_-a/h0]2Q2X2`2d4Q6Y6^8o:TS%mx!gQ+Q%hQ+z&UW1R+{+|+},OU5a1S1T1US7m4x4|S8U5b5cW9d7n7s7x7yQ9s8VW:h9g9h9j9kS;Q:i:jS;`;R;SQ;i;a!r<w$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q=Q=^R=R=_%OeOPXYrstu!X!^!l#P#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&d&f&g&i&m&u'S'f'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;ZY#_WZ#T#W'v!U%x|}#d#f#i%Z%v(P(W(X(]+f+g+i,[,p-s-v-z-{-}1o2m2n5z6dQ,X&a!p<x$X$j)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`R<{&yS&}!c%wR2O,y%QdOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t+h,Y,^,c-S-[-o-x.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2}4y5]5o5q5r6U7w8R8`8l:Q:v;Z!r)T$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`Q,W&aQ0T*|Q2q.UQ6i2uR8x6j!l$Rc#V%a'u'{(g(n(})O)P)Q)V)Z+_-h-m-r-w.^.d.{/}2Z2j2|3_4Z4b6T6b6m8j:O:t;X;d;p!T;})S)e,t.j1v1y3R3Z3[3]3^3b3h5}6n6s6t7l8f8y8}9O:d:r=S!h$Tc#V%a'u'{(g(n)P)Q)V)Z+_-h-m-r-w.^.d.{/}2Z2j2|3_4Z4b6T6b6m8j:O:t;X;d;p!P<P)S)e,t.j1v1y3R3]3^3b3h5}6n6s6t7l8f8y8}9O:d:r=S!d$Xc#V%a'u'{(g(n)V)Z+_-h-m-r-w.^.d.{/}2Z2j2|3_4Z4b6T6b6m8j:O:t;X;d;pQ3l/Tz=`)S)e,t.j1v1y3R3b3h5}6n6s6t7l8f8y8}9O:d:r=SQ=e=gR=f=h'OkOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`S$kh$lR3e.p'VgOPWXYZhrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j$l%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.p.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`T$gf$mQ$efS)^$h)bR)j$mT$ff$mT)`$h)b'VhOPWXYZhrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$X$^$b$j$l%]%c%p&]&`&a&d&f&g&i&m&u&y'S'f'v'x(O(Y(k(o(s)g)r*t*|+h,Y,^,c,o,r-S-[-o-x.U.b.i.p.q/z0P0^0}1_1`1a1c1g1j1l1{2]2k2u2}3d4v4y5]5o5q5r5{6U6j7w8R8`8l9a9|:Q:v;Z;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`T$kh$lQ$nhR)i$l%[jOPWXYZrstu!X!^!l#P#T#W#a#k#q#u#x#{#|#}$O$P$Q$R$S$T$U$V$^$b%]%c%p&]&`&a&d&f&g&i&m&u'S'f'v'x(O(Y(k(o(s)r*t*|+h,Y,^,c-S-[-o-x.U.b.i/z0P0^0}1_1`1a1c1g1j1l2]2k2u2}4y5]5o5q5r6U6j7w8R8`8l:Q:v;Z!s=^$X$j&y)g,o,r.q1{3d4v5{9a9|;n;q;r;s;v;w;x;y;z;{;|;}<O<P<Q<R<S<W<a<b<c<e<l<m<r<s=`#alOPXZr!X!^!l#P#a#k#x$j%]&]&`&a&d&f&g&i&m&u'S(s)g*|+h,Y,^,c-S.U.q/z0}1_1`1a1c1g1j1l2u3d4y5]5o5q5r6j7w8R8`v$zi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=f!z(j#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jQ*q%WQ.|)sg3a<U<V<[<^<`<g<i<k<o<q<uv$vi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=fQ*T$wS*^$y*aQ*r%XQ/l*_!z=O#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jf=P<U<V<[<^<`<g<i<k<o<q<uQ=T=aQ=U=bQ=V=cR=W=dv$zi#t%T%U%Y)w)y*R*g*h._/^/|3l4U9Q=]=e=f!z(j#r$`$a$u$x)n)z*X*{+O+m+p.T/_/a0q0t0|2t3v4O4]4_5[6g6}7W8O8u9o:X:n:{<Z<]<_<f<h<j<n<p<t=i=jg3a<U<V<[<^<`<g<i<k<o<q<ulnOXr!X#a%]&d&f&g&i,^,c1g1jQ*W$xQ,l&pQ,m&rR3u/_$Y${i#r#t$`$a$u$x%T%U%Y)n)w)y)z*R*X*g*h*{+O+m+p.T._/^/_/a/|0q0t0|2t3l3v4O4U4]4_5[6g6}7W8O8u9Q9o:X:n:{<U<V<Z<[<]<^<_<`<f<g<h<i<j<k<n<o<p<q<t<u=]=e=f=i=jQ+o&OQ0s+qQ4r0rR7i4sT*`$y*aS*`$y*aT5P0z5QS/j*]4yT4S/r7wQ+P%gQ/k*^Q0Y+QQ1Q+zQ5`1RQ8T5aQ9c7mQ9r8UQ:f9dQ:p9sQ;P:hQ;_;QQ;h;`R;l;in)w$s(l*s/]/t/u2z3s4Y6w7Y:]<}=Z=[!W<f(h)X)}*V.[.x/T/b0R0p0r2y3t3x4q4s6k6l7O7S7[7^9U9Y:|=g=h]<g3`6r8z:Z:[;fp)y$s(l*s/R/]/t/u2z3s4Y6w7Y:]<}=Z=[!Y<h(h)X)}*V.[.x/T/b0R0p0r2w2y3t3x4q4s6k6l7O7S7[7^9U9Y:|=g=h_<i3`6r8z8{:Z:[;fpmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jQ&W!SR,Y&apmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jR&W!SQ+s&PR0o+lqmOXr!T!X#a%]&Z&d&f&g&i,^,c1g1jQ0{+xS5Z1O1PU7}5X5Y5^S9n8P8QS:l9m9pQ;T:mR;b;UQ&_!TR,S&ZR5g1XS%oz%tR0e+]Q&d!UR,^&eR,d&jT1h,c1jR,h&kQ,g&kR1q,hQ'm!xR-i'mQrOQ#aXT%`r#aQ!{TR'o!{Q#OUR'q#OQ)p$rR.y)pQ#RVR's#RQ#UWU'y#U'z-pQ'z#VR-p'{Q,w&zR1},wQ.`(lR2{.`Q.c(nS3O.c3PR3P.dQ-O'QR2R-Or_OXr!T!X#a%]&Z&]&d&f&g&i,^,c1g1jU!mQ'Q-OS#dZ%ZY#n_!m#d-z4zQ-z(]T4z0z5QS#[W%vU(Q#[(R-qQ(R#]R-q'|Q,z&}R2P,zQ(^#gQ-t(VW.O(^-t2h6aQ2h-uR6a2iQ)b$hR.r)bQ$lhR)h$lQ$_cU)W$_-l<TQ-l;pR<T)eQ/W*OW3o/W3p6{9TU3p/X/Y/ZS6{3q3rR9T6|#m)u$s(h(l)X)}*V*n*o*s.Y.Z.[.x/R/S/T/]/b/t/u0R0p0r2w2x2y2z3`3s3t3x4Y4q4s6k6l6p6q6r6w7O7S7Y7[7^8z8{8|9U9Y:Z:[:]:|;f<}=Z=[=g=hQ/`*VU3w/`3y7PQ3y/bR7P3xQ*a$yR/n*aQ*j$}R/w*jQ4^0RR7]4^Q+j%yR0n+jQ4u0uS7k4u9bR9b7lQ+u&QR0x+uQ5Q0zR7u5QQ1W,PS5e1W8XR8X5gQ0`+XW4g0`4i7c9^Q4i0cQ7c4hR9^7dQ+^%oR0f+^Q1j,cR5u1jWqOXr#aQ&h!XQ*v%]Q,]&dQ,_&fQ,`&gQ,b&iQ1e,^S1h,c1jR5t1gQ%_oQ&l!]Q&o!_Q&q!`Q&s!aU'e!o4{4|Q+e%uQ+k%zQ,R&_Q,j&nY-Z'['g'h'k7yQ/m*`S1Z,S,VQ1r,iQ1s,lQ1t,m[2[-]-^-a-f-h9kQ4l0iQ4p0pQ5_1QQ5i1]Q5s1fY6S2Z2^2a2c2dQ7g4nQ7h4qQ7t5PQ8S5`Q8Y5hY8i6T6X6Z6]6^Q9_7eQ9q8TQ9v8ZW9}8j8n8p8rQ:c9`Q:e9cQ:o9rU:s:O:S:UQ;O:fQ;V:pS;W:t:xQ;^;PQ;c;XQ;g;_Q;j;dQ;k;hR;m;lQ%iwQ'U!fQ'c!oU+S%j%k%lQ,q&wU-U'V'W'XS-Y'['iQ/d*ZS0[+T+UQ1z,sS2W-V-WS2_-_-aQ3|/hQ4a0]Q6O2QQ6R2XS6W2`2dQ7T4QS8m6Y6^Q:R8oR:w:TS$ti=]R*k%OU$}i%O=]R/v*iQ$siS(h#r+OQ(l#tS)X$`$aQ)}$uQ*V$xQ*n%TQ*o%UQ*s%YQ.Y<ZQ.Z<]Q.[<_Q.x)nQ/R)wQ/S)yQ/T)zQ/]*RQ/b*XQ/t*gQ/u*hh0R*{.T0|2t5[6g8O8u9o:X:n:{Q0p+mQ0r+pQ2w<fQ2x<hQ2y<jQ2z._S3`<U<VQ3s/^Q3t/_Q3x/aQ4Y/|Q4q0qQ4s0tQ6k<nQ6l<pQ6p<[Q6q<^Q6r<`Q6w3lQ7O3vQ7S4OQ7Y4UQ7[4]Q7^4_Q8z<kQ8{<gQ8|<iQ9U6}Q9Y7WQ:Z<oQ:[<qQ:]9QQ:|<tQ;f<uQ<}=]Q=Z=eQ=[=fQ=g=iR=h=jloOXr!X#a%]&d&f&g&i,^,c1g1jQ!dPS#cZ#kQ&n!^U'Y!l4y7wQ'r#PQ(u#xQ)f$jS,V&]&`Q,Z&aQ,i&mQ,n&uQ-Q'SQ.f(sQ.v)gQ0U*|Q0l+hQ1b,YQ2U-SQ2r.UQ3g.qQ4W/zQ5Y0}Q5k1_Q5l1`Q5n1aQ5p1cQ5w1lQ6f2uQ6u3dQ8Q5]Q8_5oQ8a5qQ8b5rQ8w6jQ9p8RR9x8`#UcOPXZr!X!^!l#a#k#x%]&]&`&a&d&f&g&i&m&u'S(s*|+h,Y,^,c-S.U/z0}1_1`1a1c1g1j1l2u4y5]5o5q5r6j7w8R8`Q#VWQ#bYQ%asQ%btQ%duS'u#T'xQ'{#WQ(g#qQ(n#uQ(v#{Q(w#|Q(x#}Q(y$OQ(z$PQ({$QQ(|$RQ(}$SQ)O$TQ)P$UQ)Q$VQ)S$XQ)V$^Q)Z$bW)e$j)g.q3dQ*y%cQ+_%pS,t&y1{Q-h'fS-m'v-oQ-r(OQ-w(YQ.^(kQ.d(oQ.h;nQ.j;qQ.k;rQ.l;sQ.{)rQ/}*tQ1v,oQ1y,rQ2Z-[Q2j-xQ2|.bQ3R;vQ3S;wQ3T;xQ3U;yQ3V;zQ3W;{Q3X;|Q3Y;}Q3Z<OQ3[<PQ3]<QQ3^<RQ3_.iQ3b<WQ3c<aQ3h<SQ4Z0PQ4b0^Q5}<bQ6T2]Q6b2kQ6m2}Q6n<cQ6s<eQ6t<lQ7l4vQ8f5{Q8j6UQ8y<mQ8}<rQ9O<sQ:O8lQ:d9aQ:r9|Q:t:QQ;X:vQ;d;ZQ;p#PR=S=`R#XWR&{!cU!oQ'Q-OS&w!c,vY'[!m!s!t!u!vS'i!p!r['k!w4z5S5T5U5VS,s&x'PS-_']'^U-a'_'`'aY-f'b7p7q7r7|Q2Q,|S2`-`-bU2c-c9e9fS2d-d-eS4{0z5QS6Y2b2eS6]2f:gQ6^2gS8o6[6_Q8r6`R:T8qR(m#tR(p#uQ!dQT,}'Q-OQ#l]R'Z;oT#hZ%ZS#gZ%ZU%y|},[U(V#d#f#iS-u(W(XQ-|(]Q0m+iQ2i-vU2l-z-{-}S6c2m2nR8s6d`#ZW#T#W%v'v(P+f-st#eZ|}#d#f#i%Z(W(X(]+i-v-z-{-}2m2n6dQ1d,[Q1w,pQ5y1oQ8e5zT<z&y+gT#^W%vS#]W%vS'w#T(PS'|#W+fS,u&y+gT-n'v-sT'O!c%wQ$hfR)l$mT)a$h)bR3f.pT*Q$u*SR*Y$xQ0S*{Q2p.TQ5X0|Q6h2tQ8P5[Q8v6gQ9m8OQ:V8uQ:m9oQ:z:XQ;U:nR;]:{lpOXr!X#a%]&d&f&g&i,^,c1g1jQ&^!TR,R&ZV%z|},[R0v+rR,Q&XQ%szR+d%tR+Y%nT&b!U&eT&c!U&eT1i,c1j",nodeNames:"⚠ ArithOp ArithOp LineComment BlockComment Script ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:362,context:trackNewline,nodeProps:[["group",-26,6,14,16,62,198,202,205,206,208,211,214,225,227,233,235,237,239,242,248,254,256,258,260,262,264,265,"Statement",-32,10,11,25,28,29,35,45,48,49,51,56,64,72,76,78,80,81,102,103,112,113,130,133,135,136,137,138,140,141,161,162,164,"Expression",-23,24,26,30,34,36,38,165,167,169,170,172,173,174,176,177,178,180,181,182,192,194,196,197,"Type",-3,84,95,101,"ClassItem"],["openedBy",31,"InterpolationStart",50,"[",54,"{",69,"(",142,"JSXStartTag",154,"JSXStartTag JSXStartCloseTag"],["closedBy",33,"InterpolationEnd",44,"]",55,"}",70,")",143,"JSXSelfCloseEndTag JSXEndTag",159,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,3,4,268],repeatNodeCount:32,tokenData:"$>y(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tu>PuvBavwDxwxGgxyMvyz! Qz{!![{|!%O|}!&]}!O!%O!O!P!'g!P!Q!1w!Q!R#0t!R![#3T![!]#@T!]!^#Aa!^!_#Bk!_!`#GS!`!a#In!a!b#N{!b!c$$z!c!}>P!}#O$&U#O#P$'`#P#Q$,w#Q#R$.R#R#S>P#S#T$/`#T#o$0j#o#p$4z#p#q$5p#q#r$7Q#r#s$8^#s$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$I|>P$I|$I}$<s$I}$JO$<s$JO$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(n%d_$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$c&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$c&j'y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU'y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$c&j'vpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU'vpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$c&j'vp'y!b'l(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST'w#S$c&j'm(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$c&j'vp'y!b'm(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$c&j!l$Ip'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#p$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#p$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2b3l_'u$(n$c&j'y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k*r4r_$c&j'y!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k)`5vX$c&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q)`6jT$^#t$c&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#t6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y#t7bO$^#t#t7eP;=`<%l6y)`7kP;=`<%l5q*r7w]$^#t$c&j'y!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}%W8uZ'y!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p%W9oU$^#t'y!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}%W:UP;=`<%l8p*r:[P;=`<%l4k#%|:hg$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|<[i$c&j(_!L^'vp'y!bOY%ZYZ&cZr%Zrs&}st%Ztu<Puw%Zwx(rx!Q%Z!Q![<P![!^%Z!^!_*g!_!c%Z!c!}<P!}#O%Z#O#P&c#P#R%Z#R#S<P#S#T%Z#T#o<P#o#p*g#p$g%Z$g;'S<P;'S;=`=y<%lO<P#%|=|P;=`<%l<P(CS>`k$c&j'vp'y!b(T!LY's&;d$V#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P+d@`k$c&j'vp'y!b$V#tOY%ZYZ&cZr%Zrs&}st%Ztu@Tuw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![@T![!^%Z!^!_*g!_!c%Z!c!}@T!}#O%Z#O#P&c#P#R%Z#R#S@T#S#T%Z#T#o@T#o#p*g#p$g%Z$g;'S@T;'S;=`BT<%lO@T+dBWP;=`<%l@T(CSB^P;=`<%l>P%#SBl`$c&j'vp'y!b#h$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SCy_$c&j#z$Id'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%DfETa(h%<v$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sv%ZvwFYwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SFe`$c&j#t$Id'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$2bGp_'x$)`$c&j'vpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo*QHv_$c&j'vpOYHoYZIuZrHorsIuswHowxKVx!^Ho!^!_LX!_#OHo#O#PIu#P#oHo#o#pLX#p;'SHo;'S;=`Mp<%lOHo)`IzX$c&jOwIuwx6cx!^Iu!^!_Jg!_#oIu#o#pJg#p;'SIu;'S;=`KP<%lOIu#tJjTOwJgwx7]x;'SJg;'S;=`Jy<%lOJg#tJ|P;=`<%lJg)`KSP;=`<%lIu*QK`]$^#t$c&j'vpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r$fL^Z'vpOYLXYZJgZrLXrsJgswLXwxMPx#OLX#O#PJg#P;'SLX;'S;=`Mj<%lOLX$fMWU$^#t'vpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r$fMmP;=`<%lLX*QMsP;=`<%lHo(*QNR_!h(!b$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l! ]_!gM|$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!!ib$c&j'vp'y!b't#)d#i$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!#q{!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!#|`$c&j'vp'y!b#f$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!%Z`$c&j'vp'y!bk&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!&h_!V&;l$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!'rc$c&j'vp'y!by'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!(}!P!Q%Z!Q![!+g![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!)Wa$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!*]!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!*h_!UMt$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!+rg$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!+g![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S!+g#S#X%Z#X#Y!-Z#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!-dg$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!.{|}%Z}!O!.{!O!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!/Uc$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!0lc$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!0a![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!0a#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!2Sf$c&j'vp'y!b#g$IdOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}xz!3hz{#$s{!P!3h!P!Q#&Y!Q!^!3h!^!_!Mh!_!`#-x!`!a#/_!a!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(r!3sb$c&j'vp'y!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(Q!5U`$c&j'y!b!RSOY!4{YZ&cZw!4{wx!6Wx!P!4{!P!Q!=o!Q!^!4{!^!_!?g!_!}!4{!}#O!Bn#O#P!<w#P#o!4{#o#p!?g#p;'S!4{;'S;=`!Cw<%lO!4{&n!6_^$c&j!RSOY!6WYZ&cZ!P!6W!P!Q!7Z!Q!^!6W!^!_!8g!_!}!6W!}#O!;U#O#P!<w#P#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!7ba$c&j!RSO!^&c!_#Z&c#Z#[!7Z#[#]&c#]#^!7Z#^#a&c#a#b!7Z#b#g&c#g#h!7Z#h#i&c#i#j!7Z#j#m&c#m#n!7Z#n#o&c#p;'S&c;'S;=`&w<%lO&cS!8lX!RSOY!8gZ!P!8g!P!Q!9X!Q!}!8g!}#O!9p#O#P!:o#P;'S!8g;'S;=`!;O<%lO!8gS!9^U!RS#Z#[!9X#]#^!9X#a#b!9X#g#h!9X#i#j!9X#m#n!9XS!9sVOY!9pZ#O!9p#O#P!:Y#P#Q!8g#Q;'S!9p;'S;=`!:i<%lO!9pS!:]SOY!9pZ;'S!9p;'S;=`!:i<%lO!9pS!:lP;=`<%l!9pS!:rSOY!8gZ;'S!8g;'S;=`!;O<%lO!8gS!;RP;=`<%l!8g&n!;Z[$c&jOY!;UYZ&cZ!^!;U!^!_!9p!_#O!;U#O#P!<P#P#Q!6W#Q#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<UX$c&jOY!;UYZ&cZ!^!;U!^!_!9p!_#o!;U#o#p!9p#p;'S!;U;'S;=`!<q<%lO!;U&n!<tP;=`<%l!;U&n!<|X$c&jOY!6WYZ&cZ!^!6W!^!_!8g!_#o!6W#o#p!8g#p;'S!6W;'S;=`!=i<%lO!6W&n!=lP;=`<%l!6W(Q!=xi$c&j'y!b!RSOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!=o#[#]&}#]#^!=o#^#a&}#a#b!=o#b#g&}#g#h!=o#h#i&}#i#j!=o#j#m&}#m#n!=o#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!?nZ'y!b!RSOY!?gZw!?gwx!8gx!P!?g!P!Q!@a!Q!}!?g!}#O!Ap#O#P!:o#P;'S!?g;'S;=`!Bh<%lO!?g!f!@hb'y!b!RSOY'}Zw'}x#O'}#P#Z'}#Z#[!@a#[#]'}#]#^!@a#^#a'}#a#b!@a#b#g'}#g#h!@a#h#i'}#i#j!@a#j#m'}#m#n!@a#n;'S'};'S;=`(f<%lO'}!f!AuX'y!bOY!ApZw!Apwx!9px#O!Ap#O#P!:Y#P#Q!?g#Q;'S!Ap;'S;=`!Bb<%lO!Ap!f!BeP;=`<%l!Ap!f!BkP;=`<%l!?g(Q!Bu^$c&j'y!bOY!BnYZ&cZw!Bnwx!;Ux!^!Bn!^!_!Ap!_#O!Bn#O#P!<P#P#Q!4{#Q#o!Bn#o#p!Ap#p;'S!Bn;'S;=`!Cq<%lO!Bn(Q!CtP;=`<%l!Bn(Q!CzP;=`<%l!4{'`!DW`$c&j'vp!RSOY!C}YZ&cZr!C}rs!6Ws!P!C}!P!Q!EY!Q!^!C}!^!_!GQ!_!}!C}!}#O!JX#O#P!<w#P#o!C}#o#p!GQ#p;'S!C};'S;=`!Kb<%lO!C}'`!Eci$c&j'vp!RSOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!EY#[#](r#]#^!EY#^#a(r#a#b!EY#b#g(r#g#h!EY#h#i(r#i#j!EY#j#m(r#m#n!EY#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!GXZ'vp!RSOY!GQZr!GQrs!8gs!P!GQ!P!Q!Gz!Q!}!GQ!}#O!IZ#O#P!:o#P;'S!GQ;'S;=`!JR<%lO!GQt!HRb'vp!RSOY)rZr)rs#O)r#P#Z)r#Z#[!Gz#[#])r#]#^!Gz#^#a)r#a#b!Gz#b#g)r#g#h!Gz#h#i)r#i#j!Gz#j#m)r#m#n!Gz#n;'S)r;'S;=`*Z<%lO)rt!I`X'vpOY!IZZr!IZrs!9ps#O!IZ#O#P!:Y#P#Q!GQ#Q;'S!IZ;'S;=`!I{<%lO!IZt!JOP;=`<%l!IZt!JUP;=`<%l!GQ'`!J`^$c&j'vpOY!JXYZ&cZr!JXrs!;Us!^!JX!^!_!IZ!_#O!JX#O#P!<P#P#Q!C}#Q#o!JX#o#p!IZ#p;'S!JX;'S;=`!K[<%lO!JX'`!K_P;=`<%l!JX'`!KeP;=`<%l!C}(r!Ksk$c&j'vp'y!b!RSOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[!Kh#[#]%Z#]#^!Kh#^#a%Z#a#b!Kh#b#g%Z#g#h!Kh#h#i%Z#i#j!Kh#j#m%Z#m#n!Kh#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W!Mq]'vp'y!b!RSOY!MhZr!Mhrs!?gsw!Mhwx!GQx!P!Mh!P!Q!Nj!Q!}!Mh!}#O#!U#O#P!:o#P;'S!Mh;'S;=`##U<%lO!Mh#W!Nse'vp'y!b!RSOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[!Nj#[#]*g#]#^!Nj#^#a*g#a#b!Nj#b#g*g#g#h!Nj#h#i*g#i#j!Nj#j#m*g#m#n!Nj#n;'S*g;'S;=`+Z<%lO*g#W#!]Z'vp'y!bOY#!UZr#!Urs!Apsw#!Uwx!IZx#O#!U#O#P!:Y#P#Q!Mh#Q;'S#!U;'S;=`##O<%lO#!U#W##RP;=`<%l#!U#W##XP;=`<%l!Mh(r##e`$c&j'vp'y!bOY##[YZ&cZr##[rs!Bnsw##[wx!JXx!^##[!^!_#!U!_#O##[#O#P!<P#P#Q!3h#Q#o##[#o#p#!U#p;'S##[;'S;=`#$g<%lO##[(r#$jP;=`<%l##[(r#$pP;=`<%l!3h(CS#%Qb$c&j'vp'y!b'n(;d!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h(CS#&e_$c&j'vp'y!bR(;dOY#&YYZ&cZr#&Yrs#'dsw#&Ywx#*tx!^#&Y!^!_#,s!_#O#&Y#O#P#(f#P#o#&Y#o#p#,s#p;'S#&Y;'S;=`#-r<%lO#&Y(Bb#'m]$c&j'y!bR(;dOY#'dYZ&cZw#'dwx#(fx!^#'d!^!_#)w!_#O#'d#O#P#(f#P#o#'d#o#p#)w#p;'S#'d;'S;=`#*n<%lO#'d(AO#(mX$c&jR(;dOY#(fYZ&cZ!^#(f!^!_#)Y!_#o#(f#o#p#)Y#p;'S#(f;'S;=`#)q<%lO#(f(;d#)_SR(;dOY#)YZ;'S#)Y;'S;=`#)k<%lO#)Y(;d#)nP;=`<%l#)Y(AO#)tP;=`<%l#(f(<v#*OW'y!bR(;dOY#)wZw#)wwx#)Yx#O#)w#O#P#)Y#P;'S#)w;'S;=`#*h<%lO#)w(<v#*kP;=`<%l#)w(Bb#*qP;=`<%l#'d(Ap#*}]$c&j'vpR(;dOY#*tYZ&cZr#*trs#(fs!^#*t!^!_#+v!_#O#*t#O#P#(f#P#o#*t#o#p#+v#p;'S#*t;'S;=`#,m<%lO#*t(<U#+}W'vpR(;dOY#+vZr#+vrs#)Ys#O#+v#O#P#)Y#P;'S#+v;'S;=`#,g<%lO#+v(<U#,jP;=`<%l#+v(Ap#,pP;=`<%l#*t(=h#,|Y'vp'y!bR(;dOY#,sZr#,srs#)wsw#,swx#+vx#O#,s#O#P#)Y#P;'S#,s;'S;=`#-l<%lO#,s(=h#-oP;=`<%l#,s(CS#-uP;=`<%l#&Y%#W#.Vb$c&j#z$Id'vp'y!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h+h#/lb$S#t$c&j'vp'y!b!RSOY!3hYZ&cZr!3hrs!4{sw!3hwx!C}x!P!3h!P!Q!Kh!Q!^!3h!^!_!Mh!_!}!3h!}#O##[#O#P!<w#P#o!3h#o#p!Mh#p;'S!3h;'S;=`#$m<%lO!3h$/l#1Pp$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#U%Z#U#V#6_#V#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#d#9g#d#l%Z#l#m#<i#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#3`k$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!+g!P!Q%Z!Q![#3T![!^%Z!^!_*g!_!g%Z!g!h!-Z!h#O%Z#O#P&c#P#R%Z#R#S#3T#S#X%Z#X#Y!-Z#Y#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#5`_$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#6hd$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#8Rf$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#7v!R!S#7v!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#7v#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#9pc$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;We$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#:{!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#:{#S#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#<rg$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>fi$c&j'vp'y!bl$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#>Z![!^%Z!^!_*g!_!c%Z!c!i#>Z!i#O%Z#O#P&c#P#R%Z#R#S#>Z#S#T%Z#T#Z#>Z#Z#b%Z#b#c#5T#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#@b_!a$b$c&j#x%<f'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Al_^l$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS#Bz^'|!*v!e'.r'vp'y!b$T)d(lSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Cv!Q!^*g!^!_#Dl!_!`#F^!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#DPX$e&j'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#DuZ#j$Id'vp'y!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Eh!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#EqX#z$Id'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#FgX#k$Id'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh#G_a#W%?x$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a#Hd!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W#Ho_#c$Ih$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#I}adBf#k$Id$`#|$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`#KS!`!a#L^!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#K__#k$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#Lia#j$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`!a#Mn!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S#My`#j$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$ Wc(`$Ip$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$!c!P!^%Z!^!_*g!_!a%Z!a!b$#m!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$!n_z'#p$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$#x`$c&j#u$Id'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$%V_!x!Ln$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$&a_|(8n$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$'eZ$c&jO!^$(W!^!_$(n!_#i$(W#i#j$(s#j#l$(W#l#m$*f#m#o$(W#o#p$(n#p;'S$(W;'S;=`$,q<%lO$(W(n$(_T[#S$c&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$(sO[#S(n$(x[$c&jO!Q&c!Q![$)n![!^&c!_!c&c!c!i$)n!i#T&c#T#Z$)n#Z#o&c#o#p$,U#p;'S&c;'S;=`&w<%lO&c(n$)sZ$c&jO!Q&c!Q![$*f![!^&c!_!c&c!c!i$*f!i#T&c#T#Z$*f#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$*kZ$c&jO!Q&c!Q![$+^![!^&c!_!c&c!c!i$+^!i#T&c#T#Z$+^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$+cZ$c&jO!Q&c!Q![$(W![!^&c!_!c&c!c!i$(W!i#T&c#T#Z$(W#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$,XR!Q![$,b!c!i$,b#T#Z$,b#S$,eS!Q![$,b!c!i$,b#T#Z$,b#q#r$(n(n$,tP;=`<%l$(W!'l$-S_!SM|$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$.^`#r$Id$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$/k_$c&j'vp'y!b(Q&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$0yk$c&j'vp'y!b(T!LY's&;d$X#tOY%ZYZ&cZr%Zrs&}st%Ztu$0juw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$0j![!^%Z!^!_*g!_!c%Z!c!}$0j!}#O%Z#O#P&c#P#R%Z#R#S$0j#S#T%Z#T#o$0j#o#p*g#p$g%Z$g;'S$0j;'S;=`$4t<%lO$0j+d$2yk$c&j'vp'y!b$X#tOY%ZYZ&cZr%Zrs&}st%Ztu$2nuw%Zwx(rx}%Z}!O$2n!O!Q%Z!Q![$2n![!^%Z!^!_*g!_!c%Z!c!}$2n!}#O%Z#O#P&c#P#R%Z#R#S$2n#S#T%Z#T#o$2n#o#p*g#p$g%Z$g;'S$2n;'S;=`$4n<%lO$2n+d$4qP;=`<%l$2n(CS$4wP;=`<%l$0j!5p$5TX!X!3l'vp'y!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Df$5{a(g%<v$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Cn!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$#m#q;'S%Z;'S;=`+a<%lO%Z%#`$7__!W$I`o`$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$8i_!mS$c&j'vp'y!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$9y|$c&j'vp'y!b'l(;d(T!LY's&;d$V#tOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$f%Z$f$g+g$g#BY>P#BY#BZ$9h#BZ$IS>P$IS$I_$9h$I_$JT>P$JT$JU$9h$JU$KV>P$KV$KW$9h$KW&FU>P&FU&FV$9h&FV;'S>P;'S;=`BZ<%l?HT>P?HT?HU$9h?HUO>P(CS$=Uk$c&j'vp'y!b'm(;d(T!LY's&;d$V#tOY%ZYZ&cZr%Zrs&}st%Ztu>Puw%Zwx(rx}%Z}!O@T!O!Q%Z!Q![>P![!^%Z!^!_*g!_!c%Z!c!}>P!}#O%Z#O#P&c#P#R%Z#R#S>P#S#T%Z#T#o>P#o#p*g#p$g%Z$g;'S>P;'S;=`BZ<%lO>P",tokenizers:[noSemicolon,incdecToken,2,3,4,5,6,7,8,9,10,11,12,13,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOq~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!O~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(S~~",141,325),new LocalTokenGroup("j~RQYZXz{^~^O'p~~aP!P!Qd~iO'q~~",25,307)],topRules:{Script:[0,5],SingleExpression:[1,266],SingleClassItem:[2,267]},dialects:{jsx:13213,ts:13215},dynamicPrecedences:{76:1,78:1,162:1,190:1},specialized:[{term:311,get:s=>spec_identifier[s]||-1},{term:327,get:s=>spec_word[s]||-1},{term:67,get:s=>spec_LessThan[s]||-1}],tokenPrec:13238}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],cache$3=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(s){return(e,n)=>{let a=e.node.getChild("VariableDefinition");return a&&n(a,s),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(s,e){s.matchContext(functionContext)||e(s,"variable")},TypeDefinition(s,e){e(s,"type")},__proto__:null};function getScope(s,e){let n=cache$3.get(e);if(n)return n;let a=[],o=!0;function l(u,c){let f=s.sliceString(u.from,u.to);a.push({label:f,type:c})}return e.cursor(IterMode.IncludeAnonymous).iterate(u=>{if(o)o=!1;else if(u.name){let c=gatherCompletions[u.name];if(c&&c(u,l)||ScopeNodes.has(u.name))return!1}else if(u.to-u.from>8192){for(let c of getScope(s,u.node))a.push(c);return!1}}),cache$3.set(e,a),a}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function localCompletionSource(s){let e=syntaxTree(s.state).resolveInner(s.pos,-1);if(dontComplete.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&Identifier.test(s.state.sliceDoc(e.from,e.to));if(!n&&!s.explicit)return null;let a=[];for(let o=e;o;o=o.parent)ScopeNodes.has(o.name)&&(a=a.concat(getScope(s.state.doc,o)));return{options:a,from:n?e.from:s.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:s=>{let e=s.textAfter,n=/^\s*\}/.test(e),a=/^\s*(case|default)\b/.test(e);return s.baseIndent+(n?0:a?1:2)*s.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:s=>s.baseIndent+s.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(s){let e=/^\s*<\//.test(s.textAfter);return s.lineIndent(s.node.from)+(e?0:s.unit)},JSXEscape(s){let e=/\s*\}/.test(s.textAfter);return s.lineIndent(s.node.from)+(e?0:s.unit)},"JSXOpenTag JSXSelfClosingTag"(s){return s.column(s.node.from)+s.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(s){return{from:s.from+2,to:s.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:s=>/^JSX/.test(s.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(s=>s.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(s=>s.isTop?[jsxSublanguage]:void 0)]},"typescript"),keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(s=>({label:s,type:"keyword"}));function javascript(s={}){let e=s.jsx?s.typescript?tsxLanguage:jsxLanguage:s.typescript?typescriptLanguage:javascriptLanguage;return new LanguageSupport(e,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(snippets.concat(keywords)))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),s.jsx?autoCloseTags:[]])}function findOpenTag(s){for(;;){if(s.name=="JSXOpenTag"||s.name=="JSXSelfClosingTag"||s.name=="JSXFragmentTag")return s;if(s.name=="JSXEscape"||!s.parent)return null;s=s.parent}}function elementName(s,e,n=s.length){for(let a=e?.firstChild;a;a=a.nextSibling)if(a.name=="JSXIdentifier"||a.name=="JSXBuiltin"||a.name=="JSXNamespacedName"||a.name=="JSXMemberExpression")return s.sliceString(a.from,Math.min(a.to,n));return""}function isEndTag(s){return s&&(s.name=="JSXEndTag"||s.name=="JSXSelfCloseEndTag")}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((s,e,n,a)=>{if((android?s.composing:s.compositionStarted)||s.state.readOnly||e!=n||a!=">"&&a!="/"||!javascriptLanguage.isActiveAt(s.state,e,-1))return!1;let{state:o}=s,l=o.changeByRange(u=>{var c;let{head:f}=u,d=syntaxTree(o).resolveInner(f,-1),g;if(d.name=="JSXStartTag"&&(d=d.parent),!(d.name=="JSXAttributeValue"&&d.to>f)){if(a==">"&&d.name=="JSXFragmentTag")return{range:EditorSelection.cursor(f+1),changes:{from:f,insert:"></>"}};if(a=="/"&&d.name=="JSXFragmentTag"){let O=d.parent,S=O?.parent;if(O.from==f-1&&((c=S.lastChild)===null||c===void 0?void 0:c.name)!="JSXEndTag"&&(g=elementName(o.doc,S?.firstChild,f))){let b=`/${g}>`;return{range:EditorSelection.cursor(f+b.length),changes:{from:f,insert:b}}}}else if(a==">"){let O=findOpenTag(d);if(O&&!isEndTag(O.lastChild)&&o.sliceDoc(f,f+2)!="</"&&(g=elementName(o.doc,O,f)))return{range:EditorSelection.cursor(f+1),changes:{from:f,insert:`></${g}>`}}}}return{range:u}});return l.changes.empty?!1:(s.dispatch(l,{userEvent:"input.type",scrollIntoView:!0}),!0)}),setFlash=StateEffect.define(),flashField=StateField.define({create(){return Decoration.none},update(s,e){try{for(let n of e.effects)if(n.is(setFlash))if(n.value&&e.newDoc.length>0){const a=Decoration.mark({attributes:{style:"background-color: #FFCA2880"}});s=Decoration.set([a.range(0,e.newDoc.length)])}else s=Decoration.set([]);return s}catch(n){return console.warn("flash error",n),s}},provide:s=>EditorView.decorations.from(s)}),flash=(s,e=200)=>{s.dispatch({effects:setFlash.of(!0)}),setTimeout(()=>{s.dispatch({effects:setFlash.of(!1)})},e)},isFlashEnabled=s=>s?flashField:[],setMiniLocations=StateEffect.define(),showMiniLocations=StateEffect.define(),updateMiniLocations=(s,e)=>{s.dispatch({effects:setMiniLocations.of(e)})},highlightMiniLocations=(s,e,n)=>{s.dispatch({effects:showMiniLocations.of({atTime:e,haps:n})})},miniLocations=StateField.define({create(){return Decoration.none},update(s,e){e.docChanged&&(s=s.map(e.changes));for(let n of e.effects)if(n.is(setMiniLocations)){const a=n.value.filter(([o])=>o<e.newDoc.length).map(([o,l])=>[o,Math.min(l,e.newDoc.length)]).map(o=>Decoration.mark({id:o.join(":"),attributes:{style:"background-color: #00CA2880"}}).range(...o));s=Decoration.set(a,!0)}return s}}),visibleMiniLocations=StateField.define({create(){return{atTime:0,haps:new Map}},update(s,e){for(let n of e.effects)if(n.is(showMiniLocations)){const a=new Map;for(let o of n.value.haps)for(let{start:l,end:u}of o.context.locations){let c=`${l}:${u}`;(!a.has(c)||a.get(c).whole.begin.lt(o.whole.begin))&&a.set(c,o)}s={atTime:n.value.atTime,haps:a}}return s}}),miniLocationHighlights=EditorView.decorations.compute([miniLocations,visibleMiniLocations],s=>{const e=s.field(miniLocations).iter(),{haps:n}=s.field(visibleMiniLocations),a=new RangeSetBuilder;for(;e.value;){const{from:o,to:l,value:{spec:{id:u}}}=e;if(n.has(u)){const f=n.get(u).context.color??"var(--foreground)";a.add(o,l,Decoration.mark({attributes:{style:`outline: solid 2px ${f}`}}))}e.next()}return a.finish()}),highlightExtension=[miniLocations,visibleMiniLocations,miniLocationHighlights],isPatternHighlightingEnabled=(s,e)=>(s&&e&&setTimeout(()=>{updateMiniLocations(e.editor,e.miniLocations)},100),s?highlightExtension:[]);function crelt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var o=n[a];typeof o=="string"?s.setAttribute(a,o):o!=null&&(s[a]=o)}e++}for(;e<arguments.length;e++)add$4(s,arguments[e]);return s}function add$4(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)add$4(s,e[n]);else throw new RangeError("Unsupported child node: "+e)}const basicNormalize=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class SearchCursor{constructor(e,n,a=0,o=e.length,l,u){this.test=u,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(a,o),this.bufferStart=a,this.normalize=l?c=>l(basicNormalize(c)):basicNormalize,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=fromCodePoint(e),a=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(e);let o=this.normalize(n);for(let l=0,u=a;;l++){let c=o.charCodeAt(l),f=this.match(c,u);if(f)return this.value=f,this;if(l==o.length-1)break;u==a&&l<n.length&&n.charCodeAt(l)==c&&u++}}}match(e,n){let a=null;for(let o=0;o<this.matches.length;o+=2){let l=this.matches[o],u=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?a={from:this.matches[o+1],to:n+1}:(this.matches[o]++,u=!0)),u||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?a={from:n,to:n+1}:this.matches.push(1,n)),a&&this.test&&!this.test(a.from,a.to,this.buffer,this.bufferPos)&&(a=null),a}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(e,n,a,o=0,l=e.length){if(this.text=e,this.to=l,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new MultilineRegExpCursor(e,n,a,o,l);this.re=new RegExp(n,baseFlags+(a?.ignoreCase?"i":"")),this.test=a?.test,this.iter=e.iter();let u=e.lineAt(o);this.curLineStart=u.from,this.matchPos=toCharEnd(e,o),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let a=this.curLineStart+n.index,o=a+n[0].length;if(this.matchPos=toCharEnd(this.text,o+(a==o?1:0)),a==this.curLineStart+this.curLine.length&&this.nextLine(),(a<o||a>this.value.to)&&(!this.test||this.test(a,o,n)))return this.value={from:a,to:o,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,a){let o=flattened.get(e);if(!o||o.from>=a||o.to<=n){let c=new FlattenedDoc(n,e.sliceString(n,a));return flattened.set(e,c),c}if(o.from==n&&o.to==a)return o;let{text:l,from:u}=o;return u>n&&(l=e.sliceString(n,u)+l,u=n),o.to<a&&(l+=e.sliceString(o.to,a)),flattened.set(e,new FlattenedDoc(u,l)),new FlattenedDoc(n,l.slice(n-u,a-u))}}class MultilineRegExpCursor{constructor(e,n,a,o,l){this.text=e,this.to=l,this.done=!1,this.value=empty,this.matchPos=toCharEnd(e,o),this.re=new RegExp(n,baseFlags+(a?.ignoreCase?"i":"")),this.test=a?.test,this.flat=FlattenedDoc.get(e,o,this.chunkEnd(o+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let a=this.flat.from+n.index,o=a+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(a,o,n)))return this.value={from:a,to:o,match:n},this.matchPos=toCharEnd(this.text,o+(a==o?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(s){try{return new RegExp(s,baseFlags),!0}catch{return!1}}function toCharEnd(s,e){if(e>=s.length)return e;let n=s.lineAt(e),a;for(;e<n.to&&(a=n.text.charCodeAt(e-n.from))>=56320&&a<57344;)e++;return e}function createLineDialog(s){let e=crelt("input",{class:"cm-textfield",name:"line"}),n=crelt("form",{class:"cm-gotoLine",onkeydown:o=>{o.keyCode==27?(o.preventDefault(),s.dispatch({effects:dialogEffect.of(!1)}),s.focus()):o.keyCode==13&&(o.preventDefault(),a())},onsubmit:o=>{o.preventDefault(),a()}},crelt("label",s.state.phrase("Go to line"),": ",e)," ",crelt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")));function a(){let o=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!o)return;let{state:l}=s,u=l.doc.lineAt(l.selection.main.head),[,c,f,d,g]=o,O=d?+d.slice(1):0,S=f?+f:u.number;if(f&&g){let E=S/100;c&&(E=E*(c=="-"?-1:1)+u.number/l.doc.lines),S=Math.round(l.doc.lines*E)}else f&&c&&(S=S*(c=="-"?-1:1)+u.number);let b=l.doc.line(Math.max(1,Math.min(l.doc.lines,S)));s.dispatch({effects:dialogEffect.of(!1),selection:EditorSelection.cursor(b.from+Math.max(0,Math.min(O,b.length))),scrollIntoView:!0}),s.focus()}return{dom:n}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(s,e){for(let n of e.effects)n.is(dialogEffect)&&(s=n.value);return s},provide:s=>showPanel.from(s,e=>e?createLineDialog:null)}),gotoLine=s=>{let e=getPanel(s,createLineDialog);if(!e){let n=[dialogEffect.of(!0)];s.state.field(dialogField,!1)==null&&n.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),s.dispatch({effects:n}),e=getPanel(s,createLineDialog)}return e&&e.dom.querySelector("input").focus(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),selectWord=({state:s,dispatch:e})=>{let{selection:n}=s,a=EditorSelection.create(n.ranges.map(o=>s.wordAt(o.head)||EditorSelection.cursor(o.head)),n.mainIndex);return a.eq(n)?!1:(e(s.update({selection:a})),!0)};function findNextOccurrence(s,e){let{main:n,ranges:a}=s.selection,o=s.wordAt(n.head),l=o&&o.from==n.from&&o.to==n.to;for(let u=!1,c=new SearchCursor(s.doc,e,a[a.length-1].to);;)if(c.next(),c.done){if(u)return null;c=new SearchCursor(s.doc,e,0,Math.max(0,a[a.length-1].from-1)),u=!0}else{if(u&&a.some(f=>f.from==c.value.from))continue;if(l){let f=s.wordAt(c.value.from);if(!f||f.from!=c.value.from||f.to!=c.value.to)continue}return c.value}}const selectNextOccurrence=({state:s,dispatch:e})=>{let{ranges:n}=s.selection;if(n.some(l=>l.from===l.to))return selectWord({state:s,dispatch:e});let a=s.sliceDoc(n[0].from,n[0].to);if(s.selection.ranges.some(l=>s.sliceDoc(l.from,l.to)!=a))return!1;let o=findNextOccurrence(s,a);return o?(e(s.update({selection:s.selection.addRange(EditorSelection.range(o.from,o.to),!1),effects:EditorView.scrollIntoView(o.to)})),!0):!1},searchConfigFacet=Facet.define({combine(s){return combineConfig(s,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new SearchPanel(e)})}});class SearchQuery{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,a)=>a=="n"?`
`:a=="r"?"\r":a=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(e,n=0,a){let o=e.doc?e:EditorState.create({doc:e});return a==null&&(a=o.doc.length),this.regexp?regexpCursor(this,o,n,a):stringCursor(this,o,n,a)}}class QueryType{constructor(e){this.spec=e}}function stringCursor(s,e,n,a){return new SearchCursor(e.doc,s.unquoted,n,a,s.caseSensitive?void 0:o=>o.toLowerCase(),s.wholeWord?stringWordTest(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function stringWordTest(s,e){return(n,a,o,l)=>((l>n||l+o.length<a)&&(l=Math.max(0,n-2),o=s.sliceString(l,Math.min(s.length,a+2))),(e(charBefore(o,n-l))!=CharCategory.Word||e(charAfter(o,n-l))!=CharCategory.Word)&&(e(charAfter(o,a-l))!=CharCategory.Word||e(charBefore(o,a-l))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(e){super(e)}nextMatch(e,n,a){let o=stringCursor(this.spec,e,a,e.doc.length).nextOverlapping();return o.done&&(o=stringCursor(this.spec,e,0,n).nextOverlapping()),o.done?null:o.value}prevMatchInRange(e,n,a){for(let o=a;;){let l=Math.max(n,o-1e4-this.spec.unquoted.length),u=stringCursor(this.spec,e,l,o),c=null;for(;!u.nextOverlapping().done;)c=u.value;if(c)return c;if(l==n)return null;o-=1e4}}prevMatch(e,n,a){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let a=stringCursor(this.spec,e,0,e.doc.length),o=[];for(;!a.next().done;){if(o.length>=n)return null;o.push(a.value)}return o}highlight(e,n,a,o){let l=stringCursor(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(a+this.spec.unquoted.length,e.doc.length));for(;!l.next().done;)o(l.value.from,l.value.to)}}function regexpCursor(s,e,n,a){return new RegExpCursor(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?regexpWordTest(e.charCategorizer(e.selection.main.head)):void 0},n,a)}function charBefore(s,e){return s.slice(findClusterBreak(s,e,!1),e)}function charAfter(s,e){return s.slice(e,findClusterBreak(s,e))}function regexpWordTest(s){return(e,n,a)=>!a[0].length||(s(charBefore(a.input,a.index))!=CharCategory.Word||s(charAfter(a.input,a.index))!=CharCategory.Word)&&(s(charAfter(a.input,a.index+a[0].length))!=CharCategory.Word||s(charBefore(a.input,a.index+a[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(e,n,a){let o=regexpCursor(this.spec,e,a,e.doc.length).next();return o.done&&(o=regexpCursor(this.spec,e,0,n).next()),o.done?null:o.value}prevMatchInRange(e,n,a){for(let o=1;;o++){let l=Math.max(n,a-o*1e4),u=regexpCursor(this.spec,e,l,a),c=null;for(;!u.next().done;)c=u.value;if(c&&(l==n||c.from>l+10))return c;if(l==n)return null}}prevMatch(e,n,a){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,a,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,a)=>a=="$"?"$":a=="&"?e.match[0]:a!="0"&&+a<e.match.length?e.match[a]:n))}matchAll(e,n){let a=regexpCursor(this.spec,e,0,e.doc.length),o=[];for(;!a.next().done;){if(o.length>=n)return null;o.push(a.value)}return o}highlight(e,n,a,o){let l=regexpCursor(this.spec,e,Math.max(0,n-250),Math.min(a+250,e.doc.length));for(;!l.next().done;)o(l.value.from,l.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(s){return new SearchState(defaultQuery(s).create(),null)},update(s,e){for(let n of e.effects)n.is(setSearchQuery)?s=new SearchState(n.value.create(),s.panel):n.is(togglePanel$1)&&(s=new SearchState(s.query,n.value?createSearchPanel:null));return s},provide:s=>showPanel.from(s,e=>e.panel)});class SearchState{constructor(e,n){this.query=e,this.panel=n}}const matchMark$1=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(searchState))}update(s){let e=s.state.field(searchState);(e!=s.startState.field(searchState)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Decoration.none;let{view:n}=this,a=new RangeSetBuilder;for(let o=0,l=n.visibleRanges,u=l.length;o<u;o++){let{from:c,to:f}=l[o];for(;o<u-1&&f>l[o+1].from-2*250;)f=l[++o].to;s.highlight(n.state,c,f,(d,g)=>{let O=n.state.selection.ranges.some(S=>S.from==d&&S.to==g);a.add(d,g,O?selectedMatchMark:matchMark$1)})}return a.finish()}},{decorations:s=>s.decorations});function searchCommand(s){return e=>{let n=e.state.field(searchState,!1);return n&&n.query.spec.valid?s(e,n):openSearchPanel(e)}}const findNext=searchCommand((s,{query:e})=>{let{to:n}=s.state.selection.main,a=e.nextMatch(s.state,n,n);return a?(s.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0,effects:announceMatch(s,a),userEvent:"select.search"}),!0):!1}),findPrevious=searchCommand((s,{query:e})=>{let{state:n}=s,{from:a}=n.selection.main,o=e.prevMatch(n,a,a);return o?(s.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:announceMatch(s,o),userEvent:"select.search"}),!0):!1}),selectMatches=searchCommand((s,{query:e})=>{let n=e.matchAll(s.state,1e3);return!n||!n.length?!1:(s.dispatch({selection:EditorSelection.create(n.map(a=>EditorSelection.range(a.from,a.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:s,dispatch:e})=>{let n=s.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:a,to:o}=n.main,l=[],u=0;for(let c=new SearchCursor(s.doc,s.sliceDoc(a,o));!c.next().done;){if(l.length>1e3)return!1;c.value.from==a&&(u=l.length),l.push(EditorSelection.range(c.value.from,c.value.to))}return e(s.update({selection:EditorSelection.create(l,u),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((s,{query:e})=>{let{state:n}=s,{from:a,to:o}=n.selection.main;if(n.readOnly)return!1;let l=e.nextMatch(n,a,a);if(!l)return!1;let u=[],c,f,d=[];if(l.from==a&&l.to==o&&(f=n.toText(e.getReplacement(l)),u.push({from:l.from,to:l.to,insert:f}),l=e.nextMatch(n,l.from,l.to),d.push(EditorView.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(a).number)+"."))),l){let g=u.length==0||u[0].from>=l.to?0:l.to-l.from-f.length;c={anchor:l.from-g,head:l.to-g},d.push(announceMatch(s,l))}return s.dispatch({changes:u,selection:c,scrollIntoView:!!c,effects:d,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((s,{query:e})=>{if(s.state.readOnly)return!1;let n=e.matchAll(s.state,1e9).map(o=>{let{from:l,to:u}=o;return{from:l,to:u,insert:e.getReplacement(o)}});if(!n.length)return!1;let a=s.state.phrase("replaced $ matches",n.length)+".";return s.dispatch({changes:n,effects:EditorView.announce.of(a),userEvent:"input.replace.all"}),!0});function createSearchPanel(s){return s.state.facet(searchConfigFacet).createPanel(s)}function defaultQuery(s,e){var n,a,o,l;let u=s.selection.main,c=u.empty||u.to>u.from+100?"":s.sliceDoc(u.from,u.to);if(e&&!c)return e;let f=s.facet(searchConfigFacet);return new SearchQuery({search:((n=e?.literal)!==null&&n!==void 0?n:f.literal)?c:c.replace(/\n/g,"\\n"),caseSensitive:(a=e?.caseSensitive)!==null&&a!==void 0?a:f.caseSensitive,literal:(o=e?.literal)!==null&&o!==void 0?o:f.literal,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:f.wholeWord})}const openSearchPanel=s=>{let e=s.state.field(searchState,!1);if(e&&e.panel){let n=getPanel(s,createSearchPanel);if(!n)return!1;let a=n.dom.querySelector("[main-field]");if(a&&a!=s.root.activeElement){let o=defaultQuery(s.state,e.query.spec);o.valid&&s.dispatch({effects:setSearchQuery.of(o)}),a.focus(),a.select()}}else s.dispatch({effects:[togglePanel$1.of(!0),e?setSearchQuery.of(defaultQuery(s.state,e.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=s=>{let e=s.state.field(searchState,!1);if(!e||!e.panel)return!1;let n=getPanel(s,createSearchPanel);return n&&n.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:togglePanel$1.of(!1)}),!0};class SearchPanel{constructor(e){this.view=e;let n=this.query=e.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:n.search,placeholder:phrase(e,"Find"),"aria-label":phrase(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:n.replace,placeholder:phrase(e,"Replace"),"aria-label":phrase(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function a(o,l,u){return crelt("button",{class:"cm-button",name:o,onclick:l,type:"button"},u)}this.dom=crelt("div",{onkeydown:o=>this.keydown(o),class:"cm-search"},[this.searchField,a("next",()=>findNext(e),[phrase(e,"next")]),a("prev",()=>findPrevious(e),[phrase(e,"previous")]),a("select",()=>selectMatches(e),[phrase(e,"all")]),crelt("label",null,[this.caseField,phrase(e,"match case")]),crelt("label",null,[this.reField,phrase(e,"regexp")]),crelt("label",null,[this.wordField,phrase(e,"by word")]),...e.state.readOnly?[]:[crelt("br"),this.replaceField,a("replace",()=>replaceNext(e),[phrase(e,"replace")]),a("replaceAll",()=>replaceAll(e),[phrase(e,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(e),"aria-label":phrase(e,"close"),type:"button"},["×"])])}commit(){let e=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:setSearchQuery.of(e)}))}keydown(e){runScopeHandlers(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?findPrevious:findNext)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),replaceNext(this.view))}update(e){for(let n of e.transactions)for(let a of n.effects)a.is(setSearchQuery)&&!a.value.eq(this.query)&&this.setQuery(a.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(s,e){return s.state.phrase(e)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(s,{from:e,to:n}){let a=s.state.doc.lineAt(e),o=s.state.doc.lineAt(n).to,l=Math.max(a.from,e-AnnounceMargin),u=Math.min(o,n+AnnounceMargin),c=s.state.sliceDoc(l,u);if(l!=a.from){for(let f=0;f<AnnounceMargin;f++)if(!Break.test(c[f+1])&&Break.test(c[f])){c=c.slice(f);break}}if(u!=o){for(let f=c.length-1;f>c.length-AnnounceMargin;f--)if(!Break.test(c[f-1])&&Break.test(c[f])){c=c.slice(0,f);break}}return EditorView.announce.of(`${s.state.phrase("current match")}. ${c} ${s.state.phrase("on line")} ${a.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.lowest(searchHighlighter),baseTheme$2];let Piece$1=class{constructor(e,n,a,o,l,u){this.left=e,this.top=n,this.height=a,this.className=o,this.letter=l,this.partial=u}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.color=this.partial?"transparent":"",e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.letter==e.letter&&this.height==e.height&&this.className==e.className}},BlockCursorPlugin$1=class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration="1200ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,n=[];for(let a of e.selection.ranges){let o=a==e.selection.main,l=measureCursor$1(null,this.view,a,o);l&&n.push(l)}return{cursors:n}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((n,a)=>!n.eq(this.cursors[a]))){let n=this.cursorLayer.children;if(n.length!==e.length){this.cursorLayer.textContent="";for(const a of e)this.cursorLayer.appendChild(a.draw())}else e.forEach((a,o)=>a.adjust(n[o]));this.cursors=e}}destroy(){this.cursorLayer.remove()}};const themeSpec$1={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696"}},hideNativeSelection$1=Prec.highest(EditorView.theme(themeSpec$1));function getBase$1(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Direction.LTR?e.left:e.right-s.scrollDOM.clientWidth)-s.scrollDOM.scrollLeft,top:e.top-s.scrollDOM.scrollTop}}function measureCursor$1(s,e,n,a){let o=n.head;var l=1;let u=e.coordsAtPos(o,1);if(!u)return null;let c=getBase$1(e),f=o<e.state.doc.length&&e.state.sliceDoc(o,o+1);(!f||f==`
`||f=="\r")&&(f=" ");let d=u.bottom-u.top;return new Piece$1(u.left-c.left,u.top-c.top+d*(1-l),d*l,a?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",f,l!=1)}const emacsStyle=EditorView.theme({".cm-emacsMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"5px 10px",backgroundColor:"#fffa8f",fontFamily:"monospace"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"#fffa8f"}}),emacsPlugin=ViewPlugin.fromClass(class{constructor(s){this.status="",this.view=s,this.em=new EmacsHandler(s),this.blockCursor=new BlockCursorPlugin$1(s),this.view.scrollDOM.classList.add("cm-emacsMode")}update(s){s.docChanged&&(this.em.$emacsMark=null,this.em.updateMarksOnChange(s.changes)),this.blockCursor.update(s)}destroy(){this.view.scrollDOM.classList.remove("cm-emacsMode"),this.blockCursor.destroy()}},{eventHandlers:{mousedown:function(){this.em.$emacsMark=null}},provide:s=>keymap.of([{any:function(e,n){var a;return!!(!((a=e.plugin(s))===null||a===void 0)&&a.em.handleKeyboard(n))}}])}),showVimPanel$1=StateEffect.define(),vimPanelState$1=StateField.define({create:()=>!1,update(s,e){for(let n of e.effects)n.is(showVimPanel$1)&&(s=n.value);return s},provide:s=>showPanel.from(s,e=>e?createVimPanel$1:null)});function createVimPanel$1(s){let e=document.createElement("div");return e.className="cm-vim-panel",{top:!1,dom:e}}function emacs(s={}){return[emacsStyle,emacsPlugin,hideNativeSelection$1,vimPanelState$1]}var specialKey$1={Return:"Return",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Return",Divide:"/",Slash:"/",Multiply:"*",Subtract:"-",Minus:"-",Equal:"="},ignoredKeys$1={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1};const commandKeyBinding={};class EmacsHandler{constructor(e){this.view=e,this.$data={count:0,keyChain:"",lastCommand:""},this.$emacsMarkRing=[],this.$emacsMark=null}static bindKey(e,n){e.split("|").forEach(function(a){let o="",l=a.split(/\s+/);l.forEach(function(u,c){let f=u.split(/-(?=.)/),d=f.pop();f.length&&(o+=f.sort().join("-")+"-"),o+=d,c===l.length-1?commandKeyBinding[o]=n:(commandKeyBinding[o]="null",o+=" ")})})}static getKey(e){var n=e.code,a=e.key;if(ignoredKeys$1[a])return["","",""];n.length>1&&(n[0]=="N"&&(n=n.replace(/^Numpad/,"")),n[0]=="K"&&(n=n.replace(/^Key/,""))),n=specialKey$1[n]||n,n.length==1&&(n=n.toLowerCase());var o="";return e.ctrlKey&&(o+="C-"),e.metaKey&&(o+="CMD-"),e.altKey&&(o+="M-"),e.shiftKey&&(o+="S-"),[n,o,a]}static addCommands(e){Object.keys(e).forEach(function(n){var a=e[n];typeof a=="function"&&(a={exec:a}),EmacsHandler.commands[n]=a})}static execCommand(e,n,a,o=1){var l=void 0;if(typeof e=="function")for(var u=0;u<o;u++)e(n.view);else if(e!=="null")if(e.exec){o>1&&e.handlesCount&&(a||(a={}),typeof a=="object"&&(a.count=o),o=1);for(var u=0;u<o;u++)l=e.exec(n,a||{})}else throw new Error("missformed command");return l}handleKeyboard(e){var n=EmacsHandler.getKey(e),a=this.findCommand(n);if(a&&a.command){var o=EmacsHandler.execCommand(a.command,this,a.args,a.count);if(o===!1)return}return a}findCommand([e,n,a]){if(e){var o=this,l=this.$data;if(!n&&e.length==1&&(o.pushEmacsMark(),l.count)){var u=new Array(l.count+1).join(a);return l.count=null,{command:"insertstring",args:u}}if(n=="C-"||l.count){var d=parseInt(e[e.length-1]);if(typeof d=="number"&&!isNaN(d))return l.count=Math.max(l.count||0,0),l.count=10*l.count+d,{command:"null"}}n&&(e=n+e),l.keyChain&&(e=l.keyChain+=" "+e);var c=commandKeyBinding[e];if(l.keyChain=c=="null"?e:"",!!c){if(c==="null")return{command:"null"};if(c==="universalArgument")return l.count=-4,{command:"null"};var f;if(typeof c!="string"&&(f=c.args,c.command&&(c=c.command)),(c==="insertstring"||c===splitLine||c===toggleComment)&&o.pushEmacsMark(),!(typeof c=="string"&&(c=EmacsHandler.commands[c],!c))){!c.readOnly&&!c.isYank&&(l.lastCommand=null);var d=l.count||1;return l.count&&(l.count=0),{command:c,args:f,count:d}}}}}showCommandLine(e){console.error("TODO")}updateMarksOnChange(e){this.$emacsMark&&(this.$emacsMark=this.updateMark(this.$emacsMark,e)),this.$emacsMarkRing=this.$emacsMarkRing.map(n=>this.updateMark(n,e)).filter(Boolean)}updateMark(e,n){if(e){var a=e.map(function(o){return n.mapPos(o,1,MapMode.TrackDel)}).filter(o=>o!=null);return a.length==0?null:a}}emacsMark(){return this.$emacsMark}setEmacsMark(e){this.$emacsMark=e}pushEmacsMark(e,n){var a=this.$emacsMark;a&&this.$emacsMarkRing.push(a),!e||n?this.setEmacsMark(e):this.$emacsMarkRing.push(e)}popEmacsMark(){var e=this.emacsMark();return e?(this.setEmacsMark(null),e):this.$emacsMarkRing.pop()}getLastEmacsMark(){return this.$emacsMark||this.$emacsMarkRing.slice(-1)[0]}getCopyText(){var e=this.view.state;return e.selection.ranges.map(n=>e.sliceDoc(n.from,n.to)).join(`
`)}clearSelection(){var e=this.view,n=e.state.selection,a=!n.ranges.some(l=>l.from!=l.to);if(a)return!1;var o=n.ranges.map(l=>EditorSelection.range(l.head,l.head));return e.dispatch({selection:EditorSelection.create(o,n.mainIndex)}),!0}onPaste(e){var n=this.view,a=n.state.selection,o;if(a.ranges.length>1){var l=e.split(`
`);l.length==a.ranges.length&&(o=l)}var u=0,c=n.state.changeByRange(f=>{var d=o?o[u]:e;return u++,{changes:{from:f.from,to:f.to,insert:d},range:EditorSelection.cursor(f.from+d.length)}});n.dispatch(c)}}EmacsHandler.commands={};function initVim(s){var e=s.Pos;function n(p,v){var A=p.state.vim;if(!A||A.insertMode)return v.head;var P=A.sel.head;if(!P)return v.head;if(!(A.visualBlock&&v.head.line!=P.line))return v.from()==v.anchor&&!v.empty()&&v.head.line==P.line&&v.head.ch!=P.ch?new e(v.head.line,v.head.ch-1):v.head}function a(p,v,A){if(v.line===A.line&&v.ch>=A.ch-1){var P=p.getLine(v.line),N=P.charCodeAt(v.ch);55296<=N&&N<=55551&&(A.ch+=1)}return{start:v,end:A}}var o=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"<Del>",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<character>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<character>",type:"action",action:"replayMacro"},{keys:"q<character>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<character>",type:"action",action:"setMark"},{keys:'"<character>',type:"action",action:"setRegister"},{keys:"<C-r><character>",type:"action",action:"insertRegister",context:"insert",isEdit:!0},{keys:"<C-o>",type:"action",action:"oneNormalCommand",context:"insert"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<character>",type:"motion",motion:"textObjectManipulation"},{keys:"i<character>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],l=o.length,u=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"omap",shortName:"om"},{name:"noremap",shortName:"no"},{name:"nnoremap",shortName:"nn"},{name:"vnoremap",shortName:"vn"},{name:"inoremap",shortName:"ino"},{name:"onoremap",shortName:"ono"},{name:"unmap"},{name:"mapclear",shortName:"mapc"},{name:"nmapclear",shortName:"nmapc"},{name:"vmapclear",shortName:"vmapc"},{name:"imapclear",shortName:"imapc"},{name:"omapclear",shortName:"omapc"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"delete",shortName:"d"},{name:"join",shortName:"j"},{name:"normal",shortName:"norm"},{name:"global",shortName:"g"}];function c(p){p.setOption("disableInput",!0),p.setOption("showCursorWhenSelecting",!1),s.signal(p,"vim-mode-change",{mode:"normal"}),p.on("cursorActivity",Ze),at(p),s.on(p.getInputField(),"paste",$(p))}function f(p){p.setOption("disableInput",!1),p.off("cursorActivity",Ze),s.off(p.getInputField(),"paste",$(p)),p.state.vim=null,di&&clearTimeout(di)}function d(p,v){this==s.keyMap.vim&&(p.options.$customCursor=null,s.rmClass(p.getWrapperElement(),"cm-fat-cursor")),(!v||v.attach!=g)&&f(p)}function g(p,v){this==s.keyMap.vim&&(p.curOp&&(p.curOp.selectionChanged=!0),p.options.$customCursor=n,s.addClass(p.getWrapperElement(),"cm-fat-cursor")),(!v||v.attach!=g)&&c(p)}s.defineOption("vimMode",!1,function(p,v,A){v&&p.getOption("keyMap")!="vim"?p.setOption("keyMap","vim"):!v&&A!=s.Init&&/^vim/.test(p.getOption("keyMap"))&&p.setOption("keyMap","default")});function O(p,v){if(v){if(this[p])return this[p];var A=k(p);if(!A)return!1;var P=ot.findKey(v,A);return typeof P=="function"&&s.signal(v,"vim-keypress",A),P}}var S={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A",CapsLock:""},b={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"},E={};"Left|Right|Up|Down|End|Home".split("|").concat(Object.keys(b)).forEach(function(p){E[(b[p]||"").toLowerCase()]=E[p.toLowerCase()]=p});function k(p){if(p.charAt(0)=="'")return p.charAt(1);var v=p.split(/-(?!$)/),A=v[v.length-1];if(v.length==1&&v[0].length==1)return!1;if(v.length==2&&v[0]=="Shift"&&A.length==1)return!1;for(var P=!1,N=0;N<v.length;N++){var B=v[N];B in S?v[N]=S[B]:P=!0,B in b&&(v[N]=b[B])}return P?(Re(A)&&(v[v.length-1]=A.toLowerCase()),"<"+v.join("-")+">"):!1}function $(p){var v=p.state.vim;return v.onPasteFn||(v.onPasteFn=function(){v.insertMode||(p.setCursor(et(p.getCursor(),0,1)),ut.enterInsertMode(p,{},v))}),v.onPasteFn}var R=/[\d]/,Z=[s.isWordChar,function(p){return p&&!s.isWordChar(p)&&!/\s/.test(p)}],he=[function(p){return/\S/.test(p)}];function j(p,v){for(var A=[],P=p;P<p+v;P++)A.push(String.fromCharCode(P));return A}var K=j(65,26),se=j(97,26),de=j(48,10),ue=[].concat(K,se,de,["<",">"]),me=[].concat(K,se,de,["-",'"',".",":","_","/","+"]),ge;try{ge=new RegExp("^[\\p{Lu}]$","u")}catch{ge=/^[A-Z]$/}function Oe(p,v){return v>=p.firstLine()&&v<=p.lastLine()}function be(p){return/^[a-z]$/.test(p)}function Ae(p){return"()[]{}".indexOf(p)!=-1}function Ne(p){return R.test(p)}function Re(p){return ge.test(p)}function Fe(p){return/^\s*$/.test(p)}function Ue(p){return".?!".indexOf(p)!=-1}function $e(p,v){for(var A=0;A<v.length;A++)if(v[A]==p)return!0;return!1}var Ie={};function Xe(p,v,A,P,N){if(v===void 0&&!N)throw Error("defaultValue is required unless callback is provided");if(A||(A="string"),Ie[p]={type:A,defaultValue:v,callback:N},P)for(var B=0;B<P.length;B++)Ie[P[B]]=Ie[p];v&&Pe(p,v)}function Pe(p,v,A,P){var N=Ie[p];P=P||{};var B=P.scope;if(!N)return new Error("Unknown option: "+p);if(N.type=="boolean"){if(v&&v!==!0)return new Error("Invalid argument: "+p+"="+v);v!==!1&&(v=!0)}N.callback?(B!=="local"&&N.callback(v,void 0),B!=="global"&&A&&N.callback(v,A)):(B!=="local"&&(N.value=N.type=="boolean"?!!v:v),B!=="global"&&A&&(A.state.vim.options[p]={value:v}))}function nt(p,v,A){var P=Ie[p];A=A||{};var N=A.scope;if(!P)return new Error("Unknown option: "+p);if(P.callback){var B=v&&P.callback(void 0,v);return N!=="global"&&B!==void 0?B:N!=="local"?P.callback():void 0}else{var B=N!=="global"&&v&&v.state.vim.options[p];return(B||N!=="local"&&P||{}).value}}Xe("filetype",void 0,"string",["ft"],function(p,v){if(v!==void 0)if(p===void 0){var A=v.getOption("mode");return A=="null"?"":A}else{var A=p==""?"null":p;v.setOption("mode",A)}});var At=function(){var p=100,v=-1,A=0,P=0,N=new Array(p);function B(q,le,oe){var ve=v%p,Ce=N[ve];function _e(De){var Me=++v%p,Qe=N[Me];Qe&&Qe.clear(),N[Me]=q.setBookmark(De)}if(Ce){var pe=Ce.find();pe&&!ze(pe,le)&&_e(le)}else _e(le);_e(oe),A=v,P=v-p+1,P<0&&(P=0)}function V(q,le){v+=le,v>A?v=A:v<P&&(v=P);var oe=N[(p+v)%p];if(oe&&!oe.find()){var ve=le>0?1:-1,Ce,_e=q.getCursor();do if(v+=ve,oe=N[(p+v)%p],oe&&(Ce=oe.find())&&!ze(_e,Ce))break;while(v<A&&v>P)}return oe}function z(q,le){var oe=v,ve=V(q,le);return v=oe,ve&&ve.find()}return{cachedCursor:void 0,add:B,find:z,move:V}},Dt=function(p){return p?{changes:p.changes,expectCursorActivityForChange:p.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};function qe(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Dt()}qe.prototype={exitMacroRecordMode:function(){var p=xe.macroModeState;p.onRecordingDone&&p.onRecordingDone(),p.onRecordingDone=void 0,p.isRecording=!1},enterMacroRecordMode:function(p,v){var A=xe.registerController.getRegister(v);if(A){if(A.clear(),this.latestRegister=v,p.openDialog){var P=ni("span",{class:"cm-vim-message"},"recording @"+v);this.onRecordingDone=p.openDialog(P,null,{bottom:!0})}this.isRecording=!0}}};function at(p){return p.state.vim||(p.state.vim={inputState:new Tt,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeReturn:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}}),p.state.vim}var xe;function Et(){xe={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:At(),macroModeState:new qe,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new Yt({}),searchHistoryController:new It,exCommandHistoryController:new It};for(var p in Ie){var v=Ie[p];v.value=v.defaultValue}}var Ft,ot={enterVimMode:c,leaveVimMode:f,buildKeyMap:function(){},getRegisterController:function(){return xe.registerController},resetVimGlobalState_:Et,getVimGlobalState_:function(){return xe},maybeInitVimState_:at,suppressErrorLogging:!1,InsertModeKey:Zt,map:function(p,v,A){Wt.map(p,v,A)},unmap:function(p,v){return Wt.unmap(p,v)},noremap:function(p,v,A){Wt.map(p,v,A,!0)},mapclear:function(p){var v=o.length,A=l,P=o.slice(0,v-A);if(o=o.slice(v-A),p)for(var N=P.length-1;N>=0;N--){var B=P[N];if(p!==B.context)if(B.context)this._mapCommand(B);else{var V=["normal","insert","visual"];for(var z in V)if(V[z]!==p){var q={};for(var le in B)q[le]=B[le];q.context=V[z],this._mapCommand(q)}}}},setOption:Pe,getOption:nt,defineOption:Xe,defineEx:function(p,v,A){if(!v)v=p;else if(p.indexOf(v)!==0)throw new Error('(Vim.defineEx) "'+v+'" is not a prefix of "'+p+'", command not registered');Gi[p]=A,Wt.commandMap_[v]={name:p,shortName:v,type:"api"}},handleKey:function(p,v,A){var P=this.findKey(p,v,A);if(typeof P=="function")return P()},multiSelectHandleKey:je,findKey:function(p,v,A){var P=at(p);function N(){var le=xe.macroModeState;if(le.isRecording){if(v=="q")return le.exitMacroRecordMode(),dt(p),!0;A!="mapping"&&mn(le,v)}}function B(){if(v=="<Esc>"){if(P.visualMode)kt(p);else if(P.insertMode)ri(p);else return;return dt(p),!0}}function V(){if(B())return!0;P.inputState.keyBuffer.push(v);var le=P.inputState.keyBuffer.join(""),oe=v.length==1,ve=Qt.matchCommand(le,o,P.inputState,"insert"),Ce=P.inputState.changeQueue;if(ve.type=="none")return dt(p),!1;if(ve.type=="partial"){if(Ft&&window.clearTimeout(Ft),Ft=oe&&window.setTimeout(function(){P.insertMode&&P.inputState.keyBuffer.length&&dt(p)},nt("insertModeEscKeysTimeout")),oe){var _e=p.listSelections();(!Ce||Ce.removed.length!=_e.length)&&(Ce=P.inputState.changeQueue=new Kt),Ce.inserted+=v;for(var pe=0;pe<_e.length;pe++){var De=Pt(_e[pe].anchor,_e[pe].head),Me=Gt(_e[pe].anchor,_e[pe].head),Qe=p.getRange(De,p.state.overwrite?et(Me,0,1):Me);Ce.removed[pe]=(Ce.removed[pe]||"")+Qe}}return!oe}if(Ft&&window.clearTimeout(Ft),ve.command&&Ce){for(var _e=p.listSelections(),pe=0;pe<_e.length;pe++){var Ge=_e[pe].head;p.replaceRange(Ce.removed[pe]||"",et(Ge,0,-Ce.inserted.length),Ge,"+input")}xe.macroModeState.lastInsertModeChanges.changes.pop()}return ve.command||dt(p),ve.command}function z(){if(N()||B())return!0;P.inputState.keyBuffer.push(v);var le=P.inputState.keyBuffer.join("");if(/^[1-9]\d*$/.test(le))return!0;var oe=/^(\d*)(.*)$/.exec(le);if(!oe)return dt(p),!1;var ve=P.visualMode?"visual":"normal",Ce=oe[2]||oe[1];P.inputState.operatorShortcut&&P.inputState.operatorShortcut.slice(-1)==Ce&&(Ce=P.inputState.operatorShortcut);var _e=Qt.matchCommand(Ce,o,P.inputState,ve);return _e.type=="none"?(dt(p),!1):_e.type=="partial"?!0:_e.type=="clear"?(dt(p),!0):(P.inputState.keyBuffer.length=0,oe=/^(\d*)(.*)$/.exec(le),oe[1]&&oe[1]!="0"&&P.inputState.pushRepeatDigit(oe[1]),_e.command)}var q;return P.insertMode?q=V():q=z(),q===!1?!P.insertMode&&v.length===1?function(){return!0}:void 0:q===!0?function(){return!0}:function(){return p.operation(function(){p.curOp.isVimOp=!0;try{q.type=="keyToKey"?ht(p,q.toKeys,q):Qt.processCommand(p,P,q)}catch(le){throw p.state.vim=void 0,at(p),ot.suppressErrorLogging||console.log(le),le}return!0})}},handleEx:function(p,v){Wt.processCommand(p,v)},defineMotion:ei,defineAction:Ot,defineOperator:Le,mapCommand:pn,_mapCommand:Ui,defineRegister:Ht,exitVisualMode:kt,exitInsertMode:ri},st=[],Xt=!1;function ht(p,v,A){if(A){if(st.indexOf(A)!=-1)return;st.push(A),Xt=A.noremap}try{for(var P=at(p),N=/<(?:[CSMA]-)*\w+>|./gi,B;B=N.exec(v);){var V=B[0],z=P.insertMode,q=ot.handleKey(p,V,"mapping");if(!q&&z&&P.insertMode){if(V[0]=="<"){var oe=V.toLowerCase().slice(1,-1),le=oe.split("-"),oe=le.pop();if(oe=="lt")V="<";else if(oe=="space")V=" ";else if(oe=="cr")V=`
`;else if(E.hasOwnProperty(oe)){V=E[oe],ui(p,V);continue}else V=V[0],N.lastIndex=B.index+1}p.replaceSelection(V)}}}finally{Xt=!1,st.length=0}}function Tt(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null,this.changeQueue=null}Tt.prototype.pushRepeatDigit=function(p){this.operator?this.motionRepeat=this.motionRepeat.concat(p):this.prefixRepeat=this.prefixRepeat.concat(p)},Tt.prototype.getRepeat=function(){var p=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(p=1,this.prefixRepeat.length>0&&(p*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(p*=parseInt(this.motionRepeat.join(""),10))),p};function dt(p,v){p.state.vim.inputState=new Tt,s.signal(p,"vim-command-done",v)}function Kt(){this.removed=[],this.inserted=""}function Ct(p,v,A){this.clear(),this.keyBuffer=[p||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!v,this.blockwise=!!A}Ct.prototype={setText:function(p,v,A){this.keyBuffer=[p||""],this.linewise=!!v,this.blockwise=!!A},pushText:function(p,v){v&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(p)},pushInsertModeChanges:function(p){this.insertModeChanges.push(Dt(p))},pushSearchQuery:function(p){this.searchQueries.push(p)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};function Ht(p,v){var A=xe.registerController.registers;if(!p||p.length!=1)throw Error("Register name must be 1 character");if(A[p])throw Error("Register already defined "+p);A[p]=v,me.push(p)}function Yt(p){this.registers=p,this.unnamedRegister=p['"']=new Ct,p["."]=new Ct,p[":"]=new Ct,p["/"]=new Ct,p["+"]=new Ct}Yt.prototype={pushText:function(p,v,A,P,N){if(p!=="_"){P&&A.charAt(A.length-1)!==`
`&&(A+=`
`);var B=this.isValidRegister(p)?this.getRegister(p):null;if(!B){switch(v){case"yank":this.registers[0]=new Ct(A,P,N);break;case"delete":case"change":A.indexOf(`
`)==-1?this.registers["-"]=new Ct(A,P):(this.shiftNumericRegisters_(),this.registers[1]=new Ct(A,P));break}this.unnamedRegister.setText(A,P,N);return}var V=Re(p);V?B.pushText(A,P):B.setText(A,P,N),p==="+"&&navigator.clipboard.writeText(A),this.unnamedRegister.setText(B.toString(),P)}},getRegister:function(p){return this.isValidRegister(p)?(p=p.toLowerCase(),this.registers[p]||(this.registers[p]=new Ct),this.registers[p]):this.unnamedRegister},isValidRegister:function(p){return p&&$e(p,me)},shiftNumericRegisters_:function(){for(var p=9;p>=2;p--)this.registers[p]=this.getRegister(""+(p-1))}};function It(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}It.prototype={nextMatch:function(p,v){var A=this.historyBuffer,P=v?-1:1;this.initialPrefix===null&&(this.initialPrefix=p);for(var N=this.iterator+P;v?N>=0:N<A.length;N+=P)for(var B=A[N],V=0;V<=B.length;V++)if(this.initialPrefix==B.substring(0,V))return this.iterator=N,B;if(N>=A.length)return this.iterator=A.length,this.initialPrefix;if(N<0)return p},pushInput:function(p){var v=this.historyBuffer.indexOf(p);v>-1&&this.historyBuffer.splice(v,1),p.length&&this.historyBuffer.push(p)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var Qt={matchCommand:function(p,v,A,P){var N=ti(p,v,P,A);if(!N.full&&!N.partial)return{type:"none"};if(!N.full&&N.partial)return{type:"partial"};for(var B,V=0;V<N.full.length;V++){var z=N.full[V];B||(B=z)}if(B.keys.slice(-11)=="<character>"){var q=yt(p);if(!q||q.length>1)return{type:"clear"};A.selectedCharacter=q}return{type:"full",command:B}},processCommand:function(p,v,A){switch(v.inputState.repeatOverride=A.repeatOverride,A.type){case"motion":this.processMotion(p,v,A);break;case"operator":this.processOperator(p,v,A);break;case"operatorMotion":this.processOperatorMotion(p,v,A);break;case"action":this.processAction(p,v,A);break;case"search":this.processSearch(p,v,A);break;case"ex":case"keyToEx":this.processEx(p,v,A);break}},processMotion:function(p,v,A){v.inputState.motion=A.motion,v.inputState.motionArgs=pt(A.motionArgs),this.evalInput(p,v)},processOperator:function(p,v,A){var P=v.inputState;if(P.operator)if(P.operator==A.operator){P.motion="expandToLine",P.motionArgs={linewise:!0},this.evalInput(p,v);return}else dt(p);P.operator=A.operator,P.operatorArgs=pt(A.operatorArgs),A.keys.length>1&&(P.operatorShortcut=A.keys),A.exitVisualBlock&&(v.visualBlock=!1,Be(p)),v.visualMode&&this.evalInput(p,v)},processOperatorMotion:function(p,v,A){var P=v.visualMode,N=pt(A.operatorMotionArgs);N&&P&&N.visualLine&&(v.visualLine=!0),this.processOperator(p,v,A),P||this.processMotion(p,v,A)},processAction:function(p,v,A){var P=v.inputState,N=P.getRepeat(),B=!!N,V=pt(A.actionArgs)||{};P.selectedCharacter&&(V.selectedCharacter=P.selectedCharacter),A.operator&&this.processOperator(p,v,A),A.motion&&this.processMotion(p,v,A),(A.motion||A.operator)&&this.evalInput(p,v),V.repeat=N||1,V.repeatIsExplicit=B,V.registerName=P.registerName,dt(p),v.lastMotion=null,A.isEdit&&this.recordLastEdit(v,P,A),ut[A.action](p,V,v)},processSearch:function(p,v,A){if(!p.getSearchCursor)return;var P=A.searchArgs.forward,N=A.searchArgs.wholeWordOnly;qt(p).setReversed(!P);var B=P?"/":"?",V=qt(p).getQuery(),z=p.getScrollInfo();function q(Me,Qe,Ge){xe.searchHistoryController.pushInput(Me),xe.searchHistoryController.reset();try{oi(p,Me,Qe,Ge)}catch{ct(p,"Invalid regex: "+Me),dt(p);return}Qt.processMotion(p,v,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:A.searchArgs.toJumplist}})}function le(Me){p.scrollTo(z.left,z.top),q(Me,!0,!0);var Qe=xe.macroModeState;Qe.isRecording&&On(Qe,Me)}function oe(Me,Qe,Ge){var Ee=s.keyName(Me),rt,$t;Ee=="Up"||Ee=="Down"?(rt=Ee=="Up",$t=Me.target?Me.target.selectionEnd:0,Qe=xe.searchHistoryController.nextMatch(Qe,rt)||"",Ge(Qe),$t&&Me.target&&(Me.target.selectionEnd=Me.target.selectionStart=Math.min($t,Me.target.value.length))):Ee!="Left"&&Ee!="Right"&&Ee!="Ctrl"&&Ee!="Alt"&&Ee!="Shift"&&xe.searchHistoryController.reset();var ft;try{ft=oi(p,Qe,!0,!0)}catch{}ft?p.scrollIntoView(Ii(p,!P,ft),30):(vi(p),p.scrollTo(z.left,z.top))}function ve(Me,Qe,Ge){var Ee=s.keyName(Me);Ee=="Esc"||Ee=="Ctrl-C"||Ee=="Ctrl-["||Ee=="Backspace"&&Qe==""?(xe.searchHistoryController.pushInput(Qe),xe.searchHistoryController.reset(),oi(p,V),vi(p),p.scrollTo(z.left,z.top),s.e_stop(Me),dt(p),Ge(),p.focus()):Ee=="Up"||Ee=="Down"?s.e_stop(Me):Ee=="Ctrl-U"&&(s.e_stop(Me),Ge(""))}switch(A.searchArgs.querySrc){case"prompt":var Ce=xe.macroModeState;if(Ce.isPlaying){var De=Ce.replaySearchQueries.shift();q(De,!0,!1)}else hi(p,{onClose:le,prefix:B,desc:"(JavaScript regexp)",onKeyUp:oe,onKeyDown:ve});break;case"wordUnderCursor":var _e=Nt(p,!1,!1,!1,!0),pe=!0;if(_e||(_e=Nt(p,!1,!1,!1,!1),pe=!1),!_e)return;var De=p.getLine(_e.start.line).substring(_e.start.ch,_e.end.ch);pe&&N?De="\\b"+De+"\\b":De=F(De),xe.jumpList.cachedCursor=p.getCursor(),p.setCursor(_e.start),q(De,!0,!1);break}},processEx:function(p,v,A){function P(B){xe.exCommandHistoryController.pushInput(B),xe.exCommandHistoryController.reset(),Wt.processCommand(p,B),p.state.vim&&dt(p)}function N(B,V,z){var q=s.keyName(B),le,oe;(q=="Esc"||q=="Ctrl-C"||q=="Ctrl-["||q=="Backspace"&&V=="")&&(xe.exCommandHistoryController.pushInput(V),xe.exCommandHistoryController.reset(),s.e_stop(B),dt(p),z(),p.focus()),q=="Up"||q=="Down"?(s.e_stop(B),le=q=="Up",oe=B.target?B.target.selectionEnd:0,V=xe.exCommandHistoryController.nextMatch(V,le)||"",z(V),oe&&B.target&&(B.target.selectionEnd=B.target.selectionStart=Math.min(oe,B.target.value.length))):q=="Ctrl-U"?(s.e_stop(B),z("")):q!="Left"&&q!="Right"&&q!="Ctrl"&&q!="Alt"&&q!="Shift"&&xe.exCommandHistoryController.reset()}A.type=="keyToEx"?Wt.processCommand(p,A.exArgs.input):v.visualMode?hi(p,{onClose:P,prefix:":",value:"'<,'>",onKeyDown:N,selectValueOnOpen:!1}):hi(p,{onClose:P,prefix:":",onKeyDown:N})},evalInput:function(p,v){var A=v.inputState,P=A.motion,N=A.motionArgs||{},B=A.operator,V=A.operatorArgs||{},z=A.registerName,q=v.sel,le=Ke(v.visualMode?vt(p,q.head):p.getCursor("head")),oe=Ke(v.visualMode?vt(p,q.anchor):p.getCursor("anchor")),ve=Ke(le),Ce=Ke(oe),_e,pe,De;if(B&&this.recordLastEdit(v,A),A.repeatOverride!==void 0?De=A.repeatOverride:De=A.getRepeat(),De>0&&N.explicitRepeat?N.repeatIsExplicit=!0:(N.noRepeat||!N.explicitRepeat&&De===0)&&(De=1,N.repeatIsExplicit=!1),A.selectedCharacter&&(N.selectedCharacter=V.selectedCharacter=A.selectedCharacter),N.repeat=De,dt(p),P){var Me=Bt[P](p,le,N,v,A);if(v.lastMotion=Bt[P],!Me)return;if(N.toJumplist){var Qe=xe.jumpList,Ge=Qe.cachedCursor;Ge?(Ai(p,Ge,Me),delete Qe.cachedCursor):Ai(p,le,Me)}Me instanceof Array?(pe=Me[0],_e=Me[1]):_e=Me,_e||(_e=Ke(le)),v.visualMode?(v.visualBlock&&_e.ch===1/0||(_e=vt(p,_e,ve)),pe&&(pe=vt(p,pe)),pe=pe||Ce,q.anchor=pe,q.head=_e,Be(p),zt(p,v,"<",We(pe,_e)?pe:_e),zt(p,v,">",We(pe,_e)?_e:pe)):B||(_e=vt(p,_e,ve),p.setCursor(_e.line,_e.ch))}if(B){if(V.lastSel){pe=Ce;var Ee=V.lastSel,rt=Math.abs(Ee.head.line-Ee.anchor.line),$t=Math.abs(Ee.head.ch-Ee.anchor.ch);Ee.visualLine?_e=new e(Ce.line+rt,Ce.ch):Ee.visualBlock?_e=new e(Ce.line+rt,Ce.ch+$t):Ee.head.line==Ee.anchor.line?_e=new e(Ce.line,Ce.ch+$t):_e=new e(Ce.line+rt,Ce.ch),v.visualMode=!0,v.visualLine=Ee.visualLine,v.visualBlock=Ee.visualBlock,q=v.sel={anchor:pe,head:_e},Be(p)}else v.visualMode&&(V.lastSel={anchor:Ke(q.anchor),head:Ke(q.head),visualBlock:v.visualBlock,visualLine:v.visualLine});var ft,bt,tt,it,Rt;if(v.visualMode){ft=Pt(q.head,q.anchor),bt=Gt(q.head,q.anchor),tt=v.visualLine||V.linewise,it=v.visualBlock?"block":tt?"line":"char";var Mt=a(p,ft,bt);if(Rt=He(p,{anchor:Mt.start,head:Mt.end},it),tt){var xt=Rt.ranges;if(it=="block")for(var Ut=0;Ut<xt.length;Ut++)xt[Ut].head.ch=wt(p,xt[Ut].head.line);else it=="line"&&(xt[0].head=new e(xt[0].head.line+1,0))}}else{if(ft=Ke(pe||Ce),bt=Ke(_e||ve),We(bt,ft)){var Wi=ft;ft=bt,bt=Wi}tt=N.linewise||V.linewise,tt?fi(p,ft,bt):N.forward&&ii(p,ft,bt),it="char";var yn=!N.inclusive||tt,Mt=a(p,ft,bt);Rt=He(p,{anchor:Mt.start,head:Mt.end},it,yn)}p.setSelections(Rt.ranges,Rt.primary),v.lastMotion=null,V.repeat=De,V.registerName=z,V.linewise=tt;var Si=_t[B](p,V,Rt.ranges,Ce,_e);v.visualMode&&kt(p,Si!=null),Si&&p.setCursor(Si)}},recordLastEdit:function(p,v,A){var P=xe.macroModeState;P.isPlaying||(p.lastEditInputState=v,p.lastEditActionCommand=A,P.lastInsertModeChanges.changes=[],P.lastInsertModeChanges.expectCursorActivityForChange=!1,P.lastInsertModeChanges.visualBlock=p.visualBlock?p.sel.head.line-p.sel.anchor.line:0)}},Bt={moveToTopLine:function(p,v,A){var P=Ci(p).top+A.repeat-1;return new e(P,Vt(p.getLine(P)))},moveToMiddleLine:function(p){var v=Ci(p),A=Math.floor((v.top+v.bottom)*.5);return new e(A,Vt(p.getLine(A)))},moveToBottomLine:function(p,v,A){var P=Ci(p).bottom-A.repeat+1;return new e(P,Vt(p.getLine(P)))},expandToLine:function(p,v,A){var P=v;return new e(P.line+A.repeat-1,1/0)},findNext:function(p,v,A){var P=qt(p),N=P.getQuery();if(N){var B=!A.forward;return B=P.isReversed()?!B:B,Ri(p,N),Ii(p,B,N,A.repeat)}},findAndSelectNextInclusive:function(p,v,A,P,N){var B=qt(p),V=B.getQuery();if(V){var z=!A.forward;z=B.isReversed()?!z:z;var q=fn(p,z,V,A.repeat,P);if(q){if(N.operator)return q;var le=q[0],oe=new e(q[1].line,q[1].ch-1);if(P.visualMode){(P.visualLine||P.visualBlock)&&(P.visualLine=!1,P.visualBlock=!1,s.signal(p,"vim-mode-change",{mode:"visual",subMode:""}));var ve=P.sel.anchor;if(ve)return B.isReversed()?A.forward?[ve,le]:[ve,oe]:A.forward?[ve,oe]:[ve,le]}else P.visualMode=!0,P.visualLine=!1,P.visualBlock=!1,s.signal(p,"vim-mode-change",{mode:"visual",subMode:""});return z?[oe,le]:[le,oe]}}},goToMark:function(p,v,A,P){var N=pi(p,P,A.selectedCharacter);return N?A.linewise?{line:N.line,ch:Vt(p.getLine(N.line))}:N:null},moveToOtherHighlightedEnd:function(p,v,A,P){if(P.visualBlock&&A.sameLine){var N=P.sel;return[vt(p,new e(N.anchor.line,N.head.ch)),vt(p,new e(N.head.line,N.anchor.ch))]}else return[P.sel.head,P.sel.anchor]},jumpToMark:function(p,v,A,P){for(var N=v,B=0;B<A.repeat;B++){var V=N;for(var z in P.marks)if(be(z)){var q=P.marks[z].find(),le=A.forward?We(q,V):We(V,q);if(!le&&!(A.linewise&&q.line==V.line)){var oe=ze(V,N),ve=A.forward?ai(V,q,N):ai(N,q,V);(oe||ve)&&(N=q)}}}return A.linewise&&(N=new e(N.line,Vt(p.getLine(N.line)))),N},moveByCharacters:function(p,v,A){var P=v,N=A.repeat,B=A.forward?P.ch+N:P.ch-N;return new e(P.line,B)},moveByLines:function(p,v,A,P){var N=v,B=N.ch;switch(P.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:B=P.lastHPos;break;default:P.lastHPos=B}var V=A.repeat+(A.repeatOffset||0),z=A.forward?N.line+V:N.line-V,q=p.firstLine(),le=p.lastLine(),oe=p.findPosV(N,A.forward?V:-V,"line",P.lastHSPos),ve=A.forward?oe.line>z:oe.line<z;return ve&&(z=oe.line,B=oe.ch),z<q&&N.line==q?this.moveToStartOfLine(p,v,A,P):z>le&&N.line==le?Mi(p,v,A,P,!0):(A.toFirstChar&&(B=Vt(p.getLine(z)),P.lastHPos=B),P.lastHSPos=p.charCoords(new e(z,B),"div").left,new e(z,B))},moveByDisplayLines:function(p,v,A,P){var N=v;switch(P.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:P.lastHSPos=p.charCoords(N,"div").left}var B=A.repeat,V=p.findPosV(N,A.forward?B:-B,"line",P.lastHSPos);if(V.hitSide)if(A.forward)var z=p.charCoords(V,"div"),q={top:z.top+8,left:P.lastHSPos},V=p.coordsChar(q,"div");else{var le=p.charCoords(new e(p.firstLine(),0),"div");le.left=P.lastHSPos,V=p.coordsChar(le,"div")}return P.lastHPos=V.ch,V},moveByPage:function(p,v,A){var P=v,N=A.repeat;return p.findPosV(P,A.forward?N:-N,"page")},moveByParagraph:function(p,v,A){var P=A.forward?1:-1;return xi(p,v,A.repeat,P)},moveBySentence:function(p,v,A){var P=A.forward?1:-1;return Ji(p,v,A.repeat,P)},moveByScroll:function(p,v,A,P){var N=p.getScrollInfo(),B=null,V=A.repeat;V||(V=N.clientHeight/(2*p.defaultTextHeight()));var z=p.charCoords(v,"local");if(A.repeat=V,B=Bt.moveByDisplayLines(p,v,A,P),!B)return null;var q=p.charCoords(B,"local");return p.scrollTo(null,N.top+q.top-z.top),B},moveByWords:function(p,v,A){return Pi(p,v,A.repeat,!!A.forward,!!A.wordEnd,!!A.bigWord)},moveTillCharacter:function(p,v,A){var P=A.repeat,N=yi(p,P,A.forward,A.selectedCharacter,v),B=A.forward?-1:1;return Ei(B,A),N?(N.ch+=B,N):null},moveToCharacter:function(p,v,A){var P=A.repeat;return Ei(0,A),yi(p,P,A.forward,A.selectedCharacter,v)||v},moveToSymbol:function(p,v,A){var P=A.repeat;return qi(p,P,A.forward,A.selectedCharacter)||v},moveToColumn:function(p,v,A,P){var N=A.repeat;return P.lastHPos=N-1,P.lastHSPos=p.charCoords(v,"div").left,Yi(p,N)},moveToEol:function(p,v,A,P){return Mi(p,v,A,P,!1)},moveToFirstNonWhiteSpaceCharacter:function(p,v){var A=v;return new e(A.line,Vt(p.getLine(A.line)))},moveToMatchedSymbol:function(p,v){for(var A=v,P=A.line,N=A.ch,B=p.getLine(P),V;N<B.length;N++)if(V=B.charAt(N),V&&Ae(V)){var z=p.getTokenTypeAt(new e(P,N+1));if(z!=="string"&&z!=="comment")break}if(N<B.length){var q=N==="<"||N===">"?/[(){}[\]<>]/:/[(){}[\]]/,le=p.findMatchingBracket(new e(P,N),{bracketRegex:q});return le.to}else return A},moveToStartOfLine:function(p,v){return new e(v.line,0)},moveToLineOrEdgeOfDocument:function(p,v,A){var P=A.forward?p.lastLine():p.firstLine();return A.repeatIsExplicit&&(P=A.repeat-p.getOption("firstLineNumber")),new e(P,Vt(p.getLine(P)))},moveToStartOfDisplayLine:function(p){return p.execCommand("goLineLeft"),p.getCursor()},moveToEndOfDisplayLine:function(p){p.execCommand("goLineRight");var v=p.getCursor();return v.sticky=="before"&&v.ch--,v},textObjectManipulation:function(p,v,A,P){var N={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},B={"'":!0,'"':!0,"`":!0},V=A.selectedCharacter;V=="b"?V="(":V=="B"&&(V="{");var z=!A.textObjectInner,q,le;if(N[V]){if(le=!0,q=Di(p,v,V,z),!q){var oe=p.getSearchCursor(new RegExp("\\"+V,"g"),v);oe.find()&&(q=Di(p,oe.from(),V,z))}}else if(B[V])le=!0,q=Ki(p,v,V,z);else if(V==="W")q=Nt(p,z,!z,!0);else if(V==="w")q=Nt(p,z,!z,!1);else if(V==="p")if(q=xi(p,v,A.repeat,0,z),A.linewise=!0,P.visualMode)P.visualLine||(P.visualLine=!0);else{var ve=P.inputState.operatorArgs;ve&&(ve.linewise=!0),q.end.line--}else if(V==="t")q=ji(p,v,z);else if(V==="s"){var Ce=p.getLine(v.line);v.ch>0&&Ue(Ce[v.ch])&&(v.ch-=1);var _e=ki(p,v,A.repeat,1,z),pe=ki(p,v,A.repeat,-1,z);Fe(p.getLine(pe.line)[pe.ch])&&Fe(p.getLine(_e.line)[_e.ch-1])&&(pe={line:pe.line,ch:pe.ch+1}),q={start:pe,end:_e}}return q?p.state.vim.visualMode?we(p,q.start,q.end,le):[q.start,q.end]:null},repeatLastCharacterSearch:function(p,v,A){var P=xe.lastCharacterSearch,N=A.repeat,B=A.forward===P.forward,V=(P.increment?1:0)*(B?-1:1);p.moveH(-V,"char"),A.inclusive=!!B;var z=yi(p,N,B,P.selectedCharacter);return z?(z.ch+=V,z):(p.moveH(V,"char"),v)}};function ei(p,v){Bt[p]=v}function Ye(p,v){for(var A=[],P=0;P<v;P++)A.push(p);return A}var _t={change:function(p,v,A){var P,N,B=p.state.vim,V=A[0].anchor,z=A[0].head;if(B.visualMode)if(v.fullLine)z.ch=Number.MAX_VALUE,z.line--,p.setSelection(V,z),N=p.getSelection(),p.replaceSelection(""),P=V;else{N=p.getSelection();var Ce=Ye("",A.length);p.replaceSelections(Ce),P=Pt(A[0].head,A[0].anchor)}else{N=p.getRange(V,z);var q=B.lastEditInputState||{};if(q.motion=="moveByWords"&&!Fe(N)){var le=/\s+$/.exec(N);le&&q.motionArgs&&q.motionArgs.forward&&(z=et(z,0,-le[0].length),N=N.slice(0,-le[0].length))}var oe=new e(V.line-1,Number.MAX_VALUE),ve=p.firstLine()==p.lastLine();z.line>p.lastLine()&&v.linewise&&!ve?p.replaceRange("",oe,z):p.replaceRange("",V,z),v.linewise&&(ve||(p.setCursor(oe),s.commands.newlineAndIndent(p)),V.ch=Number.MAX_VALUE),P=V}xe.registerController.pushText(v.registerName,"change",N,v.linewise,A.length>1),ut.enterInsertMode(p,{head:P},p.state.vim)},delete:function(p,v,A){var P,N,B=p.state.vim;if(B.visualBlock){N=p.getSelection();var q=Ye("",A.length);p.replaceSelections(q),P=Pt(A[0].head,A[0].anchor)}else{var V=A[0].anchor,z=A[0].head;v.linewise&&z.line!=p.firstLine()&&V.line==p.lastLine()&&V.line==z.line-1&&(V.line==p.firstLine()?V.ch=0:V=new e(V.line-1,wt(p,V.line-1))),N=p.getRange(V,z),p.replaceRange("",V,z),P=V,v.linewise&&(P=Bt.moveToFirstNonWhiteSpaceCharacter(p,V))}return xe.registerController.pushText(v.registerName,"delete",N,v.linewise,B.visualBlock),vt(p,P)},indent:function(p,v,A){var P=p.state.vim;if(p.indentMore)for(var N=P.visualMode?v.repeat:1,B=0;B<N;B++)v.indentRight?p.indentMore():p.indentLess();else{var V=A[0].anchor.line,z=P.visualBlock?A[A.length-1].anchor.line:A[0].head.line,N=P.visualMode?v.repeat:1;v.linewise&&z--;for(var q=V;q<=z;q++)for(var B=0;B<N;B++)p.indentLine(q,v.indentRight)}return Bt.moveToFirstNonWhiteSpaceCharacter(p,A[0].anchor)},indentAuto:function(p,v,A){return p.execCommand("indentAuto"),Bt.moveToFirstNonWhiteSpaceCharacter(p,A[0].anchor)},changeCase:function(p,v,A,P,N){for(var B=p.getSelections(),V=[],z=v.toLower,q=0;q<B.length;q++){var le=B[q],oe="";if(z===!0)oe=le.toLowerCase();else if(z===!1)oe=le.toUpperCase();else for(var ve=0;ve<le.length;ve++){var Ce=le.charAt(ve);oe+=Re(Ce)?Ce.toLowerCase():Ce.toUpperCase()}V.push(oe)}return p.replaceSelections(V),v.shouldMoveCursor?N:!p.state.vim.visualMode&&v.linewise&&A[0].anchor.line+1==A[0].head.line?Bt.moveToFirstNonWhiteSpaceCharacter(p,P):v.linewise?P:Pt(A[0].anchor,A[0].head)},yank:function(p,v,A,P){var N=p.state.vim,B=p.getSelection(),V=N.visualMode?Pt(N.sel.anchor,N.sel.head,A[0].head,A[0].anchor):P;return xe.registerController.pushText(v.registerName,"yank",B,v.linewise,N.visualBlock),V}};function Le(p,v){_t[p]=v}var ut={jumpListWalk:function(p,v,A){if(!A.visualMode){var P=v.repeat,N=v.forward,B=xe.jumpList,V=B.move(p,N?P:-P),z=V?V.find():void 0;z=z||p.getCursor(),p.setCursor(z)}},scroll:function(p,v,A){if(!A.visualMode){var P=v.repeat||1,N=p.defaultTextHeight(),B=p.getScrollInfo().top,V=N*P,z=v.forward?B+V:B-V,q=Ke(p.getCursor()),le=p.charCoords(q,"local");if(v.forward)z>le.top?(q.line+=(z-le.top)/N,q.line=Math.ceil(q.line),p.setCursor(q),le=p.charCoords(q,"local"),p.scrollTo(null,le.top)):p.scrollTo(null,z);else{var oe=z+p.getScrollInfo().clientHeight;oe<le.bottom?(q.line-=(le.bottom-oe)/N,q.line=Math.floor(q.line),p.setCursor(q),le=p.charCoords(q,"local"),p.scrollTo(null,le.bottom-p.getScrollInfo().clientHeight)):p.scrollTo(null,z)}}},scrollToCursor:function(p,v){var A=p.getCursor().line,P=p.charCoords(new e(A,0),"local"),N=p.getScrollInfo().clientHeight,B=P.top;switch(v.position){case"center":B=P.bottom-N/2;break;case"bottom":var V=new e(A,p.getLine(A).length-1),z=p.charCoords(V,"local"),q=z.bottom-B;B=B-N+q;break}p.scrollTo(null,B)},replayMacro:function(p,v,A){var P=v.selectedCharacter,N=v.repeat,B=xe.macroModeState;for(P=="@"?P=B.latestRegister:B.latestRegister=P;N--;)gn(p,A,B,P)},enterMacroRecordMode:function(p,v){var A=xe.macroModeState,P=v.selectedCharacter;xe.registerController.isValidRegister(P)&&A.enterMacroRecordMode(p,P)},toggleOverwrite:function(p){p.state.overwrite?(p.toggleOverwrite(!1),p.setOption("keyMap","vim-insert"),s.signal(p,"vim-mode-change",{mode:"insert"})):(p.toggleOverwrite(!0),p.setOption("keyMap","vim-replace"),s.signal(p,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(p,v,A){if(!p.getOption("readOnly")){A.insertMode=!0,A.insertModeRepeat=v&&v.repeat||1;var P=v?v.insertAt:null,N=A.sel,B=v.head||p.getCursor("head"),V=p.listSelections().length;if(P=="eol")B=new e(B.line,wt(p,B.line));else if(P=="bol")B=new e(B.line,0);else if(P=="charAfter"){var z=a(p,B,et(B,0,1));B=z.end}else if(P=="firstNonBlank"){var z=a(p,B,Bt.moveToFirstNonWhiteSpaceCharacter(p,B));B=z.end}else if(P=="startOfSelectedArea"){if(!A.visualMode)return;A.visualBlock?(B=new e(Math.min(N.head.line,N.anchor.line),Math.min(N.head.ch,N.anchor.ch)),V=Math.abs(N.head.line-N.anchor.line)+1):N.head.line<N.anchor.line?B=N.head:B=new e(N.anchor.line,0)}else if(P=="endOfSelectedArea"){if(!A.visualMode)return;A.visualBlock?(B=new e(Math.min(N.head.line,N.anchor.line),Math.max(N.head.ch,N.anchor.ch)+1),V=Math.abs(N.head.line-N.anchor.line)+1):N.head.line>=N.anchor.line?B=et(N.head,0,1):B=new e(N.anchor.line,0)}else if(P=="inplace"){if(A.visualMode)return}else P=="lastEdit"&&(B=Li(p)||B);p.setOption("disableInput",!1),v&&v.replace?(p.toggleOverwrite(!0),p.setOption("keyMap","vim-replace"),s.signal(p,"vim-mode-change",{mode:"replace"})):(p.toggleOverwrite(!1),p.setOption("keyMap","vim-insert"),s.signal(p,"vim-mode-change",{mode:"insert"})),xe.macroModeState.isPlaying||(p.on("change",ee),A.insertEnd&&A.insertEnd.clear(),A.insertEnd=p.setBookmark(B,{insertLeft:!0}),s.on(p.getInputField(),"keydown",gi)),A.visualMode&&kt(p),U(p,B,V)}},toggleVisualMode:function(p,v,A){var P=v.repeat,N=p.getCursor(),B;if(A.visualMode)A.visualLine^v.linewise||A.visualBlock^v.blockwise?(A.visualLine=!!v.linewise,A.visualBlock=!!v.blockwise,s.signal(p,"vim-mode-change",{mode:"visual",subMode:A.visualLine?"linewise":A.visualBlock?"blockwise":""}),Be(p)):kt(p);else{A.visualMode=!0,A.visualLine=!!v.linewise,A.visualBlock=!!v.blockwise,B=vt(p,new e(N.line,N.ch+P-1));var V=a(p,N,B);A.sel={anchor:V.start,head:V.end},s.signal(p,"vim-mode-change",{mode:"visual",subMode:A.visualLine?"linewise":A.visualBlock?"blockwise":""}),Be(p),zt(p,A,"<",Pt(N,B)),zt(p,A,">",Gt(N,B))}},reselectLastSelection:function(p,v,A){var P=A.lastSelection;if(A.visualMode&&Se(p,A),P){var N=P.anchorMark.find(),B=P.headMark.find();if(!N||!B)return;A.sel={anchor:N,head:B},A.visualMode=!0,A.visualLine=P.visualLine,A.visualBlock=P.visualBlock,Be(p),zt(p,A,"<",Pt(N,B)),zt(p,A,">",Gt(N,B)),s.signal(p,"vim-mode-change",{mode:"visual",subMode:A.visualLine?"linewise":A.visualBlock?"blockwise":""})}},joinLines:function(p,v,A){var P,N;if(A.visualMode){if(P=p.getCursor("anchor"),N=p.getCursor("head"),We(N,P)){var B=N;N=P,P=B}N.ch=wt(p,N.line)-1}else{var V=Math.max(v.repeat,2);P=p.getCursor(),N=vt(p,new e(P.line+V-1,1/0))}for(var z=0,q=P.line;q<N.line;q++){z=wt(p,P.line);var le="",oe=0;if(!v.keepSpaces){var ve=p.getLine(P.line+1);oe=ve.search(/\S/),oe==-1?oe=ve.length:le=" "}p.replaceRange(le,new e(P.line,z),new e(P.line+1,oe))}var Ce=vt(p,new e(P.line,z));A.visualMode&&kt(p,!1),p.setCursor(Ce)},newLineAndEnterInsertMode:function(p,v,A){A.insertMode=!0;var P=Ke(p.getCursor());if(P.line===p.firstLine()&&!v.after)p.replaceRange(`
`,new e(p.firstLine(),0)),p.setCursor(p.firstLine(),0);else{P.line=v.after?P.line:P.line-1,P.ch=wt(p,P.line),p.setCursor(P);var N=s.commands.newlineAndIndentContinueComment||s.commands.newlineAndIndent;N(p)}this.enterInsertMode(p,{repeat:v.repeat},A)},paste:function(p,v,A){var P=xe.registerController.getRegister(v.registerName);if(v.registerName==="+")navigator.clipboard.readText().then(B=>{this.continuePaste(p,v,A,B,P)});else{var N=P.toString();this.continuePaste(p,v,A,N,P)}},continuePaste:function(p,v,A,P,N){var B=Ke(p.getCursor());if(P){if(v.matchIndent){var V=p.getOption("tabSize"),z=function(Mt){var xt=Mt.split("	").length-1,Ut=Mt.split(" ").length-1;return xt*V+Ut*1},q=p.getLine(p.getCursor().line),le=z(q.match(/^\s*/)[0]),oe=P.replace(/\n$/,""),ve=P!==oe,Ce=z(P.match(/^\s*/)[0]),P=oe.replace(/^\s*/gm,function(Mt){var xt=le+(z(Mt)-Ce);if(xt<0)return"";if(p.getOption("indentWithTabs")){var Ut=Math.floor(xt/V);return Array(Ut+1).join("	")}else return Array(xt+1).join(" ")});P+=ve?`
`:""}if(v.repeat>1)var P=Array(v.repeat+1).join(P);var _e=N.linewise,pe=N.blockwise;if(pe){P=P.split(`
`),_e&&P.pop();for(var De=0;De<P.length;De++)P[De]=P[De]==""?" ":P[De];B.ch+=v.after?1:0,B.ch=Math.min(wt(p,B.line),B.ch)}else _e?A.visualMode?P=A.visualLine?P.slice(0,-1):`
`+P.slice(0,P.length-1)+`
`:v.after?(P=`
`+P.slice(0,P.length-1),B.ch=wt(p,B.line)):B.ch=0:B.ch+=v.after?1:0;var Me;if(A.visualMode){A.lastPastedText=P;var Qe,Ge=ye(p,A),Ee=Ge[0],rt=Ge[1],$t=p.getSelection(),ft=p.listSelections(),bt=new Array(ft.length).join("1").split("1");A.lastSelection&&(Qe=A.lastSelection.headMark.find()),xe.registerController.unnamedRegister.setText($t),pe?(p.replaceSelections(bt),rt=new e(Ee.line+P.length-1,Ee.ch),p.setCursor(Ee),I(p,rt),p.replaceSelections(P),Me=Ee):A.visualBlock?(p.replaceSelections(bt),p.setCursor(Ee),p.replaceRange(P,Ee,Ee),Me=Ee):(p.replaceRange(P,Ee,rt),Me=p.posFromIndex(p.indexFromPos(Ee)+P.length-1)),Qe&&(A.lastSelection.headMark=p.setBookmark(Qe)),_e&&(Me.ch=0)}else if(pe){p.setCursor(B);for(var De=0;De<P.length;De++){var tt=B.line+De;tt>p.lastLine()&&p.replaceRange(`
`,new e(tt,0));var it=wt(p,tt);it<B.ch&&L(p,tt,B.ch)}p.setCursor(B),I(p,new e(B.line+P.length-1,B.ch)),p.replaceSelections(P),Me=B}else if(p.replaceRange(P,B),_e){var tt=v.after?B.line+1:B.line;Me=new e(tt,Vt(p.getLine(tt)))}else Me=Ke(B),/\n/.test(P)||(Me.ch+=P.length-(v.after?1:0));A.visualMode&&kt(p,!1),p.setCursor(Me)}},undo:function(p,v){p.operation(function(){Je(p,s.commands.undo,v.repeat)(),p.setCursor(vt(p,p.getCursor("start")))})},redo:function(p,v){Je(p,s.commands.redo,v.repeat)()},setRegister:function(p,v,A){A.inputState.registerName=v.selectedCharacter},insertRegister:function(p,v,A){var P=v.selectedCharacter,N=xe.registerController.getRegister(P),B=N&&N.toString();B&&p.replaceSelection(B)},oneNormalCommand:function(p,v,A){ri(p,!0),A.insertModeReturn=!0,s.on(p,"vim-command-done",function P(){A.visualMode||(A.insertModeReturn&&(A.insertModeReturn=!1,A.insertMode||ut.enterInsertMode(p,{},A)),s.off(p,"vim-command-done",P))})},setMark:function(p,v,A){var P=v.selectedCharacter;zt(p,A,P,p.getCursor())},replace:function(p,v,A){var P=v.selectedCharacter,N=p.getCursor(),B,V,z=p.listSelections();if(A.visualMode)N=p.getCursor("start"),V=p.getCursor("end");else{var q=p.getLine(N.line);B=N.ch+v.repeat,B>q.length&&(B=q.length),V=new e(N.line,B)}var le=a(p,N,V);if(N=le.start,V=le.end,P==`
`)A.visualMode||p.replaceRange("",N,V),(s.commands.newlineAndIndentContinueComment||s.commands.newlineAndIndent)(p);else{var oe=p.getRange(N,V);if(oe=oe.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P),oe=oe.replace(/[^\n]/g,P),A.visualBlock){var ve=new Array(p.getOption("tabSize")+1).join(" ");oe=p.getSelection(),oe=oe.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P),oe=oe.replace(/\t/g,ve).replace(/[^\n]/g,P).split(`
`),p.replaceSelections(oe)}else p.replaceRange(oe,N,V);A.visualMode?(N=We(z[0].anchor,z[0].head)?z[0].anchor:z[0].head,p.setCursor(N),kt(p,!1)):p.setCursor(et(V,0,-1))}},incrementNumberToken:function(p,v){for(var A=p.getCursor(),P=p.getLine(A.line),N=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,B,V,z,q;(B=N.exec(P))!==null&&(V=B.index,z=V+B[0].length,!(A.ch<z)););if(!(!v.backtrack&&z<=A.ch)){if(B){var le=B[2]||B[4],oe=B[3]||B[5],ve=v.increase?1:-1,Ce={"0b":2,0:8,"":10,"0x":16}[le.toLowerCase()],_e=parseInt(B[1]+oe,Ce)+ve*v.repeat;q=_e.toString(Ce);var pe=le?new Array(oe.length-q.length+1+B[1].length).join("0"):"";q.charAt(0)==="-"?q="-"+le+pe+q.substr(1):q=le+pe+q;var De=new e(A.line,V),Me=new e(A.line,z);p.replaceRange(q,De,Me)}else return;p.setCursor(new e(A.line,V+q.length-1))}},repeatLastEdit:function(p,v,A){var P=A.lastEditInputState;if(P){var N=v.repeat;N&&v.repeatIsExplicit?A.lastEditInputState.repeatOverride=N:N=A.lastEditInputState.repeatOverride||N,Te(p,A,N,!1)}},indent:function(p,v){p.indentLine(p.getCursor().line,v.indentRight)},exitInsertMode:ri};function Ot(p,v){ut[p]=v}function vt(p,v,A){var P=p.state.vim,N=P.insertMode||P.visualMode,B=Math.min(Math.max(p.firstLine(),v.line),p.lastLine()),V=p.getLine(B),z=V.length-1+ +!!N,q=Math.min(Math.max(0,v.ch),z),le=V.charCodeAt(q);if(56320<=le&&le<=57343){var oe=1;A&&A.line==B&&A.ch>q&&(oe=-1),q+=oe,q>z&&(q-=2)}return new e(B,q)}function pt(p){var v={};for(var A in p)p.hasOwnProperty(A)&&(v[A]=p[A]);return v}function et(p,v,A){return typeof v=="object"&&(A=v.ch,v=v.line),new e(p.line+v,p.ch+A)}function ti(p,v,A,P){for(var N=P.operator,B,V=[],z=[],q=Xt?v.length-l:0,le=q;le<v.length;le++){var oe=v[le];A=="insert"&&oe.context!="insert"||(oe.context=="operatorPending"?!N:oe.context&&oe.context!=A)||P.operator&&oe.type=="action"||!(B=jt(p,oe.keys))||(B=="partial"&&V.push(oe),B=="full"&&z.push(oe))}return{partial:V.length&&V,full:z.length&&z}}function jt(p,v){if(v.slice(-11)=="<character>"){var A=v.length-11,P=p.slice(0,A),N=v.slice(0,A);return P==N&&p.length>A?"full":N.indexOf(P)==0?"partial":!1}else return p==v?"full":v.indexOf(p)==0?"partial":!1}function yt(p){var v=/^.*(<[^>]+>)$/.exec(p),A=v?v[1]:p.slice(-1);if(A.length>1)switch(A){case"<CR>":A=`
`;break;case"<Space>":A=" ";break;default:A="";break}return A}function Je(p,v,A){return function(){for(var P=0;P<A;P++)v(p)}}function Ke(p){return new e(p.line,p.ch)}function ze(p,v){return p.ch==v.ch&&p.line==v.line}function We(p,v){return p.line<v.line||p.line==v.line&&p.ch<v.ch}function Pt(p,v){return arguments.length>2&&(v=Pt.apply(void 0,Array.prototype.slice.call(arguments,1))),We(p,v)?p:v}function Gt(p,v){return arguments.length>2&&(v=Gt.apply(void 0,Array.prototype.slice.call(arguments,1))),We(p,v)?v:p}function ai(p,v,A){var P=We(p,v),N=We(v,A);return P&&N}function wt(p,v){return p.getLine(v).length}function si(p){return p.trim?p.trim():p.replace(/^\s+|\s+$/g,"")}function F(p){return p.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function L(p,v,A){var P=wt(p,v),N=new Array(A-P+1).join(" ");p.setCursor(new e(v,P)),p.replaceRange(N,p.getCursor())}function I(p,v){var A=[],P=p.listSelections(),N=Ke(p.clipPos(v)),B=!ze(v,N),V=p.getCursor("head"),z=te(P,V),q=ze(P[z].head,P[z].anchor),le=P.length-1,oe=le-z>z?le:0,ve=P[oe].anchor,Ce=Math.min(ve.line,N.line),_e=Math.max(ve.line,N.line),pe=ve.ch,De=N.ch,Me=P[oe].head.ch-pe,Qe=De-pe;Me>0&&Qe<=0?(pe++,B||De--):Me<0&&Qe>=0?(pe--,q||De++):Me<0&&Qe==-1&&(pe--,De++);for(var Ge=Ce;Ge<=_e;Ge++){var Ee={anchor:new e(Ge,pe),head:new e(Ge,De)};A.push(Ee)}return p.setSelections(A),v.ch=De,ve.ch=pe,ve}function U(p,v,A){for(var P=[],N=0;N<A;N++){var B=et(v,N,0);P.push({anchor:B,head:B})}p.setSelections(P,0)}function te(p,v,A){for(var P=0;P<p.length;P++){var N=A!="head"&&ze(p[P].anchor,v),B=A!="anchor"&&ze(p[P].head,v);if(N||B)return P}return-1}function ye(p,v){var A=v.lastSelection,P=function(){var B=p.listSelections(),V=B[0],z=B[B.length-1],q=We(V.anchor,V.head)?V.anchor:V.head,le=We(z.anchor,z.head)?z.head:z.anchor;return[q,le]},N=function(){var B=p.getCursor(),V=p.getCursor(),z=A.visualBlock;if(z){var q=z.width,le=z.height;V=new e(B.line+le,B.ch+q);for(var oe=[],ve=B.line;ve<V.line;ve++){var Ce=new e(ve,B.ch),_e=new e(ve,V.ch),pe={anchor:Ce,head:_e};oe.push(pe)}p.setSelections(oe)}else{var De=A.anchorMark.find(),Me=A.headMark.find(),Qe=Me.line-De.line,Ge=Me.ch-De.ch;V={line:V.line+Qe,ch:Qe?V.ch:Ge+V.ch},A.visualLine&&(B=new e(B.line,0),V=new e(V.line,wt(p,V.line))),p.setSelection(B,V)}return[B,V]};return v.visualMode?P():N()}function Se(p,v){var A=v.sel.anchor,P=v.sel.head;v.lastPastedText&&(P=p.posFromIndex(p.indexFromPos(A)+v.lastPastedText.length),v.lastPastedText=null),v.lastSelection={anchorMark:p.setBookmark(A),headMark:p.setBookmark(P),anchor:Ke(A),head:Ke(P),visualMode:v.visualMode,visualLine:v.visualLine,visualBlock:v.visualBlock}}function we(p,v,A,P){var N=p.state.vim.sel,B=P?v:N.head,V=P?v:N.anchor,z;return We(A,v)&&(z=A,A=v,v=z),We(B,V)?(B=Pt(v,B),V=Gt(V,A)):(V=Pt(v,V),B=Gt(B,A),B=et(B,0,-1),B.ch==-1&&B.line!=p.firstLine()&&(B=new e(B.line-1,wt(p,B.line-1)))),[V,B]}function Be(p,v,N){var P=p.state.vim;v=v||P.sel;var N=N||P.visualLine?"line":P.visualBlock?"block":"char",B=He(p,v,N);p.setSelections(B.ranges,B.primary)}function He(p,v,A,P){var N=Ke(v.head),B=Ke(v.anchor);if(A=="char"){var V=!P&&!We(v.head,v.anchor)?1:0,z=We(v.head,v.anchor)?1:0;return N=et(v.head,0,V),B=et(v.anchor,0,z),{ranges:[{anchor:B,head:N}],primary:0}}else if(A=="line"){if(We(v.head,v.anchor))N.ch=0,B.ch=wt(p,B.line);else{B.ch=0;var q=p.lastLine();N.line>q&&(N.line=q),N.ch=wt(p,N.line)}return{ranges:[{anchor:B,head:N}],primary:0}}else if(A=="block"){var le=Math.min(B.line,N.line),oe=B.ch,ve=Math.max(B.line,N.line),Ce=N.ch;oe<Ce?Ce+=1:oe+=1;for(var _e=ve-le+1,pe=N.line==le?0:_e-1,De=[],Me=0;Me<_e;Me++)De.push({anchor:new e(le+Me,oe),head:new e(le+Me,Ce)});return{ranges:De,primary:pe}}}function St(p){var v=p.getCursor("head");return p.getSelection().length==1&&(v=Pt(v,p.getCursor("anchor"))),v}function kt(p,v){var A=p.state.vim;v!==!1&&p.setCursor(vt(p,A.sel.head)),Se(p,A),A.visualMode=!1,A.visualLine=!1,A.visualBlock=!1,A.insertMode||s.signal(p,"vim-mode-change",{mode:"normal"})}function ii(p,v,A){var P=p.getRange(v,A);if(/\n\s*$/.test(P)){var N=P.split(`
`);N.pop();for(var B,B=N.pop();N.length>0&&B&&Fe(B);B=N.pop())A.line--,A.ch=0;B?(A.line--,A.ch=wt(p,A.line)):A.ch=0}}function fi(p,v,A){v.ch=0,A.ch=0,A.line++}function Vt(p){if(!p)return 0;var v=p.search(/\S/);return v==-1?p.length:v}function Nt(p,v,A,P,N){var B=St(p),V=p.getLine(B.line),z=B.ch,q=N?Z[0]:he[0];if(A&&/\s/.test(V.charAt(z)))q=function(_e){return/\s/.test(_e)};else{for(;!q(V.charAt(z));)if(z++,z>=V.length)return null;P?q=he[0]:(q=Z[0],q(V.charAt(z))||(q=Z[1]))}for(var le=z,oe=z;q(V.charAt(le))&&le<V.length;)le++;for(;q(V.charAt(oe))&&oe>=0;)oe--;if(oe++,v){for(var ve=le;/\s/.test(V.charAt(le))&&le<V.length;)le++;if(ve==le){for(var Ce=oe;/\s/.test(V.charAt(oe-1))&&oe>0;)oe--;oe||(oe=Ce)}}return{start:new e(B.line,oe),end:new e(B.line,le)}}function ji(p,v,A){var P=v;if(!s.findMatchingTag||!s.findEnclosingTag)return{start:P,end:P};var N=s.findMatchingTag(p,v)||s.findEnclosingTag(p,v);return!N||!N.open||!N.close?{start:P,end:P}:A?{start:N.open.from,end:N.close.to}:{start:N.open.to,end:N.close.from}}function Ai(p,v,A){ze(v,A)||xe.jumpList.add(p,v,A)}function Ei(p,v){xe.lastCharacterSearch.increment=p,xe.lastCharacterSearch.forward=v.forward,xe.lastCharacterSearch.selectedCharacter=v.selectedCharacter}var Xi={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},wi={bracket:{isComplete:function(p){if(p.nextCh===p.symb){if(p.depth++,p.depth>=1)return!0}else p.nextCh===p.reverseSymb&&p.depth--;return!1}},section:{init:function(p){p.curMoveThrough=!0,p.symb=(p.forward?"]":"[")===p.symb?"{":"}"},isComplete:function(p){return p.index===0&&p.nextCh===p.symb}},comment:{isComplete:function(p){var v=p.lastCh==="*"&&p.nextCh==="/";return p.lastCh=p.nextCh,v}},method:{init:function(p){p.symb=p.symb==="m"?"{":"}",p.reverseSymb=p.symb==="{"?"}":"{"},isComplete:function(p){return p.nextCh===p.symb}},preprocess:{init:function(p){p.index=0},isComplete:function(p){if(p.nextCh==="#"){var v=p.lineText.match(/^#(\w+)/)[1];if(v==="endif"){if(p.forward&&p.depth===0)return!0;p.depth++}else if(v==="if"){if(!p.forward&&p.depth===0)return!0;p.depth--}if(v==="else"&&p.depth===0)return!0}return!1}}};function qi(p,v,A,P){var N=Ke(p.getCursor()),B=A?1:-1,V=A?p.lineCount():-1,z=N.ch,q=N.line,le=p.getLine(q),oe={lineText:le,nextCh:le.charAt(z),lastCh:null,index:z,symb:P,reverseSymb:(A?{")":"(","}":"{"}:{"(":")","{":"}"})[P],forward:A,depth:0,curMoveThrough:!1},ve=Xi[P];if(!ve)return N;var Ce=wi[ve].init,_e=wi[ve].isComplete;for(Ce&&Ce(oe);q!==V&&v;){if(oe.index+=B,oe.nextCh=oe.lineText.charAt(oe.index),!oe.nextCh){if(q+=B,oe.lineText=p.getLine(q)||"",B>0)oe.index=0;else{var pe=oe.lineText.length;oe.index=pe>0?pe-1:0}oe.nextCh=oe.lineText.charAt(oe.index)}_e(oe)&&(N.line=q,N.ch=oe.index,v--)}return oe.nextCh||oe.curMoveThrough?new e(q,oe.index):N}function Hi(p,v,A,P,N){var B=v.line,V=v.ch,z=p.getLine(B),q=A?1:-1,le=P?he:Z;if(N&&z==""){if(B+=q,z=p.getLine(B),!Oe(p,B))return null;V=A?0:z.length}for(;;){if(N&&z=="")return{from:0,to:0,line:B};for(var oe=q>0?z.length:-1,ve=oe,Ce=oe;V!=oe;){for(var _e=!1,pe=0;pe<le.length&&!_e;++pe)if(le[pe](z.charAt(V))){for(ve=V;V!=oe&&le[pe](z.charAt(V));)V+=q;if(Ce=V,_e=ve!=Ce,ve==v.ch&&B==v.line&&Ce==ve+q)continue;return{from:Math.min(ve,Ce+1),to:Math.max(ve,Ce),line:B}}_e||(V+=q)}if(B+=q,!Oe(p,B))return null;z=p.getLine(B),V=q>0?0:z.length}}function Pi(p,v,A,P,N,B){var V=Ke(v),z=[];(P&&!N||!P&&N)&&A++;for(var q=!(P&&N),le=0;le<A;le++){var oe=Hi(p,v,P,B,q);if(!oe){var ve=wt(p,p.lastLine());z.push(P?{line:p.lastLine(),from:ve,to:ve}:{line:0,from:0,to:0});break}z.push(oe),v=new e(oe.line,P?oe.to-1:oe.from)}var Ce=z.length!=A,_e=z[0],pe=z.pop();return P&&!N?(!Ce&&(_e.from!=V.ch||_e.line!=V.line)&&(pe=z.pop()),new e(pe.line,pe.from)):P&&N?new e(pe.line,pe.to-1):!P&&N?(!Ce&&(_e.to!=V.ch||_e.line!=V.line)&&(pe=z.pop()),new e(pe.line,pe.to)):new e(pe.line,pe.from)}function Mi(p,v,A,P,N){var B=v,V=new e(B.line+A.repeat-1,1/0),z=p.clipPos(V);return z.ch--,N||(P.lastHPos=1/0,P.lastHSPos=p.charCoords(z,"div").left),V}function yi(p,v,A,P,N){for(var B=N||p.getCursor(),V=B.ch,z,q=0;q<v;q++){var le=p.getLine(B.line);if(z=zi(V,le,P,A,!0),z==-1)return null;V=z}return new e(p.getCursor().line,z)}function Yi(p,v){var A=p.getCursor().line;return vt(p,new e(A,v-1))}function zt(p,v,A,P){$e(A,ue)&&(v.marks[A]&&v.marks[A].clear(),v.marks[A]=p.setBookmark(P))}function zi(p,v,A,P,N){var B;return P?(B=v.indexOf(A,p+1),B!=-1&&!N&&(B-=1)):(B=v.lastIndexOf(A,p-1),B!=-1&&!N&&(B+=1)),B}function xi(p,v,A,P,N){var B=v.line,V=p.firstLine(),z=p.lastLine(),q,le,oe=B;function ve(Me){return!p.getLine(Me)}function Ce(Me,Qe,Ge){return Ge?ve(Me)!=ve(Me+Qe):!ve(Me)&&ve(Me+Qe)}if(P){for(;V<=oe&&oe<=z&&A>0;)Ce(oe,P)&&A--,oe+=P;return new e(oe,0)}var _e=p.state.vim;if(_e.visualLine&&Ce(B,1,!0)){var pe=_e.sel.anchor;Ce(pe.line,-1,!0)&&(!N||pe.line!=B)&&(B+=1)}var De=ve(B);for(oe=B;oe<=z&&A;oe++)Ce(oe,1,!0)&&(!N||ve(oe)!=De)&&A--;for(le=new e(oe,0),oe>z&&!De?De=!0:N=!1,oe=B;oe>V&&!((!N||ve(oe)==De||oe==B)&&Ce(oe,-1,!0));oe--);return q=new e(oe,0),{start:q,end:le}}function ki(p,v,A,P,N){function B(le){le.pos+le.dir<0||le.pos+le.dir>=le.line.length?le.line=null:le.pos+=le.dir}function V(le,oe,ve,Ce){var _e=le.getLine(oe),pe={line:_e,ln:oe,pos:ve,dir:Ce};if(pe.line==="")return{ln:pe.ln,pos:pe.pos};var De=pe.pos;for(B(pe);pe.line!==null;){if(De=pe.pos,Ue(pe.line[pe.pos]))if(N){for(B(pe);pe.line!==null&&Fe(pe.line[pe.pos]);)De=pe.pos,B(pe);return{ln:pe.ln,pos:De+1}}else return{ln:pe.ln,pos:pe.pos+1};B(pe)}return{ln:pe.ln,pos:De+1}}function z(le,oe,ve,Ce){var _e=le.getLine(oe),pe={line:_e,ln:oe,pos:ve,dir:Ce};if(pe.line==="")return{ln:pe.ln,pos:pe.pos};var De=pe.pos;for(B(pe);pe.line!==null;){if(!Fe(pe.line[pe.pos])&&!Ue(pe.line[pe.pos]))De=pe.pos;else if(Ue(pe.line[pe.pos]))return N?Fe(pe.line[pe.pos+1])?{ln:pe.ln,pos:pe.pos+1}:{ln:pe.ln,pos:De}:{ln:pe.ln,pos:De};B(pe)}return pe.line=_e,N&&Fe(pe.line[pe.pos])?{ln:pe.ln,pos:pe.pos}:{ln:pe.ln,pos:De}}for(var q={ln:v.line,pos:v.ch};A>0;)P<0?q=z(p,q.ln,q.pos,P):q=V(p,q.ln,q.pos,P),A--;return new e(q.ln,q.pos)}function Ji(p,v,A,P){function N(q,le){if(le.pos+le.dir<0||le.pos+le.dir>=le.line.length){if(le.ln+=le.dir,!Oe(q,le.ln)){le.line=null,le.ln=null,le.pos=null;return}le.line=q.getLine(le.ln),le.pos=le.dir>0?0:le.line.length-1}else le.pos+=le.dir}function B(q,le,oe,ve){var Me=q.getLine(le),Ce=Me==="",_e={line:Me,ln:le,pos:oe,dir:ve},pe={ln:_e.ln,pos:_e.pos},De=_e.line==="";for(N(q,_e);_e.line!==null;){if(pe.ln=_e.ln,pe.pos=_e.pos,_e.line===""&&!De)return{ln:_e.ln,pos:_e.pos};if(Ce&&_e.line!==""&&!Fe(_e.line[_e.pos]))return{ln:_e.ln,pos:_e.pos};Ue(_e.line[_e.pos])&&!Ce&&(_e.pos===_e.line.length-1||Fe(_e.line[_e.pos+1]))&&(Ce=!0),N(q,_e)}var Me=q.getLine(pe.ln);pe.pos=0;for(var Qe=Me.length-1;Qe>=0;--Qe)if(!Fe(Me[Qe])){pe.pos=Qe;break}return pe}function V(q,le,oe,ve){var De=q.getLine(le),Ce={line:De,ln:le,pos:oe,dir:ve},_e={ln:Ce.ln,pos:null},pe=Ce.line==="";for(N(q,Ce);Ce.line!==null;){if(Ce.line===""&&!pe)return _e.pos!==null?_e:{ln:Ce.ln,pos:Ce.pos};if(Ue(Ce.line[Ce.pos])&&_e.pos!==null&&!(Ce.ln===_e.ln&&Ce.pos+1===_e.pos))return _e;Ce.line!==""&&!Fe(Ce.line[Ce.pos])&&(pe=!1,_e={ln:Ce.ln,pos:Ce.pos}),N(q,Ce)}var De=q.getLine(_e.ln);_e.pos=0;for(var Me=0;Me<De.length;++Me)if(!Fe(De[Me])){_e.pos=Me;break}return _e}for(var z={ln:v.line,pos:v.ch};A>0;)P<0?z=V(p,z.ln,z.pos,P):z=B(p,z.ln,z.pos,P),A--;return new e(z.ln,z.pos)}function Di(p,v,A,P){var N=v,B,V,z={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[A],q={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[A],le=p.getLine(N.line).charAt(N.ch),oe=le===q?1:0;if(B=p.scanForBracket(new e(N.line,N.ch+oe),-1,void 0,{bracketRegex:z}),V=p.scanForBracket(new e(N.line,N.ch+oe),1,void 0,{bracketRegex:z}),!B||!V)return null;if(B=B.pos,V=V.pos,B.line==V.line&&B.ch>V.ch||B.line>V.line){var ve=B;B=V,V=ve}return P?V.ch+=1:B.ch+=1,{start:B,end:V}}function Ki(p,v,A,P){var N=Ke(v),B=p.getLine(N.line),V=B.split(""),z,q,le,oe,ve=V.indexOf(A);if(N.ch<ve)N.ch=ve;else if(ve<N.ch&&V[N.ch]==A){var Ce=/string/.test(p.getTokenTypeAt(et(v,0,1))),_e=/string/.test(p.getTokenTypeAt(v)),pe=Ce&&!_e;pe||(q=N.ch,--N.ch)}if(V[N.ch]==A&&!q)z=N.ch+1;else for(le=N.ch;le>-1&&!z;le--)V[le]==A&&(z=le+1);if(z&&!q)for(le=z,oe=V.length;le<oe&&!q;le++)V[le]==A&&(q=le);return!z||!q?{start:N,end:N}:(P&&(--z,++q),{start:new e(N.line,z),end:new e(N.line,q)})}Xe("pcre",!0,"boolean");function Fi(){}Fi.prototype={getQuery:function(){return xe.query},setQuery:function(p){xe.query=p},getOverlay:function(){return this.searchOverlay},setOverlay:function(p){this.searchOverlay=p},isReversed:function(){return xe.isReversed},setReversed:function(p){xe.isReversed=p},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(p){this.annotate=p}};function qt(p){var v=p.state.vim;return v.searchState_||(v.searchState_=new Fi)}function en(p){return Bi(p,"/")}function tn(p){return $i(p,"/")}function Bi(p,v){var A=$i(p,v)||[];if(!A.length)return[];var P=[];if(A[0]===0){for(var N=0;N<A.length;N++)typeof A[N]=="number"&&P.push(p.substring(A[N]+1,A[N+1]));return P}}function $i(p,v){v||(v="/");for(var A=!1,P=[],N=0;N<p.length;N++){var B=p.charAt(N);!A&&B==v&&P.push(N),A=!A&&B=="\\"}return P}function nn(p){for(var v="|(){",A="}",P=!1,N=[],B=-1;B<p.length;B++){var V=p.charAt(B)||"",z=p.charAt(B+1)||"",q=z&&v.indexOf(z)!=-1;P?((V!=="\\"||!q)&&N.push(V),P=!1):V==="\\"?(P=!0,z&&A.indexOf(z)!=-1&&(q=!0),(!q||z==="\\")&&N.push(V)):(N.push(V),q&&z!=="\\"&&N.push("\\"))}return N.join("")}var Ti={"\\n":`
`,"\\r":"\r","\\t":"	"};function rn(p){for(var v=!1,A=[],P=-1;P<p.length;P++){var N=p.charAt(P)||"",B=p.charAt(P+1)||"";Ti[N+B]?(A.push(Ti[N+B]),P++):v?(A.push(N),v=!1):N==="\\"?(v=!0,Ne(B)||B==="$"?A.push("$"):B!=="/"&&B!=="\\"&&A.push("\\")):(N==="$"&&A.push("$"),A.push(N),B==="/"&&A.push("\\"))}return A.join("")}var Ni={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function sn(p){for(var v=new s.StringStream(p),A=[];!v.eol();){for(;v.peek()&&v.peek()!="\\";)A.push(v.next());var P=!1;for(var N in Ni)if(v.match(N,!0)){P=!0,A.push(Ni[N]);break}P||A.push(v.next())}return A.join("")}function an(p,v,A){var P=xe.registerController.getRegister("/");if(P.setText(p),p instanceof RegExp)return p;var N=tn(p),B,V;if(!N.length)B=p;else{B=p.substring(0,N[0]);var z=p.substring(N[0]);V=z.indexOf("i")!=-1}if(!B)return null;nt("pcre")||(B=nn(B)),A&&(v=/^[^A-Z]*$/.test(B));var q=new RegExp(B,v||V?"im":"m");return q}function ni(p){typeof p=="string"&&(p=document.createElement(p));for(var v,A=1;A<arguments.length;A++)if(v=arguments[A])if(typeof v!="object"&&(v=document.createTextNode(v)),v.nodeType)p.appendChild(v);else for(var P in v)Object.prototype.hasOwnProperty.call(v,P)&&(P[0]==="$"?p.style[P.slice(1)]=v[P]:p.setAttribute(P,v[P]));return p}function ct(p,v){var A=ni("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},v);p.openNotification?p.openNotification(A,{bottom:!0,duration:5e3}):alert(A.innerText)}function ln(p,v){return ni("div",{$display:"flex"},ni("span",{$fontFamily:"monospace",$whiteSpace:"pre",$flex:1},p,ni("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false",$width:"100%"})),v&&ni("span",{$color:"#888"},v))}function hi(p,v){var A=ln(v.prefix,v.desc);if(p.openDialog)p.openDialog(A,v.onClose,{onKeyDown:v.onKeyDown,onKeyUp:v.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:v.value});else{var P="";typeof v.prefix!="string"&&v.prefix&&(P+=v.prefix.textContent),v.desc&&(P+=" "+v.desc),v.onClose(prompt(P,""))}}function un(p,v){if(p instanceof RegExp&&v instanceof RegExp){for(var A=["global","multiline","ignoreCase","source"],P=0;P<A.length;P++){var N=A[P];if(p[N]!==v[N])return!1}return!0}return!1}function oi(p,v,A,P){if(v){var N=qt(p),B=an(v,!!A,!!P);if(B)return Ri(p,B),un(B,N.getQuery())||N.setQuery(B),B}}function cn(p){if(p.source.charAt(0)=="^")var v=!0;return{token:function(A){if(v&&!A.sol()){A.skipToEnd();return}var P=A.match(p,!1);if(P)return P[0].length==0?(A.next(),"searching"):!A.sol()&&(A.backUp(1),!p.exec(A.next()+P[0]))?(A.next(),null):(A.match(p),"searching");for(;!A.eol()&&(A.next(),!A.match(p,!1)););},query:p}}var di=0;function Ri(p,v){clearTimeout(di),di=setTimeout(function(){if(p.state.vim){var A=qt(p),P=A.getOverlay();(!P||v!=P.query)&&(P&&p.removeOverlay(P),P=cn(v),p.addOverlay(P),p.showMatchesOnScrollbar&&(A.getScrollbarAnnotate()&&A.getScrollbarAnnotate().clear(),A.setScrollbarAnnotate(p.showMatchesOnScrollbar(v))),A.setOverlay(P))}},50)}function Ii(p,v,A,P){return P===void 0&&(P=1),p.operation(function(){for(var N=p.getCursor(),B=p.getSearchCursor(A,N),V=0;V<P;V++){var z=B.find(v);if(V==0&&z&&ze(B.from(),N)){var q=v?B.from():B.to();z=B.find(v),z&&!z[0]&&ze(B.from(),q)&&p.getLine(q.line).length==q.ch&&(z=B.find(v))}if(!z&&(B=p.getSearchCursor(A,v?new e(p.lastLine()):new e(p.firstLine(),0)),!B.find(v)))return}return B.from()})}function fn(p,v,A,P,N){return P===void 0&&(P=1),p.operation(function(){var B=p.getCursor(),V=p.getSearchCursor(A,B),z=V.find(!v);!N.visualMode&&z&&ze(V.from(),B)&&V.find(!v);for(var q=0;q<P;q++)if(z=V.find(v),!z&&(V=p.getSearchCursor(A,v?new e(p.lastLine()):new e(p.firstLine(),0)),!V.find(v)))return;return[V.from(),V.to()]})}function vi(p){var v=qt(p);p.removeOverlay(qt(p).getOverlay()),v.setOverlay(null),v.getScrollbarAnnotate()&&(v.getScrollbarAnnotate().clear(),v.setScrollbarAnnotate(null))}function hn(p,v,A){return typeof p!="number"&&(p=p.line),v instanceof Array?$e(p,v):typeof A=="number"?p>=v&&p<=A:p==v}function Ci(p){var v=p.getScrollInfo(),A=6,P=10,N=p.coordsChar({left:0,top:A+v.top},"local"),B=v.clientHeight-P+v.top,V=p.coordsChar({left:0,top:B},"local");return{top:N.line,bottom:V.line}}function pi(p,v,A){if(A=="'"||A=="`")return xe.jumpList.find(p,-1)||new e(0,0);if(A==".")return Li(p);var P=v.marks[A];return P&&P.find()}function Li(p){if(p.getLastEditEnd)return p.getLastEditEnd();for(var v=p.doc.history.done,A=v.length;A--;)if(v[A].changes)return Ke(v[A].changes[0].to)}var Qi=function(){this.buildCommandMap_()};Qi.prototype={processCommand:function(p,v,A){var P=this;p.operation(function(){p.curOp.isVimOp=!0,P._processCommand(p,v,A)})},_processCommand:function(p,v,A){var P=p.state.vim,N=xe.registerController.getRegister(":"),B=N.toString(),V=new s.StringStream(v);N.setText(v);var z=A||{};z.input=v;try{this.parseInput_(p,V,z)}catch(ve){throw ct(p,ve.toString()),ve}P.visualMode&&kt(p);var q,le;if(!z.commandName)z.line!==void 0&&(le="move");else if(q=this.matchCommand_(z.commandName),q){if(le=q.name,q.excludeFromCommandHistory&&N.setText(B),this.parseCommandArgs_(V,z,q),q.type=="exToKey"){for(var oe=0;oe<q.toKeys.length;oe++)ot.handleKey(p,q.toKeys[oe],"mapping");return}else if(q.type=="exToEx"){this.processCommand(p,q.toInput);return}}if(!le){ct(p,'Not an editor command ":'+v+'"');return}try{Gi[le](p,z),(!q||!q.possiblyAsync)&&z.callback&&z.callback()}catch(ve){throw ct(p,ve.toString()),ve}},parseInput_:function(p,v,A){v.eatWhile(":"),v.eat("%")?(A.line=p.firstLine(),A.lineEnd=p.lastLine()):(A.line=this.parseLineSpec_(p,v),A.line!==void 0&&v.eat(",")&&(A.lineEnd=this.parseLineSpec_(p,v))),A.line==null?p.state.vim.visualMode?(A.selectionLine=pi(p,p.state.vim,"<")?.line,A.selectionLineEnd=pi(p,p.state.vim,">")?.line):A.selectionLine=p.getCursor().line:(A.selectionLine=A.line,A.selectionLineEnd=A.lineEnd);var P=v.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return P?A.commandName=P[1]:A.commandName=v.match(/.*/)[0],A},parseLineSpec_:function(p,v){var A=v.match(/^(\d+)/);if(A)return parseInt(A[1],10)-1;switch(v.next()){case".":return this.parseLineSpecOffset_(v,p.getCursor().line);case"$":return this.parseLineSpecOffset_(v,p.lastLine());case"'":var P=v.next(),N=pi(p,p.state.vim,P);if(!N)throw new Error("Mark not set");return this.parseLineSpecOffset_(v,N.line);case"-":case"+":return v.backUp(1),this.parseLineSpecOffset_(v,p.getCursor().line);default:v.backUp(1);return}},parseLineSpecOffset_:function(p,v){var A=p.match(/^([+-])?(\d+)/);if(A){var P=parseInt(A[2],10);A[1]=="-"?v-=P:v+=P}return v},parseCommandArgs_:function(p,v,A){if(!p.eol()){v.argString=p.match(/.*/)[0];var P=A.argDelimiter||/\s+/,N=si(v.argString).split(P);N.length&&N[0]&&(v.args=N)}},matchCommand_:function(p){for(var v=p.length;v>0;v--){var A=p.substring(0,v);if(this.commandMap_[A]){var P=this.commandMap_[A];if(P.name.indexOf(p)===0)return P}}return null},buildCommandMap_:function(){this.commandMap_={};for(var p=0;p<u.length;p++){var v=u[p],A=v.shortName||v.name;this.commandMap_[A]=v}},map:function(p,v,A,P){if(p!=":"&&p.charAt(0)==":"){if(A)throw Error("Mode not supported for ex mappings");var N=p.substring(1);v!=":"&&v.charAt(0)==":"?this.commandMap_[N]={name:N,type:"exToEx",toInput:v.substring(1),user:!0}:this.commandMap_[N]={name:N,type:"exToKey",toKeys:v,user:!0}}else if(v!=":"&&v.charAt(0)==":"){var B={keys:p,type:"keyToEx",exArgs:{input:v.substring(1)}};A&&(B.context=A),o.unshift(B)}else{var B={keys:p,type:"keyToKey",toKeys:v,noremap:P};A&&(B.context=A),o.unshift(B)}},unmap:function(p,v){if(p!=":"&&p.charAt(0)==":"){if(v)throw Error("Mode not supported for ex mappings");var A=p.substring(1);if(this.commandMap_[A]&&this.commandMap_[A].user)return delete this.commandMap_[A],!0}else for(var P=p,N=0;N<o.length;N++)if(P==o[N].keys&&o[N].context===v)return o.splice(N,1),!0}};var Gi={colorscheme:function(p,v){if(!v.args||v.args.length<1){ct(p,p.getOption("theme"));return}p.setOption("theme",v.args[0])},map:function(p,v,A,P){var N=v.args;if(!N||N.length<2){p&&ct(p,"Invalid mapping: "+v.input);return}Wt.map(N[0],N[1],A,P)},imap:function(p,v){this.map(p,v,"insert")},nmap:function(p,v){this.map(p,v,"normal")},vmap:function(p,v){this.map(p,v,"visual")},omap:function(p,v){this.map(p,v,"operatorPending")},noremap:function(p,v){this.map(p,v,void 0,!0)},inoremap:function(p,v){this.map(p,v,"insert",!0)},nnoremap:function(p,v){this.map(p,v,"normal",!0)},vnoremap:function(p,v){this.map(p,v,"visual",!0)},onoremap:function(p,v){this.map(p,v,"operatorPending",!0)},unmap:function(p,v,A){var P=v.args;(!P||P.length<1||!Wt.unmap(P[0],A))&&p&&ct(p,"No such mapping: "+v.input)},mapclear:function(p,v){ot.mapclear()},imapclear:function(p,v){ot.mapclear("insert")},nmapclear:function(p,v){ot.mapclear("normal")},vmapclear:function(p,v){ot.mapclear("visual")},omapclear:function(p,v){ot.mapclear("operatorPending")},move:function(p,v){Qt.processCommand(p,p.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:v.line+1})},set:function(p,v){var A=v.args,P=v.setCfg||{};if(!A||A.length<1){p&&ct(p,"Invalid mapping: "+v.input);return}var N=A[0].split("="),B=N[0],V=N[1],z=!1;if(B.charAt(B.length-1)=="?"){if(V)throw Error("Trailing characters: "+v.argString);B=B.substring(0,B.length-1),z=!0}V===void 0&&B.substring(0,2)=="no"&&(B=B.substring(2),V=!1);var q=Ie[B]&&Ie[B].type=="boolean";if(q&&V==null&&(V=!0),!q&&V===void 0||z){var le=nt(B,p,P);le instanceof Error?ct(p,le.message):le===!0||le===!1?ct(p," "+(le?"":"no")+B):ct(p,"  "+B+"="+le)}else{var oe=Pe(B,V,p,P);oe instanceof Error&&ct(p,oe.message)}},setlocal:function(p,v){v.setCfg={scope:"local"},this.set(p,v)},setglobal:function(p,v){v.setCfg={scope:"global"},this.set(p,v)},registers:function(p,v){var A=v.args,P=xe.registerController.registers,N=`----------Registers----------

`;if(A){var B;A=A.join("");for(var z=0;z<A.length;z++)if(B=A.charAt(z),!!xe.registerController.isValidRegister(B)){var q=P[B]||new Ct;N+='"'+B+"    "+q.toString()+`
`}}else for(var B in P){var V=P[B].toString();V.length&&(N+='"'+B+"    "+V+`
`)}ct(p,N)},sort:function(p,v){var A,P,N,B,V;function z(){if(v.argString){var tt=new s.StringStream(v.argString);if(tt.eat("!")&&(A=!0),tt.eol())return;if(!tt.eatSpace())return"Invalid arguments";var it=tt.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!it&&!tt.eol())return"Invalid arguments";if(it[1]){P=it[1].indexOf("i")!=-1,N=it[1].indexOf("u")!=-1;var Rt=it[1].indexOf("d")!=-1||it[1].indexOf("n")!=-1&&1,Mt=it[1].indexOf("x")!=-1&&1,xt=it[1].indexOf("o")!=-1&&1;if(Rt+Mt+xt>1)return"Invalid arguments";B=Rt&&"decimal"||Mt&&"hex"||xt&&"octal"}it[2]&&(V=new RegExp(it[2].substr(1,it[2].length-2),P?"i":""))}}var q=z();if(q){ct(p,q+": "+v.argString);return}var le=v.line||p.firstLine(),oe=v.lineEnd||v.line||p.lastLine();if(le==oe)return;var ve=new e(le,0),Ce=new e(oe,wt(p,oe)),_e=p.getRange(ve,Ce).split(`
`),pe=V||(B=="decimal"?/(-?)([\d]+)/:B=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:B=="octal"?/([0-7]+)/:null),De=B=="decimal"?10:B=="hex"?16:B=="octal"?8:null,Me=[],Qe=[];if(B||V)for(var Ge=0;Ge<_e.length;Ge++){var Ee=V?_e[Ge].match(V):null;Ee&&Ee[0]!=""?Me.push(Ee):!V&&pe.exec(_e[Ge])?Me.push(_e[Ge]):Qe.push(_e[Ge])}else Qe=_e;function rt(tt,it){if(A){var Rt;Rt=tt,tt=it,it=Rt}P&&(tt=tt.toLowerCase(),it=it.toLowerCase());var Mt=B&&pe.exec(tt),xt=B&&pe.exec(it);return Mt?(Mt=parseInt((Mt[1]+Mt[2]).toLowerCase(),De),xt=parseInt((xt[1]+xt[2]).toLowerCase(),De),Mt-xt):tt<it?-1:1}function $t(tt,it){if(A){var Rt;Rt=tt,tt=it,it=Rt}return P&&(tt[0]=tt[0].toLowerCase(),it[0]=it[0].toLowerCase()),tt[0]<it[0]?-1:1}if(Me.sort(V?$t:rt),V)for(var Ge=0;Ge<Me.length;Ge++)Me[Ge]=Me[Ge].input;else B||Qe.sort(rt);if(_e=A?Me.concat(Qe):Qe.concat(Me),N){var ft=_e,bt;_e=[];for(var Ge=0;Ge<ft.length;Ge++)ft[Ge]!=bt&&_e.push(ft[Ge]),bt=ft[Ge]}p.replaceRange(_e.join(`
`),ve,Ce)},vglobal:function(p,v){this.global(p,v)},normal:function(p,v){var A=v.argString&&v.argString.trimStart();if(!A){ct(p,"Argument is required.");return}var P=v.line;if(typeof P=="number")for(var N=isNaN(v.lineEnd)?P:v.lineEnd,B=P;B<=N;B++)p.setCursor(B,0),ht(p,v.argString.trimStart()),p.state.vim.insertMode&&ri(p,!0);else ht(p,v.argString.trimStart()),p.state.vim.insertMode&&ri(p,!0)},global:function(p,v){var A=v.argString;if(!A){ct(p,"Regular Expression missing from global");return}var P=v.commandName[0]==="v";A[0]==="!"&&v.commandName[0]==="g"&&(P=!0,A=A.slice(1));var N=v.line!==void 0?v.line:p.firstLine(),B=v.lineEnd||v.line||p.lastLine(),V=en(A),z=A,q;if(V.length&&(z=V[0],q=V.slice(1,V.length).join("/")),z)try{oi(p,z,!0,!0)}catch{ct(p,"Invalid regex: "+z);return}for(var le=qt(p).getQuery(),oe=[],ve=N;ve<=B;ve++){var Ce=p.getLine(ve),_e=le.test(Ce);_e!==P&&oe.push(q?p.getLineHandle(ve):Ce)}if(!q){ct(p,oe.join(`
`));return}var pe=0,De=function(){if(pe<oe.length){var Me=oe[pe++],Qe=p.getLineNumber(Me);if(Qe==null){De();return}var Ge=Qe+1+q;Wt.processCommand(p,Ge,{callback:De})}else p.releaseLineHandles&&p.releaseLineHandles()};De()},substitute:function(p,v){if(!p.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var A=v.argString,P=A?Bi(A,A[0]):[],N,B="",V,z,q,le=!1,oe=!1;if(P.length)N=P[0],nt("pcre")&&N!==""&&(N=new RegExp(N).source),B=P[1],B!==void 0&&(nt("pcre")?B=sn(B.replace(/([^\\])&/g,"$1$$&")):B=rn(B),xe.lastSubstituteReplacePart=B),V=P[2]?P[2].split(" "):[];else if(A&&A.length){ct(p,"Substitutions should be of the form :s/pattern/replace/");return}if(V&&(z=V[0],q=parseInt(V[1]),z&&(z.indexOf("c")!=-1&&(le=!0),z.indexOf("g")!=-1&&(oe=!0),nt("pcre")?N=N+"/"+z:N=N.replace(/\//g,"\\/")+"/"+z)),N)try{oi(p,N,!0,!0)}catch{ct(p,"Invalid regex: "+N);return}if(B=B||xe.lastSubstituteReplacePart,B===void 0){ct(p,"No previous substitute regular expression");return}var ve=qt(p),Ce=ve.getQuery(),_e=v.line!==void 0?v.line:p.getCursor().line,pe=v.lineEnd||_e;_e==p.firstLine()&&pe==p.lastLine()&&(pe=1/0),q&&(_e=pe,pe=_e+q-1);var De=vt(p,new e(_e,0)),Me=p.getSearchCursor(Ce,De);dn(p,le,oe,_e,pe,Me,Ce,B,v.callback)},redo:s.commands.redo,undo:s.commands.undo,write:function(p){s.commands.save?s.commands.save(p):p.save&&p.save()},nohlsearch:function(p){vi(p)},yank:function(p){var v=Ke(p.getCursor()),A=v.line,P=p.getLine(A);xe.registerController.pushText("0","yank",P,!0,!0)},delete:function(p,v){var A=v.selectionLine,P=isNaN(v.selectionLineEnd)?A:v.selectionLineEnd;_t.delete(p,{linewise:!0},[{anchor:new e(A,0),head:new e(P+1,0)}])},join:function(p,v){var A=v.selectionLine,P=isNaN(v.selectionLineEnd)?A:v.selectionLineEnd;p.setCursor(new e(A,0)),ut.joinLines(p,{repeat:P-A},p.state.vim)},delmarks:function(p,v){if(!v.argString||!si(v.argString)){ct(p,"Argument required");return}for(var A=p.state.vim,P=new s.StringStream(si(v.argString));!P.eol();){P.eatSpace();var N=P.pos;if(!P.match(/[a-zA-Z]/,!1)){ct(p,"Invalid argument: "+v.argString.substring(N));return}var B=P.next();if(P.match("-",!0)){if(!P.match(/[a-zA-Z]/,!1)){ct(p,"Invalid argument: "+v.argString.substring(N));return}var V=B,z=P.next();if(be(V)&&be(z)||Re(V)&&Re(z)){var q=V.charCodeAt(0),le=z.charCodeAt(0);if(q>=le){ct(p,"Invalid argument: "+v.argString.substring(N));return}for(var oe=0;oe<=le-q;oe++){var ve=String.fromCharCode(q+oe);delete A.marks[ve]}}else{ct(p,"Invalid argument: "+V+"-");return}}else delete A.marks[B]}}},Wt=new Qi;function dn(p,v,A,P,N,B,V,z,q){p.state.vim.exMode=!0;var le=!1,oe,ve,Ce;function _e(){p.operation(function(){for(;!le;)pe(),Me();Qe()})}function pe(){var Ee=p.getRange(B.from(),B.to()),rt=Ee.replace(V,z),$t=B.to().line;B.replace(rt),ve=B.to().line,N+=ve-$t,Ce=ve<$t}function De(){var Ee=oe&&Ke(B.to()),rt=B.findNext();return rt&&!rt[0]&&Ee&&ze(B.from(),Ee)&&(rt=B.findNext()),rt}function Me(){for(;De()&&hn(B.from(),P,N);)if(!(!A&&B.from().line==ve&&!Ce)){p.scrollIntoView(B.from(),30),p.setSelection(B.from(),B.to()),oe=B.from(),le=!1;return}le=!0}function Qe(Ee){if(Ee&&Ee(),p.focus(),oe){p.setCursor(oe);var rt=p.state.vim;rt.exMode=!1,rt.lastHPos=rt.lastHSPos=oe.ch}q&&q()}function Ge(Ee,rt,$t){s.e_stop(Ee);var ft=s.keyName(Ee);switch(ft){case"Y":pe(),Me();break;case"N":Me();break;case"A":var bt=q;q=void 0,p.operation(_e),q=bt;break;case"L":pe();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":Qe($t);break}return le&&Qe($t),!0}if(Me(),le){ct(p,"No matches for "+V.source);return}if(!v){_e(),q&&q();return}hi(p,{prefix:ni("span","replace with ",ni("strong",z)," (y/n/a/q/l)"),onKeyDown:Ge})}s.keyMap.vim={attach:g,detach:d,call:O};function ri(p,v){var A=p.state.vim,P=xe.macroModeState,N=xe.registerController.getRegister("."),B=P.isPlaying,V=P.lastInsertModeChanges;B||(p.off("change",ee),A.insertEnd&&A.insertEnd.clear(),A.insertEnd=null,s.off(p.getInputField(),"keydown",gi)),!B&&A.insertModeRepeat>1&&(Te(p,A,A.insertModeRepeat-1,!0),A.lastEditInputState.repeatOverride=A.insertModeRepeat),delete A.insertModeRepeat,A.insertMode=!1,v||p.setCursor(p.getCursor().line,p.getCursor().ch-1),p.setOption("keyMap","vim"),p.setOption("disableInput",!0),p.toggleOverwrite(!1),N.setText(V.changes.join("")),s.signal(p,"vim-mode-change",{mode:"normal"}),P.isRecording&&_n(P)}function Ui(p){o.unshift(p)}function pn(p,v,A,P,N){var B={keys:p,type:v};B[v]=A,B[v+"Args"]=P;for(var V in N)B[V]=N[V];Ui(B)}Xe("insertModeEscKeysTimeout",200,"number"),s.keyMap["vim-insert"]={fallthrough:["default"],attach:g,detach:d,call:O},s.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:g,detach:d};function gn(p,v,A,P){var N=xe.registerController.getRegister(P);if(P==":"){N.keyBuffer[0]&&Wt.processCommand(p,N.keyBuffer[0]),A.isPlaying=!1;return}var B=N.keyBuffer,V=0;A.isPlaying=!0,A.replaySearchQueries=N.searchQueries.slice(0);for(var z=0;z<B.length;z++)for(var q=B[z],le,oe;q;)if(le=/<\w+-.+?>|<\w+>|./.exec(q),oe=le[0],q=q.substring(le.index+oe.length),ot.handleKey(p,oe,"macro"),v.insertMode){var ve=N.insertModeChanges[V++].changes;xe.macroModeState.lastInsertModeChanges.changes=ve,Vi(p,ve,1),ri(p)}A.isPlaying=!1}function mn(p,v){if(!p.isPlaying){var A=p.latestRegister,P=xe.registerController.getRegister(A);P&&P.pushText(v)}}function _n(p){if(!p.isPlaying){var v=p.latestRegister,A=xe.registerController.getRegister(v);A&&A.pushInsertModeChanges&&A.pushInsertModeChanges(p.lastInsertModeChanges)}}function On(p,v){if(!p.isPlaying){var A=p.latestRegister,P=xe.registerController.getRegister(A);P&&P.pushSearchQuery&&P.pushSearchQuery(v)}}function ee(p,v){var A=xe.macroModeState,P=A.lastInsertModeChanges;if(!A.isPlaying)for(var N=p.state.vim;v;){if(P.expectCursorActivityForChange=!0,P.ignoreCount>1)P.ignoreCount--;else if(v.origin=="+input"||v.origin=="paste"||v.origin===void 0){var B=p.listSelections().length;B>1&&(P.ignoreCount=B);var V=v.text.join(`
`);if(P.maybeReset&&(P.changes=[],P.maybeReset=!1),V)if(p.state.overwrite&&!/\n/.test(V))P.changes.push([V]);else{if(V.length>1){var z=N&&N.insertEnd&&N.insertEnd.find(),q=p.getCursor();if(z&&z.line==q.line){var le=z.ch-q.ch;le>0&&le<V.length&&(P.changes.push([V,le]),V="")}}V&&P.changes.push(V)}}v=v.next}}function Ze(p){var v=p.state.vim;if(v.insertMode){var A=xe.macroModeState;if(A.isPlaying)return;var P=A.lastInsertModeChanges;P.expectCursorActivityForChange?P.expectCursorActivityForChange=!1:(P.maybeReset=!0,v.insertEnd&&v.insertEnd.clear(),v.insertEnd=p.setBookmark(p.getCursor(),{insertLeft:!0}))}else p.curOp.isVimOp||li(p,v)}function li(p,v){var A=p.getCursor("anchor"),P=p.getCursor("head");if(v.visualMode&&!p.somethingSelected()?kt(p,!1):!v.visualMode&&!v.insertMode&&p.somethingSelected()&&(v.visualMode=!0,v.visualLine=!1,s.signal(p,"vim-mode-change",{mode:"visual"})),v.visualMode){var N=We(P,A)?0:-1,B=We(P,A)?-1:0;P=et(P,0,N),A=et(A,0,B),v.sel={anchor:A,head:P},zt(p,v,"<",Pt(P,A)),zt(p,v,">",Gt(P,A))}else v.insertMode||(v.lastHPos=p.getCursor().ch)}function Zt(p){this.keyName=p}function gi(p){var v=xe.macroModeState,A=v.lastInsertModeChanges,P=s.keyName(p);if(!P)return;function N(){return A.maybeReset&&(A.changes=[],A.maybeReset=!1),A.changes.push(new Zt(P)),!0}(P.indexOf("Delete")!=-1||P.indexOf("Backspace")!=-1)&&s.lookupKey(P,"vim-insert",N)}function Te(p,v,A,P){var N=xe.macroModeState;N.isPlaying=!0;var B=!!v.lastEditActionCommand,V=v.inputState;function z(){B?Qt.processAction(p,v,v.lastEditActionCommand):Qt.evalInput(p,v)}function q(oe){if(N.lastInsertModeChanges.changes.length>0){oe=v.lastEditActionCommand?oe:1;var ve=N.lastInsertModeChanges;Vi(p,ve.changes,oe)}}if(v.inputState=v.lastEditInputState,B&&v.lastEditActionCommand.interlaceInsertRepeat)for(var le=0;le<A;le++)z(),q(1);else P||z(),q(A);v.inputState=V,v.insertMode&&!P&&ri(p),N.isPlaying=!1}function ui(p,v){s.lookupKey(v,"vim-insert",function(P){return typeof P=="string"?s.commands[P](p):P(p),!0})}function Vi(p,v,A){var P=p.getCursor("head"),N=xe.macroModeState.lastInsertModeChanges.visualBlock;N&&(U(p,P,N+1),A=p.listSelections().length,p.setCursor(P));for(var B=0;B<A;B++){N&&p.setCursor(et(P,B,0));for(var V=0;V<v.length;V++){var z=v[V];if(z instanceof Zt)ui(p,z.keyName);else if(typeof z=="string")p.replaceSelection(z);else{var q=p.getCursor(),le=et(q,0,z[0].length-(z[1]||0));p.replaceRange(z[0],q,z[1]?q:le),p.setCursor(le)}}}N&&p.setCursor(et(P,0,1))}function mi(p){var v=new p.constructor;return Object.keys(p).forEach(function(A){if(A!="insertEnd"){var P=p[A];Array.isArray(P)?P=P.slice():P&&typeof P=="object"&&P.constructor!=Object&&(P=mi(P)),v[A]=P}}),p.sel&&(v.sel={head:p.sel.head&&Ke(p.sel.head),anchor:p.sel.anchor&&Ke(p.sel.anchor)}),v}function je(p,v,A){var P=!1,N=ot.maybeInitVimState_(p),B=N.visualBlock||N.wasInVisualBlock,V=p.isInMultiSelectMode();if(N.wasInVisualBlock&&!V?N.wasInVisualBlock=!1:V&&N.visualBlock&&(N.wasInVisualBlock=!0),v=="<Esc>"&&!N.insertMode&&!N.visualMode&&V&&N.status=="<Esc>")dt(p);else if(B||!V||p.inVirtualSelectionMode)P=ot.handleKey(p,v,A);else{var z=mi(N),q=N.inputState.changeQueueList||[];p.operation(function(){p.curOp.isVimOp=!0;var le=0;p.forEachSelection(function(){p.state.vim.inputState.changeQueue=q[le];var oe=p.getCursor("head"),ve=p.getCursor("anchor"),Ce=We(oe,ve)?0:-1,_e=We(oe,ve)?-1:0;oe=et(oe,0,Ce),ve=et(ve,0,_e),p.state.vim.sel.head=oe,p.state.vim.sel.anchor=ve,P=ot.handleKey(p,v,A),p.virtualSelection&&(q[le]=p.state.vim.inputState.changeQueue,p.state.vim=mi(z)),le++}),p.curOp.cursorActivity&&!P&&(p.curOp.cursorActivity=!1),p.state.vim=N,N.inputState.changeQueueList=q,N.inputState.changeQueue=null},!0)}return P&&!N.visualMode&&!N.insert&&N.visualMode!=p.somethingSelected()&&li(p,N),P}return Et(),ot}function indexFromPos(s,e){var n=e.ch,a=e.line+1;a<1&&(a=1,n=0),a>s.lines&&(a=s.lines,n=Number.MAX_VALUE);var o=s.line(a);return Math.min(o.from+Math.max(0,n),o.to)}function posFromIndex(s,e){let n=s.lineAt(e);return{line:n.number-1,ch:e-n.from}}class Pos{constructor(e,n){this.line=e,this.ch=n}}function on(s,e,n){if(s.addEventListener)s.addEventListener(e,n,!1);else{var a=s._handlers||(s._handlers={});a[e]=(a[e]||[]).concat(n)}}function off(s,e,n){if(s.removeEventListener)s.removeEventListener(e,n,!1);else{var a=s._handlers,o=a&&a[e];if(o){var l=o.indexOf(n);l>-1&&(a[e]=o.slice(0,l).concat(o.slice(l+1)))}}}function signal(s,e,...n){var a,o=(a=s._handlers)===null||a===void 0?void 0:a[e];if(o)for(var l=0;l<o.length;++l)o[l](...n)}function signalTo(s,...e){if(s)for(var n=0;n<s.length;++n)s[n](...e)}var specialKey={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},ignoredKeys={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1};let wordChar;try{wordChar=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(s){wordChar=/[\w]/}function dispatchChange(s,e){var n=s.cm6,a="input.type.compose";if(s.curOp&&(s.curOp.lastChange||(a="input.type.compose.start")),e.annotations)try{e.annotations.some(function(o){o.value=="input"&&(o.value=a)})}catch(o){console.error(o)}else e.userEvent=a;return n.dispatch(e)}function runHistoryCommand(s,e){var n;s.curOp&&(s.curOp.$changeStart=void 0),(e?undo:redo)(s.cm6);let a=(n=s.curOp)===null||n===void 0?void 0:n.$changeStart;a!=null&&s.cm6.dispatch({selection:{anchor:a}})}var keys$2={};class CodeMirror{constructor(e){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=e,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}openDialog(e,n,a){return openDialog(this,e,n,a)}openNotification(e,n){return openNotification(this,e,n)}on(e,n){on(this,e,n)}off(e,n){off(this,e,n)}signal(e,n,a){signal(this,e,n,a)}indexFromPos(e){return indexFromPos(this.cm6.state.doc,e)}posFromIndex(e){return posFromIndex(this.cm6.state.doc,e)}foldCode(e){let n=this.cm6,a=n.state.selection.ranges,o=this.cm6.state.doc,l=indexFromPos(o,e),u=EditorSelection.create([EditorSelection.range(l,l)],0).ranges;n.state.selection.ranges=u,foldCode(n),n.state.selection.ranges=a}firstLine(){return 0}lastLine(){return this.cm6.state.doc.lines-1}lineCount(){return this.cm6.state.doc.lines}setCursor(e,n){typeof e=="object"&&(n=e.ch,e=e.line);var a=indexFromPos(this.cm6.state.doc,{line:e,ch:n});this.cm6.dispatch({selection:{anchor:a}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()}getCursor(e){var n=this.cm6.state.selection.main,a=e=="head"||!e?n.head:e=="anchor"?n.anchor:e=="start"?n.from:e=="end"?n.to:null;if(a==null)throw new Error("Invalid cursor type");return this.posFromIndex(a)}listSelections(){var e=this.cm6.state.doc;return this.cm6.state.selection.ranges.map(n=>({anchor:posFromIndex(e,n.anchor),head:posFromIndex(e,n.head)}))}setSelections(e,n){var a=this.cm6.state.doc,o=e.map(l=>EditorSelection.range(indexFromPos(a,l.anchor),indexFromPos(a,l.head)));this.cm6.dispatch({selection:EditorSelection.create(o,n)})}setSelection(e,n,a){var o=this.cm6.state.doc,l=[EditorSelection.range(indexFromPos(o,e),indexFromPos(o,n))];this.cm6.dispatch({selection:EditorSelection.create(l,0)}),a&&a.origin=="*mouse"&&this.onBeforeEndOperation()}getLine(e){var n=this.cm6.state.doc;return e<0||e>=n.lines?"":this.cm6.state.doc.line(e+1).text}getLineHandle(e){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:e,index:this.indexFromPos(new Pos(e,0))}}getLineNumber(e){var n=this.$lineHandleChanges;if(!n)return null;for(var a=e.index,o=0;o<n.length;o++)if(a=n[o].changes.mapPos(a,1,MapMode.TrackAfter),a==null)return null;var l=this.posFromIndex(a);return l.ch==0?l.line:null}releaseLineHandles(){this.$lineHandleChanges=void 0}getRange(e,n){var a=this.cm6.state.doc;return this.cm6.state.sliceDoc(indexFromPos(a,e),indexFromPos(a,n))}replaceRange(e,n,a){a||(a=n);var o=this.cm6.state.doc,l=indexFromPos(o,n),u=indexFromPos(o,a);dispatchChange(this,{changes:{from:l,to:u,insert:e}})}replaceSelection(e){dispatchChange(this,this.cm6.state.replaceSelection(e))}replaceSelections(e){var n=this.cm6.state.selection.ranges,a=n.map((o,l)=>({from:o.from,to:o.to,insert:e[l]||""}));dispatchChange(this,{changes:a})}getSelection(){return this.getSelections().join(`
`)}getSelections(){var e=this.cm6;return e.state.selection.ranges.map(n=>e.state.sliceDoc(n.from,n.to))}somethingSelected(){return this.cm6.state.selection.ranges.some(e=>!e.empty)}getInputField(){return this.cm6.contentDOM}clipPos(e){var n=this.cm6.state.doc,a=e.ch,o=e.line+1;o<1&&(o=1,a=0),o>n.lines&&(o=n.lines,a=Number.MAX_VALUE);var l=n.line(o);return a=Math.min(Math.max(0,a),l.to-l.from),new Pos(o-1,a)}getValue(){return this.cm6.state.doc.toString()}setValue(e){var n=this.cm6;return n.dispatch({changes:{from:0,to:n.state.doc.length,insert:e},selection:EditorSelection.range(0,0)})}focus(){return this.cm6.focus()}blur(){return this.cm6.contentDOM.blur()}defaultTextHeight(){return this.cm6.defaultLineHeight}findMatchingBracket(e){var n=this.cm6.state,a=indexFromPos(n.doc,e),o=matchBrackets(n,a+1,-1);return o&&o.end?{to:posFromIndex(n.doc,o.end.from)}:(o=matchBrackets(n,a,1),o&&o.end?{to:posFromIndex(n.doc,o.end.from)}:{to:void 0})}scanForBracket(e,n,a,o){return scanForBracket(this,e,n,a,o)}indentLine(e,n){n?this.indentMore():this.indentLess()}indentMore(){indentMore(this.cm6)}indentLess(){indentLess(this.cm6)}execCommand(e){e=="indentAuto"?CodeMirror.commands.indentAuto(this):e=="goLineLeft"?cursorLineBoundaryBackward(this.cm6):e=="goLineRight"?(cursorLineBoundaryForward(this.cm6),cursorCharBackward(this.cm6)):console.log(e+" is not implemented")}setBookmark(e,n){var a=n?.insertLeft?1:-1,o=this.indexFromPos(e),l=new Marker(this,o,a);return l}addOverlay({query:e}){let n=new SearchQuery({regexp:!0,search:e.source,caseSensitive:!/i/.test(e.flags)});if(n.valid){n.forVim=!0,this.cm6Query=n;let a=setSearchQuery.of(n);return this.cm6.dispatch({effects:a}),n}}removeOverlay(e){if(!this.cm6Query)return;this.cm6Query.forVim=!1;let n=setSearchQuery.of(this.cm6Query);this.cm6.dispatch({effects:n})}getSearchCursor(e,n){var a=this,o=null,l=null;n.ch==null&&(n.ch=Number.MAX_VALUE);var u=indexFromPos(a.cm6.state.doc,n),c=e.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,function(S,b){return b||"\\"+S});function f(S,b=0,E=S.length){return new RegExpCursor(S,c,{ignoreCase:e.ignoreCase},b,E)}function d(S){var b=a.cm6.state.doc;if(S>b.length)return null;let E=f(b,S).next();return E.done?null:E.value}var g=1e4;function O(S,b){var E=a.cm6.state.doc;for(let k=1;;k++){let $=Math.max(S,b-k*g),R=f(E,$,b),Z=null;for(;!R.next().done;)Z=R.value;if(Z&&($==S||Z.from>$+10))return Z;if($==S)return null}}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(S){var b=a.cm6.state.doc;if(S){let E=o?o.from==o.to?o.to-1:o.from:u;o=O(0,E)}else{let E=o?o.from==o.to?o.to+1:o.to:u;o=d(E)}return l=o&&{from:posFromIndex(b,o.from),to:posFromIndex(b,o.to),match:o.match},o&&o.match},from:function(){return l?.from},to:function(){return l?.to},replace:function(S){o&&(dispatchChange(a,{changes:{from:o.from,to:o.to,insert:S}}),o.to=o.from+S.length,l&&(l.to=posFromIndex(a.cm6.state.doc,o.to)))}}}findPosV(e,n,a,o){let{cm6:l}=this;const u=l.state.doc;let c=a=="page"?l.dom.clientHeight:0;const f=indexFromPos(u,e);let d=EditorSelection.range(f,f,o),g=Math.round(Math.abs(n));for(let S=0;S<g;S++)a=="page"?d=l.moveVertically(d,n>0,c):a=="line"&&(d=l.moveVertically(d,n>0));let O=posFromIndex(u,d.head);return(n<0&&d.head==0&&o!=0&&e.line==0&&e.ch!=0||n>0&&d.head==u.length&&O.ch!=o&&e.line==O.line)&&(O.hitSide=!0),O}charCoords(e,n){var a=this.cm6.contentDOM.getBoundingClientRect(),o=indexFromPos(this.cm6.state.doc,e),l=this.cm6.coordsAtPos(o),u=-a.top;return{left:(l?.left||0)-a.left,top:(l?.top||0)+u,bottom:(l?.bottom||0)+u}}coordsChar(e,n){var a=this.cm6.contentDOM.getBoundingClientRect(),o=this.cm6.posAtCoords({x:e.left+a.left,y:e.top+a.top})||0;return posFromIndex(this.cm6.state.doc,o)}getScrollInfo(){var e=this.cm6.scrollDOM;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight,width:e.scrollWidth,clientHeight:e.clientHeight,clientWidth:e.clientWidth}}scrollTo(e,n){e!=null&&(this.cm6.scrollDOM.scrollLeft=e),n!=null&&(this.cm6.scrollDOM.scrollTop=n)}scrollIntoView(e,n){if(e){var a=this.indexFromPos(e);this.cm6.dispatch({effects:EditorView.scrollIntoView(a)})}else this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})}getWrapperElement(){return this.cm6.dom}getMode(){return{name:this.getOption("mode")}}setSize(e,n){this.cm6.dom.style.width=e+4+"px",this.cm6.dom.style.height=n+"px",this.refresh()}refresh(){this.cm6.measure()}destroy(){this.removeOverlay()}getLastEditEnd(){return this.posFromIndex(this.$lastChangeEndOffset)}onChange(e){this.$lineHandleChanges&&this.$lineHandleChanges.push(e);for(let a in this.marks)this.marks[a].update(e.changes);this.virtualSelection&&(this.virtualSelection.ranges=this.virtualSelection.ranges.map(a=>a.map(e.changes)));var n=this.curOp=this.curOp||{};e.changes.iterChanges((a,o,l,u,c)=>{(n.$changeStart==null||n.$changeStart>l)&&(n.$changeStart=l),this.$lastChangeEndOffset=u;var f={text:c.toJSON()};n.lastChange?n.lastChange.next=n.lastChange=f:n.lastChange=n.change=f},!0),n.changeHandlers||(n.changeHandlers=this._handlers.change&&this._handlers.change.slice())}onSelectionChange(){var e=this.curOp=this.curOp||{};e.cursorActivityHandlers||(e.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0}operation(e){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var n=e()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return n}onBeforeEndOperation(){var e=this.curOp,n=!1;e&&(e.change&&signalTo(e.changeHandlers,this,e.change),e&&e.cursorActivity&&(signalTo(e.cursorActivityHandlers,this,null),e.isVimOp&&(n=!0)),this.curOp=null),n&&this.scrollIntoView()}moveH(e,n){if(n=="char"){var a=this.getCursor();this.setCursor(a.line,a.ch+e)}}setOption(e,n){switch(e){case"keyMap":this.state.keyMap=n;break}}getOption(e){switch(e){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readonly":return this.cm6.state.readOnly;case"indentWithTabs":return this.cm6.state.facet(indentUnit)=="	";case"indentUnit":return this.cm6.state.facet(indentUnit).length||2;case"keyMap":return this.state.keyMap||"vim"}}toggleOverwrite(e){this.state.overwrite=e}getTokenTypeAt(e){var n,a=this.indexFromPos(e),o=ensureSyntaxTree(this.cm6.state,a),l=o?.resolve(a),u=((n=l?.type)===null||n===void 0?void 0:n.name)||"";return/comment/i.test(u)?"comment":/string/i.test(u)?"string":""}overWriteSelection(e){var n=this.cm6.state.doc,a=this.cm6.state.selection,o=a.ranges.map(l=>{if(l.empty){var u=l.to<n.length?n.sliceString(l.from,l.to+1):"";if(u&&!/\n/.test(u))return EditorSelection.range(l.from,l.to+1)}return l});this.cm6.dispatch({selection:EditorSelection.create(o,a.mainIndex)}),this.replaceSelection(e)}isInMultiSelectMode(){return this.cm6.state.selection.ranges.length>1}virtualSelectionMode(){return!!this.virtualSelection}forEachSelection(e){var n=this.cm6.state.selection;this.virtualSelection=EditorSelection.create(n.ranges,n.mainIndex);for(var a=0;a<this.virtualSelection.ranges.length;a++){var o=this.virtualSelection.ranges[a];o&&(this.cm6.dispatch({selection:EditorSelection.create([o])}),e(),this.virtualSelection.ranges[a]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null}}CodeMirror.isMac=typeof navigator<"u"&&/Mac/.test(navigator.platform),CodeMirror.Pos=Pos,CodeMirror.StringStream=StringStream,CodeMirror.commands={cursorCharLeft:function(s){cursorCharLeft(s.cm6)},redo:function(s){runHistoryCommand(s,!1)},undo:function(s){runHistoryCommand(s,!0)},newlineAndIndent:function(s){insertNewlineAndIndent({state:s.cm6.state,dispatch:e=>dispatchChange(s,e)})},indentAuto:function(s){indentSelection(s.cm6)}},CodeMirror.defineOption=function(s,e,n){},CodeMirror.isWordChar=function(s){return wordChar.test(s)},CodeMirror.keys=keys$2,CodeMirror.keyMap={},CodeMirror.addClass=function(){},CodeMirror.rmClass=function(){},CodeMirror.e_preventDefault=function(s){s.preventDefault()},CodeMirror.e_stop=function(s){var e,n;(e=s?.stopPropagation)===null||e===void 0||e.call(s),(n=s?.preventDefault)===null||n===void 0||n.call(s)},CodeMirror.keyName=function(s){var e=s.key;if(!ignoredKeys[e]){e=="Escape"&&(e="Esc"),e==" "&&(e="Space"),e.length>1&&(e=e.replace(/Numpad|Arrow/,"")),e.length==1&&(e=e.toUpperCase());var n="";return s.ctrlKey&&(n+="Ctrl-"),s.altKey&&(n+="Alt-"),(n||e.length>1)&&s.shiftKey&&(n+="Shift-"),n+=e,n}},CodeMirror.vimKey=function s(e){var n=e.key;if(!ignoredKeys[n]){n.length>1&&n[0]=="n"&&(n=n.replace("Numpad","")),n=specialKey[n]||n;var a="";return e.ctrlKey&&(a+="C-"),e.altKey&&(a+="A-"),e.metaKey&&(a+="M-"),CodeMirror.isMac&&e.altKey&&!e.metaKey&&!e.ctrlKey&&(a=a.slice(2)),(a||n.length>1)&&e.shiftKey&&(a+="S-"),a+=n,a.length>1&&(a="<"+a+">"),a}},CodeMirror.lookupKey=function s(e,n,a){var o=CodeMirror.keys[e];o&&a(o)},CodeMirror.on=on,CodeMirror.off=off,CodeMirror.signal=signal,CodeMirror.findMatchingTag=findMatchingTag,CodeMirror.findEnclosingTag=findEnclosingTag;function dialogDiv(s,e,n){var a=document.createElement("div");return a.appendChild(e),a}function closeNotification(s,e){s.state.currentNotificationClose&&s.state.currentNotificationClose(),s.state.currentNotificationClose=e}function openNotification(s,e,n){closeNotification(s,c);var a=dialogDiv(s,e,n&&n.bottom),o=!1,l,u=n&&typeof n.duration<"u"?n.duration:5e3;function c(){o||(o=!0,clearTimeout(l),a.remove(),hideDialog(s,a))}return a.onclick=function(f){f.preventDefault(),c()},showDialog(s,a),u&&(l=setTimeout(c,u)),c}function showDialog(s,e){var n=s.state.dialog;s.state.dialog=e,e&&n!==e&&(n&&n.contains(document.activeElement)&&s.focus(),n&&n.parentElement?n.parentElement.replaceChild(e,n):n&&n.remove(),CodeMirror.signal(s,"dialog"))}function hideDialog(s,e){s.state.dialog==e&&(s.state.dialog=null,CodeMirror.signal(s,"dialog"))}function openDialog(s,e,n,a){a||(a={}),closeNotification(s,void 0);var o=dialogDiv(s,e,a.bottom),l=!1;showDialog(s,o);function u(f){if(typeof f=="string")c.value=f;else{if(l)return;l=!0,hideDialog(s,o),s.state.dialog||s.focus(),a.onClose&&a.onClose(o)}}var c=o.getElementsByTagName("input")[0];return c&&(a.value&&(c.value=a.value,a.selectValueOnOpen!==!1&&c.select()),a.onInput&&CodeMirror.on(c,"input",function(f){a.onInput(f,c.value,u)}),a.onKeyUp&&CodeMirror.on(c,"keyup",function(f){a.onKeyUp(f,c.value,u)}),CodeMirror.on(c,"keydown",function(f){a&&a.onKeyDown&&a.onKeyDown(f,c.value,u)||(f.keyCode==13&&n(c.value),(f.keyCode==27||a.closeOnEnter!==!1&&f.keyCode==13)&&(c.blur(),CodeMirror.e_stop(f),u()))}),a.closeOnBlur!==!1&&CodeMirror.on(c,"blur",function(){setTimeout(function(){document.activeElement!==c&&u()})}),c.focus()),u}var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function bracketRegex(s){return s&&s.bracketRegex||/[(){}[\]]/}function scanForBracket(s,e,n,a,o){for(var l=o&&o.maxScanLineLength||1e4,u=o&&o.maxScanLines||1e3,c=[],f=bracketRegex(o),d=n>0?Math.min(e.line+u,s.lastLine()+1):Math.max(s.firstLine()-1,e.line-u),g=e.line;g!=d;g+=n){var O=s.getLine(g);if(O){var S=n>0?0:O.length-1,b=n>0?O.length:-1;if(!(O.length>l))for(g==e.line&&(S=e.ch-(n<0?1:0));S!=b;S+=n){var E=O.charAt(S);if(f.test(E)){var k=matching[E];if(k&&k.charAt(1)==">"==n>0)c.push(E);else if(c.length)c.pop();else return{pos:new Pos(g,S),ch:E}}}}}return g-n==(n>0?s.lastLine():s.firstLine())?!1:null}function findMatchingTag(s,e){}function findEnclosingTag(s,e){var n,a,o=s.cm6.state,l=s.indexFromPos(e);if(l<o.doc.length){var u=o.sliceDoc(l,l+1);u=="<"&&l++}for(var c=ensureSyntaxTree(o,l),f=c?.resolve(l)||null;f;){if(((n=f.firstChild)===null||n===void 0?void 0:n.type.name)=="OpenTag"&&((a=f.lastChild)===null||a===void 0?void 0:a.type.name)=="CloseTag")return{open:convertRange(o.doc,f.firstChild),close:convertRange(o.doc,f.lastChild)};f=f.parent}}function convertRange(s,e){return{from:posFromIndex(s,e.from),to:posFromIndex(s,e.to)}}class Marker{constructor(e,n,a){this.cm=e,this.id=e.$mid++,this.offset=n,this.assoc=a,e.marks[this.id]=this}clear(){delete this.cm.marks[this.id]}find(){return this.offset==null?null:this.cm.posFromIndex(this.offset)}update(e){this.offset!=null&&(this.offset=e.mapPos(this.offset,this.assoc,MapMode.TrackDel))}}class Piece{constructor(e,n,a,o,l,u,c,f,d,g){this.left=e,this.top=n,this.height=a,this.fontFamily=o,this.fontSize=l,this.fontWeight=u,this.color=c,this.className=f,this.letter=d,this.partial=g}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",e.style.height=this.height+"px",e.style.lineHeight=this.height+"px",e.style.fontFamily=this.fontFamily,e.style.fontSize=this.fontSize,e.style.fontWeight=this.fontWeight,e.style.color=this.partial?"transparent":this.color,e.className=this.className,e.textContent=this.letter}eq(e){return this.left==e.left&&this.top==e.top&&this.height==e.height&&this.fontFamily==e.fontFamily&&this.fontSize==e.fontSize&&this.fontWeight==e.fontWeight&&this.color==e.color&&this.className==e.className&&this.letter==e.letter}}class BlockCursorPlugin{constructor(e,n){this.view=e,this.rangePieces=[],this.cursors=[],this.cm=n,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration="1200ms"}update(e){(e.selectionSet||e.geometryChanged||e.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink")}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:e}=this.view,n=[];for(let a of e.selection.ranges){let o=a==e.selection.main,l=measureCursor(this.cm,this.view,a,o);l&&n.push(l)}return{cursors:n}}drawSel({cursors:e}){if(e.length!=this.cursors.length||e.some((n,a)=>!n.eq(this.cursors[a]))){let n=this.cursorLayer.children;if(n.length!==e.length){this.cursorLayer.textContent="";for(const a of e)this.cursorLayer.appendChild(a.draw())}else e.forEach((a,o)=>a.adjust(n[o]));this.cursors=e}}destroy(){this.cursorLayer.remove()}}const themeSpec={".cm-vimMode .cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696",color:"transparent !important"}},hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function getBase(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Direction.LTR?e.left:e.right-s.scrollDOM.clientWidth)-s.scrollDOM.scrollLeft,top:e.top-s.scrollDOM.scrollTop}}function measureCursor(s,e,n,a){let o=n.head,l=!1,u=1,c=s.state.vim;if(c&&(!c.insertMode||s.state.overwrite)){if(l=!0,c.visualBlock&&!a)return null;n.anchor<n.head&&o--,s.state.overwrite?u=.2:c.status&&(u=.5)}if(l){let d=o<e.state.doc.length&&e.state.sliceDoc(o,o+1);d&&/[\uDC00-\uDFFF]/.test(d)&&o>1&&(o--,d=e.state.sliceDoc(o,o+1));let g=e.coordsAtPos(o,1);if(!g)return null;let O=getBase(e),S=e.domAtPos(o),b=S?S.node:e.contentDOM;for(;S&&S.node instanceof HTMLElement;)b=S.node,S={node:S.node.childNodes[S.offset],offset:0};if(!(b instanceof HTMLElement)){if(!b.parentNode)return null;b=b.parentNode}let E=getComputedStyle(b),k=g.left;if(!d||d==`
`||d=="\r")d=" ";else if(d=="	"){d=" ";var f=e.coordsAtPos(o+1,-1);f&&(k=f.left-(f.left-g.left)/parseInt(E.tabSize))}else/[\uD800-\uDBFF]/.test(d)&&o<e.state.doc.length-1&&(d+=e.state.sliceDoc(o+1,o+2));let $=g.bottom-g.top;return new Piece(k-O.left,g.top-O.top+$*(1-u),$*u,E.fontFamily,E.fontSize,E.fontWeight,E.color,a?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",d,u!=1)}else return null}var FIREFOX_LINUX=typeof navigator<"u"&&/linux/i.test(navigator.platform)&&/ Gecko\/\d+/.exec(navigator.userAgent);const Vim=initVim(CodeMirror),HighlightMargin=250,vimStyle=EditorView.baseTheme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"inherit"},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"}}),vimPlugin=ViewPlugin.fromClass(class{constructor(s){this.status="",this.query=null,this.decorations=Decoration.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.view=s;const e=this.cm=new CodeMirror(s);Vim.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new BlockCursorPlugin(s,e),this.updateClass(),this.cm.on("vim-command-done",()=>{e.state.vim&&(e.state.vim.status=""),this.blockCursor.scheduleRedraw(),this.updateStatus()}),this.cm.on("vim-mode-change",n=>{e.state.vim.mode=n.mode,n.subMode&&(e.state.vim.mode+=" block"),e.state.vim.status="",this.blockCursor.scheduleRedraw(),this.updateClass(),this.updateStatus()}),this.cm.on("dialog",()=>{this.cm.state.statusbar?this.updateStatus():s.dispatch({effects:showVimPanel.of(!!this.cm.state.dialog)})}),this.dom=document.createElement("span"),this.dom.style.cssText="position: absolute; right: 10px; top: 1px",this.statusButton=document.createElement("span"),this.statusButton.onclick=n=>{Vim.handleKey(this.cm,"<Esc>","user"),this.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}update(s){var e;if((s.viewportChanged||s.docChanged)&&this.query&&this.highlight(this.query),s.docChanged&&this.cm.onChange(s),s.selectionSet&&this.cm.onSelectionChange(),s.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),s.transactions){for(let n of s.transactions)for(let a of n.effects)if(a.is(setSearchQuery))if(!((e=a.value)===null||e===void 0?void 0:e.forVim))this.highlight(null);else{let l=a.value.create();this.highlight(l)}}this.blockCursor.update(s)}updateClass(){const s=this.cm.state;!s.vim||s.vim.insertMode&&!s.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")}updateStatus(){let s=this.cm.state.statusbar,e=this.cm.state.vim;if(!s||!e)return;let n=this.cm.state.dialog;if(n)n.parentElement!=s&&(s.textContent="",s.appendChild(n));else{s.textContent="";var a=(e.mode||"normal").toUpperCase();e.insertModeReturn&&(a+="(C-O)"),this.statusButton.textContent=`--${a}--`,s.appendChild(this.statusButton)}this.dom.textContent=e.status,s.appendChild(this.dom)}destroy(){Vim.leaveVimMode(this.cm),this.updateClass(),this.blockCursor.destroy(),delete this.view.cm}highlight(s){if(this.query=s,!s)return this.decorations=Decoration.none;let{view:e}=this,n=new RangeSetBuilder;for(let a=0,o=e.visibleRanges,l=o.length;a<l;a++){let{from:u,to:c}=o[a];for(;a<l-1&&c>o[a+1].from-2*HighlightMargin;)c=o[++a].to;s.highlight(e.state,u,c,(f,d)=>{n.add(f,d,matchMark)})}return this.decorations=n.finish()}handleKey(s,e){const n=CodeMirror.vimKey(s),a=this.cm;if(!n)return;let o=a.state.vim;if(!o)return;if(n=="<Esc>"&&!o.insertMode&&!o.visualMode&&this.query){const c=o.searchState_;c&&(a.removeOverlay(c.getOverlay()),c.setOverlay(null))}if(n==="<C-c>"&&!CodeMirror.isMac&&a.somethingSelected())return this.waitForCopy=!0,!0;o.status=(o.status||"")+n;let u=Vim.multiSelectHandleKey(a,n,"user");return o=a.state.vim,!u&&o.insertMode&&a.state.overwrite&&(s.key&&s.key.length==1&&!/\n/.test(s.key)?(u=!0,a.overWriteSelection(s.key)):s.key=="Backspace"&&(u=!0,CodeMirror.commands.cursorCharLeft(a))),u&&(CodeMirror.signal(this.cm,"vim-keypress",n),s.preventDefault(),s.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!u}},{eventHandlers:{copy:function(s,e){this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then(()=>{var n=this.cm,a=n.state.vim;a&&(a.insertMode?n.setSelection(n.getCursor(),n.getCursor()):n.operation(()=>{n.curOp&&(n.curOp.isVimOp=!0),Vim.handleKey(n,"<Esc>","user")}))}))},compositionstart:function(s,e){this.useNextTextInput=!0},keypress:function(s,e){this.lastKeydown=="Dead"&&this.handleKey(s,e)},keydown:function(s,e){this.lastKeydown=s.key,this.lastKeydown=="Unidentified"||this.lastKeydown=="Process"||this.lastKeydown=="Dead"?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(s,e))}},provide:()=>[EditorView.inputHandler.of((s,e,n,a)=>{var o,l,u=getCM(s);if(!u)return!1;var c=(o=u.state)===null||o===void 0?void 0:o.vim,f=u.state.vimPlugin;return c&&!c.insertMode&&!(!((l=u.curOp)===null||l===void 0)&&l.isVimOp)?(a==="\0\0"||(a.length==1&&f.useNextTextInput&&f.handleKey({key:a,preventDefault:()=>{},stopPropagation:()=>{}}),forceEndComposition(s)),!0):!1})],decorations:s=>s.decorations});function forceEndComposition(s){var e=s.scrollDOM.parentElement;if(e){if(FIREFOX_LINUX){s.contentDOM.textContent="\0\0",s.contentDOM.dispatchEvent(new CustomEvent("compositionend"));return}var n=s.scrollDOM.nextSibling,a=window.getSelection(),o=a&&{anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset};s.scrollDOM.remove(),e.insertBefore(s.scrollDOM,n);try{o&&a&&(a.setPosition(o.anchorNode,o.anchorOffset),o.focusNode&&a.extend(o.focusNode,o.focusOffset))}catch(l){console.error(l)}s.focus(),s.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),showVimPanel=StateEffect.define(),vimPanelState=StateField.define({create:()=>!1,update(s,e){for(let n of e.effects)n.is(showVimPanel)&&(s=n.value);return s},provide:s=>showPanel.from(s,e=>e?createVimPanel:null)});function createVimPanel(s){let e=document.createElement("div");e.className="cm-vim-panel";let n=s.cm;return n.state.dialog&&e.appendChild(n.state.dialog),{top:!1,dom:e}}function statusPanel(s){let e=document.createElement("div");e.className="cm-vim-panel";let n=s.cm;return n.state.statusbar=e,n.state.vimPlugin.updateStatus(),{dom:e}}function vim(s={}){return[vimStyle,vimPlugin,hideNativeSelection,s.status?showPanel.of(statusPanel):vimPanelState]}function getCM(s){return s.cm||null}class SelectedDiagnostic{constructor(e,n,a){this.from=e,this.to=n,this.diagnostic=a}}class LintState{constructor(e,n,a){this.diagnostics=e,this.panel=n,this.selected=a}static init(e,n,a){let o=e,l=a.facet(lintConfig).markerFilter;l&&(o=l(o));let u=Decoration.set(o.map(c=>c.from==c.to||c.from==c.to-1&&a.doc.lineAt(c.from).to==c.from?Decoration.widget({widget:new DiagnosticWidget(c),diagnostic:c}).range(c.from):Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+c.severity},diagnostic:c}).range(c.from,c.to)),!0);return new LintState(u,n,findDiagnostic(u))}}function findDiagnostic(s,e=null,n=0){let a=null;return s.between(n,1e9,(o,l,{spec:u})=>{if(!(e&&u.diagnostic!=e))return a=new SelectedDiagnostic(o,l,u.diagnostic),!1}),a}function hideTooltip(s,e){return!!(s.effects.some(n=>n.is(setDiagnosticsEffect))||s.changes.touchesRange(e.pos))}function maybeEnableLint(s,e){return s.field(lintState,!1)?e:e.concat(StateEffect.appendConfig.of([lintState,EditorView.decorations.compute([lintState],n=>{let{selected:a,panel:o}=n.field(lintState);return!a||!o||a.from==a.to?Decoration.none:Decoration.set([activeMark.range(a.from,a.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme]))}function setDiagnostics(s,e){return{effects:maybeEnableLint(s,[setDiagnosticsEffect.of(e)])}}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(s,e){if(e.docChanged){let n=s.diagnostics.map(e.changes),a=null;if(s.selected){let o=e.changes.mapPos(s.selected.from,1);a=findDiagnostic(n,s.selected.diagnostic,o)||findDiagnostic(n,null,o)}s=new LintState(n,s.panel,a)}for(let n of e.effects)n.is(setDiagnosticsEffect)?s=LintState.init(n.value,s.panel,e.state):n.is(togglePanel)?s=new LintState(s.diagnostics,n.value?LintPanel.open:null,s.selected):n.is(movePanelSelection)&&(s=new LintState(s.diagnostics,s.panel,n.value));return s},provide:s=>[showPanel.from(s,e=>e.panel),EditorView.decorations.from(s,e=>e.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(s,e,n){let{diagnostics:a}=s.state.field(lintState),o=[],l=2e8,u=0;a.between(e-(n<0?1:0),e+(n>0?1:0),(f,d,{spec:g})=>{e>=f&&e<=d&&(f==d||(e>f||n>0)&&(e<d||n<0))&&(o.push(g.diagnostic),l=Math.min(f,l),u=Math.max(d,u))});let c=s.state.facet(lintConfig).tooltipFilter;return c&&(o=c(o)),o.length?{pos:l,end:u,above:s.state.doc.lineAt(l).to<u,create(){return{dom:diagnosticsTooltip(s,o)}}}:null}function diagnosticsTooltip(s,e){return crelt("ul",{class:"cm-tooltip-lint"},e.map(n=>renderDiagnostic(s,n,!1)))}const openLintPanel=s=>{let e=s.state.field(lintState,!1);(!e||!e.panel)&&s.dispatch({effects:maybeEnableLint(s.state,[togglePanel.of(!0)])});let n=getPanel(s,LintPanel.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=s=>{let e=s.state.field(lintState,!1);return!e||!e.panel?!1:(s.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=s=>{let e=s.state.field(lintState,!1);if(!e)return!1;let n=s.state.selection.main,a=e.diagnostics.iter(n.to+1);return!a.value&&(a=e.diagnostics.iter(0),!a.value||a.from==n.from&&a.to==n.to)?!1:(s.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0}),!0)},lintPlugin=ViewPlugin.fromClass(class{constructor(s){this.view=s,this.timeout=-1,this.set=!0;let{delay:e}=s.state.facet(lintConfig);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let s=Date.now();if(s<this.lintTime-10)setTimeout(this.run,this.lintTime-s);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(lintConfig);Promise.all(n.map(a=>Promise.resolve(a(this.view)))).then(a=>{let o=a.reduce((l,u)=>l.concat(u));this.view.state.doc==e.doc&&this.view.dispatch(setDiagnostics(this.view.state,o))},a=>{logException(this.view.state,a)})}}update(s){let e=s.state.facet(lintConfig);(s.docChanged||e!=s.startState.facet(lintConfig))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),lintConfig=Facet.define({combine(s){return Object.assign({sources:s.map(e=>e.source)},combineConfig(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:lintPlugin});function assignKeys(s){let e=[];if(s)e:for(let{name:n}of s){for(let a=0;a<n.length;a++){let o=n[a];if(/[a-zA-Z]/.test(o)&&!e.some(l=>l.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function renderDiagnostic(s,e,n){var a;let o=n?assignKeys(e.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},crelt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(a=e.actions)===null||a===void 0?void 0:a.map((l,u)=>{let c=O=>{O.preventDefault();let S=findDiagnostic(s.state.field(lintState).diagnostics,e);S&&l.apply(s,S.from,S.to)},{name:f}=l,d=o[u]?f.indexOf(o[u]):-1,g=d<0?f:[f.slice(0,d),crelt("u",f.slice(d,d+1)),f.slice(d+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:c,onmousedown:c,"aria-label":` Action: ${f}${d<0?"":` (access key "${o[u]})"`}.`},g)}),e.source&&crelt("div",{class:"cm-diagnosticSource"},e.source))}class DiagnosticWidget extends WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class PanelItem{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(e){this.view=e,this.items=[];let n=o=>{if(o.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:l}=this.items[this.selectedIndex],u=assignKeys(l.actions);for(let c=0;c<u.length;c++)if(u[c].toUpperCase().charCodeAt(0)==o.keyCode){let f=findDiagnostic(this.view.state.field(lintState).diagnostics,l);f&&l.actions[c].apply(e,f.from,f.to)}}else return;o.preventDefault()},a=o=>{for(let l=0;l<this.items.length;l++)this.items[l].dom.contains(o.target)&&this.moveSelection(l)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:a}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(lintState).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(lintState),a=0,o=!1,l=null;for(e.between(0,this.view.state.doc.length,(u,c,{spec:f})=>{let d=-1,g;for(let O=a;O<this.items.length;O++)if(this.items[O].diagnostic==f.diagnostic){d=O;break}d<0?(g=new PanelItem(this.view,f.diagnostic),this.items.splice(a,0,g),o=!0):(g=this.items[d],d>a&&(this.items.splice(a,d-a),o=!0)),n&&g.diagnostic==n.diagnostic?g.dom.hasAttribute("aria-selected")||(g.dom.setAttribute("aria-selected","true"),l=g):g.dom.hasAttribute("aria-selected")&&g.dom.removeAttribute("aria-selected"),a++});a<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),l?(this.list.setAttribute("aria-activedescendant",l.id),this.view.requestMeasure({key:this,read:()=>({sel:l.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:u,panel:c})=>{u.top<c.top?this.list.scrollTop-=c.top-u.top:u.bottom>c.bottom&&(this.list.scrollTop+=u.bottom-c.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function n(){let a=e;e=a.nextSibling,a.remove()}for(let a of this.items)if(a.dom.parentNode==this.list){for(;e!=a.dom;)n();e=a.dom.nextSibling}else this.list.insertBefore(a.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(lintState),a=findDiagnostic(n.diagnostics,this.items[e].diagnostic);a&&this.view.dispatch({selection:{anchor:a.from,head:a.to},scrollIntoView:!0,effects:movePanelSelection.of(a)})}static open(e){return new LintPanel(e)}}function svg(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function underline(s){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),createAddCursor=s=>e=>{const n=s==="down";let a=e.state.selection;for(const o of a.ranges)a=a.addRange(e.moveVertically(o,n));return e.dispatch({selection:a}),!0},addCursorUp=createAddCursor("up"),addCursorDown=createAddCursor("down"),addCursorAtEachSelectionLine=s=>{let e=null;for(const n of s.state.selection.ranges)if(!n.empty)for(let a=n.from;a<=n.to;){const o=s.state.doc.lineAt(a),l=Math.min(o.to,n.to);e?e=e.addRange(EditorSelection.range(l,l)):e=EditorSelection.single(l),a=o.to+1}return e?(s.dispatch({selection:e}),!0):!1},vscodeKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion},{key:"Tab",run:acceptCompletion},{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Alt-Enter",run:selectMatches,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:replaceAll,scope:"editor search-panel"},{key:"Ctrl-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0},{key:"Shift-Mod-l",run:selectSelectionMatches},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:addCursorUp,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:addCursorDown,preventDefault:!0},{key:"Shift-Alt-i",run:addCursorAtEachSelectionLine},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteBracketPair},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd},{mac:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{mac:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{mac:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{mac:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{mac:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{mac:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{mac:"Ctrl-d",run:deleteCharForward},{mac:"Ctrl-h",run:deleteCharBackward},{mac:"Ctrl-k",run:deleteToLineEnd},{mac:"Ctrl-Alt-h",run:deleteGroupBackward},{mac:"Ctrl-o",run:splitLine},{mac:"Ctrl-t",run:transposeChars},{mac:"Ctrl-v",run:cursorPageDown},{mac:"Alt-v",run:cursorPageUp},{key:"Shift-Mod-k",run:deleteLine},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Alt-ArrowUp",run:moveLineUp},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:copyLineDown},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Mod-l",run:selectLine,preventDefault:!0},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Tab",run:indentMore,shift:indentLess,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Mod-k Mod-0",run:foldAll},{key:"Mod-k Mod-j",run:unfoldAll},{key:"Mod-k Mod-c",run:lineComment},{key:"Mod-k Mod-u",run:lineUncomment},{key:"Mod-/",run:toggleComment},{key:"Shift-Alt-a",run:toggleBlockComment},{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",run:redo,preventDefault:!0},{key:"Mod-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Mod-Shift-m",run:openLintPanel},{key:"F8",run:nextDiagnostic}],vscodePlugin=ViewPlugin.fromClass(class{constructor(){}},{provide:()=>Prec.highest(keymap.of([...vscodeKeymap]))}),vscodeExtension=s=>[vscodePlugin].concat(s??[]),keymaps={vim,emacs,vscode:vscodeExtension};function keybindings(s){const e=keymaps[s];return[keymap.of(defaultKeymap),keymap.of(historyKeymap),e?e():[]]}function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},_extends.apply(this,arguments)}var createTheme=s=>{var{theme:e,settings:n={},styles:a=[]}=s,o={".cm-gutters":{}},l={};n.background&&(l.backgroundColor=n.background),n.foreground&&(l.color=n.foreground),(n.background||n.foreground)&&(o["&"]=l),n.fontFamily&&(o["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(o[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(o[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(o[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(o[".cm-content"]={caretColor:n.caret},o[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var u={};n.gutterActiveForeground&&(u.color=n.gutterActiveForeground),n.lineHighlight&&(o[".cm-activeLine"]={backgroundColor:n.lineHighlight},u.backgroundColor=n.lineHighlight),o[".cm-activeLineGutter"]=u,n.selection&&(o["&.cm-focused .cm-selectionBackground, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:n.selection}),n.selectionMatch&&(o["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var c=EditorView.theme(o,{dark:e==="dark"}),f=HighlightStyle.define(a),d=[c,syntaxHighlighting(f)];return d},defaultSettingsAbcdef={background:"#0f0f0f",foreground:"#defdef",caret:"#00FF00",selection:"#515151",selectionMatch:"#515151",gutterBackground:"#555",gutterForeground:"#FFFFFF",lineHighlight:"#314151"},abcdefInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAbcdef,n),styles:[{tag:tags.keyword,color:"darkgoldenrod",fontWeight:"bold"},{tag:tags.atom,color:"#77F"},{tag:tags.comment,color:"#7a7b7c",fontStyle:"italic"},{tag:tags.number,color:"violet"},{tag:tags.definition(tags.variableName),color:"#fffabc"},{tag:tags.variableName,color:"#abcdef"},{tag:tags.function(tags.variableName),color:"#fffabc"},{tag:tags.typeName,color:"#FFDD44"},{tag:tags.tagName,color:"#def"},{tag:tags.string,color:"#2b4"},{tag:tags.meta,color:"#C9F"},{tag:tags.bracket,color:"#8a8a8a"},{tag:tags.attributeName,color:"#DDFF00"},{tag:tags.heading,color:"aquamarine",fontWeight:"bold"},{tag:tags.link,color:"blueviolet",fontWeight:"bold"},...a]})},abcdef=abcdefInit(),defaultSettingsAndroidstudio={background:"#282b2e",foreground:"#a9b7c6",caret:"#00FF00",selection:"#343739",selectionMatch:"#343739",lineHighlight:"#343739"},androidstudioInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAndroidstudio,n),styles:[{tag:[tags.keyword,tags.deleted,tags.className],color:"#cc7832"},{tag:[tags.number,tags.literal,tags.derefOperator],color:"#6897bb"},{tag:[tags.link,tags.variableName],color:"#629755"},{tag:[tags.comment,tags.quote],color:"grey"},{tag:[tags.meta,tags.documentMeta],color:"#bbb529"},{tag:[tags.string,tags.propertyName,tags.attributeValue],color:"#6a8759"},{tag:[tags.heading,tags.typeName],color:"#ffc66d"},{tag:[tags.attributeName],color:"#a9b7c6"},{tag:[tags.emphasis],fontStyle:"italic"},...a]})},androidstudio=androidstudioInit(),defaultSettingsAtomone={background:"#272C35",foreground:"#9d9b97",caret:"#797977",selection:"#ffffff30",selectionMatch:"#2B323D",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2B323D"},atomoneInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAtomone,n),styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:"hsl(207, 82%, 66%)"},{tag:[tags.tagName,tags.heading],color:"#e06c75"},{tag:tags.comment,color:"#54636D"},{tag:[tags.propertyName],color:"hsl(220, 14%, 71%)"},{tag:[tags.attributeName,tags.number],color:"hsl( 29, 54%, 61%)"},{tag:tags.className,color:"hsl( 39, 67%, 69%)"},{tag:tags.keyword,color:"hsl(286, 60%, 67%)"},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:"#98c379"},...a]})},atomone=atomoneInit(),defaultSettingsAura={background:"#21202e",foreground:"#edecee",caret:"#a277ff",selection:"#3d375e7f",selectionMatch:"#3d375e7f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"},auraInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsAura,n),styles:[{tag:tags.keyword,color:"#a277ff"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#edecee"},{tag:[tags.propertyName],color:"#ffca85"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#61ffca"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#ffca85"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#61ffca"},{tag:[tags.definition(tags.name),tags.separator],color:"#edecee"},{tag:[tags.className],color:"#82e2ff"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#61ffca"},{tag:[tags.typeName],color:"#82e2ff"},{tag:[tags.operator,tags.operatorKeyword],color:"#a277ff"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#61ffca"},{tag:[tags.meta,tags.comment],color:"#6d6d6d"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#a277ff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#edecee"},{tag:tags.invalid,color:"#ff6767"},{tag:tags.strikethrough,textDecoration:"line-through"},...a]})},aura=auraInit(),defaultSettingsBbedit={background:"#FFFFFF",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"},bbeditInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsBbedit,n),styles:[{tag:[tags.meta,tags.comment],color:"#804000"},{tag:[tags.keyword,tags.strong],color:"#0000FF"},{tag:[tags.number],color:"#FF0080"},{tag:[tags.string],color:"#FF0080"},{tag:[tags.variableName],color:"#006600"},{tag:[tags.escape],color:"#33CC33"},{tag:[tags.tagName],color:"#1C02FF"},{tag:[tags.heading],color:"#0C07FF"},{tag:[tags.quote],color:"#000000"},{tag:[tags.list],color:"#B90690"},{tag:[tags.documentMeta],color:"#888888"},{tag:[tags.function(tags.variableName)],color:"#0000A2"},{tag:[tags.definition(tags.typeName),tags.typeName],color:"#6D79DE"},...a]})},bbedit=bbeditInit(),defaultSettingsBespin={background:"#28211c",foreground:"#9d9b97",caret:"#797977",selection:"#36312e",selectionMatch:"#4f382b",gutterBackground:"#28211c",gutterForeground:"#666666",lineHighlight:"rgba(255, 255, 255, 0.1)"},bespinInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsBespin,n),styles:[{tag:[tags.atom,tags.number,tags.link,tags.bool],color:"#9b859d"},{tag:tags.comment,color:"#937121"},{tag:[tags.keyword,tags.tagName],color:"#cf6a4c"},{tag:tags.string,color:"#f9ee98"},{tag:tags.bracket,color:"#9d9b97"},{tag:[tags.variableName],color:"#5ea6ea"},{tag:tags.definition(tags.variableName),color:"#cf7d34"},{tag:[tags.function(tags.variableName),tags.className],color:"#cf7d34"},{tag:[tags.propertyName,tags.attributeName],color:"#54be0d"},...a]})},bespin=bespinInit(),defaultSettingsDarcula={background:"#2B2B2B",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},darculaInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDarcula,n),styles:[{tag:[tags.atom,tags.number],color:"#bd93f9"},{tag:[tags.comment],color:"#61A151"},{tag:[tags.string],color:"#6A8759"},{tag:[tags.variableName,tags.operator],color:"#A9B7C6"},{tag:[tags.meta,tags.className],color:"#A9B7C6"},{tag:[tags.propertyName],color:"#FFC66D"},{tag:[tags.keyword],color:"#CC7832"},{tag:[tags.tagName],color:"#ff79c6"},{tag:[tags.typeName],color:"#ffb86c"},...a]})},darcula=darculaInit(),defaultSettingsDracula={background:"#282a36",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6D8A88",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},draculaInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDracula,n),styles:[{tag:tags.comment,color:"#6272a4"},{tag:tags.string,color:"#f1fa8c"},{tag:tags.atom,color:"#bd93f9"},{tag:tags.meta,color:"#f8f8f2"},{tag:[tags.keyword,tags.operator,tags.tagName],color:"#ff79c6"},{tag:[tags.function(tags.propertyName),tags.propertyName],color:"#66d9ef"},{tag:[tags.definition(tags.variableName),tags.function(tags.variableName),tags.className,tags.attributeName],color:"#50fa7b"},{tag:tags.atom,color:"#bd93f9"},...a]})},dracula=draculaInit(),defaultSettingsDuotoneLight={background:"#faf8f5",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#EFEFEF"},duotoneLightInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDuotoneLight,n),styles:[{tag:[tags.comment,tags.bracket],color:"#b6ad9a"},{tag:[tags.atom,tags.number,tags.keyword,tags.link,tags.attributeName,tags.quote],color:"#063289"},{tag:[tags.emphasis,tags.heading,tags.tagName,tags.propertyName,tags.variableName],color:"#2d2006"},{tag:[tags.typeName,tags.url,tags.string],color:"#896724"},{tag:[tags.operator,tags.string],color:"#1659df"},{tag:[tags.propertyName],color:"#b29762"},{tag:[tags.unit,tags.punctuation],color:"#063289"},...a]})},duotoneLight=duotoneLightInit(),defaultSettingsDuotoneDark={background:"#2a2734",foreground:"#6c6783",caret:"#ffad5c",selection:"rgba(255, 255, 255, 0.1)",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},duotoneDarkInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsDuotoneDark,n),styles:[{tag:[tags.comment,tags.bracket],color:"#6c6783"},{tag:[tags.atom,tags.number,tags.keyword,tags.link,tags.attributeName,tags.quote],color:"#ffcc99"},{tag:[tags.emphasis,tags.heading,tags.tagName,tags.propertyName,tags.className,tags.variableName],color:"#eeebff"},{tag:[tags.typeName,tags.url],color:"#7a63ee"},{tag:tags.operator,color:"#ffad5c"},{tag:tags.string,color:"#ffb870"},{tag:[tags.propertyName],color:"#9a86fd"},{tag:[tags.unit,tags.punctuation],color:"#e09142"},...a]})},duotoneDark=duotoneDarkInit(),defaultSettingsEclipse={background:"#fff",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#e8f2ff",gutterBorder:"transparent"},eclipseInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsEclipse,n),styles:[{tag:[tags.comment],color:"#3F7F5F"},{tag:[tags.documentMeta],color:"#FF1717"},{tag:tags.keyword,color:"#7F0055",fontWeight:"bold"},{tag:tags.atom,color:"#00f"},{tag:tags.number,color:"#164"},{tag:tags.propertyName,color:"#164"},{tag:[tags.variableName,tags.definition(tags.variableName)],color:"#0000C0"},{tag:tags.function(tags.variableName),color:"#0000C0"},{tag:tags.string,color:"#2A00FF"},{tag:tags.operator,color:"black"},{tag:tags.tagName,color:"#170"},{tag:tags.attributeName,color:"#00c"},{tag:tags.link,color:"#219"},...a]})},eclipse=eclipseInit(),defaultSettingsGithubLight={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},githubLightInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGithubLight,n),styles:[{tag:[tags.standard(tags.tagName),tags.tagName],color:"#116329"},{tag:[tags.comment,tags.bracket],color:"#6a737d"},{tag:[tags.className,tags.propertyName],color:"#6f42c1"},{tag:[tags.variableName,tags.attributeName,tags.number,tags.operator],color:"#005cc5"},{tag:[tags.keyword,tags.typeName,tags.typeOperator,tags.typeName],color:"#d73a49"},{tag:[tags.string,tags.meta,tags.regexp],color:"#032f62"},{tag:[tags.name,tags.quote],color:"#22863a"},{tag:[tags.heading],color:"#24292e",fontWeight:"bold"},{tag:[tags.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[tags.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#e36209"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#032f62"},{tag:tags.link,textDecoration:"underline"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.invalid,color:"#cb2431"},...a]})},githubLight=githubLightInit(),defaultSettingsGithubDark={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},githubDarkInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGithubDark,n),styles:[{tag:[tags.standard(tags.tagName),tags.tagName],color:"#7ee787"},{tag:[tags.comment,tags.bracket],color:"#8b949e"},{tag:[tags.className,tags.propertyName],color:"#d2a8ff"},{tag:[tags.variableName,tags.attributeName,tags.number,tags.operator],color:"#79c0ff"},{tag:[tags.keyword,tags.typeName,tags.typeOperator,tags.typeName],color:"#ff7b72"},{tag:[tags.string,tags.meta,tags.regexp],color:"#a5d6ff"},{tag:[tags.name,tags.quote],color:"#7ee787"},{tag:[tags.heading],color:"#d2a8ff",fontWeight:"bold"},{tag:[tags.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[tags.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#ffab70"},{tag:tags.link,textDecoration:"underline"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.invalid,color:"#f97583"},...a]})},githubDark=githubDarkInit(),defaultSettingsGruvboxDark={background:"#282828",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#bdae93",selectionMatch:"#bdae93",lineHighlight:"#3c3836",gutterBackground:"#282828",gutterForeground:"#7c6f64"},gruvboxDarkInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGruvboxDark,n),styles:[{tag:tags.keyword,color:"#fb4934"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#8ec07c"},{tag:[tags.variableName],color:"#83a598"},{tag:[tags.function(tags.variableName)],color:"#b8bb26",fontStyle:"bold"},{tag:[tags.labelName],color:"#ebdbb2"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#d3869b"},{tag:[tags.definition(tags.name),tags.separator],color:"#ebdbb2"},{tag:[tags.brace],color:"#ebdbb2"},{tag:[tags.annotation],color:"#fb4934d"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#d3869b"},{tag:[tags.typeName,tags.className],color:"#fabd2f"},{tag:[tags.operator,tags.operatorKeyword],color:"#fb4934"},{tag:[tags.tagName],color:"#8ec07c",fontStyle:"bold"},{tag:[tags.squareBracket],color:"#fe8019"},{tag:[tags.angleBracket],color:"#83a598"},{tag:[tags.attributeName],color:"#8ec07c"},{tag:[tags.regexp],color:"#8ec07c"},{tag:[tags.quote],color:"#928374"},{tag:[tags.string],color:"#ebdbb2"},{tag:tags.link,color:"#a89984",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#d3869b"},{tag:[tags.meta],color:"#fabd2f"},{tag:[tags.comment],color:"#928374",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#fe8019"},{tag:tags.emphasis,fontStyle:"italic",color:"#b8bb26"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#b8bb26"},{tag:[tags.heading1,tags.heading2],fontWeight:"bold",color:"#b8bb26"},{tag:[tags.heading3,tags.heading4],fontWeight:"bold",color:"#fabd2f"},{tag:[tags.heading5,tags.heading6],color:"#fabd2f"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d3869b"},{tag:[tags.processingInstruction,tags.inserted],color:"#83a598"},{tag:[tags.contentSeparator],color:"#fb4934"},{tag:tags.invalid,color:"#fe8019",borderBottom:"1px dotted #fb4934d"},...a]})},gruvboxDark=gruvboxDarkInit(),defaultSettingsGruvboxLight={background:"#fbf1c7",foreground:"#3c3836",caret:"#af3a03",selection:"#ebdbb2",selectionMatch:"#bdae93",lineHighlight:"#ebdbb2",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"},gruvboxLightInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsGruvboxLight,n),styles:[{tag:tags.keyword,color:"#9d0006"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#427b58"},{tag:[tags.variableName],color:"#076678"},{tag:[tags.function(tags.variableName)],color:"#79740e",fontStyle:"bold"},{tag:[tags.labelName],color:"#3c3836"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#8f3f71"},{tag:[tags.definition(tags.name),tags.separator],color:"#3c3836"},{tag:[tags.brace],color:"#3c3836"},{tag:[tags.annotation],color:"#9d0006"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#8f3f71"},{tag:[tags.typeName,tags.className],color:"#b57614"},{tag:[tags.operator,tags.operatorKeyword],color:"#9d0006"},{tag:[tags.tagName],color:"#427b58",fontStyle:"bold"},{tag:[tags.squareBracket],color:"#af3a03"},{tag:[tags.angleBracket],color:"#076678"},{tag:[tags.attributeName],color:"#427b58"},{tag:[tags.regexp],color:"#427b58"},{tag:[tags.quote],color:"#928374"},{tag:[tags.string],color:"#3c3836"},{tag:tags.link,color:"#7c6f64",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8f3f71"},{tag:[tags.meta],color:"#b57614"},{tag:[tags.comment],color:"#928374",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#af3a03"},{tag:tags.emphasis,fontStyle:"italic",color:"#79740e"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#79740e"},{tag:[tags.heading1,tags.heading2],fontWeight:"bold",color:"#79740e"},{tag:[tags.heading3,tags.heading4],fontWeight:"bold",color:"#b57614"},{tag:[tags.heading5,tags.heading6],color:"#b57614"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#8f3f71"},{tag:[tags.processingInstruction,tags.inserted],color:"#076678"},{tag:[tags.contentSeparator],color:"#9d0006"},{tag:tags.invalid,color:"#af3a03",borderBottom:"1px dotted #9d0006"},...a]})},gruvboxLight=gruvboxLightInit(),defaultSettingsMaterial={background:"#2e3235",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#2e3235",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#545b61"},materialInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsMaterial,n),styles:[{tag:tags.keyword,color:"#cf6edf"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#56c8d8"},{tag:[tags.propertyName],color:"#facf4e"},{tag:[tags.variableName],color:"#bdbdbd"},{tag:[tags.function(tags.variableName)],color:"#56c8d8"},{tag:[tags.labelName],color:"#cf6edf"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#facf4e"},{tag:[tags.definition(tags.name),tags.separator],color:"#fa5788"},{tag:[tags.brace],color:"#cf6edf"},{tag:[tags.annotation],color:"#ff5f52"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ffad42"},{tag:[tags.typeName,tags.className],color:"#ffad42"},{tag:[tags.operator,tags.operatorKeyword],color:"#7186f0"},{tag:[tags.tagName],color:"#99d066"},{tag:[tags.squareBracket],color:"#ff5f52"},{tag:[tags.angleBracket],color:"#606f7a"},{tag:[tags.attributeName],color:"#bdbdbd"},{tag:[tags.regexp],color:"#ff5f52"},{tag:[tags.quote],color:"#6abf69"},{tag:[tags.string],color:"#99d066"},{tag:tags.link,color:"#56c8d8",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#facf4e"},{tag:[tags.meta],color:"#707d8b"},{tag:[tags.comment],color:"#707d8b",fontStyle:"italic"},{tag:tags.monospace,color:"#bdbdbd"},{tag:tags.strong,fontWeight:"bold",color:"#ff5f52"},{tag:tags.emphasis,fontStyle:"italic",color:"#99d066"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#facf4e"},{tag:tags.heading1,fontWeight:"bold",color:"#facf4e"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#facf4e"},{tag:[tags.heading5,tags.heading6],color:"#facf4e"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#56c8d8"},{tag:[tags.processingInstruction,tags.inserted],color:"#ff5f52"},{tag:[tags.contentSeparator],color:"#56c8d8"},{tag:tags.invalid,color:"#606f7a",borderBottom:"1px dotted #ff5f52"},...a]})},materialDark=materialInit();materialInit();var defaultSettingsMaterialLight={background:"#FAFAFA",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#FAFAFA",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"},materialLightInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsMaterialLight,n),styles:[{tag:tags.keyword,color:"#39ADB5"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#90A4AE"},{tag:[tags.propertyName],color:"#6182B8"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#91B859"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#6182B8"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#39ADB5"},{tag:[tags.definition(tags.name),tags.separator],color:"#90A4AE"},{tag:[tags.className],color:"#E2931D"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#F76D47"},{tag:[tags.typeName],color:"#E2931D",fontStyle:"#E2931D"},{tag:[tags.operator,tags.operatorKeyword],color:"#39ADB5"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#91B859"},{tag:[tags.meta,tags.comment],color:"#90A4AE"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#39ADB5"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#90A4AE"},{tag:tags.invalid,color:"#E5393570"},{tag:tags.strikethrough,textDecoration:"line-through"},...a]})},materialLight=materialLightInit(),defaultSettingsNoctisLilac={background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},noctisLilacInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsNoctisLilac,n),styles:[{tag:tags.comment,color:"#9995b7"},{tag:tags.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#ff5792"},{tag:[tags.className,tags.tagName,tags.definition(tags.typeName)],color:"#0094f0"},{tag:[tags.number,tags.bool,tags.null,tags.special(tags.brace)],color:"#5842ff"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#0095a8"},{tag:tags.typeName,color:"#b3694d"},{tag:[tags.propertyName,tags.variableName],color:"#fa8900"},{tag:tags.operator,color:"#ff5792"},{tag:tags.self,color:"#e64100"},{tag:[tags.string,tags.regexp],color:"#00b368"},{tag:[tags.paren,tags.bracket],color:"#0431fa"},{tag:tags.labelName,color:"#00bdd6"},{tag:tags.attributeName,color:"#e64100"},{tag:tags.angleBracket,color:"#9995b7"},...a]})},noctisLilac=noctisLilacInit(),defaultSettingsNord={background:"#2e3440",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#3b4252",selectionMatch:"#e5e9f0",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a"},nordInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsNord,n),styles:[{tag:tags.keyword,color:"#5e81ac"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#88c0d0"},{tag:[tags.variableName],color:"#8fbcbb"},{tag:[tags.function(tags.variableName)],color:"#8fbcbb"},{tag:[tags.labelName],color:"#81a1c1"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#5e81ac"},{tag:[tags.definition(tags.name),tags.separator],color:"#a3be8c"},{tag:[tags.brace],color:"#8fbcbb"},{tag:[tags.annotation],color:"#d30102"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#b48ead"},{tag:[tags.typeName,tags.className],color:"#ebcb8b"},{tag:[tags.operator,tags.operatorKeyword],color:"#a3be8c"},{tag:[tags.tagName],color:"#b48ead"},{tag:[tags.squareBracket],color:"#bf616a"},{tag:[tags.angleBracket],color:"#d08770"},{tag:[tags.attributeName],color:"#ebcb8b"},{tag:[tags.regexp],color:"#5e81ac"},{tag:[tags.quote],color:"#b48ead"},{tag:[tags.string],color:"#a3be8c"},{tag:tags.link,color:"#a3be8c",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8fbcbb"},{tag:[tags.meta],color:"#88c0d0"},{tag:[tags.monospace],color:"#d8dee9",fontStyle:"italic"},{tag:[tags.comment],color:"#4c566a",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#5e81ac"},{tag:tags.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#5e81ac"},{tag:tags.special(tags.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:tags.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading5,tags.heading6],color:"#5e81ac"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d08770"},{tag:[tags.processingInstruction,tags.inserted],color:"#8fbcbb"},{tag:[tags.contentSeparator],color:"#ebcb8b"},{tag:tags.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"},...a]})},nord=nordInit(),defaultSettingsOkaidia={background:"#272822",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},okaidiaInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsOkaidia,n),styles:[{tag:[tags.comment,tags.documentMeta],color:"#8292a2"},{tag:[tags.number,tags.bool,tags.null,tags.atom],color:"#ae81ff"},{tag:[tags.attributeValue,tags.className,tags.name],color:"#e6db74"},{tag:[tags.propertyName,tags.attributeName],color:"#a6e22e"},{tag:[tags.variableName],color:"#9effff"},{tag:[tags.squareBracket],color:"#bababa"},{tag:[tags.string,tags.special(tags.brace)],color:"#e6db74"},{tag:[tags.regexp,tags.className,tags.typeName,tags.definition(tags.typeName)],color:"#66d9ef"},{tag:[tags.definition(tags.variableName),tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#fd971f"},{tag:[tags.keyword,tags.definitionKeyword,tags.modifier,tags.tagName,tags.angleBracket],color:"#f92672"},...a]})},okaidia=okaidiaInit(),defaultSettingsSolarizedLight={background:"#fdf6e3",foreground:"#657b83",caret:"#586e75",selection:"#dfd9c8",selectionMatch:"#dfd9c8",gutterBackground:"#00000010",gutterForeground:"#657b83",lineHighlight:"#dfd9c8"},solarizedLightInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsSolarizedLight,n),styles:[{tag:tags.keyword,color:"#859900"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#2aa198"},{tag:[tags.variableName],color:"#268bd2"},{tag:[tags.function(tags.variableName)],color:"#268bd2"},{tag:[tags.labelName],color:"#d33682"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#b58900"},{tag:[tags.definition(tags.name),tags.separator],color:"#2aa198"},{tag:[tags.brace],color:"#d33682"},{tag:[tags.annotation],color:"#d30102"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#d33682"},{tag:[tags.typeName,tags.className],color:"#cb4b16"},{tag:[tags.operator,tags.operatorKeyword],color:"#6c71c4"},{tag:[tags.tagName],color:"#268bd2"},{tag:[tags.squareBracket],color:"#dc322f"},{tag:[tags.angleBracket],color:"#073642"},{tag:[tags.attributeName],color:"#93a1a1"},{tag:[tags.regexp],color:"#d30102"},{tag:[tags.quote],color:"#859900"},{tag:[tags.string],color:"#b58900"},{tag:tags.link,color:"#2aa198",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#b58900"},{tag:[tags.meta],color:"#dc322f"},{tag:[tags.comment],color:"#586e75",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#586e75"},{tag:tags.emphasis,fontStyle:"italic",color:"#859900"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#b58900"},{tag:tags.heading1,fontWeight:"bold",color:"#002b36"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#002b36"},{tag:[tags.heading5,tags.heading6],color:"#002b36"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d33682"},{tag:[tags.processingInstruction,tags.inserted,tags.contentSeparator],color:"#dc322f"},{tag:[tags.contentSeparator],color:"#b58900"},{tag:tags.invalid,color:"#073642",borderBottom:"1px dotted #dc322f"},...a]})},solarizedLight=solarizedLightInit(),defaultSettingsSolarizedDark={background:"#002b36",foreground:"#93a1a1",caret:"#839496",selection:"#173541",selectionMatch:"#aafe661a",gutterBackground:"#00252f",gutterForeground:"#839496",lineHighlight:"#173541"},solarizedDarkInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsSolarizedDark,n),styles:[{tag:tags.keyword,color:"#859900"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#2aa198"},{tag:[tags.variableName],color:"#93a1a1"},{tag:[tags.function(tags.variableName)],color:"#268bd2"},{tag:[tags.labelName],color:"#d33682"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#b58900"},{tag:[tags.definition(tags.name),tags.separator],color:"#2aa198"},{tag:[tags.brace],color:"#d33682"},{tag:[tags.annotation],color:"#d30102"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#d33682"},{tag:[tags.typeName,tags.className],color:"#cb4b16"},{tag:[tags.operator,tags.operatorKeyword],color:"#6c71c4"},{tag:[tags.tagName],color:"#268bd2"},{tag:[tags.squareBracket],color:"#dc322f"},{tag:[tags.angleBracket],color:"#586e75"},{tag:[tags.attributeName],color:"#93a1a1"},{tag:[tags.regexp],color:"#d30102"},{tag:[tags.quote],color:"#859900"},{tag:[tags.string],color:"#b58900"},{tag:tags.link,color:"#2aa198",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#b58900"},{tag:[tags.meta],color:"#dc322f"},{tag:[tags.comment],color:"#586e75",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#eee8d5"},{tag:tags.emphasis,fontStyle:"italic",color:"#859900"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#b58900"},{tag:tags.heading1,fontWeight:"bold",color:"#fdf6e3"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#eee8d5"},{tag:[tags.heading5,tags.heading6],color:"#eee8d5"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d33682"},{tag:[tags.processingInstruction,tags.inserted,tags.contentSeparator],color:"#dc322f"},{tag:[tags.contentSeparator],color:"#b58900"},{tag:tags.invalid,color:"#586e75",borderBottom:"1px dotted #dc322f"},...a]})},solarizedDark=solarizedDarkInit(),defaultSettingsSublime={background:"#303841",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"};function sublimeInit(s){var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsSublime,n),styles:[{tag:[tags.meta,tags.comment],color:"#A2A9B5"},{tag:[tags.attributeName,tags.keyword],color:"#B78FBA"},{tag:tags.function(tags.variableName),color:"#5AB0B0"},{tag:[tags.string,tags.regexp,tags.attributeValue],color:"#99C592"},{tag:tags.operator,color:"#f47954"},{tag:[tags.tagName,tags.modifier],color:"#E35F63"},{tag:[tags.number,tags.definition(tags.tagName),tags.className,tags.definition(tags.variableName)],color:"#fbac52"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#E35F63"},{tag:tags.variableName,color:"#539ac4"},{tag:[tags.propertyName,tags.typeName],color:"#629ccd"},{tag:tags.propertyName,color:"#36b7b5"},...a]})}var sublime=sublimeInit(),defaultSettingsTokyoNight={background:"#1a1b26",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#1e202e"},tokyoNightInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTokyoNight,n),styles:[{tag:tags.keyword,color:"#bb9af7"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#c0caf5"},{tag:[tags.propertyName],color:"#7aa2f7"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#9ece6a"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#7aa2f7"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#bb9af7"},{tag:[tags.definition(tags.name),tags.separator],color:"#c0caf5"},{tag:[tags.className],color:"#c0caf5"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ff9e64"},{tag:[tags.typeName],color:"#0db9d7"},{tag:[tags.operator,tags.operatorKeyword],color:"#bb9af7"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#b4f9f8"},{tag:[tags.meta,tags.comment],color:"#444b6a"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#89ddff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#c0caf5"},{tag:tags.invalid,color:"#ff5370"},{tag:tags.strikethrough,textDecoration:"line-through"},...a]})},tokyoNight=tokyoNightInit(),defaultSettingsTokyoNightStorm={background:"#24283b",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#1f2335",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e42"},tokyoNightStormInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTokyoNightStorm,n),styles:[{tag:tags.keyword,color:"#bb9af7"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#c0caf5"},{tag:[tags.propertyName],color:"#7aa2f7"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#9ece6a"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#7aa2f7"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#bb9af7"},{tag:[tags.definition(tags.name),tags.separator],color:"#c0caf5"},{tag:[tags.className],color:"#c0caf5"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ff9e64"},{tag:[tags.typeName],color:"#2ac3de",fontStyle:"#2ac3de"},{tag:[tags.operator,tags.operatorKeyword],color:"#bb9af7"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#b4f9f8"},{tag:[tags.meta,tags.comment],color:"#565f89"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#89ddff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#c0caf5"},{tag:tags.invalid,color:"#ff5370"},{tag:tags.strikethrough,textDecoration:"line-through"},...a]})},tokyoNightStorm=tokyoNightStormInit(),defaultSettingsTokyoNightDay={background:"#e1e2e7",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"},tokyoNightDayInit=s=>{var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsTokyoNightDay,n),styles:[{tag:tags.keyword,color:"#007197"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#3760bf"},{tag:[tags.propertyName],color:"#3760bf"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#587539"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#3760bf"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#3760bf"},{tag:[tags.definition(tags.name),tags.separator],color:"#3760bf"},{tag:[tags.className],color:"#3760bf"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#b15c00"},{tag:[tags.typeName],color:"#007197",fontStyle:"#007197"},{tag:[tags.operator,tags.operatorKeyword],color:"#007197"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#587539"},{tag:[tags.meta,tags.comment],color:"#848cb5"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#b15c00"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#3760bf"},{tag:tags.invalid,color:"#f52a65"},{tag:tags.strikethrough,textDecoration:"line-through"},...a]})},tokyoNightDay=tokyoNightDayInit(),defaultSettingsVscodeDark={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'};function vscodeDarkInit(s){var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsVscodeDark,n),styles:[{tag:[tags.keyword,tags.operatorKeyword,tags.modifier,tags.color,tags.constant(tags.name),tags.standard(tags.name),tags.standard(tags.tagName),tags.special(tags.brace),tags.atom,tags.bool,tags.special(tags.variableName)],color:"#569cd6"},{tag:[tags.controlKeyword,tags.moduleKeyword],color:"#c586c0"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName,tags.propertyName,tags.variableName,tags.labelName,tags.definition(tags.name)],color:"#9cdcfe"},{tag:tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[tags.typeName,tags.className,tags.tagName,tags.number,tags.changed,tags.annotation,tags.self,tags.namespace],color:"#4ec9b0"},{tag:[tags.function(tags.variableName),tags.function(tags.propertyName)],color:"#dcdcaa"},{tag:[tags.number],color:"#b5cea8"},{tag:[tags.operator,tags.punctuation,tags.separator,tags.url,tags.escape,tags.regexp],color:"#d4d4d4"},{tag:[tags.regexp],color:"#d16969"},{tag:[tags.special(tags.string),tags.processingInstruction,tags.string,tags.inserted],color:"#ce9178"},{tag:[tags.angleBracket],color:"#808080"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.meta,tags.comment],color:"#6a9955"},{tag:tags.link,color:"#6a9955",textDecoration:"underline"},{tag:tags.invalid,color:"#ff0000"},...a]})}var vscodeDark=vscodeDarkInit(),defaultSettingsXcodeLight={background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"};function xcodeLightInit(s){var{theme:e="light",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsXcodeLight,n),styles:[{tag:[tags.comment,tags.quote],color:"#707F8D"},{tag:[tags.typeName,tags.typeOperator],color:"#aa0d91"},{tag:[tags.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#D23423"},{tag:[tags.name],color:"#032f62"},{tag:[tags.typeName],color:"#522BB2"},{tag:[tags.variableName],color:"#23575C"},{tag:[tags.definition(tags.variableName)],color:"#327A9E"},{tag:[tags.regexp,tags.link],color:"#0e0eff"},...a]})}var xcodeLight=xcodeLightInit(),defaultSettingsXcodeDark={background:"#292A30",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#2F3239"},xcodeDarkInit=s=>{var{theme:e="dark",settings:n={},styles:a=[]}=s||{};return createTheme({theme:e,settings:_extends({},defaultSettingsXcodeDark,n),styles:[{tag:[tags.comment,tags.quote],color:"#7F8C98"},{tag:[tags.keyword],color:"#FF7AB2",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#FF8170"},{tag:[tags.typeName],color:"#DABAFF"},{tag:[tags.definition(tags.variableName)],color:"#6BDFFF"},{tag:[tags.name],color:"#6BAA9F"},{tag:[tags.variableName],color:"#ACF2E4"},{tag:[tags.regexp,tags.link],color:"#FF8170"},...a]})},xcodeDark=xcodeDarkInit();const strudelTheme=createTheme({theme:"dark",settings:{background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},styles:[{tag:tags.keyword,color:"#c792ea"},{tag:tags.operator,color:"#89ddff"},{tag:tags.special(tags.variableName),color:"#eeffff"},{tag:tags.typeName,color:"#c3e88d"},{tag:tags.atom,color:"#f78c6c"},{tag:tags.number,color:"#c3e88d"},{tag:tags.definition(tags.variableName),color:"#82aaff"},{tag:tags.string,color:"#c3e88d"},{tag:tags.special(tags.string),color:"#c3e88d"},{tag:tags.comment,color:"#7d8799"},{tag:tags.variableName,color:"#c792ea"},{tag:tags.tagName,color:"#c3e88d"},{tag:tags.bracket,color:"#525154"},{tag:tags.meta,color:"#ffcb6b"},{tag:tags.attributeName,color:"#c792ea"},{tag:tags.propertyName,color:"#c792ea"},{tag:tags.className,color:"#decb6b"},{tag:tags.invalid,color:"#ffffff"},{tag:[tags.unit,tags.punctuation],color:"#82aaff"}]}),settings$6={background:"#051DB5",lineBackground:"#051DB550",foreground:"white",caret:"white",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},bluescreen=createTheme({theme:"dark",settings:settings$6,styles:[{tag:tags.keyword,color:"white"},{tag:tags.operator,color:"white"},{tag:tags.special(tags.variableName),color:"white"},{tag:tags.typeName,color:"white"},{tag:tags.atom,color:"white"},{tag:tags.number,color:"white"},{tag:tags.definition(tags.variableName),color:"white"},{tag:tags.string,color:"white"},{tag:tags.special(tags.string),color:"white"},{tag:tags.comment,color:"white"},{tag:tags.variableName,color:"white"},{tag:tags.tagName,color:"white"},{tag:tags.bracket,color:"white"},{tag:tags.meta,color:"white"},{tag:tags.attributeName,color:"white"},{tag:tags.propertyName,color:"white"},{tag:tags.className,color:"white"},{tag:tags.invalid,color:"white"},{tag:[tags.unit,tags.punctuation],color:"white"}]}),settings$5={background:"black",foreground:"white",caret:"white",selection:"#ffffff20",selectionMatch:"#036dd626",lineHighlight:"#ffffff10",lineBackground:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},blackscreen=createTheme({theme:"dark",settings:settings$5,styles:[{tag:tags.keyword,color:"white"},{tag:tags.operator,color:"white"},{tag:tags.special(tags.variableName),color:"white"},{tag:tags.typeName,color:"white"},{tag:tags.atom,color:"white"},{tag:tags.number,color:"white"},{tag:tags.definition(tags.variableName),color:"white"},{tag:tags.string,color:"white"},{tag:tags.special(tags.string),color:"white"},{tag:tags.comment,color:"white"},{tag:tags.variableName,color:"white"},{tag:tags.tagName,color:"white"},{tag:tags.bracket,color:"white"},{tag:tags.meta,color:"white"},{tag:tags.attributeName,color:"white"},{tag:tags.propertyName,color:"white"},{tag:tags.className,color:"white"},{tag:tags.invalid,color:"white"},{tag:[tags.unit,tags.punctuation],color:"white"}]}),settings$4={background:"white",foreground:"black",caret:"black",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#ffffff26",lineHighlight:"#cccccc50",lineBackground:"#ffffff50",gutterBackground:"transparent",gutterForeground:"black",light:!0},whitescreen=createTheme({theme:"light",settings:settings$4,styles:[{tag:tags.keyword,color:"black"},{tag:tags.operator,color:"black"},{tag:tags.special(tags.variableName),color:"black"},{tag:tags.typeName,color:"black"},{tag:tags.atom,color:"black"},{tag:tags.number,color:"black"},{tag:tags.definition(tags.variableName),color:"black"},{tag:tags.string,color:"black"},{tag:tags.special(tags.string),color:"black"},{tag:tags.comment,color:"black"},{tag:tags.variableName,color:"black"},{tag:tags.tagName,color:"black"},{tag:tags.bracket,color:"black"},{tag:tags.meta,color:"black"},{tag:tags.attributeName,color:"black"},{tag:tags.propertyName,color:"black"},{tag:tags.className,color:"black"},{tag:tags.invalid,color:"black"}]});let colorA="#6edee4",colorB="white",colorC="red",colorD="#f8fc55";const settings$3={background:"#000000",foreground:colorA,caret:colorC,selection:colorD,selectionMatch:colorA,lineHighlight:"#6edee440",lineBackground:"#00000040",gutterBackground:"transparent",gutterForeground:"#8a919966",customStyle:".cm-line { line-height: 1 }"};let punctuation=colorD,mini=colorB;const teletext=createTheme({theme:"dark",settings:settings$3,styles:[{tag:tags.keyword,color:colorA},{tag:tags.operator,color:mini},{tag:tags.special(tags.variableName),color:colorA},{tag:tags.typeName,color:colorA},{tag:tags.atom,color:colorA},{tag:tags.number,color:mini},{tag:tags.definition(tags.variableName),color:colorA},{tag:tags.string,color:mini},{tag:tags.special(tags.string),color:mini},{tag:tags.comment,color:punctuation},{tag:tags.variableName,color:colorA},{tag:tags.tagName,color:colorA},{tag:tags.bracket,color:punctuation},{tag:tags.meta,color:colorA},{tag:tags.attributeName,color:colorA},{tag:tags.propertyName,color:colorA},{tag:tags.className,color:colorA},{tag:tags.invalid,color:colorC},{tag:[tags.unit,tags.punctuation],color:punctuation}]}),settings$2={background:"#9bbc0f",foreground:"#0f380f",caret:"#0f380f",selection:"#306230",selectionMatch:"#ffffff26",lineHighlight:"#8bac0f",lineBackground:"#9bbc0f50",gutterBackground:"transparent",gutterForeground:"#0f380f",light:!0,customStyle:".cm-line { line-height: 1 }"},algoboy=createTheme({theme:"light",settings:settings$2,styles:[{tag:tags.keyword,color:"#0f380f"},{tag:tags.operator,color:"#0f380f"},{tag:tags.special(tags.variableName),color:"#0f380f"},{tag:tags.typeName,color:"#0f380f"},{tag:tags.atom,color:"#0f380f"},{tag:tags.number,color:"#0f380f"},{tag:tags.definition(tags.variableName),color:"#0f380f"},{tag:tags.string,color:"#0f380f"},{tag:tags.special(tags.string),color:"#0f380f"},{tag:tags.comment,color:"#0f380f"},{tag:tags.variableName,color:"#0f380f"},{tag:tags.tagName,color:"#0f380f"},{tag:tags.bracket,color:"#0f380f"},{tag:tags.meta,color:"#0f380f"},{tag:tags.attributeName,color:"#0f380f"},{tag:tags.propertyName,color:"#0f380f"},{tag:tags.className,color:"#0f380f"},{tag:tags.invalid,color:"#0f380f"},{tag:[tags.unit,tags.punctuation],color:"#0f380f"}]}),settings$1={background:"black",foreground:"#41FF00",caret:"#41FF00",selection:"#ffffff20",selectionMatch:"#036dd626",lineHighlight:"#ffffff10",gutterBackground:"transparent",gutterForeground:"#8a919966"},terminal=createTheme({theme:"dark",settings:settings$1,styles:[{tag:tags.keyword,color:"#41FF00"},{tag:tags.operator,color:"#41FF00"},{tag:tags.special(tags.variableName),color:"#41FF00"},{tag:tags.typeName,color:"#41FF00"},{tag:tags.atom,color:"#41FF00"},{tag:tags.number,color:"#41FF00"},{tag:tags.definition(tags.variableName),color:"#41FF00"},{tag:tags.string,color:"#41FF00"},{tag:tags.special(tags.string),color:"#41FF00"},{tag:tags.comment,color:"#41FF00"},{tag:tags.variableName,color:"#41FF00"},{tag:tags.tagName,color:"#41FF00"},{tag:tags.bracket,color:"#41FF00"},{tag:tags.meta,color:"#41FF00"},{tag:tags.attributeName,color:"#41FF00"},{tag:tags.propertyName,color:"#41FF00"},{tag:tags.className,color:"#41FF00"},{tag:tags.invalid,color:"#41FF00"}]}),themes={strudelTheme,bluescreen,blackscreen,whitescreen,teletext,algoboy,terminal,abcdef,androidstudio,atomone,aura,bespin,darcula,dracula,duotoneDark,eclipse,githubDark,gruvboxDark,materialDark,nord,okaidia,solarizedDark,sublime,tokyoNight,tokyoNightStorm,vscodeDark,xcodeDark,bbedit,duotoneLight,githubLight,gruvboxLight,materialLight,noctisLilac,solarizedLight,tokyoNightDay,xcodeLight},settings={strudelTheme:{background:"#222",lineBackground:"#22222299",foreground:"#fff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},bluescreen:settings$6,blackscreen:settings$5,whitescreen:settings$4,teletext:settings$3,algoboy:settings$2,terminal:settings$1,abcdef:{background:"#0f0f0f",lineBackground:"#0f0f0f99",foreground:"#defdef",caret:"#00FF00",selection:"#515151",selectionMatch:"#515151",gutterBackground:"#555",gutterForeground:"#FFFFFF",lineHighlight:"#314151"},androidstudio:{background:"#282b2e",lineBackground:"#282b2e99",foreground:"#a9b7c6",caret:"#00FF00",selection:"#343739",selectionMatch:"#343739",lineHighlight:"#343739"},atomone:{background:"#272C35",lineBackground:"#272C3599",foreground:"#9d9b97",caret:"#797977",selection:"#ffffff30",selectionMatch:"#2B323D",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2B323D"},aura:{background:"#21202e",lineBackground:"#21202e99",foreground:"#edecee",caret:"#a277ff",selection:"#3d375e7f",selectionMatch:"#3d375e7f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"},bbedit:{light:!0,background:"#FFFFFF",lineBackground:"#FFFFFF99",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"},bespin:{background:"#28211c",lineBackground:"#28211c99",foreground:"#9d9b97",caret:"#797977",selection:"#36312e",selectionMatch:"#4f382b",gutterBackground:"#28211c",gutterForeground:"#666666",lineHighlight:"rgba(255, 255, 255, 0.1)"},darcula:{background:"#2B2B2B",lineBackground:"#2B2B2B99",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},dracula:{background:"#282a36",lineBackground:"#282a3699",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6D8A88",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},duotoneLight:{light:!0,background:"#faf8f5",lineBackground:"#faf8f599",foreground:"#b29762",caret:"#93abdc",selection:"#e3dcce",selectionMatch:"#e3dcce",gutterBackground:"#faf8f5",gutterForeground:"#cdc4b1",gutterBorder:"transparent",lineHighlight:"#EFEFEF"},duotoneDark:{background:"#2a2734",lineBackground:"#2a273499",foreground:"#6c6783",caret:"#ffad5c",selection:"rgba(255, 255, 255, 0.1)",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},eclipse:{light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#e8f2ff",gutterBorder:"transparent"},githubLight:{light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},githubDark:{background:"#0d1117",lineBackground:"#0d111799",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},gruvboxDark:{background:"#282828",lineBackground:"#28282899",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#bdae93",selectionMatch:"#bdae93",lineHighlight:"#3c3836",gutterBackground:"#282828",gutterForeground:"#7c6f64"},gruvboxLight:{light:!0,background:"#fbf1c7",lineBackground:"#fbf1c799",foreground:"#3c3836",caret:"#af3a03",selection:"#ebdbb2",selectionMatch:"#bdae93",lineHighlight:"#ebdbb2",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"},materialDark:{background:"#2e3235",lineBackground:"#2e323599",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#2e3235",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#545b61"},materialLight:{light:!0,background:"#FAFAFA",lineBackground:"#FAFAFA99",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#FAFAFA",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"},noctisLilac:{light:!0,background:"#f2f1f8",lineBackground:"#f2f1f899",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},nord:{background:"#2e3440",lineBackground:"#2e344099",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#3b4252",selectionMatch:"#e5e9f0",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a"},okaidia:{background:"#272822",lineBackground:"#27282299",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},solarizedLight:{light:!0,background:"#fdf6e3",lineBackground:"#fdf6e399",foreground:"#657b83",caret:"#586e75",selection:"#dfd9c8",selectionMatch:"#dfd9c8",gutterBackground:"#00000010",gutterForeground:"#657b83",lineHighlight:"#dfd9c8"},solarizedDark:{background:"#002b36",lineBackground:"#002b3699",foreground:"#93a1a1",caret:"#839496",selection:"#173541",selectionMatch:"#aafe661a",gutterBackground:"#00252f",gutterForeground:"#839496",lineHighlight:"#173541"},sublime:{background:"#303841",lineBackground:"#30384199",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},tokyoNightDay:{light:!0,background:"#e1e2e7",lineBackground:"#e1e2e799",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"},tokyoNightStorm:{background:"#24283b",lineBackground:"#24283b99",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#1f2335",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e42"},tokyoNight:{background:"#1a1b26",lineBackground:"#1a1b2699",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#1e202e"},vscodeDark:{background:"#1e1e1e",lineBackground:"#1e1e1e99",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff"},xcodeLight:{light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"},xcodeDark:{background:"#292A30",lineBackground:"#292A3099",foreground:"#CECFD0",caret:"#fff",selection:"#727377",selectionMatch:"#727377",lineHighlight:"#2F3239"}};function getColors(s){const e=/#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})/g,n=[];let a;for(;(a=e.exec(s))!==null;){const o=a[0];n.includes(o)||n.push(o)}return n}function themeColors(s){return getColors(stringifySafe(s))}function getCircularReplacer(){const s=new WeakSet;return(e,n)=>{if(typeof n=="object"&&n!==null){if(s.has(n))return;s.add(n)}return n}}function stringifySafe(s){return JSON.stringify(s,getCircularReplacer())}const theme=s=>themes[s]||themes.strudelTheme;function injectStyle(s){const e=document.createElement("style");document.head.appendChild(e);const n=e.sheet,a=n.insertRule(s,0);return()=>n.deleteRule(a)}let currentTheme,resetThemeStyle,themeStyle;function initTheme(s){themeStyle=document.createElement("style"),themeStyle.id="strudel-theme",document.head.append(themeStyle),activateTheme(s)}function activateTheme(s){if(currentTheme===s)return;settings[s]||console.warn("theme",s,"has no settings.. defaulting to strudelTheme settings");const e=settings[s]||settings.strudelTheme;themeStyle.innerHTML=`:root {
      ${Object.entries(e).map(([n,a])=>`--${n}: ${a} !important;`).join(`
`)}
    }`,e.light?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark"),resetThemeStyle?.(),resetThemeStyle=void 0,e.customStyle&&(resetThemeStyle=injectStyle(e.customStyle))}let sliderValues={};const getSliderID=s=>`slider_${s}`;class SliderWidget extends WidgetType{constructor(e,n,a,o,l,u,c){super(),this.value=e,this.min=n,this.max=a,this.from=o,this.originalFrom=o,this.to=l,this.step=u,this.view=c}eq(){return!1}toDOM(){let e=document.createElement("span");e.setAttribute("aria-hidden","true"),e.className="cm-slider";let n=e.appendChild(document.createElement("input"));return n.type="range",n.min=this.min,n.max=this.max,n.step=this.step??(this.max-this.min)/1e3,n.originalValue=this.value,n.value=n.originalValue,n.from=this.from,n.originalFrom=this.originalFrom,n.to=this.to,n.style="width:64px;margin-right:4px;transform:translateY(4px)",this.slider=n,n.addEventListener("input",a=>{const o=a.target.value;let l=o;const u=n.from+n.originalValue.length;let c={from:n.from,to:u,insert:l};n.originalValue=l,n.value=l,this.view.dispatch({changes:c});const f=getSliderID(n.originalFrom);window.postMessage({type:"cm-slider",value:Number(o),id:f})}),e}ignoreEvent(e){return!0}}const setWidgets=StateEffect.define(),updateWidgets=(s,e)=>{s.dispatch({effects:setWidgets.of(e)})};function getWidgets(s,e){return s.map(({from:n,to:a,value:o,min:l,max:u,step:c})=>Decoration.widget({widget:new SliderWidget(o,l,u,n,a,c,e),side:0}).range(n))}const sliderPlugin=ViewPlugin.fromClass(class{decorations;constructor(s){this.decorations=Decoration.set([])}update(s){s.transactions.forEach(e=>{if(e.docChanged){this.decorations=this.decorations.map(e.changes);const n=this.decorations.iter();for(;n.value;)n.value?.widget?.slider&&(n.value.widget.slider.from=n.from,n.value.widget.slider.to=n.to),n.next()}for(let n of e.effects)n.is(setWidgets)&&(this.decorations=Decoration.set(getWidgets(n.value,s.view)))})}},{decorations:s=>s.decorations});let slider=s=>(console.warn("slider will only work when the transpiler is used... passing value as is"),pure(s)),sliderWithID=(s,e,n,a)=>(sliderValues[s]=e,ref$1(()=>sliderValues[s]));typeof window<"u"&&window.addEventListener("message",s=>{s.data.type==="cm-slider"&&(sliderValues[s.data.id]!==void 0?sliderValues[s.data.id]=s.data.value:console.warn(`slider with id "${s.data.id}" is not registered. Only ${Object.keys(sliderValues)}`))});const extensions={isLineWrappingEnabled:s=>s?EditorView.lineWrapping:[],isLineNumbersDisplayed:s=>s?lineNumbers():[],theme,isPatternHighlightingEnabled,isActiveLineHighlighted:s=>s?[highlightActiveLine(),highlightActiveLineGutter()]:[],isFlashEnabled,keybindings},compartments=Object.fromEntries(Object.keys(extensions).map(s=>[s,new Compartment]));function initEditor({initialCode:s="",onChange:e,onEvaluate:n,onStop:a,settings:o,root:l}){const u=Object.keys(compartments).map(f=>compartments[f].of(extensions[f](parseBooleans(o[f]))));initTheme(o.theme);let c=EditorState.create({doc:s,extensions:[...u,javascript(),sliderPlugin,closeBrackets(),syntaxHighlighting(defaultHighlightStyle),history(),EditorView.updateListener.of(f=>e(f)),Prec.highest(keymap.of([{key:"Ctrl-Enter",run:()=>n?.()},{key:"Alt-Enter",run:()=>n?.()},{key:"Ctrl-.",run:()=>a?.()},{key:"Alt-.",run:(f,d)=>{d.preventDefault(),a?.()}}]))]});return new EditorView({state:c,parent:l})}class StrudelMirror{constructor(e){const{root:n,initialCode:a="",onDraw:o,drawTime:l=[-2,2],prebake:u,settings:c,...f}=e;this.code=a,this.root=n,this.miniLocations=[],this.widgets=[],this.painters=[],this.onDraw=o;const d=this;this.drawer=new Drawer((O,S)=>{const b=O.filter(E=>S>=E.whole.begin&&S<=E.endClipped);this.highlight(b,S),this.onDraw?.(O,S,b,this.painters)},l),Pattern$1.prototype.onPaint=function(O){return d.painters.push(O),this},this.prebaked=u(),this.repl=repl({...f,onToggle:O=>{f?.onToggle?.(O),O?this.drawer.start(this.repl.scheduler):(this.drawer.stop(),updateMiniLocations(this.editor,[]),cleanupDraw(!1))},beforeEval:async()=>{cleanupDraw(),this.painters=[],await this.prebaked,await f?.beforeEval?.()},afterEval:O=>{this.miniLocations=O.meta?.miniLocations,this.widgets=O.meta?.widgets,updateWidgets(this.editor,this.widgets),updateMiniLocations(this.editor,this.miniLocations),f?.afterEval?.(O),this.drawer.invalidate()}}),this.editor=initEditor({root:n,settings:c,initialCode:a,onChange:O=>{O.docChanged&&(this.code=O.state.doc.toString())},onEvaluate:()=>this.evaluate(),onStop:()=>this.stop()});const g=this.root.querySelector(".cm-editor");g&&(this.root.style.display="block",this.root.style.backgroundColor="var(--background)",g.style.backgroundColor="transparent")}async drawFirstFrame(){if(this.onDraw){await this.prebaked;try{await this.repl.evaluate(this.code,!1),this.drawer.invalidate(this.repl.scheduler),this.onDraw?.(this.drawer.visibleHaps,0,[])}catch{console.warn("first frame could not be painted")}}}async evaluate(){this.flash(),await this.repl.evaluate(this.code)}async stop(){this.repl.scheduler.stop()}async toggle(){this.repl.scheduler.started?this.repl.scheduler.stop():this.evaluate()}flash(e){flash(this.editor,e)}highlight(e,n){highlightMiniLocations(this.editor,n,e)}setFontSize(e){this.root.style.fontSize=e+"px"}setFontFamily(e){this.root.style.fontFamily=e;const n=this.root.querySelector(".cm-scroller");n&&(n.style.fontFamily=e)}reconfigureExtension(e,n){if(!extensions[e]){console.warn(`extension ${e} is not known`);return}n=parseBooleans(n);const a=extensions[e](n,this);this.editor.dispatch({effects:compartments[e].reconfigure(a)}),e==="theme"&&activateTheme(n)}setLineWrappingEnabled(e){this.reconfigureExtension("isLineWrappingEnabled",e)}setLineNumbersDisplayed(e){this.reconfigureExtension("isLineNumbersDisplayed",e)}setTheme(e){this.reconfigureExtension("theme",e)}setAutocompletionEnabled(e){this.reconfigureExtension("isAutoCompletionEnabled",e)}updateSettings(e){this.setFontSize(e.fontSize),this.setFontFamily(e.fontFamily);for(let n in extensions)this.reconfigureExtension(n,e[n])}changeSetting(e,n){if(extensions[e]){this.reconfigureExtension(e,n);return}else e==="fontFamily"?this.setFontFamily(n):e==="fontSize"&&this.setFontSize(n)}setCode(e){const n={from:0,to:this.editor.state.doc.length,insert:e};this.editor.dispatch({changes:n})}}function parseBooleans(s){return{true:!0,false:!1}[s]??s}const index$7=Object.freeze(Object.defineProperty({__proto__:null,SliderWidget,StrudelMirror,activateTheme,flash,flashField,highlightExtension,highlightMiniLocations,initEditor,initTheme,injectStyle,isFlashEnabled,isPatternHighlightingEnabled,setFlash,setMiniLocations,setWidgets,settings,showMiniLocations,slider,sliderPlugin,sliderValues,sliderWithID,theme,themeColors,themes,updateMiniLocations,updateWidgets},Symbol.toStringTag,{value:"Module"})),gm={gm_piano:["0000_JCLive_sf2_file","0000_FluidR3_GM_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file"],gm_epiano1:["0040_JCLive_sf2_file","0040_FluidR3_GM_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_GeneralUserGS_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file"],gm_epiano2:["0050_JCLive_sf2_file","0050_FluidR3_GM_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_GeneralUserGS_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file"],gm_harpsichord:["0060_JCLive_sf2_file","0060_FluidR3_GM_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_GeneralUserGS_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file"],gm_clavinet:["0070_JCLive_sf2_file","0070_FluidR3_GM_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file"],gm_celesta:["0080_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0081_FluidR3_GM_sf2_file"],gm_glockenspiel:["0090_JCLive_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file"],gm_music_box:["0100_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file"],gm_vibraphone:["0110_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0111_FluidR3_GM_sf2_file"],gm_marimba:["0120_JCLive_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file"],gm_xylophone:["0130_JCLive_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0131_FluidR3_GM_sf2_file"],gm_tubular_bells:["0140_JCLive_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file"],gm_dulcimer:["0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file"],gm_drawbar_organ:["0160_JCLive_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file"],gm_percussive_organ:["0170_JCLive_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file"],gm_rock_organ:["0180_JCLive_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file"],gm_church_organ:["0190_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file"],gm_reed_organ:["0200_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file"],gm_accordion:["0210_JCLive_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file"],gm_harmonica:["0220_FluidR3_GM_sf2_file","0220_JCLive_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_GeneralUserGS_sf2_file","0221_FluidR3_GM_sf2_file"],gm_bandoneon:["0230_Aspirin_sf2_file","0230_JCLive_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file"],gm_acoustic_guitar_nylon:["0240_JCLive_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file"],gm_acoustic_guitar_steel:["0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file"],gm_electric_guitar_jazz:["0260_JCLive_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file"],gm_electric_guitar_clean:["0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file"],gm_electric_guitar_muted:["0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file"],gm_overdriven_guitar:["0290_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file"],gm_distortion_guitar:["0300_FluidR3_GM_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file"],gm_guitar_harmonics:["0310_Aspirin_sf2_file","0310_FluidR3_GM_sf2_file","0310_Chaos_sf2_file"],gm_acoustic_bass:["0320_JCLive_sf2_file","0320_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file"],gm_electric_bass_finger:["0330_JCLive_sf2_file","0330_FluidR3_GM_sf2_fible","0330_Aspirin_sf2_file","0330_GeneralUserGS_sf2_file"],gm_electric_bass_pick:["0340_JCLive_sf2_file","0340_FluidR3_GM_sf2_file","0340_Aspirin_sf2_file","0340_GeneralUserGS_sf2_file","0341_Aspirin_sf2_file"],gm_fretless_bass:["0350_Aspirin_sf2_file","0350_JCLive_sf2_file"],gm_slap_bass_1:["0360_Aspirin_sf2_file","0360_JCLive_sf2_file","0360_FluidR3_GM_sf2_file","0360_Chaos_sf2_file"],gm_slap_bass_2:["0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_fil e","0370_JCLive_sf2_file"],gm_synth_bass_1:["0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file"],gm_synth_bass_2:["0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file"],gm_violin:["0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_JCLive_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file"],gm_viola:["0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file"],gm_cello:["0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file"],gm_contrabass:["0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file"],gm_tremolo_strings:["0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file"],gm_pizzicato_strings:["0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file"],gm_orchestral_harp:["0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file"],gm_timpani:["0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file"],gm_string_ensemble_1:["0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file"],gm_string_ensemble_2:["0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file"],gm_synth_strings_1:["0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file"],gm_synth_strings_2:["0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file"],gm_choir_aahs:["0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file"],gm_voice_oohs:["0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file"],gm_synth_choir:["0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file"],gm_orchestra_hit:["0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file"],gm_trumpet:["0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file"],gm_trombone:["0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file"],gm_tuba:["0580_FluidR3_GM_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_GeneralUserGS_sf2_file"],gm_muted_trumpet:["0590_JCLive_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file"],gm_french_horn:["0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file"],gm_brass_section:["0610_JCLive_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file"],gm_synth_brass_1:["0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file"],gm_synth_brass_2:["0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file"],gm_soprano_sax:["0640_JCLive_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0641_FluidR3_GM_sf2_file"],gm_alto_sax:["0650_JCLive_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file"],gm_tenor_sax:["0660_JCLive_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file"],gm_baritone_sax:["0670_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0671_FluidR3_GM_sf2_file"],gm_oboe:["0680_JCLive_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0681_FluidR3_GM_sf2_file"],gm_english_horn:["0690_JCLive_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0691_FluidR3_GM_sf2_file"],gm_bassoon:["0700_JCLive_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0701_FluidR3_GM_sf2_file"],gm_clarinet:["0710_JCLive_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0711_FluidR3_GM_sf2_file"],gm_piccolo:["0720_JCLive_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0721_FluidR3_GM_sf2_file"],gm_flute:["0730_JCLive_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0731_FluidR3_GM_sf2_file"],gm_recorder:["0740_JCLive_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file"],gm_pan_flute:["0750_JCLive_sf2_file","0750_FluidR3_GM_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_GeneralUserGS_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file"],gm_blown_bottle:["0760_FluidR3_GM_sf2_file","0760_JCLive_sf2_file","0760_Chaos_sf2_file","0760_GeneralUserGS_sf2_file","0761_FluidR3_GM_sf2_file"],gm_shakuhachi:["0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file"],gm_whistle:["0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file"],gm_ocarina:["0790_FluidR3_GM_sf2_file","0790_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_GeneralUserGS_sf2_file"],gm_lead_1_square:["0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file"],gm_lead_2_sawtooth:["0810_JCLive_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file"],gm_lead_3_calliope:["0820_JCLive_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file"],gm_lead_4_chiff:["0830_JCLive_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file"],gm_lead_5_charang:["0840_JCLive_sf2_file","0840_FluidR3_GM_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_GeneralUserGS_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file"],gm_lead_6_voice:["0850_JCLive_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file"],gm_lead_7_fifths:["0860_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0861_Aspirin_sf2_file"],gm_lead_8_bass_lead:["0870_JCLive_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file"],gm_pad_new_age:["0880_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file"],gm_pad_warm:["0890_JCLive_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file"],gm_pad_poly:["0900_JCLive_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file"],gm_pad_choir:["0910_FluidR3_GM_sf2_file","0910_JCLive_sf2_file","0910_Aspirin_sf2_file","0910_GeneralUserGS_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file"],gm_pad_bowed:["0920_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file"],gm_pad_metallic:["0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file"],gm_pad_halo:["0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file"],gm_pad_sweep:["0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file"],gm_fx_rain:["0960_FluidR3_GM_sf2_file","0960_Chaos_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file"],gm_fx_soundtrack:["0970_FluidR3_GM_sf2_file","0970_Aspirin_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file"],gm_fx_crystal:["0980_Aspirin_sf2_file","0980_JCLive_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0981_FluidR3_GM_sf2_file","0981_Aspirin_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file"],gm_fx_atmosphere:["0990_JCLive_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file"],gm_fx_brightness:["1000_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file"],gm_fx_goblins:["1010_FluidR3_GM_sf2_file","1010_JCLive_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_GeneralUserGS_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file"],gm_fx_echoes:["1020_FluidR3_GM_sf2_file","1020_JCLive_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_GeneralUserGS_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file"],gm_fx_sci_fi:["1030_FluidR3_GM_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file"],gm_sitar:["1040_Aspirin_sf2_file","1040_FluidR3_GM_sf2_file","1040_JCLive_sf2_file","1040_Chaos_sf2_file","1040_GeneralUserGS_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file"],gm_banjo:["1050_FluidR3_GM_sf2_file","1050_JCLive_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_GeneralUserGS_sf2_file","1051_GeneralUserGS_sf2_file"],gm_shamisen:["1060_JCLive_sf2_file","1060_FluidR3_GM_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_GeneralUserGS_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file"],gm_koto:["1070_FluidR3_GM_sf2_file","1070_JCLive_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_GeneralUserGS_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file"],gm_kalimba:["1080_JCLive_sf2_file","1080_FluidR3_GM_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_GeneralUserGS_sf2_file"],gm_bagpipe:["1090_Aspirin_sf2_file"],gm_fiddle:["1100_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file"],gm_shanai:["1110_Aspirin_sf2_file","1110_FluidR3_GM_sf2_file","1110_JCLive_sf2_file","1110_Chaos_sf2_file","1110_GeneralUserGS_sf2_file"],gm_tinkle_bell:["1120_Aspirin_sf2_file"],gm_agogo:["1130_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1131_FluidR3_GM_sf2_file"],gm_steel_drums:["1140_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_JCLive_sf2_file","1140_Chaos_sf2_file","1140_GeneralUserGS_sf2_file","1141_FluidR3_GM_sf2_file"],gm_woodblock:["1150_JCLive_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file"],gm_taiko_drum:["1160_JCLive_sf2_file","1160_FluidR3_GM_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_GeneralUserGS_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file"],gm_melodic_tom:["1170_JCLive_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file"],gm_synth_drum:["1180_JCLive_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file"],gm_reverse_cymbal:["1190_JCLive_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file"],gm_guitar_fret_noise:["1200_JCLive_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file"],gm_breath_noise:["1210_FluidR3_GM_sf2_file","1210_JCLive_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_GeneralUserGS_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file"],gm_seashore:["1220_JCLive_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file"],gm_bird_tweet:["1230_FluidR3_GM_sf2_file","1230_JCLive_sf2_file","1230_Aspirin_sf2_file","1230_GeneralUserGS_sf2_file","1231_GeneralUserGS_sf2_file","1232_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file"],gm_telephone:["1240_JCLive_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1241_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file"],gm_helicopter:["1250_JCLive_sf2_file","1250_Aspirin_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_GeneralUserGS_sf2_file","1254_GeneralUserGS_sf2_file","1255_GeneralUserGS_sf2_file","1256_GeneralUserGS_sf2_file","1257_GeneralUserGS_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file"],gm_applause:["1260_JCLive_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file"],gm_gunshot:["1270_JCLive_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file",""]};let loadCache={};async function loadFont(name){if(loadCache[name])return loadCache[name];const load=async()=>{const url=`https://felixroos.github.io/webaudiofontdata/sound/${name}.js`,preset=await fetch(url).then(s=>s.text());let[_,data]=preset.split("={");return eval("{"+data)};return loadCache[name]=load(),loadCache[name]}async function getFontBufferSource(s,e,n){let{note:a="c3",freq:o}=e,l;if(o)l=freqToMidi$2(o);else if(typeof a=="string")l=noteToMidi$1(a);else if(typeof a=="number")l=a;else throw new Error(`unexpected "note" type "${typeof a}"`);const{buffer:u,zone:c}=await getFontPitch(s,l,n),f=n.createBufferSource();f.buffer=u;const d=c.originalPitch-100*c.coarseTune-c.fineTune,g=1*Math.pow(2,(100*l-d)/1200);return f.playbackRate.value=g,c.loopStart>1&&c.loopStart<c.loopEnd&&(f.loop=!0,f.loopStart=c.loopStart/c.sampleRate,f.loopEnd=c.loopEnd/c.sampleRate),f}let bufferCache={};async function getFontPitch(s,e,n){const a=`${s}:::${e}`;if(bufferCache[a])return bufferCache[a];const o=async()=>{const l=await loadFont(s);if(!l)throw new Error(`Could not load soundfont ${s}`);const u=findZone(l,e);if(!u)throw new Error("no soundfont zone found for preset ",s,"pitch",e);const c=await getBuffer(u,n);if(!c)throw new Error(`no soundfont buffer found for preset ${s}, pitch: ${e}`);return{buffer:c,zone:u}};return bufferCache[a]=o(),bufferCache[a]}function findZone(s,e){return s.find(n=>n.keyRangeLow<=e&&n.keyRangeHigh+1>=e)}async function getBuffer(s,e){if(s.sample){console.warn("zone.sample untested!");const a=atob(s.sample);s.buffer=e.createBuffer(1,a.length/2,s.sampleRate);const o=s.buffer.getChannelData(0);let l,u,c;for(var n=0;n<a.length/2;n++)l=a.charCodeAt(n*2),u=a.charCodeAt(n*2+1),l<0&&(l=256+l),u<0&&(u=256+u),c=u*256+l,c>=65536/2&&(c=c-65536),o[n]=c/65536}else if(s.file){const a=s.file.length,o=new ArrayBuffer(a),l=new Uint8Array(o),u=atob(s.file);let c;for(let f=0;f<u.length;f++)c=u.charCodeAt(f),l[f]=c;return new Promise(f=>e.decodeAudioData(o,f))}}function registerSoundfonts(){Object.entries(gm).forEach(([s,e])=>{registerSound(s,async(n,a,o)=>{const{n:l=0}=a,{attack:u=.001,decay:c=.001,sustain:f=1,release:d=.001}=a,g=e[l%e.length],O=getAudioContext(),S=await getFontBufferSource(g,a,O);S.start(n);const{node:b,stop:E}=getEnvelope(u,c,f,d,.3,n);S.connect(b);const k=$=>{const R=E($);S.stop(R)};return S.onended=()=>{S.disconnect(),b.disconnect(),o()},{node:b,stop:k}},{type:"soundfont",prebake:!0,fonts:e})})}const instruments=["0000_JCLive_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_FluidR3_GM_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_FluidR3_GM_sf2_file","0040_GeneralUserGS_sf2_file","0040_JCLive_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_FluidR3_GM_sf2_file","0050_GeneralUserGS_sf2_file","0050_JCLive_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_FluidR3_GM_sf2_file","0060_GeneralUserGS_sf2_file","0060_JCLive_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file","0070_FluidR3_GM_sf2_file","0070_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0080_JCLive_sf2_file","0081_FluidR3_GM_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file","0090_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file","0100_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0110_JCLive_sf2_file","0111_FluidR3_GM_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0120_JCLive_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0130_JCLive_sf2_file","0131_FluidR3_GM_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0140_JCLive_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file","0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0160_JCLive_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0170_JCLive_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file","0180_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file","0190_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0200_JCLive_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0210_JCLive_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_FluidR3_GM_sf2_file","0220_GeneralUserGS_sf2_file","0220_JCLive_sf2_file","0221_FluidR3_GM_sf2_file","0230_Aspirin_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0230_JCLive_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_JCLive_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file","0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_JCLive_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file","0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file","0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_FluidR3_GM_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_FluidR3_GM_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file","0310_Aspirin_sf2_file","0310_Chaos_sf2_file","0310_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file","0320_FluidR3_GM_sf2_file","0320_JCLive_sf2_file","0330_Aspirin_sf2_file","0330_FluidR3_GM_sf2_file","0330_GeneralUserGS_sf2_file","0330_JCLive_sf2_file","0340_Aspirin_sf2_file","0340_FluidR3_GM_sf2_file","0340_GeneralUserGS_sf2_file","0340_JCLive_sf2_file","0341_Aspirin_sf2_file","0350_Aspirin_sf2_file","0350_JCLive_sf2_file","0360_Aspirin_sf2_file","0360_Chaos_sf2_file","0360_FluidR3_GM_sf2_file","0360_JCLive_sf2_file","0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_file","0370_JCLive_sf2_file","0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file","0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file","0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0400_JCLive_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file","0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file","0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file","0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file","0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file","0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file","0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file","0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file","0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file","0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file","0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file","0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file","0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file","0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file","0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file","0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file","0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_FluidR3_GM_sf2_file","0580_GeneralUserGS_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file","0590_JCLive_sf2_file","0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file","0610_JCLive_sf2_file","0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file","0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0640_JCLive_sf2_file","0641_FluidR3_GM_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0650_JCLive_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file","0660_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0670_JCLive_sf2_file","0671_FluidR3_GM_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0680_JCLive_sf2_file","0681_FluidR3_GM_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0690_JCLive_sf2_file","0691_FluidR3_GM_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0700_JCLive_sf2_file","0701_FluidR3_GM_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0710_JCLive_sf2_file","0711_FluidR3_GM_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0720_JCLive_sf2_file","0721_FluidR3_GM_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0730_JCLive_sf2_file","0731_FluidR3_GM_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file","0740_JCLive_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_FluidR3_GM_sf2_file","0750_GeneralUserGS_sf2_file","0750_JCLive_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file","0760_Chaos_sf2_file","0760_FluidR3_GM_sf2_file","0760_GeneralUserGS_sf2_file","0760_JCLive_sf2_file","0761_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file","0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file","0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_FluidR3_GM_sf2_file","0790_GeneralUserGS_sf2_file","0790_JCLive_sf2_file","0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0810_JCLive_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0820_JCLive_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0830_JCLive_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_FluidR3_GM_sf2_file","0840_GeneralUserGS_sf2_file","0840_JCLive_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0850_JCLive_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0860_JCLive_sf2_file","0861_Aspirin_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file","0870_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0880_JCLive_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0890_JCLive_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0900_JCLive_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file","0910_Aspirin_sf2_file","0910_FluidR3_GM_sf2_file","0910_GeneralUserGS_sf2_file","0910_JCLive_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0920_JCLive_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file","0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file","0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file","0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file","0960_Chaos_sf2_file","0960_FluidR3_GM_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file","0970_Aspirin_sf2_file","0970_FluidR3_GM_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file","0980_Aspirin_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0980_JCLive_sf2_file","0981_Aspirin_sf2_file","0981_FluidR3_GM_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0990_JCLive_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1000_JCLive_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_FluidR3_GM_sf2_file","1010_GeneralUserGS_sf2_file","1010_JCLive_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_FluidR3_GM_sf2_file","1020_GeneralUserGS_sf2_file","1020_JCLive_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_FluidR3_GM_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file","1040_Aspirin_sf2_file","1040_Chaos_sf2_file","1040_FluidR3_GM_sf2_file","1040_GeneralUserGS_sf2_file","1040_JCLive_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_FluidR3_GM_sf2_file","1050_GeneralUserGS_sf2_file","1050_JCLive_sf2_file","1051_GeneralUserGS_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_FluidR3_GM_sf2_file","1060_GeneralUserGS_sf2_file","1060_JCLive_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_FluidR3_GM_sf2_file","1070_GeneralUserGS_sf2_file","1070_JCLive_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_FluidR3_GM_sf2_file","1080_GeneralUserGS_sf2_file","1080_JCLive_sf2_file","1090_Aspirin_sf2_file","1090_Chaos_sf2_file","1090_FluidR3_GM_sf2_file","1090_GeneralUserGS_sf2_file","1090_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1100_JCLive_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file","1110_Aspirin_sf2_file","1110_Chaos_sf2_file","1110_FluidR3_GM_sf2_file","1110_GeneralUserGS_sf2_file","1110_JCLive_sf2_file","1120_Aspirin_sf2_file","1120_Chaos_sf2_file","1120_FluidR3_GM_sf2_file","1120_GeneralUserGS_sf2_file","1120_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1130_JCLive_sf2_file","1131_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_Chaos_sf2_file","1140_FluidR3_GM_sf2_file","1140_GeneralUserGS_sf2_file","1140_JCLive_sf2_file","1141_FluidR3_GM_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1150_JCLive_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_FluidR3_GM_sf2_file","1160_GeneralUserGS_sf2_file","1160_JCLive_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1170_JCLive_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1180_JCLive_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1190_JCLive_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1200_JCLive_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_FluidR3_GM_sf2_file","1210_GeneralUserGS_sf2_file","1210_JCLive_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1220_JCLive_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file","1230_Aspirin_sf2_file","1230_Chaos_sf2_file","1230_FluidR3_GM_sf2_file","1230_GeneralUserGS_sf2_file","1230_JCLive_sf2_file","1231_Aspirin_sf2_file","1231_GeneralUserGS_sf2_file","1232_Aspirin_sf2_file","1232_GeneralUserGS_sf2_file","1233_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1240_GeneralUserGS_sf2_file","1240_JCLive_sf2_file","1241_Aspirin_sf2_file","1241_GeneralUserGS_sf2_file","1242_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file","1250_Aspirin_sf2_file","1250_Chaos_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1250_JCLive_sf2_file","1251_Aspirin_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_Aspirin_sf2_file","1253_GeneralUserGS_sf2_file","1254_Aspirin_sf2_file","1254_GeneralUserGS_sf2_file","1255_Aspirin_sf2_file","1255_GeneralUserGS_sf2_file","1256_Aspirin_sf2_file","1256_GeneralUserGS_sf2_file","1257_Aspirin_sf2_file","1257_GeneralUserGS_sf2_file","1258_Aspirin_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1260_JCLive_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1270_JCLive_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file"],drums=["35_0_Chaos_sf2_file","35_12_JCLive_sf2_file","35_16_JCLive_sf2_file","35_18_JCLive_sf2_file","35_4_Chaos_sf2_file","36_12_JCLive_sf2_file","36_16_JCLive_sf2_file","36_18_JCLive_sf2_file","36_4_Chaos_sf2_file","37_12_JCLive_sf2_file","37_16_JCLive_sf2_file","37_18_JCLive_sf2_file","37_4_Chaos_sf2_file","38_12_JCLive_sf2_file","38_16_JCLive_sf2_file","38_18_JCLive_sf2_file","38_4_Chaos_sf2_file","39_12_JCLive_sf2_file","39_16_JCLive_sf2_file","39_18_JCLive_sf2_file","39_4_Chaos_sf2_file","40_12_JCLive_sf2_file","40_16_JCLive_sf2_file","40_18_JCLive_sf2_file","40_4_Chaos_sf2_file","41_12_JCLive_sf2_file","41_16_JCLive_sf2_file","41_18_JCLive_sf2_file","41_4_Chaos_sf2_file","42_12_JCLive_sf2_file","42_16_JCLive_sf2_file","42_18_JCLive_sf2_file","42_4_Chaos_sf2_file","43_12_JCLive_sf2_file","43_16_JCLive_sf2_file","43_18_JCLive_sf2_file","43_4_Chaos_sf2_file","44_12_JCLive_sf2_file","44_16_JCLive_sf2_file","44_18_JCLive_sf2_file","44_4_Chaos_sf2_file","45_12_JCLive_sf2_file","45_16_JCLive_sf2_file","45_18_JCLive_sf2_file","45_4_Chaos_sf2_file","46_12_JCLive_sf2_file","46_16_JCLive_sf2_file","46_18_JCLive_sf2_file","46_4_Chaos_sf2_file","47_12_JCLive_sf2_file","47_16_JCLive_sf2_file","47_18_JCLive_sf2_file","47_4_Chaos_sf2_file","48_12_JCLive_sf2_file","48_16_JCLive_sf2_file","48_18_JCLive_sf2_file","48_4_Chaos_sf2_file","49_12_JCLive_sf2_file","49_16_JCLive_sf2_file","49_18_JCLive_sf2_file","49_4_Chaos_sf2_file","50_12_JCLive_sf2_file","50_16_JCLive_sf2_file","50_18_JCLive_sf2_file","50_4_Chaos_sf2_file","51_12_JCLive_sf2_file","51_16_JCLive_sf2_file","51_18_JCLive_sf2_file","51_4_Chaos_sf2_file","52_12_JCLive_sf2_file","52_16_JCLive_sf2_file","52_18_JCLive_sf2_file","52_4_Chaos_sf2_file","53_12_JCLive_sf2_file","53_16_JCLive_sf2_file","53_18_JCLive_sf2_file","53_4_Chaos_sf2_file","54_12_JCLive_sf2_file","54_16_JCLive_sf2_file","54_18_JCLive_sf2_file","54_4_Chaos_sf2_file","55_12_JCLive_sf2_file","55_16_JCLive_sf2_file","55_18_JCLive_sf2_file","55_4_Chaos_sf2_file","56_12_JCLive_sf2_file","56_16_JCLive_sf2_file","56_18_JCLive_sf2_file","56_4_Chaos_sf2_file","57_12_JCLive_sf2_file","57_16_JCLive_sf2_file","57_18_JCLive_sf2_file","57_4_Chaos_sf2_file","58_12_JCLive_sf2_file","58_16_JCLive_sf2_file","58_18_JCLive_sf2_file","58_4_Chaos_sf2_file","59_12_JCLive_sf2_file","59_16_JCLive_sf2_file","59_18_JCLive_sf2_file","59_4_Chaos_sf2_file","60_12_JCLive_sf2_file","60_16_JCLive_sf2_file","60_18_JCLive_sf2_file","60_4_Chaos_sf2_file","61_12_JCLive_sf2_file","61_16_JCLive_sf2_file","61_18_JCLive_sf2_file","61_4_Chaos_sf2_file","62_12_JCLive_sf2_file","62_16_JCLive_sf2_file","62_18_JCLive_sf2_file","62_4_Chaos_sf2_file","63_12_JCLive_sf2_file","63_16_JCLive_sf2_file","63_18_JCLive_sf2_file","63_4_Chaos_sf2_file","64_12_JCLive_sf2_file","64_16_JCLive_sf2_file","64_18_JCLive_sf2_file","64_4_Chaos_sf2_file","65_12_JCLive_sf2_file","65_16_JCLive_sf2_file","65_18_JCLive_sf2_file","65_4_Chaos_sf2_file","66_12_JCLive_sf2_file","66_16_JCLive_sf2_file","66_18_JCLive_sf2_file","66_4_Chaos_sf2_file","67_12_JCLive_sf2_file","67_16_JCLive_sf2_file","67_18_JCLive_sf2_file","67_4_Chaos_sf2_file","68_12_JCLive_sf2_file","68_16_JCLive_sf2_file","68_18_JCLive_sf2_file","68_4_Chaos_sf2_file","69_12_JCLive_sf2_file","69_16_JCLive_sf2_file","69_18_JCLive_sf2_file","69_4_Chaos_sf2_file","70_12_JCLive_sf2_file","70_16_JCLive_sf2_file","70_18_JCLive_sf2_file","70_4_Chaos_sf2_file","71_12_JCLive_sf2_file","71_16_JCLive_sf2_file","71_18_JCLive_sf2_file","71_4_Chaos_sf2_file","72_12_JCLive_sf2_file","72_16_JCLive_sf2_file","72_18_JCLive_sf2_file","72_4_Chaos_sf2_file","73_12_JCLive_sf2_file","73_16_JCLive_sf2_file","73_18_JCLive_sf2_file","73_4_Chaos_sf2_file","74_12_JCLive_sf2_file","74_16_JCLive_sf2_file","74_18_JCLive_sf2_file","74_4_Chaos_sf2_file","75_12_JCLive_sf2_file","75_16_JCLive_sf2_file","75_18_JCLive_sf2_file","75_4_Chaos_sf2_file","76_12_JCLive_sf2_file","76_16_JCLive_sf2_file","76_18_JCLive_sf2_file","76_4_Chaos_sf2_file","77_12_JCLive_sf2_file","77_16_JCLive_sf2_file","77_18_JCLive_sf2_file","77_4_Chaos_sf2_file","78_12_JCLive_sf2_file","78_16_JCLive_sf2_file","78_18_JCLive_sf2_file","78_4_Chaos_sf2_file","79_12_JCLive_sf2_file","79_16_JCLive_sf2_file","79_18_JCLive_sf2_file","79_4_Chaos_sf2_file","80_12_JCLive_sf2_file","80_16_JCLive_sf2_file","80_18_JCLive_sf2_file","80_4_Chaos_sf2_file","81_12_JCLive_sf2_file","81_16_JCLive_sf2_file","81_18_JCLive_sf2_file","81_4_Chaos_sf2_file"],instrumentNames=[];instrumentNames[0]="Acoustic Grand Piano: Piano",instrumentNames[1]="Bright Acoustic Piano: Piano",instrumentNames[2]="Electric Grand Piano: Piano",instrumentNames[3]="Honky-tonk Piano: Piano",instrumentNames[4]="Electric Piano 1: Piano",instrumentNames[5]="Electric Piano 2: Piano",instrumentNames[6]="Harpsichord: Piano",instrumentNames[7]="Clavinet: Piano",instrumentNames[8]="Celesta: Chromatic Percussion",instrumentNames[9]="Glockenspiel: Chromatic Percussion",instrumentNames[10]="Music Box: Chromatic Percussion",instrumentNames[11]="Vibraphone: Chromatic Percussion",instrumentNames[12]="Marimba: Chromatic Percussion",instrumentNames[13]="Xylophone: Chromatic Percussion",instrumentNames[14]="Tubular Bells: Chromatic Percussion",instrumentNames[15]="Dulcimer: Chromatic Percussion",instrumentNames[16]="Drawbar Organ: Organ",instrumentNames[17]="Percussive Organ: Organ",instrumentNames[18]="Rock Organ: Organ",instrumentNames[19]="Church Organ: Organ",instrumentNames[20]="Reed Organ: Organ",instrumentNames[21]="Accordion: Organ",instrumentNames[22]="Harmonica: Organ",instrumentNames[23]="Tango Accordion: Organ",instrumentNames[24]="Acoustic Guitar (nylon): Guitar",instrumentNames[25]="Acoustic Guitar (steel): Guitar",instrumentNames[26]="Electric Guitar (jazz): Guitar",instrumentNames[27]="Electric Guitar (clean): Guitar",instrumentNames[28]="Electric Guitar (muted): Guitar",instrumentNames[29]="Overdriven Guitar: Guitar",instrumentNames[30]="Distortion Guitar: Guitar",instrumentNames[31]="Guitar Harmonics: Guitar",instrumentNames[32]="Acoustic Bass: Bass",instrumentNames[33]="Electric Bass (finger): Bass",instrumentNames[34]="Electric Bass (pick): Bass",instrumentNames[35]="Fretless Bass: Bass",instrumentNames[36]="Slap Bass 1: Bass",instrumentNames[37]="Slap Bass 2: Bass",instrumentNames[38]="Synth Bass 1: Bass",instrumentNames[39]="Synth Bass 2: Bass",instrumentNames[40]="Violin: Strings",instrumentNames[41]="Viola: Strings",instrumentNames[42]="Cello: Strings",instrumentNames[43]="Contrabass: Strings",instrumentNames[44]="Tremolo Strings: Strings",instrumentNames[45]="Pizzicato Strings: Strings",instrumentNames[46]="Orchestral Harp: Strings",instrumentNames[47]="Timpani: Strings",instrumentNames[48]="String Ensemble 1: Ensemble",instrumentNames[49]="String Ensemble 2: Ensemble",instrumentNames[50]="Synth Strings 1: Ensemble",instrumentNames[51]="Synth Strings 2: Ensemble",instrumentNames[52]="Choir Aahs: Ensemble",instrumentNames[53]="Voice Oohs: Ensemble",instrumentNames[54]="Synth Choir: Ensemble",instrumentNames[55]="Orchestra Hit: Ensemble",instrumentNames[56]="Trumpet: Brass",instrumentNames[57]="Trombone: Brass",instrumentNames[58]="Tuba: Brass",instrumentNames[59]="Muted Trumpet: Brass",instrumentNames[60]="French Horn: Brass",instrumentNames[61]="Brass Section: Brass",instrumentNames[62]="Synth Brass 1: Brass",instrumentNames[63]="Synth Brass 2: Brass",instrumentNames[64]="Soprano Sax: Reed",instrumentNames[65]="Alto Sax: Reed",instrumentNames[66]="Tenor Sax: Reed",instrumentNames[67]="Baritone Sax: Reed",instrumentNames[68]="Oboe: Reed",instrumentNames[69]="English Horn: Reed",instrumentNames[70]="Bassoon: Reed",instrumentNames[71]="Clarinet: Reed",instrumentNames[72]="Piccolo: Pipe",instrumentNames[73]="Flute: Pipe",instrumentNames[74]="Recorder: Pipe",instrumentNames[75]="Pan Flute: Pipe",instrumentNames[76]="Blown bottle: Pipe",instrumentNames[77]="Shakuhachi: Pipe",instrumentNames[78]="Whistle: Pipe",instrumentNames[79]="Ocarina: Pipe",instrumentNames[80]="Lead 1 (square): Synth Lead",instrumentNames[81]="Lead 2 (sawtooth): Synth Lead",instrumentNames[82]="Lead 3 (calliope): Synth Lead",instrumentNames[83]="Lead 4 (chiff): Synth Lead",instrumentNames[84]="Lead 5 (charang): Synth Lead",instrumentNames[85]="Lead 6 (voice): Synth Lead",instrumentNames[86]="Lead 7 (fifths): Synth Lead",instrumentNames[87]="Lead 8 (bass + lead): Synth Lead",instrumentNames[88]="Pad 1 (new age): Synth Pad",instrumentNames[89]="Pad 2 (warm): Synth Pad",instrumentNames[90]="Pad 3 (polysynth): Synth Pad",instrumentNames[91]="Pad 4 (choir): Synth Pad",instrumentNames[92]="Pad 5 (bowed): Synth Pad",instrumentNames[93]="Pad 6 (metallic): Synth Pad",instrumentNames[94]="Pad 7 (halo): Synth Pad",instrumentNames[95]="Pad 8 (sweep): Synth Pad",instrumentNames[96]="FX 1 (rain): Synth Effects",instrumentNames[97]="FX 2 (soundtrack): Synth Effects",instrumentNames[98]="FX 3 (crystal): Synth Effects",instrumentNames[99]="FX 4 (atmosphere): Synth Effects",instrumentNames[100]="FX 5 (brightness): Synth Effects",instrumentNames[101]="FX 6 (goblins): Synth Effects",instrumentNames[102]="FX 7 (echoes): Synth Effects",instrumentNames[103]="FX 8 (sci-fi): Synth Effects",instrumentNames[104]="Sitar: Ethnic",instrumentNames[105]="Banjo: Ethnic",instrumentNames[106]="Shamisen: Ethnic",instrumentNames[107]="Koto: Ethnic",instrumentNames[108]="Kalimba: Ethnic",instrumentNames[109]="Bagpipe: Ethnic",instrumentNames[110]="Fiddle: Ethnic",instrumentNames[111]="Shanai: Ethnic",instrumentNames[112]="Tinkle Bell: Percussive",instrumentNames[113]="Agogo: Percussive",instrumentNames[114]="Steel Drums: Percussive",instrumentNames[115]="Woodblock: Percussive",instrumentNames[116]="Taiko Drum: Percussive",instrumentNames[117]="Melodic Tom: Percussive",instrumentNames[118]="Synth Drum: Percussive",instrumentNames[119]="Reverse Cymbal: Percussive",instrumentNames[120]="Guitar Fret Noise: Sound effects",instrumentNames[121]="Breath Noise: Sound effects",instrumentNames[122]="Seashore: Sound effects",instrumentNames[123]="Bird Tweet: Sound effects",instrumentNames[124]="Telephone Ring: Sound effects",instrumentNames[125]="Helicopter: Sound effects",instrumentNames[126]="Applause: Sound effects",instrumentNames[127]="Gunshot: Sound effects";const list=Object.freeze(Object.defineProperty({__proto__:null,drums,instrumentNames,instruments},Symbol.toStringTag,{value:"Module"}));var SoundFont2={exports:{}};(function(s,e){(function(n,a){s.exports=a()})(window,function(){return function(n){var a={};function o(l){if(a[l])return a[l].exports;var u=a[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,o),u.l=!0,u.exports}return o.m=n,o.c=a,o.d=function(l,u,c){o.o(l,u)||Object.defineProperty(l,u,{enumerable:!0,get:c})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,u){if(1&u&&(l=o(l)),8&u||4&u&&typeof l=="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),2&u&&typeof l!="string")for(var f in l)o.d(c,f,function(d){return l[d]}.bind(null,f));return c},o.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(u,"a",u),u},o.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},o.p="",o(o.s="./src/index.ts")}({"./src/chunk.ts":function(n,a,o){o.r(a),o.d(a,"SF2Chunk",function(){return b});var l=o("./src/riff/index.ts"),u=o("./src/constants.ts"),c=o("./src/chunks/index.ts");function f(E){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(E)}function d(E,k){for(var $=0;$<k.length;$++){var R=k[$];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(E,R.key,R)}}function g(E){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(k){return k.__proto__||Object.getPrototypeOf(k)})(E)}function O(E,k){return(O=Object.setPrototypeOf||function($,R){return $.__proto__=R,$})(E,k)}function S(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}var b=function(E){function k(Z){var he,j,K,se,de,ue;return function(me,ge){if(!(me instanceof ge))throw new TypeError("Cannot call a class as a function")}(this,k),j=this,he=!(K=g(k).call(this,Z.id,Z.length,Z.buffer,Z.subChunks))||f(K)!=="object"&&typeof K!="function"?S(j):K,se=S(S(he)),ue=void 0,(de="subChunks")in se?Object.defineProperty(se,de,{value:ue,enumerable:!0,configurable:!0,writable:!0}):se[de]=ue,he.subChunks=Z.subChunks.map(function(me){return new k(me)}),he}var $,R;return function(Z,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");Z.prototype=Object.create(he&&he.prototype,{constructor:{value:Z,writable:!0,configurable:!0}}),he&&O(Z,he)}(k,l.RIFFChunk),$=k,(R=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new l.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var Z=this.subChunks.reduce(function(he,j){if(j.id==="ifil"||j.id==="iver"){if(j.length!==u.SF_VERSION_LENGTH)throw new l.ParseError("Invalid size for the '".concat(j.id,"' sub-chunk"));he[j.id]="".concat(j.getInt16(),".").concat(j.getInt16(2))}else he[j.id]=j.getString();return he},{});if(!Z.ifil)throw new l.ParseError("Missing required 'ifil' sub-chunk");if(!Z.INAM)throw new l.ParseError("Missing required 'INAM' sub-chunk");return{version:Z.ifil,soundEngine:Z.isng||"EMU8000",name:Z.INAM,rom:Z.irom,romVersion:Z.iver,creationDate:Z.ICRD,author:Z.IENG,product:Z.IPRD,copyright:Z.ICOP,comments:Z.ICMT,createdBy:Z.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new l.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var Z=this.subChunks[0];if(Z.id!=="smpl")throw new l.ParseError("Invalid chunk signature","'smpl'","'".concat(Z.id,"'"));return Z.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new l.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(c.getPresetHeaders)(this.subChunks[0]),presetZones:Object(c.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(c.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(c.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(c.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(c.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(c.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(c.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(c.getSampleHeaders)(this.subChunks[8])}}}])&&d($.prototype,R),k}()},"./src/chunks/generators.ts":function(n,a,o){o.r(a),o.d(a,"getGenerators",function(){return O});var l=o("./src/riff/index.ts"),u=o("./src/types/index.ts"),c=o("./src/constants.ts"),f=[u.GeneratorType.StartAddrsOffset,u.GeneratorType.EndAddrsOffset,u.GeneratorType.StartLoopAddrsOffset,u.GeneratorType.EndLoopAddrsOffset,u.GeneratorType.StartAddrsCoarseOffset,u.GeneratorType.EndAddrsCoarseOffset,u.GeneratorType.StartLoopAddrsCoarseOffset,u.GeneratorType.KeyNum,u.GeneratorType.Velocity,u.GeneratorType.EndLoopAddrsCoarseOffset,u.GeneratorType.SampleModes,u.GeneratorType.ExclusiveClass,u.GeneratorType.OverridingRootKey],d=[u.GeneratorType.Unused1,u.GeneratorType.Unused2,u.GeneratorType.Unused3,u.GeneratorType.Unused4,u.GeneratorType.Reserved1,u.GeneratorType.Reserved2,u.GeneratorType.Reserved3],g=[u.GeneratorType.KeyRange,u.GeneratorType.VelRange],O=function(S,b){if(S.id!==b)throw new l.ParseError("Unexpected chunk ID","'".concat(b,"'"),"'".concat(S.id,"'"));if(S.length%c.SF_GENERATOR_SIZE)throw new l.ParseError("Invalid size for the '".concat(b,"' sub-chunk"));return S.iterate(function(E){var k=E.getInt16();return u.GeneratorType[k]?b==="pgen"&&f.includes(k)||b==="igen"&&d.includes(k)?null:g.includes(k)?{id:k,range:{lo:E.getByte(),hi:E.getByte()}}:{id:k,value:E.getInt16BE()}:null})}},"./src/chunks/index.ts":function(n,a,o){o.r(a);var l=o("./src/chunks/instruments/index.ts");o.d(a,"getInstrumentHeaders",function(){return l.getInstrumentHeaders});var u=o("./src/chunks/presets/index.ts");o.d(a,"getPresetHeaders",function(){return u.getPresetHeaders});var c=o("./src/chunks/samples/index.ts");o.d(a,"getSampleHeaders",function(){return c.getSampleHeaders});var f=o("./src/chunks/generators.ts");o.d(a,"getGenerators",function(){return f.getGenerators});var d=o("./src/chunks/modulators.ts");o.d(a,"getModulators",function(){return d.getModulators});var g=o("./src/chunks/zones.ts");o.d(a,"getZones",function(){return g.getZones}),o.d(a,"getItemsInZone",function(){return g.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(n,a,o){o.r(a),o.d(a,"getInstrumentHeaders",function(){return c});var l=o("./src/riff/index.ts"),u=o("./src/constants.ts"),c=function(f){if(f.id!=="inst")throw new l.ParseError("Unexpected chunk ID","'inst'","'".concat(f.id,"'"));if(f.length%u.SF_INSTRUMENT_HEADER_SIZE)throw new l.ParseError("Invalid size for the 'inst' sub-chunk");return f.iterate(function(d){return{name:d.getString(),bagIndex:d.getInt16()}})}},"./src/chunks/instruments/index.ts":function(n,a,o){o.r(a);var l=o("./src/chunks/instruments/headers.ts");o.d(a,"getInstrumentHeaders",function(){return l.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(n,a,o){o.r(a),o.d(a,"getModulators",function(){return f});var l=o("./src/riff/index.ts"),u=o("./src/constants.ts"),c=function(d){return{type:d>>10&63,polarity:d>>9&1,direction:d>>8&1,palette:d>>7&1,index:127&d}},f=function(d,g){if(d.id!==g)throw new l.ParseError("Unexpected chunk ID","'".concat(g,"'"),"'".concat(d.id,"'"));if(d.length%u.SF_MODULATOR_SIZE)throw new l.ParseError("Invalid size for the '".concat(g,"' sub-chunk"));return d.iterate(function(O){return{source:c(O.getInt16BE()),id:O.getInt16BE(),value:O.getInt16BE(),valueSource:c(O.getInt16BE()),transform:O.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(n,a,o){o.r(a),o.d(a,"getPresetHeaders",function(){return c});var l=o("./src/riff/index.ts"),u=o("./src/constants.ts"),c=function(f){if(f.id!=="phdr")throw new l.ParseError("Invalid chunk ID","'phdr'","'".concat(f.id,"'"));if(f.length%u.SF_PRESET_HEADER_SIZE)throw new l.ParseError("Invalid size for the 'phdr' sub-chunk");return f.iterate(function(d){return{name:d.getString(),preset:d.getInt16(),bank:d.getInt16(),bagIndex:d.getInt16(),library:d.getUInt32(),genre:d.getUInt32(),morphology:d.getUInt32()}})}},"./src/chunks/presets/index.ts":function(n,a,o){o.r(a);var l=o("./src/chunks/presets/headers.ts");o.d(a,"getPresetHeaders",function(){return l.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(n,a,o){o.r(a),o.d(a,"getSampleHeaders",function(){return c});var l=o("./src/riff/index.ts"),u=o("./src/constants.ts"),c=function(f){if(f.id!=="shdr")throw new l.ParseError("Unexpected chunk ID","'shdr'","'".concat(f.id,"'"));if(f.length%u.SF_SAMPLE_HEADER_SIZE)throw new l.ParseError("Invalid size for the 'shdr' sub-chunk");return f.iterate(function(d){return{name:d.getString(),start:d.getUInt32(),end:d.getUInt32(),startLoop:d.getUInt32(),endLoop:d.getUInt32(),sampleRate:d.getUInt32(),originalPitch:d.getByte(),pitchCorrection:d.getChar(),link:d.getInt16(),type:d.getInt16()}})}},"./src/chunks/samples/index.ts":function(n,a,o){o.r(a);var l=o("./src/chunks/samples/headers.ts");o.d(a,"getSampleHeaders",function(){return l.getSampleHeaders})},"./src/chunks/zones.ts":function(n,a,o){o.r(a),o.d(a,"getZones",function(){return f}),o.d(a,"getItemsInZone",function(){return d});var l=o("./src/riff/index.ts"),u=o("./src/constants.ts"),c=o("./src/types/index.ts"),f=function(b,E){if(b.id!==E)throw new l.ParseError("Unexpected chunk ID","'".concat(E,"'"),"'".concat(b.id,"'"));if(b.length%u.SF_BAG_SIZE)throw new l.ParseError("Invalid size for the '".concat(E,"' sub-chunk"));return b.iterate(function(k){return{generatorIndex:k.getInt16(),modulatorIndex:k.getInt16()}})},d=function(b,E,k,$,R,Z){for(var he=[],j=0;j<b.length;j++){for(var K=b[j],se=b[j+1],de=K.bagIndex,ue=se?se.bagIndex:E.length,me=[],ge=void 0,Oe=de;Oe<ue;Oe++){var be=g(Oe,E,k),Ae=O(Oe,E,$),Ne=Ae[c.GeneratorType.KeyRange]&&Ae[c.GeneratorType.KeyRange].range,Re=Ae[Z];if(Re){var Fe=R[Re.value];Fe&&me.push({keyRange:Ne,modulators:be,generators:Ae,reference:Fe})}else Oe-de==0&&(ge={keyRange:Ne,modulators:be,generators:Ae})}he.push({header:K,globalZone:ge,zones:me})}return he},g=function(b,E,k){var $=E[b],R=E[b+1],Z=$.modulatorIndex,he=R?R.modulatorIndex:E.length;return S(Z,he,k)},O=function(b,E,k){var $=E[b],R=E[b+1],Z=$.generatorIndex,he=R?R.generatorIndex:E.length;return S(Z,he,k)},S=function(b,E,k){for(var $={},R=b;R<E;R++){var Z=k[R];Z&&($[Z.id]=Z)}return $}},"./src/constants.ts":function(n,a,o){o.r(a),o.d(a,"SF_VERSION_LENGTH",function(){return l}),o.d(a,"SF_PRESET_HEADER_SIZE",function(){return u}),o.d(a,"SF_BAG_SIZE",function(){return c}),o.d(a,"SF_MODULATOR_SIZE",function(){return f}),o.d(a,"SF_GENERATOR_SIZE",function(){return d}),o.d(a,"SF_INSTRUMENT_HEADER_SIZE",function(){return g}),o.d(a,"SF_SAMPLE_HEADER_SIZE",function(){return O}),o.d(a,"DEFAULT_SAMPLE_RATE",function(){return S});var l=4,u=38,c=4,f=10,d=4,g=22,O=46,S=22050},"./src/index.ts":function(n,a,o){o.r(a);var l=o("./src/types/index.ts");for(var u in l)u!=="default"&&function(g){o.d(a,g,function(){return l[g]})}(u);var c=o("./src/chunk.ts");o.d(a,"SF2Chunk",function(){return c.SF2Chunk});var f=o("./src/constants.ts");o.d(a,"SF_VERSION_LENGTH",function(){return f.SF_VERSION_LENGTH}),o.d(a,"SF_PRESET_HEADER_SIZE",function(){return f.SF_PRESET_HEADER_SIZE}),o.d(a,"SF_BAG_SIZE",function(){return f.SF_BAG_SIZE}),o.d(a,"SF_MODULATOR_SIZE",function(){return f.SF_MODULATOR_SIZE}),o.d(a,"SF_GENERATOR_SIZE",function(){return f.SF_GENERATOR_SIZE}),o.d(a,"SF_INSTRUMENT_HEADER_SIZE",function(){return f.SF_INSTRUMENT_HEADER_SIZE}),o.d(a,"SF_SAMPLE_HEADER_SIZE",function(){return f.SF_SAMPLE_HEADER_SIZE}),o.d(a,"DEFAULT_SAMPLE_RATE",function(){return f.DEFAULT_SAMPLE_RATE});var d=o("./src/soundFont2.ts");o.d(a,"SoundFont2",function(){return d.SoundFont2})},"./src/riff/chunkIterator.ts":function(n,a,o){o.r(a),o.d(a,"ChunkIterator",function(){return f});var l=o("./src/utils/index.ts");function u(d,g){for(var O=0;O<g.length;O++){var S=g[O];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,S.key,S)}}function c(d,g,O){return g in d?Object.defineProperty(d,g,{value:O,enumerable:!0,configurable:!0,writable:!0}):d[g]=O,d}var f=function(){function d(S){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(function(E,k){if(!(E instanceof k))throw new TypeError("Cannot call a class as a function")})(this,d),c(this,"target",[]),c(this,"chunk",void 0),c(this,"position",0),this.chunk=S,this.position=b}var g,O;return g=d,(O=[{key:"iterate",value:function(S){for(;this.position<this.chunk.length;){var b=S(this);b&&this.target.push(b)}}},{key:"getString",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,b=Object(l.getStringFromBuffer)(this.getBuffer(this.position,S));return this.position+=S,b}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(S){this.position+=S}},{key:"getBuffer",value:function(S,b){return this.chunk.buffer.subarray(S,S+b)}},{key:"currentPosition",get:function(){return this.position}}])&&u(g.prototype,O),d}()},"./src/riff/index.ts":function(n,a,o){o.r(a);var l=o("./src/riff/chunkIterator.ts");o.d(a,"ChunkIterator",function(){return l.ChunkIterator});var u=o("./src/riff/parseError.ts");o.d(a,"ParseError",function(){return u.ParseError});var c=o("./src/riff/parser.ts");o.d(a,"parseBuffer",function(){return c.parseBuffer}),o.d(a,"getChunk",function(){return c.getChunk}),o.d(a,"getChunkLength",function(){return c.getChunkLength}),o.d(a,"getSubChunks",function(){return c.getSubChunks}),o.d(a,"getChunkId",function(){return c.getChunkId});var f=o("./src/riff/riffChunk.ts");o.d(a,"RIFFChunk",function(){return f.RIFFChunk})},"./src/riff/parseError.ts":function(n,a,o){function l(S){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(S)}function u(S,b){return!b||l(b)!=="object"&&typeof b!="function"?function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(S):b}function c(S){var b=typeof Map=="function"?new Map:void 0;return(c=function(E){if(E===null||(k=E,Function.toString.call(k).indexOf("[native code]")===-1))return E;var k;if(typeof E!="function")throw new TypeError("Super expression must either be null or a function");if(b!==void 0){if(b.has(E))return b.get(E);b.set(E,$)}function $(){return f(E,arguments,g(this).constructor)}return $.prototype=Object.create(E.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),d($,E)})(S)}function f(S,b,E){return(f=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(k,$,R){var Z=[null];Z.push.apply(Z,$);var he=new(Function.bind.apply(k,Z));return R&&d(he,R.prototype),he}).apply(null,arguments)}function d(S,b){return(d=Object.setPrototypeOf||function(E,k){return E.__proto__=k,E})(S,b)}function g(S){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(S)}o.r(a),o.d(a,"ParseError",function(){return O});var O=function(S){function b(E,k,$){return function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,b),u(this,g(b).call(this,"".concat(E).concat(k&&$?", expected ".concat(k,", received ").concat($):"")))}return function(E,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(k&&k.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),k&&d(E,k)}(b,c(Error)),b}()},"./src/riff/parser.ts":function(n,a,o){o.r(a),o.d(a,"parseBuffer",function(){return f}),o.d(a,"getChunk",function(){return d}),o.d(a,"getChunkLength",function(){return g}),o.d(a,"getSubChunks",function(){return O}),o.d(a,"getChunkId",function(){return S});var l=o("./src/riff/parseError.ts"),u=o("./src/utils/buffer.ts"),c=o("./src/riff/riffChunk.ts"),f=function(b){var E=S(b);if(E!=="RIFF")throw new l.ParseError("Invalid file format","RIFF",E);var k=S(b,8);if(k!=="sfbk")throw new l.ParseError("Invalid signature","sfbk",k);var $=b.subarray(8),R=O($.subarray(4));return new c.RIFFChunk(E,$.length,$,R)},d=function(b,E){var k=S(b,E),$=g(b,E+4),R=[];return k!=="RIFF"&&k!=="LIST"||(R=O(b.subarray(E+12))),new c.RIFFChunk(k,$,b.subarray(E+8),R)},g=function(b,E){return((b=b.subarray(E,E+4))[0]|b[1]<<8|b[2]<<16|b[3]<<24)>>>0},O=function(b){for(var E=[],k=0;k<=b.length-8;){var $=d(b,k);E.push($),k=(k+=8+$.length)%2?k+1:k}return E},S=function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(u.getStringFromBuffer)(b.subarray(E,E+4))}},"./src/riff/riffChunk.ts":function(n,a,o){o.r(a),o.d(a,"RIFFChunk",function(){return d});var l=o("./src/riff/chunkIterator.ts"),u=o("./src/utils/index.ts");function c(g,O){for(var S=0;S<O.length;S++){var b=O[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}function f(g,O,S){return O in g?Object.defineProperty(g,O,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[O]=S,g}var d=function(){function g(b,E,k,$){(function(R,Z){if(!(R instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,g),f(this,"id",void 0),f(this,"length",void 0),f(this,"buffer",void 0),f(this,"subChunks",void 0),this.id=b,this.length=E,this.buffer=k,this.subChunks=$}var O,S;return O=g,(S=[{key:"getString",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1?arguments[1]:void 0;return Object(u.getStringFromBuffer)(this.getBuffer(b,E||this.length-b))}},{key:"getInt16",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[b++]|this.buffer[b]<<8}},{key:"getUInt32",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[b++]|this.buffer[b++]<<8|this.buffer[b++]<<16|this.buffer[b]<<24)>>>0}},{key:"getByte",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[b]}},{key:"getChar",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[b]<<24>>24}},{key:"iterator",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new l.ChunkIterator(this,b)}},{key:"iterate",value:function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=new l.ChunkIterator(this,E);return k.iterate(b),k.target}},{key:"getBuffer",value:function(b,E){return this.buffer.subarray(b,b+E)}}])&&c(O.prototype,S),g}()},"./src/soundFont2.ts":function(n,a,o){o.r(a),o.d(a,"SoundFont2",function(){return E});var l=o("./src/types/index.ts"),u=o("./src/chunk.ts"),c=o("./src/riff/index.ts"),f=o("./src/chunks/index.ts"),d=o("./src/utils/index.ts");function g(k){for(var $=1;$<arguments.length;$++){var R=arguments[$]!=null?arguments[$]:{},Z=Object.keys(R);typeof Object.getOwnPropertySymbols=="function"&&(Z=Z.concat(Object.getOwnPropertySymbols(R).filter(function(he){return Object.getOwnPropertyDescriptor(R,he).enumerable}))),Z.forEach(function(he){b(k,he,R[he])})}return k}function O(k,$){for(var R=0;R<$.length;R++){var Z=$[R];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(k,Z.key,Z)}}function S(k,$,R){return $&&O(k.prototype,$),R&&O(k,R),k}function b(k,$,R){return $ in k?Object.defineProperty(k,$,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[$]=R,k}var E=function(){function k($){if(function(Z,he){if(!(Z instanceof he))throw new TypeError("Cannot call a class as a function")}(this,k),b(this,"chunk",void 0),b(this,"metaData",void 0),b(this,"sampleData",void 0),b(this,"samples",void 0),b(this,"presetData",void 0),b(this,"instruments",void 0),b(this,"presets",void 0),b(this,"banks",void 0),!($ instanceof u.SF2Chunk)){var R=Object(c.parseBuffer)($);$=new u.SF2Chunk(R)}if($.subChunks.length!==3)throw new c.ParseError("Invalid sfbk structure","3 chunks","".concat($.subChunks.length," chunks"));this.chunk=$,this.metaData=$.subChunks[0].getMetaData(),this.sampleData=$.subChunks[1].getSampleData(),this.presetData=$.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return S(k,null,[{key:"from",value:function($){return new k($)}}]),S(k,[{key:"getKeyData",value:function($){var R=this,Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(d.memoize)(function(j,K,se){var de=R.banks[K];if(de){var ue=de.presets[se];if(ue){var me=ue.zones.find(function(Re){return R.isKeyInRange(Re,j)});if(me){var ge=me.instrument,Oe=ge.zones.find(function(Re){return R.isKeyInRange(Re,j)});if(Oe){var be=Oe.sample,Ae=g({},me.generators,Oe.generators),Ne=g({},me.modulators,Oe.modulators);return{keyNumber:j,preset:ue,instrument:ge,sample:be,generators:Ae,modulators:Ne}}}}}return null})($,Z,he)}},{key:"isKeyInRange",value:function($,R){return $.keyRange===void 0||$.keyRange.lo<=R&&$.keyRange.hi>=R}},{key:"getBanks",value:function(){return this.presets.reduce(function($,R){var Z=R.header.bank;return $[Z]||($[Z]={presets:[]}),$[Z].presets[R.header.preset]=R,$},[])}},{key:"getPresets",value:function(){var $=this.presetData,R=$.presetHeaders,Z=$.presetZones,he=$.presetGenerators,j=$.presetModulators;return Object(f.getItemsInZone)(R,Z,j,he,this.instruments,l.GeneratorType.Instrument).filter(function(K){return K.header.name!=="EOP"}).map(function(K){return{header:K.header,globalZone:K.globalZone,zones:K.zones.map(function(se){return{keyRange:se.keyRange,generators:se.generators,modulators:se.modulators,instrument:se.reference}})}})}},{key:"getInstruments",value:function(){var $=this.presetData,R=$.instrumentHeaders,Z=$.instrumentZones,he=$.instrumentModulators,j=$.instrumentGenerators;return Object(f.getItemsInZone)(R,Z,he,j,this.samples,l.GeneratorType.SampleId).filter(function(K){return K.header.name!=="EOI"}).map(function(K){return{header:K.header,globalZone:K.globalZone,zones:K.zones.map(function(se){return{keyRange:se.keyRange,generators:se.generators,modulators:se.modulators,sample:se.reference}})}})}},{key:"getSamples",value:function(){var $=this;return this.presetData.sampleHeaders.filter(function(R){return R.name!=="EOS"}).map(function(R){if(R.name!=="EOS"&&R.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(R.sampleRate," hz in sample '").concat(R.name,"'"));return R.originalPitch>=128&&R.originalPitch<=254&&(R.originalPitch=60),R.startLoop-=R.start,R.endLoop-=R.start,{header:R,data:new Int16Array(new Uint8Array($.sampleData.subarray(2*R.start,2*R.end)).buffer)}})}}]),k}()},"./src/types/bank.ts":function(n,a){},"./src/types/generator.ts":function(n,a,o){var l,u;function c(d,g,O){return g in d?Object.defineProperty(d,g,{value:O,enumerable:!0,configurable:!0,writable:!0}):d[g]=O,d}o.r(a),o.d(a,"GeneratorType",function(){return u}),o.d(a,"DEFAULT_GENERATOR_VALUES",function(){return f}),function(d){d[d.StartAddrsOffset=0]="StartAddrsOffset",d[d.EndAddrsOffset=1]="EndAddrsOffset",d[d.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",d[d.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",d[d.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",d[d.ModLFOToPitch=5]="ModLFOToPitch",d[d.VibLFOToPitch=6]="VibLFOToPitch",d[d.ModEnvToPitch=7]="ModEnvToPitch",d[d.InitialFilterFc=8]="InitialFilterFc",d[d.InitialFilterQ=9]="InitialFilterQ",d[d.ModLFOToFilterFc=10]="ModLFOToFilterFc",d[d.ModEnvToFilterFc=11]="ModEnvToFilterFc",d[d.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",d[d.ModLFOToVolume=13]="ModLFOToVolume",d[d.Unused1=14]="Unused1",d[d.ChorusEffectsSend=15]="ChorusEffectsSend",d[d.ReverbEffectsSend=16]="ReverbEffectsSend",d[d.Pan=17]="Pan",d[d.Unused2=18]="Unused2",d[d.Unused3=19]="Unused3",d[d.Unused4=20]="Unused4",d[d.DelayModLFO=21]="DelayModLFO",d[d.FreqModLFO=22]="FreqModLFO",d[d.DelayVibLFO=23]="DelayVibLFO",d[d.FreqVibLFO=24]="FreqVibLFO",d[d.DelayModEnv=25]="DelayModEnv",d[d.AttackModEnv=26]="AttackModEnv",d[d.HoldModEnv=27]="HoldModEnv",d[d.DecayModEnv=28]="DecayModEnv",d[d.SustainModEnv=29]="SustainModEnv",d[d.ReleaseModEnv=30]="ReleaseModEnv",d[d.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",d[d.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",d[d.DelayVolEnv=33]="DelayVolEnv",d[d.AttackVolEnv=34]="AttackVolEnv",d[d.HoldVolEnv=35]="HoldVolEnv",d[d.DecayVolEnv=36]="DecayVolEnv",d[d.SustainVolEnv=37]="SustainVolEnv",d[d.ReleaseVolEnv=38]="ReleaseVolEnv",d[d.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",d[d.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",d[d.Instrument=41]="Instrument",d[d.Reserved1=42]="Reserved1",d[d.KeyRange=43]="KeyRange",d[d.VelRange=44]="VelRange",d[d.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",d[d.KeyNum=46]="KeyNum",d[d.Velocity=47]="Velocity",d[d.InitialAttenuation=48]="InitialAttenuation",d[d.Reserved2=49]="Reserved2",d[d.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",d[d.CoarseTune=51]="CoarseTune",d[d.FineTune=52]="FineTune",d[d.SampleId=53]="SampleId",d[d.SampleModes=54]="SampleModes",d[d.Reserved3=55]="Reserved3",d[d.ScaleTuning=56]="ScaleTuning",d[d.ExclusiveClass=57]="ExclusiveClass",d[d.OverridingRootKey=58]="OverridingRootKey",d[d.Unused5=59]="Unused5",d[d.EndOper=60]="EndOper"}(u||(u={}));var f=(c(l={},u.StartAddrsOffset,0),c(l,u.EndAddrsOffset,0),c(l,u.StartLoopAddrsOffset,0),c(l,u.EndLoopAddrsOffset,0),c(l,u.StartAddrsCoarseOffset,0),c(l,u.ModLFOToPitch,0),c(l,u.VibLFOToPitch,0),c(l,u.ModEnvToPitch,0),c(l,u.InitialFilterFc,13500),c(l,u.InitialFilterQ,0),c(l,u.ModLFOToFilterFc,0),c(l,u.ModEnvToFilterFc,0),c(l,u.EndAddrsCoarseOffset,0),c(l,u.ModLFOToVolume,0),c(l,u.ChorusEffectsSend,0),c(l,u.ReverbEffectsSend,0),c(l,u.Pan,0),c(l,u.DelayModLFO,-12e3),c(l,u.FreqModLFO,0),c(l,u.DelayVibLFO,-12e3),c(l,u.FreqVibLFO,0),c(l,u.DelayModEnv,-12e3),c(l,u.AttackModEnv,-12e3),c(l,u.HoldModEnv,-12e3),c(l,u.DecayModEnv,-12e3),c(l,u.SustainModEnv,0),c(l,u.ReleaseModEnv,-12e3),c(l,u.KeyNumToModEnvHold,0),c(l,u.KeyNumToModEnvDecay,0),c(l,u.DelayVolEnv,-12e3),c(l,u.AttackVolEnv,-12e3),c(l,u.HoldVolEnv,-12e3),c(l,u.DecayVolEnv,-12e3),c(l,u.SustainVolEnv,0),c(l,u.ReleaseVolEnv,-12e3),c(l,u.KeyNumToVolEnvHold,0),c(l,u.KeyNumToVolEnvDecay,0),c(l,u.StartLoopAddrsCoarseOffset,0),c(l,u.KeyNum,-1),c(l,u.Velocity,-1),c(l,u.InitialAttenuation,0),c(l,u.EndLoopAddrsCoarseOffset,0),c(l,u.CoarseTune,0),c(l,u.FineTune,0),c(l,u.SampleModes,0),c(l,u.ScaleTuning,100),c(l,u.ExclusiveClass,0),c(l,u.OverridingRootKey,-1),l)},"./src/types/index.ts":function(n,a,o){o.r(a);var l=o("./src/types/bank.ts");for(var u in l)u!=="default"&&function($){o.d(a,$,function(){return l[$]})}(u);var c=o("./src/types/generator.ts");o.d(a,"GeneratorType",function(){return c.GeneratorType}),o.d(a,"DEFAULT_GENERATOR_VALUES",function(){return c.DEFAULT_GENERATOR_VALUES});var f=o("./src/types/instrument.ts");for(var u in f)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(u)<0&&function(R){o.d(a,R,function(){return f[R]})}(u);var d=o("./src/types/key.ts");for(var u in d)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(u)<0&&function(R){o.d(a,R,function(){return d[R]})}(u);var g=o("./src/types/metaData.ts");for(var u in g)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(u)<0&&function(R){o.d(a,R,function(){return g[R]})}(u);var O=o("./src/types/modulator.ts");o.d(a,"ControllerType",function(){return O.ControllerType}),o.d(a,"ControllerPolarity",function(){return O.ControllerPolarity}),o.d(a,"ControllerDirection",function(){return O.ControllerDirection}),o.d(a,"ControllerPalette",function(){return O.ControllerPalette}),o.d(a,"Controller",function(){return O.Controller}),o.d(a,"TransformType",function(){return O.TransformType}),o.d(a,"DEFAULT_INSTRUMENT_MODULATORS",function(){return O.DEFAULT_INSTRUMENT_MODULATORS});var S=o("./src/types/preset.ts");for(var u in S)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(u)<0&&function(R){o.d(a,R,function(){return S[R]})}(u);var b=o("./src/types/presetData.ts");for(var u in b)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(u)<0&&function(R){o.d(a,R,function(){return b[R]})}(u);var E=o("./src/types/sample.ts");o.d(a,"SampleType",function(){return E.SampleType});var k=o("./src/types/zone.ts");for(var u in k)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(u)<0&&function(R){o.d(a,R,function(){return k[R]})}(u)},"./src/types/instrument.ts":function(n,a){},"./src/types/key.ts":function(n,a){},"./src/types/metaData.ts":function(n,a){},"./src/types/modulator.ts":function(n,a,o){o.r(a),o.d(a,"ControllerType",function(){return l}),o.d(a,"ControllerPolarity",function(){return u}),o.d(a,"ControllerDirection",function(){return c}),o.d(a,"ControllerPalette",function(){return f}),o.d(a,"Controller",function(){return d}),o.d(a,"TransformType",function(){return g}),o.d(a,"DEFAULT_INSTRUMENT_MODULATORS",function(){return S});var l,u,c,f,d,g,O=o("./src/types/generator.ts");(function(b){b[b.Linear=0]="Linear",b[b.Concave=1]="Concave",b[b.Convex=2]="Convex",b[b.Switch=3]="Switch"})(l||(l={})),function(b){b[b.Unipolar=0]="Unipolar",b[b.Bipolar=1]="Bipolar"}(u||(u={})),function(b){b[b.Increasing=0]="Increasing",b[b.Decreasing=1]="Decreasing"}(c||(c={})),function(b){b[b.GeneralController=0]="GeneralController",b[b.MidiController=1]="MidiController"}(f||(f={})),function(b){b[b.NoController=0]="NoController",b[b.NoteOnVelocity=2]="NoteOnVelocity",b[b.NoteOnKeyNumber=3]="NoteOnKeyNumber",b[b.PolyPressure=10]="PolyPressure",b[b.ChannelPressure=13]="ChannelPressure",b[b.PitchWheel=14]="PitchWheel",b[b.PitchWheelSensitivity=16]="PitchWheelSensitivity",b[b.Link=127]="Link"}(d||(d={})),function(b){b[b.Linear=0]="Linear",b[b.Absolute=2]="Absolute"}(g||(g={}));var S=[{id:O.GeneratorType.InitialAttenuation,source:{type:l.Concave,polarity:u.Unipolar,direction:c.Decreasing,palette:f.GeneralController,index:d.NoteOnVelocity},value:960,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.InitialFilterFc,source:{type:l.Linear,polarity:u.Unipolar,direction:c.Decreasing,palette:f.GeneralController,index:d.NoteOnVelocity},value:-2400,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.VibLFOToPitch,source:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.ChannelPressure},value:50,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.VibLFOToPitch,source:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.MidiController,index:1},value:50,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.InitialAttenuation,source:{type:l.Concave,polarity:u.Unipolar,direction:c.Decreasing,palette:f.MidiController,index:7},value:960,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.InitialAttenuation,source:{type:l.Linear,polarity:u.Bipolar,direction:c.Increasing,palette:f.MidiController,index:10},value:1e3,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.InitialAttenuation,source:{type:l.Concave,polarity:u.Unipolar,direction:c.Decreasing,palette:f.MidiController,index:11},value:960,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.ReverbEffectsSend,source:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.MidiController,index:91},value:200,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.ChorusEffectsSend,source:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.MidiController,index:93},value:200,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.NoController},transform:g.Linear},{id:O.GeneratorType.CoarseTune,source:{type:l.Linear,polarity:u.Bipolar,direction:c.Increasing,palette:f.GeneralController,index:d.PitchWheel},value:12700,valueSource:{type:l.Linear,polarity:u.Unipolar,direction:c.Increasing,palette:f.GeneralController,index:d.PitchWheelSensitivity},transform:g.Linear}]},"./src/types/preset.ts":function(n,a){},"./src/types/presetData.ts":function(n,a){},"./src/types/sample.ts":function(n,a,o){var l;o.r(a),o.d(a,"SampleType",function(){return l}),function(u){u[u.EOS=0]="EOS",u[u.Mono=1]="Mono",u[u.Right=2]="Right",u[u.Left=4]="Left",u[u.Linked=8]="Linked",u[u.RomMono=32769]="RomMono",u[u.RomRight=32770]="RomRight",u[u.RomLeft=32772]="RomLeft",u[u.RomLinked=32776]="RomLinked"}(l||(l={}))},"./src/types/zone.ts":function(n,a){},"./src/utils/buffer.ts":function(n,a,o){o.r(a),o.d(a,"getStringFromBuffer",function(){return l});var l=function(u){return new TextDecoder("utf8").decode(u).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(n,a,o){o.r(a);var l=o("./src/utils/buffer.ts");o.d(a,"getStringFromBuffer",function(){return l.getStringFromBuffer});var u=o("./src/utils/memoize.ts");o.d(a,"memoize",function(){return u.memoize})},"./src/utils/memoize.ts":function(n,a,o){o.r(a),o.d(a,"memoize",function(){return l});var l=function(u){var c={};return function(){for(var f=arguments.length,d=new Array(f),g=0;g<f;g++)d[g]=arguments[g];var O=JSON.stringify(d);if(O in c)return c[O];var S=u.apply(void 0,d);return c[O]=S,S}}}})})})(SoundFont2);var SoundFont2Exports=SoundFont2.exports;const m=s=>Math.pow(2,s/1200),Q=s=>s/1e3,G=(s,e)=>{const n=Math.pow(10,e);return Math.round(s*n)/n};typeof AudioParam<"u"&&(AudioParam.prototype.dahdsr=function(s,e,n,a,o,l,u,c,f){o=Math.max(G(o,4),.001),u=Math.max(G(u,4),.001),f=G(f,4),e=Math.max(e,.001);let d=s;return this.setValueAtTime(e,d),this.setValueAtTime(e,d+=a),this.exponentialRampToValueAtTime(n,d+=o),this.setValueAtTime(n,d+=l),this.exponentialRampToValueAtTime(Math.max(c*n,.001),d+=u),(g,O)=>{this.cancelAndHoldAtTime(g);const S=Math.max(O??e,.001);this.exponentialRampToValueAtTime(S,g+f)}});const T={0:"startAddrOffset",1:"endAddrOffset",2:"startloopAddrsOffset",3:"endloopAddrsOffset",4:"startAddrsCoarseOffset",5:"modLfoToPitch",6:"vibLfoToPitch",7:"modEnvToPitch",8:"initialFilterFc",9:"initialFilterQ",10:"modLfoToFilterFc",11:"modEnvToFilterFc",12:"endAddrsCoarseOffset",13:"modLfoToVolume",14:"unused1",15:"chorusEffectsSend",16:"reverbEffectsSend",17:"pan",18:"unused2",19:"unused3",20:"unused4",21:"delayModLFO",22:"freqModLFO",23:"delayVibLFO",24:"freqVibLFO",25:"delayModEnv",26:"attackModEnv",27:"holdModEnv",28:"decayModEnv",29:"sustainModEnv",30:"releaseModEnv",31:"keyNumToModEnvHold",32:"keyNumToModEnvDecay",33:"delayVolEnv",34:"attackVolEnv",35:"holdVolEnv",36:"decayVolEnv",37:"sustainVolEnv",38:"releaseVolEnv",39:"keyNumToVolEnvHold",40:"keyNumToVolEnvDecay",41:"instrument",42:"reserved1",43:"keyRange",44:"velRange",45:"startloopAddrsCoarseOffset",46:"keyNum",47:"velocity",48:"initialAttenuation",49:"reserved2",50:"endloopAddrsCoarseOffset",51:"coarseTune",52:"fineTune",53:"sampleID",54:"sampleModes",55:"reserved3",56:"scaleTuning",57:"exclusiveClass",58:"overridingRootKey",59:"unused5",60:"endOper"};Object.fromEntries(Object.entries(SoundFont2Exports.DEFAULT_GENERATOR_VALUES).map(([s,e])=>[T[s],e]));const D=(s,e,n,a,o)=>{var l,u,c,f,d,g,O;const S=SoundFont2Exports.DEFAULT_GENERATOR_VALUES[s];if(typeof S!="number")throw new Error(`no default value found for generator with index ${s}`);const b=e.generators[s],E=(u=(l=n.globalZone)==null?void 0:l.generators)==null?void 0:u[s],k=(c=a?.generators)==null?void 0:c[s],$=(d=(f=o.globalZone)==null?void 0:f.generators)==null?void 0:d[s],R=b&&"value"in b?b.value:void 0,Z=E&&"value"in E?E.value:void 0,he=k&&"value"in k?k.value:void 0,j=$&&"value"in $?$.value:void 0,K=(g=R??Z)!=null?g:S,se=(O=he??j)!=null?O:0;return K+se},J=s=>SoundFont2Exports.DEFAULT_GENERATOR_VALUES[s]!==void 0,W=(s,e,n)=>{var a,o,l,u;return Object.fromEntries(Array.from(new Set([Object.keys((o=(a=n.globalZone)==null?void 0:a.generators)!=null?o:{}),Object.keys(e.generators),Object.keys((u=(l=e.instrument.globalZone)==null?void 0:l.generators)!=null?u:{}),Object.keys(s.generators)].flat())).filter(J).map(c=>[T[c],D(parseInt(c),s,e.instrument,e,n)]))};async function ae(s){const e=await fetch(s).then(a=>a.arrayBuffer()),n=new Uint8Array(e);return new SoundFont2Exports.SoundFont2(n)}function X(s,e,n){let{time:a=s.currentTime}=n;const{midi:o,start:l,velocity:u=.3,startLoop:c,endLoop:f,sampleRate:d,originalPitch:g,pitchCorrection:O,type:S,sampleModes:b=0,overridingRootKey:E,fineTune:k=0,startloopAddrsOffset:$=0,startloopAddrsCoarseOffset:R=0,endloopAddrsOffset:Z=0,endloopAddrsCoarseOffset:he=0,delayVolEnv:j=-12e3,attackVolEnv:K=-12e3,holdVolEnv:se=-12e3,decayVolEnv:de=-12e3,sustainVolEnv:ue=0,releaseVolEnv:me=-12e3,pan:ge=0,...Oe}=n,be=100*(E!==void 0&&E!==-1?E:g)+O-k,Ae=o*100-be,Ne=1*Math.pow(2,Ae/1200);e.playbackRate.value=Ne;const Re=c+$+R*32768,Fe=f+Z+he*32768;Fe>Re&&b===1?(e.loopStart=Re/d,e.loopEnd=Fe/d,e.loop=!0):b===3&&console.warn("unimplemented sampleMode 3 (play till end on note off)"),Object.keys(Oe).filter(Pe=>!["name","instrument","keyRange","sampleID","end"].includes(Pe)).length;const Ue=s.createGain(),$e=[a,0,u,m(j),m(K),m(se),m(de),ue>=960?0:1-Q(ue),m(me)],Ie=Ue.gain.dahdsr(...$e),Xe=s.createStereoPanner();return Xe.pan.value=ge/1e3,Ue.connect(Xe),e.connect(Ue),Xe.connect(s.destination),e.start(a),(Pe=s.currentTime)=>{e.stop(Pe+m(me)),Ie(Pe)}}function Y(s,e,n={}){const{header:a,data:o}=e,l=new Float32Array(o.length);for(let f=0;f<o.length;f++)l[f]=o[f]/32768;const u=s.createBuffer(1,l.length,a.sampleRate);u.getChannelData(0).set(l);const c=s.createBufferSource();return c.buffer=u,n={...a,...n},X(s,c,n)}const C=(s,e)=>!s.keyRange||s.keyRange.lo<=e&&e<=s.keyRange.hi,x=(s,e)=>s.zones.filter(n=>C(n,e)&&n.instrument).map(n=>n.instrument.zones.filter(a=>C(a,e)).map(a=>{const o=W(a,n,s);return{...a,mergedGenerators:o}})).flat(),ce=(s,e,n,a=s.currentTime)=>{const o=x(e,n).map(l=>Y(s,l.sample,{...l.mergedGenerators,midi:n,time:a}));return(l=s.currentTime)=>{o.forEach(u=>u(l))}};Pattern$1.prototype.soundfont=function(s,e=0){return this.onTrigger((n,a,o)=>{const l=getAudioContext(),u=getPlayableNoteValue(a),c=s.presets[e%s.presets.length],f=l.currentTime+n-o,d=[l,c,noteToMidi$1(u),f];ce(...d)(f+a.duration)})};const soundfontCache=new Map;function loadSoundfont(s){if(soundfontCache.get(s))return soundfontCache.get(s);const e=ae(s);return soundfontCache.set(s,e),e}const index$6=Object.freeze(Object.defineProperty({__proto__:null,getFontBufferSource,loadSoundfont,registerSoundfonts,soundfontList:list,startPresetNote:ce},Symbol.toStringTag,{value:"Module"}));async function prebake(){const s=evalScope(core,Promise.resolve().then(()=>index$9),Promise.resolve().then(()=>index$1),Promise.resolve().then(()=>index$8),Promise.resolve().then(()=>index$7),Promise.resolve().then(()=>hydra),Promise.resolve().then(()=>index$6),Promise.resolve().then(()=>index),controls),e="https://raw.githubusercontent.com/felixroos/dough-samples/main/";await Promise.all([s,registerSynthSounds(),registerZZFXSounds(),registerSoundfonts(),samples(`${e}/tidal-drum-machines.json`),samples(`${e}/piano.json`),samples(`${e}/Dirt-Samples.json`),samples(`${e}/EmuSP12.json`),samples(`${e}/vcsl.json`)])}function camelToKebab(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kebabToCamel(s){return s.replace(/-([a-z])/g,function(e,n){return n.toUpperCase()})}const initialSettings={keybindings:"strudelTheme",isLineNumbersDisplayed:!0,isActiveLineHighlighted:!0,isAutoCompletionEnabled:!1,isPatternHighlightingEnabled:!0,isFlashEnabled:!0,isTooltipEnabled:!1,isLineWrappingEnabled:!1,theme:"strudelTheme",fontFamily:"monospace",fontSize:18},settingAttributes=Object.keys(initialSettings).map(camelToKebab),parseAttribute=(s,e)=>{const n=kebabToCamel(s),a=typeof initialSettings[n];return a==="boolean"?["1","true"].includes(e):a==="number"?Number(e):e};class StrudelRepl extends HTMLElement{static observedAttributes=["code",...settingAttributes];settings=initialSettings;editor=null;constructor(){super()}attributeChangedCallback(e,n,a){if(e==="code")this.code=a,this.editor?.setCode(a);else if(settingAttributes.includes(e)){const o=kebabToCamel(e);this.settings[o]=parseAttribute(e,a),this.editor?.updateSettings(this.settings)}}connectedCallback(){setTimeout(()=>{const o=(this.innerHTML+"").replace("<!--","").replace("-->","").trim();o&&this.setAttribute("code",o)});const e=document.createElement("div");this.parentElement.insertBefore(e,this.nextSibling);const n=getDrawContext(),a=[-2,2];this.editor=new StrudelMirror({defaultOutput:webaudioOutput,getTime:()=>getAudioContext().currentTime,transpiler,root:e,initialCode:"// LOADING",pattern:silence,settings:this.settings,drawTime:a,onDraw:(o,l,u,c)=>{c.length&&n.clearRect(0,0,n.canvas.width*2,n.canvas.height*2),c?.forEach(f=>{f(n,l,o,a,{clear:!1})})},prebake,afterEval:({code:o})=>{}}),this.editor.updateSettings(this.settings),this.editor.setCode(this.code)}}customElements.define("strudel-editor",StrudelRepl),window.process={env:{NODE_ENV:"development"}};var fillStr$1=(s,e)=>Array(Math.abs(e)+1).join(s);function deprecate(s,e,n){return function(...a){return console.warn(`${s} is deprecated. Use ${e}.`),n.apply(this,a)}}function isNamed(s){return s!==null&&typeof s=="object"&&typeof s.name=="string"}function isPitch(s){return s!==null&&typeof s=="object"&&typeof s.step=="number"&&typeof s.alt=="number"}var FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(s=>Math.floor(s*7/12));function encode(s){const{step:e,alt:n,oct:a,dir:o=1}=s,l=FIFTHS[e]+7*n;if(a===void 0)return[o*l];const u=a-STEPS_TO_OCTS[e]-4*n;return[o*l,o*u]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function decode(s){const[e,n,a]=s,o=FIFTHS_TO_STEPS[unaltered(e)],l=Math.floor((e+1)/7);if(n===void 0)return{step:o,alt:l,dir:a};const u=n+4*l+STEPS_TO_OCTS[o];return{step:o,alt:l,oct:u,dir:a}}function unaltered(s){const e=(s+1)%7;return e<0?7+e:e}var NoNote={empty:!0,name:"",pc:"",acc:""},cache$2=new Map,stepToLetter=s=>"CDEFGAB".charAt(s),altToAcc=s=>s<0?fillStr$1("b",-s):fillStr$1("#",s),accToAlt=s=>s[0]==="b"?-s.length:s.length;function note(s){const e=JSON.stringify(s),n=cache$2.get(e);if(n)return n;const a=typeof s=="string"?parse$2(s):isPitch(s)?note(pitchName(s)):isNamed(s)?note(s.name):NoNote;return cache$2.set(e,a),a}var REGEX$5=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(s){const e=REGEX$5.exec(s);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}function coordToNote(s){return note(decode(s))}var mod=(s,e)=>(s%e+e)%e,SEMI=[0,2,4,5,7,9,11];function parse$2(s){const e=tokenizeNote(s);if(e[0]===""||e[3]!=="")return NoNote;const n=e[0],a=e[1],o=e[2],l=(n.charCodeAt(0)+3)%7,u=accToAlt(a),c=o.length?+o:void 0,f=encode({step:l,alt:u,oct:c}),d=n+a+o,g=n+a,O=(SEMI[l]+u+120)%12,S=c===void 0?mod(SEMI[l]+u,12)-12*99:SEMI[l]+u+12*(c+1),b=S>=0&&S<=127?S:null,E=c===void 0?null:Math.pow(2,(S-69)/12)*440;return{empty:!1,acc:a,alt:u,chroma:O,coord:f,freq:E,height:S,letter:n,midi:b,name:d,oct:c,pc:g,step:l}}function pitchName(s){const{step:e,alt:n,oct:a}=s,o=stepToLetter(e);if(!o)return"";const l=o+altToAcc(n);return a||a===0?l+a:l}var NoInterval={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX2=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(s){const e=REGEX2.exec(`${s}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var cache2={};function interval(s){return typeof s=="string"?cache2[s]||(cache2[s]=parse2(s)):isPitch(s)?interval(pitchName2(s)):isNamed(s)?interval(s.name):NoInterval}var SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse2(s){const e=tokenizeInterval(s);if(e[0]==="")return NoInterval;const n=+e[0],a=e[1],o=(Math.abs(n)-1)%7,l=TYPES[o];if(l==="M"&&a==="P")return NoInterval;const u=l==="M"?"majorable":"perfectable",c=""+n+a,f=n<0?-1:1,d=n===8||n===-8?n:f*(o+1),g=qToAlt(u,a),O=Math.floor((Math.abs(n)-1)/7),S=f*(SIZES[o]+g+12*O),b=(f*(SIZES[o]+g)%12+12)%12,E=encode({step:o,alt:g,oct:O,dir:f});return{empty:!1,name:c,num:n,q:a,step:o,alt:g,dir:f,type:u,simple:d,semitones:S,chroma:b,coord:E,oct:O}}function coordToInterval(s,e){const[n,a=0]=s,o=n*7+a*12<0,l=e||o?[-n,-a,-1]:[n,a,1];return interval(decode(l))}function qToAlt(s,e){return e==="M"&&s==="majorable"||e==="P"&&s==="perfectable"?0:e==="m"&&s==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(s==="perfectable"?e.length:e.length+1):0}function pitchName2(s){const{step:e,alt:n,oct:a=0,dir:o}=s;if(!o)return"";const l=e+1+7*a,u=l===0?e+1:l,c=o<0?"-":"",f=TYPES[e]==="M"?"majorable":"perfectable";return c+u+altToQ(f,n)}function altToQ(s,e){return e===0?s==="majorable"?"M":"P":e===-1&&s==="majorable"?"m":e>0?fillStr$1("A",e):fillStr$1("d",s==="perfectable"?e:e+1)}function transpose$4(s,e){const n=note(s),a=Array.isArray(e)?e:interval(e).coord;if(n.empty||!a||a.length<2)return"";const o=n.coord,l=o.length===1?[o[0]+a[0]]:[o[0]+a[0],o[1]+a[1]];return coordToNote(l).name}function tonicIntervalsTransposer(s,e){const n=s.length;return a=>{if(!e)return"";const o=a<0?(n- -a%n)%n:a%n,l=Math.floor(a/n),u=transpose$4(e,[0,l]);return transpose$4(u,s[o])}}function distance$3(s,e){const n=note(s),a=note(e);if(n.empty||a.empty)return"";const o=n.coord,l=a.coord,u=l[0]-o[0],c=o.length===2&&l.length===2?l[1]-o[1]:-Math.floor(u*7/12),f=a.height===n.height&&a.midi!==null&&n.midi!==null&&n.step>a.step;return coordToInterval([u,c],f).name}const Core=Object.freeze(Object.defineProperty({__proto__:null,accToAlt,altToAcc,coordToInterval,coordToNote,decode,deprecate,distance:distance$3,encode,fillStr:fillStr$1,interval,isNamed,isPitch,note,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$4},Symbol.toStringTag,{value:"Module"}));var fillStr=(s,e)=>Array(e+1).join(s),REGEX$4=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize$3(s){const e=REGEX$4.exec(s);return e?[e[1],e[2],e[3]]:["","",""]}function abcToScientificNotation(s){const[e,n,a]=tokenize$3(s);if(n==="")return"";let o=4;for(let u=0;u<a.length;u++)o+=a.charAt(u)===","?-1:1;const l=e[0]==="_"?e.replace(/_/g,"b"):e[0]==="^"?e.replace(/\^/g,"#"):"";return n.charCodeAt(0)>96?n.toUpperCase()+l+(o+1):n+l+o}function scientificToAbcNotation(s){const e=note(s);if(e.empty||!e.oct&&e.oct!==0)return"";const{letter:n,acc:a,oct:o}=e,l=a[0]==="b"?a.replace(/b/g,"_"):a.replace(/#/g,"^"),u=o>4?n.toLowerCase():n,c=o===5?"":o>4?fillStr("'",o-5):fillStr(",",4-o);return l+u+c}function transpose$3(s,e){return scientificToAbcNotation(transpose$4(abcToScientificNotation(s),e))}function distance$2(s,e){return distance$3(abcToScientificNotation(s),abcToScientificNotation(e))}var abc_notation_default={abcToScientificNotation,scientificToAbcNotation,tokenize:tokenize$3,transpose:transpose$3,distance:distance$2};function ascR$1(s,e){const n=[];for(;e--;n[e]=e+s);return n}function descR$1(s,e){const n=[];for(;e--;n[e]=s-e);return n}function range$1(s,e){return s<e?ascR$1(s,e-s+1):descR$1(s,s-e+1)}function rotate$1(s,e){const n=e.length,a=(s%n+n)%n;return e.slice(a,n).concat(e.slice(0,a))}function compact$1(s){return s.filter(e=>e===0||e)}function sortedNoteNames(s){return s.map(n=>note(n)).filter(n=>!n.empty).sort((n,a)=>n.height-a.height).map(n=>n.name)}function sortedUniqNoteNames(s){return sortedNoteNames(s).filter((e,n,a)=>n===0||e!==a[n-1])}function shuffle$1(s,e=Math.random){let n,a,o=s.length;for(;o;)n=Math.floor(e()*o--),a=s[o],s[o]=s[n],s[n]=a;return s}function permutations$1(s){return s.length===0?[[]]:permutations$1(s.slice(1)).reduce((e,n)=>e.concat(s.map((a,o)=>{const l=n.slice();return l.splice(o,0,s[0]),l})),[])}const index$5=Object.freeze(Object.defineProperty({__proto__:null,compact:compact$1,permutations:permutations$1,range:range$1,rotate:rotate$1,shuffle:shuffle$1,sortedNoteNames,sortedUniqNoteNames},Symbol.toStringTag,{value:"Module"}));function ascR(s,e){const n=[];for(;e--;n[e]=e+s);return n}function descR(s,e){const n=[];for(;e--;n[e]=s-e);return n}function range(s,e){return s<e?ascR(s,e-s+1):descR(s,s-e+1)}function rotate(s,e){const n=e.length,a=(s%n+n)%n;return e.slice(a,n).concat(e.slice(0,a))}function compact(s){return s.filter(e=>e===0||e)}function shuffle(s,e=Math.random){let n,a,o=s.length;for(;o;)n=Math.floor(e()*o--),a=s[o],s[o]=s[n],s[n]=a;return s}function permutations(s){return s.length===0?[[]]:permutations(s.slice(1)).reduce((e,n)=>e.concat(s.map((a,o)=>{const l=n.slice();return l.splice(o,0,s[0]),l})),[])}var collection_default={compact,permutations,range,rotate,shuffle},EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=s=>Number(s).toString(2),chromaToNumber=s=>parseInt(s,2),REGEX$3=/^[01]{12}$/;function isChroma(s){return REGEX$3.test(s)}var isPcsetNum=s=>typeof s=="number"&&s>=0&&s<=4095,isPcset=s=>s&&isChroma(s.chroma),cache$1={[EmptyPcset.chroma]:EmptyPcset};function get$a(s){const e=isChroma(s)?s:isPcsetNum(s)?setNumToChroma(s):Array.isArray(s)?listToChroma(s):isPcset(s)?s.chroma:EmptyPcset.chroma;return cache$1[e]=cache$1[e]||chromaToPcset(e)}var pcset$1=deprecate("Pcset.pcset","Pcset.get",get$a),chroma$2=s=>get$a(s).chroma,intervals=s=>get$a(s).intervals,num$1=s=>get$a(s).setNum,IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(s){const e=[];for(let n=0;n<12;n++)s.charAt(n)==="1"&&e.push(IVLS[n]);return e}function chromas(){return range(2048,4095).map(setNumToChroma)}function modes$1(s,e=!0){const a=get$a(s).chroma.split("");return compact(a.map((o,l)=>{const u=rotate(l,a);return e&&u[0]==="0"?null:u.join("")}))}function isEqual(s,e){return get$a(s).setNum===get$a(e).setNum}function isSubsetOf(s){const e=get$a(s).setNum;return n=>{const a=get$a(n).setNum;return e&&e!==a&&(a&e)===a}}function isSupersetOf(s){const e=get$a(s).setNum;return n=>{const a=get$a(n).setNum;return e&&e!==a&&(a|e)===a}}function isNoteIncludedIn(s){const e=get$a(s);return n=>{const a=note(n);return e&&!a.empty&&e.chroma.charAt(a.chroma)==="1"}}function filter(s){const e=isNoteIncludedIn(s);return n=>n.filter(e)}var pcset_default={get:get$a,chroma:chroma$2,num:num$1,intervals,chromas,isSupersetOf,isSubsetOf,isNoteIncludedIn,isEqual,filter,modes:modes$1,pcset:pcset$1};function chromaRotations(s){const e=s.split("");return e.map((n,a)=>rotate(a,e).join(""))}function chromaToPcset(s){const e=chromaToNumber(s),n=chromaRotations(s).map(chromaToNumber).filter(l=>l>=2048).sort()[0],a=setNumToChroma(n),o=chromaToIntervals(s);return{empty:!1,name:"",setNum:e,chroma:s,normalized:a,intervals:o}}function listToChroma(s){if(s.length===0)return EmptyPcset.chroma;let e;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let a=0;a<s.length;a++)e=note(s[a]),e.empty&&(e=interval(s[a])),e.empty||(n[e.chroma]=1);return n.join("")}var CHORDS=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$2=CHORDS,NoChordType={...EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},dictionary$1=[],index$4={};function get$9(s){return index$4[s]||NoChordType}var chordType=deprecate("ChordType.chordType","ChordType.get",get$9);function names$8(){return dictionary$1.map(s=>s.name).filter(s=>s)}function symbols(){return dictionary$1.map(s=>s.aliases[0]).filter(s=>s)}function keys$1(){return Object.keys(index$4)}function all$2(){return dictionary$1.slice()}var entries$2=deprecate("ChordType.entries","ChordType.all",all$2);function removeAll$1(){dictionary$1=[],index$4={}}function add$3(s,e,n){const a=getQuality(s),o={...get$a(s),name:n||"",quality:a,intervals:s,aliases:e};dictionary$1.push(o),o.name&&(index$4[o.name]=o),index$4[o.setNum]=o,index$4[o.chroma]=o,o.aliases.forEach(l=>addAlias$1(o,l))}function addAlias$1(s,e){index$4[e]=s}function getQuality(s){const e=n=>s.indexOf(n)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}data_default$2.forEach(([s,e,n])=>add$3(s.split(" "),n.split(" "),e)),dictionary$1.sort((s,e)=>s.setNum-e.setNum);var chord_type_default={names:names$8,symbols,get:get$9,all:all$2,add:add$3,removeAll:removeAll$1,keys:keys$1,entries:entries$2,chordType},namedSet=s=>{const e=s.reduce((n,a)=>{const o=note(a).chroma;return o!==void 0&&(n[o]=n[o]||note(a).name),n},{});return n=>e[n]};function detect$1(s,e={}){const n=s.map(o=>note(o).pc).filter(o=>o);return note.length===0?[]:findMatches(n,1,e).filter(o=>o.weight).sort((o,l)=>l.weight-o.weight).map(o=>o.name)}var BITMASK={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},testChromaNumber=s=>e=>!!(e&s),hasAnyThird=testChromaNumber(BITMASK.anyThirds),hasPerfectFifth=testChromaNumber(BITMASK.perfectFifth),hasAnySeventh=testChromaNumber(BITMASK.anySeventh),hasNonPerfectFifth=testChromaNumber(BITMASK.nonPerfectFifths);function hasAnyThirdAndPerfectFifthAndAnySeventh(s){const e=parseInt(s.chroma,2);return hasAnyThird(e)&&hasPerfectFifth(e)&&hasAnySeventh(e)}function withPerfectFifth(s){const e=parseInt(s,2);return hasNonPerfectFifth(e)?s:(e|16).toString(2)}function findMatches(s,e,n){const a=s[0],o=note(a).chroma,l=namedSet(s),u=modes$1(s,!1),c=[];return u.forEach((f,d)=>{const g=n.assumePerfectFifth&&withPerfectFifth(f);all$2().filter(S=>n.assumePerfectFifth&&hasAnyThirdAndPerfectFifthAndAnySeventh(S)?S.chroma===g:S.chroma===f).forEach(S=>{const b=S.aliases[0],E=l(d);d!==o?c.push({weight:.5*e,name:`${E}${b}/${a}`}):c.push({weight:1*e,name:`${E}${b}`})})}),c}var SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],data_default$1=SCALES,NoScaleType={...EmptyPcset,intervals:[],aliases:[]},dictionary=[],index$3={};function names$7(){return dictionary.map(s=>s.name)}function get$8(s){return index$3[s]||NoScaleType}var scaleType=deprecate("ScaleDictionary.scaleType","ScaleType.get",get$8);function all$1(){return dictionary.slice()}var entries$1=deprecate("ScaleDictionary.entries","ScaleType.all",all$1);function keys(){return Object.keys(index$3)}function removeAll(){dictionary=[],index$3={}}function add$2(s,e,n=[]){const a={...get$a(s),name:e,intervals:s,aliases:n};return dictionary.push(a),index$3[a.name]=a,index$3[a.setNum]=a,index$3[a.chroma]=a,a.aliases.forEach(o=>addAlias(a,o)),a}function addAlias(s,e){index$3[e]=s}data_default$1.forEach(([s,e,...n])=>add$2(s.split(" "),e,n));var scale_type_default={names:names$7,get:get$8,all:all$1,add:add$2,removeAll,keys,entries:entries$1,scaleType},NoChord={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]},NUM_TYPES=/^(6|64|7|9|11|13)$/;function tokenize$2(s){const[e,n,a,o]=tokenizeNote(s);return e===""?["",s]:e==="A"&&o==="ug"?["","aug"]:!o&&(a==="4"||a==="5")?[e+n,a]:NUM_TYPES.test(a)?[e+n,a+o]:[e+n+a,o]}function get$7(s){if(s==="")return NoChord;if(Array.isArray(s)&&s.length===2)return getChord(s[1],s[0]);{const[e,n]=tokenize$2(s),a=getChord(n,e);return a.empty?getChord(s):a}}function getChord(s,e,n){const a=get$9(s),o=note(e||""),l=note(n||"");if(a.empty||e&&o.empty||n&&l.empty)return NoChord;const u=distance$3(o.pc,l.pc),c=a.intervals.indexOf(u)+1;if(!l.empty&&!c)return NoChord;const f=Array.from(a.intervals);for(let S=1;S<c;S++){const b=f[0][0],E=f[0][1],k=parseInt(b,10)+7;f.push(`${k}${E}`),f.shift()}const d=o.empty?[]:f.map(S=>transpose$4(o,S));s=a.aliases.indexOf(s)!==-1?s:a.aliases[0];const g=`${o.empty?"":o.pc}${s}${l.empty||c<=1?"":"/"+l.pc}`,O=`${e?o.pc+" ":""}${a.name}${c>1&&n?" over "+l.pc:""}`;return{...a,name:O,symbol:g,type:a.name,root:l.name,intervals:f,rootDegree:c,tonic:o.name,notes:d}}var chord=deprecate("Chord.chord","Chord.get",get$7);function transpose$2(s,e){const[n,a]=tokenize$2(s);return n?transpose$4(n,e)+a:s}function chordScales(s){const e=get$7(s),n=isSupersetOf(e.chroma);return all$1().filter(a=>n(a.chroma)).map(a=>a.name)}function extended$1(s){const e=get$7(s),n=isSupersetOf(e.chroma);return all$2().filter(a=>n(a.chroma)).map(a=>e.tonic+a.aliases[0])}function reduced$1(s){const e=get$7(s),n=isSubsetOf(e.chroma);return all$2().filter(a=>n(a.chroma)).map(a=>e.tonic+a.aliases[0])}function degrees$1(s){const{intervals:e,tonic:n}=get$7(s),a=tonicIntervalsTransposer(e,n);return o=>o?a(o>0?o-1:o):""}function steps$1(s){const{intervals:e,tonic:n}=get$7(s);return tonicIntervalsTransposer(e,n)}var chord_default={getChord,get:get$7,detect:detect$1,chordScales,extended:extended$1,reduced:reduced$1,tokenize:tokenize$2,transpose:transpose$2,degrees:degrees$1,steps:steps$1,chord},DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],data_default=DATA,VALUES=[];data_default.forEach(([s,e,n])=>add$1(s,e,n));var NoDuration={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names$6(){return VALUES.reduce((s,e)=>(e.names.forEach(n=>s.push(n)),s),[])}function shorthands(){return VALUES.map(s=>s.shorthand)}var REGEX$2=/^([^.]+)(\.*)$/;function get$6(s){const[e,n,a]=REGEX$2.exec(s)||[],o=VALUES.find(c=>c.shorthand===n||c.names.includes(n));if(!o)return NoDuration;const l=calcDots(o.fraction,a.length),u=l[0]/l[1];return{...o,name:s,dots:a,value:u,fraction:l}}var value=s=>get$6(s).value,fraction=s=>get$6(s).fraction,duration_value_default={names:names$6,shorthands,get:get$6,value,fraction};function add$1(s,e,n){VALUES.push({empty:!1,dots:"",name:"",value:1/s,fraction:s<1?[1/s,1]:[1,s],shorthand:e,names:n})}function calcDots(s,e){const n=Math.pow(2,e);let a=s[0]*n,o=s[1]*n;const l=a;for(let u=0;u<e;u++)a+=l/Math.pow(2,u+1);for(;a%2===0&&o%2===0;)a/=2,o/=2;return[a,o]}function names$5(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get$5=interval,name$1=s=>interval(s).name,semitones=s=>interval(s).semitones,quality=s=>interval(s).q,num=s=>interval(s).num;function simplify$1(s){const e=interval(s);return e.empty?"":e.simple+e.q}function invert(s){const e=interval(s);if(e.empty)return"";const n=(7-e.step)%7,a=e.type==="perfectable"?-e.alt:-(e.alt+1);return interval({step:n,alt:a,oct:e.oct,dir:e.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(s){const e=s<0?-1:1,n=Math.abs(s),a=n%12,o=Math.floor(n/12);return e*(IN[a]+7*o)+IQ[a]}var distance$1=distance$3,add=combinator((s,e)=>[s[0]+e[0],s[1]+e[1]]),addTo=s=>e=>add(s,e),substract=combinator((s,e)=>[s[0]-e[0],s[1]-e[1]]);function transposeFifths$1(s,e){const n=get$5(s);if(n.empty)return"";const[a,o,l]=n.coord;return coordToInterval([a+e,o,l]).name}var interval_default={names:names$5,get:get$5,name:name$1,num,semitones,quality,fromSemitones,distance:distance$1,invert,simplify:simplify$1,add,addTo,substract,transposeFifths:transposeFifths$1};function combinator(s){return(e,n)=>{const a=interval(e).coord,o=interval(n).coord;if(a&&o){const l=s(a,o);return coordToInterval(l).name}}}function isMidi(s){return+s>=0&&+s<=127}function toMidi(s){if(isMidi(s))return+s;const e=note(s);return e.empty?null:e.midi}function midiToFreq(s,e=440){return Math.pow(2,(s-69)/12)*e}var L2=Math.log(2),L440=Math.log(440);function freqToMidi(s){const e=12*(Math.log(s)-L440)/L2+69;return Math.round(e*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(s,e={}){if(isNaN(s)||s===-1/0||s===1/0)return"";s=Math.round(s);const a=(e.sharps===!0?SHARPS:FLATS)[s%12];if(e.pitchClass)return a;const o=Math.floor(s/12)-1;return a+o}function chroma$1(s){return s%12}function pcsetFromChroma(s){return s.split("").reduce((e,n,a)=>(a<12&&n==="1"&&e.push(a),e),[])}function pcsetFromMidi(s){return s.map(chroma$1).sort((e,n)=>e-n).filter((e,n,a)=>n===0||e!==a[n-1])}function pcset(s){return Array.isArray(s)?pcsetFromMidi(s):pcsetFromChroma(s)}function pcsetNearest(s){const e=pcset(s);return n=>{const a=chroma$1(n);for(let o=0;o<12;o++){if(e.includes(a+o))return n+o;if(e.includes(a-o))return n-o}}}function pcsetSteps(s,e){const n=pcset(s),a=n.length;return o=>{const l=o<0?(a- -o%a)%a:o%a,u=Math.floor(o/a);return n[l]+u*12+e}}function pcsetDegrees(s,e){const n=pcsetSteps(s,e);return a=>{if(a!==0)return n(a>0?a-1:a)}}var midi_default={chroma:chroma$1,freqToMidi,isMidi,midiToFreq,midiToNoteName,pcsetNearest,pcset,pcsetDegrees,pcsetSteps,toMidi},NAMES$2=["C","D","E","F","G","A","B"],toName=s=>s.name,onlyNotes=s=>s.map(note).filter(e=>!e.empty);function names$4(s){return s===void 0?NAMES$2.slice():Array.isArray(s)?onlyNotes(s).map(toName):[]}var get$4=note,name=s=>get$4(s).name,pitchClass=s=>get$4(s).pc,accidentals=s=>get$4(s).acc,octave=s=>get$4(s).oct,midi=s=>get$4(s).midi,freq=s=>get$4(s).freq,chroma=s=>get$4(s).chroma;function fromMidi(s){return midiToNoteName(s)}function fromFreq(s){return midiToNoteName(freqToMidi(s))}function fromFreqSharps(s){return midiToNoteName(freqToMidi(s),{sharps:!0})}function fromMidiSharps(s){return midiToNoteName(s,{sharps:!0})}var transpose$1=transpose$4,tr=transpose$4,transposeBy=s=>e=>transpose$1(e,s),trBy=transposeBy,transposeFrom=s=>e=>transpose$1(s,e),trFrom=transposeFrom;function transposeFifths(s,e){return transpose$1(s,[e,0])}var trFifths=transposeFifths;function transposeOctaves(s,e){return transpose$1(s,[0,e])}var ascending=(s,e)=>s.height-e.height,descending=(s,e)=>e.height-s.height;function sortedNames(s,e){return e=e||ascending,onlyNotes(s).sort(e).map(toName)}function sortedUniqNames(s){return sortedNames(s,ascending).filter((e,n,a)=>n===0||e!==a[n-1])}var simplify=s=>{const e=get$4(s);return e.empty?"":midiToNoteName(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function enharmonic(s,e){const n=get$4(s);if(n.empty)return"";const a=get$4(e||midiToNoteName(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(a.empty||a.chroma!==n.chroma)return"";if(n.oct===void 0)return a.pc;const o=n.chroma-n.alt,l=a.chroma-a.alt,u=o>11||l<0?-1:o<0||l>11?1:0,c=n.oct+u;return a.pc+c}var note_default={names:names$4,get:get$4,name,pitchClass,accidentals,octave,midi,ascending,descending,sortedNames,sortedUniqNames,fromMidi,fromMidiSharps,freq,fromFreq,fromFreqSharps,chroma,transpose:transpose$1,tr,transposeBy,trBy,transposeFrom,trFrom,transposeFifths,transposeOctaves,trFifths,simplify,enharmonic},NoRomanNumeral={empty:!0,name:"",chordType:""},cache={};function get$3(s){return typeof s=="string"?cache[s]||(cache[s]=parse$1(s)):typeof s=="number"?get$3(NAMES$1[s]||""):isPitch(s)?fromPitch(s):isNamed(s)?get$3(s.name):NoRomanNumeral}var romanNumeral=deprecate("RomanNumeral.romanNumeral","RomanNumeral.get",get$3);function names$3(s=!0){return(s?NAMES$1:NAMES_MINOR).slice()}function fromPitch(s){return get$3(altToAcc(s.alt)+NAMES$1[s.step])}var REGEX$1=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize$1(s){return REGEX$1.exec(s)||["","","",""]}var ROMANS="I II III IV V VI VII",NAMES$1=ROMANS.split(" "),NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse$1(s){const[e,n,a,o]=tokenize$1(s);if(!a)return NoRomanNumeral;const l=a.toUpperCase(),u=NAMES$1.indexOf(l),c=accToAlt(n),f=1;return{empty:!1,name:e,roman:a,interval:interval({step:u,alt:c,dir:f}).name,acc:n,chordType:o,alt:c,step:u,major:a===l,oct:0,dir:f}}var roman_numeral_default={names:names$3,get:get$3,romanNumeral},Empty=Object.freeze([]),NoKey={type:"major",tonic:"",alteration:0,keySignature:""},NoKeyScale={tonic:"",grades:Empty,intervals:Empty,scale:Empty,triads:Empty,chords:Empty,chordsHarmonicFunction:Empty,chordScales:Empty},NoMajorKey={...NoKey,...NoKeyScale,type:"major",minorRelative:"",scale:Empty,secondaryDominants:Empty,secondaryDominantsMinorRelative:Empty,substituteDominants:Empty,substituteDominantsMinorRelative:Empty},NoMinorKey={...NoKey,type:"minor",relativeMajor:"",natural:NoKeyScale,harmonic:NoKeyScale,melodic:NoKeyScale},mapScaleToType=(s,e,n="")=>e.map((a,o)=>`${s[o]}${n}${a}`);function keyScale(s,e,n,a,o){return l=>{const u=s.map(f=>get$3(f).interval||""),c=u.map(f=>transpose$4(l,f));return{tonic:l,grades:s,intervals:u,scale:c,triads:mapScaleToType(c,e),chords:mapScaleToType(c,n),chordsHarmonicFunction:a.slice(),chordScales:mapScaleToType(c,o," ")}}}var distInFifths=(s,e)=>{const n=note(s),a=note(e);return n.empty||a.empty?0:a.coord[0]-n.coord[0]},MajorScale=keyScale("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NaturalScale=keyScale("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),HarmonicScale=keyScale("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),MelodicScale=keyScale("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function majorKey(s){const e=note(s).pc;if(!e)return NoMajorKey;const n=MajorScale(e),a=distInFifths("C",e),o=l=>{const u=get$3(l);return u.empty?"":transpose$4(s,u.interval)+u.chordType};return{...n,type:"major",minorRelative:transpose$4(e,"-3m"),alteration:a,keySignature:altToAcc(a),secondaryDominants:"- VI7 VII7 I7 II7 III7 -".split(" ").map(o),secondaryDominantsMinorRelative:"- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ").map(o),substituteDominants:"- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ").map(o),substituteDominantsMinorRelative:"- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" ").map(o)}}function minorKey(s){const e=note(s).pc;if(!e)return NoMinorKey;const n=distInFifths("C",e)-3;return{type:"minor",tonic:e,relativeMajor:transpose$4(e,"3m"),alteration:n,keySignature:altToAcc(n),natural:NaturalScale(e),harmonic:HarmonicScale(e),melodic:MelodicScale(e)}}function majorTonicFromKeySignature(s){return typeof s=="number"?transposeFifths("C",s):typeof s=="string"&&/^b+|#+$/.test(s)?transposeFifths("C",accToAlt(s)):null}var key_default={majorKey,majorTonicFromKeySignature,minorKey},MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index$2={};modes.forEach(s=>{index$2[s.name]=s,s.aliases.forEach(e=>{index$2[e]=s})});function get$2(s){return typeof s=="string"?index$2[s.toLowerCase()]||NoMode:s&&s.name?get$2(s.name):NoMode}var mode=deprecate("Mode.mode","Mode.get",get$2);function all(){return modes.slice()}var entries=deprecate("Mode.mode","Mode.all",all);function names$2(){return modes.map(s=>s.name)}function toMode(s){const[e,n,a,o,l,u,c]=s,f=c?[c]:[],d=Number(n).toString(2);return{empty:!1,intervals:get$8(o).intervals,modeNum:e,chroma:d,normalized:d,name:o,setNum:n,alt:a,triad:l,seventh:u,aliases:f}}function notes(s,e){return get$2(s).intervals.map(n=>transpose$4(e,n))}function chords(s){return(e,n)=>{const a=get$2(e);if(a.empty)return[];const o=rotate(a.modeNum,s),l=a.intervals.map(u=>transpose$4(n,u));return o.map((u,c)=>l[c]+u)}}var triads$1=chords(MODES.map(s=>s[4])),seventhChords=chords(MODES.map(s=>s[5]));function distance(s,e){const n=get$2(e),a=get$2(s);return n.empty||a.empty?"":simplify$1(transposeFifths$1("1P",a.alt-n.alt))}function relativeTonic(s,e,n){return transpose$4(n,distance(s,e))}var mode_default={get:get$2,names:names$2,all,distance,relativeTonic,notes,triads:triads$1,seventhChords,entries,mode};function fromRomanNumerals(s,e){return e.map(get$3).map(a=>transpose$4(s,interval(a))+a.chordType)}function toRomanNumerals(s,e){return e.map(n=>{const[a,o]=tokenize$2(n),l=distance$3(s,a);return get$3(interval(l)).name+o})}var progression_default={fromRomanNumerals,toRomanNumerals};function numeric(s){const e=compact(s.map(n=>typeof n=="number"?n:toMidi(n)));return!s.length||e.length!==s.length?[]:e.reduce((n,a)=>{const o=n[n.length-1];return n.concat(range(o,a).slice(1))},[e[0]])}function chromatic(s,e){return numeric(s).map(n=>midiToNoteName(n,e))}var range_default={numeric,chromatic},NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(s){if(typeof s!="string")return["",""];const e=s.indexOf(" "),n=note(s.substring(0,e));if(n.empty){const o=note(s);return o.empty?["",s]:[o.name,""]}const a=s.substring(n.name.length+1);return[n.name,a.length?a:""]}var names$1=names$7;function get$1(s){const e=Array.isArray(s)?s:tokenize(s),n=note(e[0]).name,a=get$8(e[1]);if(a.empty)return NoScale;const o=a.name,l=n?a.intervals.map(c=>transpose$4(n,c)):[],u=n?n+" "+o:o;return{...a,name:u,type:o,tonic:n,notes:l}}var scale$1=deprecate("Scale.scale","Scale.get",get$1);function detect(s,e={}){const n=chroma$2(s),a=note(e.tonic??s[0]??""),o=a.chroma;if(o===void 0)return[];const l=n.split("");l[o]="1";const u=rotate(o,l).join(""),c=all$1().find(d=>d.chroma===u),f=[];return c&&f.push(a.name+" "+c.name),e.match==="exact"||extended(u).forEach(d=>{f.push(a.name+" "+d)}),f}function scaleChords(s){const e=get$1(s),n=isSubsetOf(e.chroma);return all$2().filter(a=>n(a.chroma)).map(a=>a.aliases[0])}function extended(s){const e=isChroma(s)?s:get$1(s).chroma,n=isSupersetOf(e);return all$1().filter(a=>n(a.chroma)).map(a=>a.name)}function reduced(s){const e=isSubsetOf(get$1(s).chroma);return all$1().filter(n=>e(n.chroma)).map(n=>n.name)}function scaleNotes(s){const e=s.map(o=>note(o).pc).filter(o=>o),n=e[0],a=sortedUniqNames(e);return rotate(a.indexOf(n),a)}function modeNames(s){const e=get$1(s);if(e.empty)return[];const n=e.tonic?e.notes:e.intervals;return modes$1(e.chroma).map((a,o)=>{const l=get$1(a).name;return l?[n[o],l]:["",""]}).filter(a=>a[0])}function getNoteNameOf(s){const e=Array.isArray(s)?scaleNotes(s):get$1(s).notes,n=e.map(a=>note(a).chroma);return a=>{const o=note(typeof a=="number"?fromMidi(a):a),l=o.height;if(l===void 0)return;const u=l%12,c=n.indexOf(u);if(c!==-1)return enharmonic(o.name,e[c])}}function rangeOf(s){const e=getNoteNameOf(s);return(n,a)=>{const o=note(n).height,l=note(a).height;return o===void 0||l===void 0?[]:range(o,l).map(e).filter(u=>u)}}function degrees(s){const{intervals:e,tonic:n}=get$1(s),a=tonicIntervalsTransposer(e,n);return o=>o?a(o>0?o-1:o):""}function steps(s){const{intervals:e,tonic:n}=get$1(s);return tonicIntervalsTransposer(e,n)}var scale_default={degrees,detect,extended,get:get$1,modeNames,names:names$1,rangeOf,reduced,scaleChords,scaleNotes,steps,tokenize,scale:scale$1},NONE={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},NAMES=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function names(){return NAMES.slice()}var REGEX=/^(\d*\d(?:\+\d)*)\/(\d+)$/,CACHE=new Map;function get(s){const e=JSON.stringify(s),n=CACHE.get(e);if(n)return n;const a=build(parse(s));return CACHE.set(e,a),a}function parse(s){if(typeof s=="string"){const[l,u,c]=REGEX.exec(s)||[];return parse([u,c])}const[e,n]=s,a=+n;if(typeof e=="number")return[e,a];const o=e.split("+").map(l=>+l);return o.length===1?[o[0],a]:[o,a]}var time_signature_default={names,parse,get},isPowerOfTwo=s=>Math.log(s)/Math.log(2)%1===0;function build([s,e]){const n=Array.isArray(s)?s.reduce((c,f)=>c+f,0):s,a=e;if(n===0||a===0)return NONE;const o=Array.isArray(s)?`${s.join("+")}/${e}`:`${s}/${e}`,l=Array.isArray(s)?s:[],u=a===4||a===2?"simple":a===8&&n%3===0?"compound":isPowerOfTwo(a)?"irregular":"irrational";return{empty:!1,name:o,type:u,upper:n,lower:a,additive:l}}var Tonal=Core,PcSet=pcset_default,ChordDictionary=chord_type_default,ScaleDictionary=scale_type_default;const dist$1=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:abc_notation_default,Array:index$5,Chord:chord_default,ChordDictionary,ChordType:chord_type_default,Collection:collection_default,Core,DurationValue:duration_value_default,Interval:interval_default,Key:key_default,Midi:midi_default,Mode:mode_default,Note:note_default,PcSet,Pcset:pcset_default,Progression:progression_default,Range:range_default,RomanNumeral:roman_numeral_default,Scale:scale_default,ScaleDictionary,ScaleType:scale_type_default,TimeSignature:time_signature_default,Tonal,accToAlt,altToAcc,coordToInterval,coordToNote,decode,deprecate,distance:distance$3,encode,fillStr:fillStr$1,interval,isNamed,isPitch,note,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$4},Symbol.toStringTag,{value:"Module"})),octavesInterval=s=>(s<=0?-1:1)+s*7+"P";function scaleStep$1(s,e){e=e.replaceAll(":"," "),s=Math.ceil(s);const{intervals:n,tonic:a}=scale_default.get(e),{pc:o,oct:l=3}=note_default.get(a),u=Math.floor(s/n.length),c=_mod(s,n.length),f=interval_default.add(n[c],octavesInterval(u));return note_default.transpose(o+l,f)}function scaleOffset(s,e,n){let[a,o]=scale_default.tokenize(s),{notes:l}=scale_default.get(`${a} ${o}`);if(l=l.map(b=>note_default.get(b).pc),e=Number(e),isNaN(e))throw new Error(`scale offset "${e}" not a number`);const{pc:u,oct:c=3}=note_default.get(n),f=l.indexOf(u);if(f===-1)throw new Error(`note "${n}" is not in scale "${s}"`);let d=f,g=c,O=u;const S=Math.sign(e);for(;Math.abs(d-f)<Math.abs(e);){d+=S;const b=_mod(d,l.length);S<0&&O[0]==="C"&&(g+=S),O=l[b],S>0&&O[0]==="C"&&(g+=S)}return O+g}const transpose=register("transpose",function(s,e){return e.withHap(n=>{const a=isNaN(Number(s))?String(s):interval_default.fromSemitones(s);if(typeof n.value=="number"){const o=typeof a=="string"?interval_default.semitones(a)||0:a;return n.withValue(()=>n.value+o)}return n.withValue(()=>note_default.simplify(note_default.transpose(n.value,a)))})}),scaleTranspose=register("scaleTranspose",function(s,e){return e.withHap(n=>{if(!n.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof n.value!="string")throw new Error("can only use scaleTranspose with notes");return n.withValue(()=>scaleOffset(n.context.scale,Number(s),n.value))})}),scale=register("scale",function(s,e){return Array.isArray(s)&&(s=s.flat().join(" ")),e.withHap(n=>{const a=typeof n.value=="object";let o=a?n.value.n:n.value;a&&delete n.value.n;const l=Number(o);return isNaN(l)||(o=scaleStep$1(l,s)),n.withValue(()=>a?{...n.value,note:o}:o).setContext({...n.context,scale:s})})}),flats=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],pcs=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],sharps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],accs={b:-1,"#":1},pc2chroma=s=>{const[e,...n]=s.split("");return pcs.indexOf(e.toLowerCase())+n.reduce((a,o)=>a+accs[o],0)};function tokenizeChord$2(s){const e=(s||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return e?e.slice(1):[]}const note2pc=s=>s.match(/^[A-G][#b]?/i)[0],note2chroma=s=>pc2chroma(note2pc(s)),midi2chroma=s=>s%12,pitch2chroma=(s,e)=>{if(isNoteWithOctave(s))return note2chroma(s);if(isNote(s))return pc2chroma(s);if(typeof s=="number")return midi2chroma(s)},step2semitones=s=>{let e=Number(s);return isNaN(e)?interval_default.semitones(s):e},midi2note=(s,e=!1)=>{const n=Math.floor(s/12)-1;return(e?sharps:flats)[s%12]+n};function scaleStep(s,e,n=1){s=s.map(o=>typeof o=="string"?noteToMidi$1(o):o);const a=Math.floor(e/s.length)*n*12;return e=_mod(e,s.length),s[e]+a}let modeTarget={below:s=>s.slice(-1)[0],duck:s=>s.slice(-1)[0],above:s=>s[0]};function renderVoicing({chord:s,dictionary:e,offset:n=0,n:a,mode:o="below",anchor:l="c5",octaves:u=1}){const[c,f]=tokenizeChord$2(s),d=pc2chroma(c);l=l?.note||l;const g=pitch2chroma(l),O=e[f].map(se=>(typeof se=="string"?se.split(" "):se).map(step2semitones));let S,b,E=O.map((se,de)=>{const ue=modeTarget[o](se),me=_mod(g-ue-d,12);return(S===void 0||me<S)&&(S=me,b=de),me});const k=Math.ceil(n/O.length)*12,$=_mod(b+n,O.length),R=O[$],Z=modeTarget[o](R),he=noteToMidi$1(l,4)-E[$]+k,j=R.map(se=>he-Z+se);let K=j.map(se=>midi2note(se));return o==="duck"&&(K=K.filter((se,de)=>j[de]!==noteToMidi$1(l))),a!==void 0?[scaleStep(K,a,u)]:K}var dist={},dictionaryVoicing$1={},getBestVoicing$1={};getBestVoicing$1.__esModule=!0,getBestVoicing$1.getBestVoicing=void 0;function getBestVoicing(s){var e=s.chord,n=s.range,a=s.finder,o=s.picker,l=s.lastVoicing,u=a(e,n);return u.length?o(u,l):[]}getBestVoicing$1.getBestVoicing=getBestVoicing;var voicingsInRange={};const require$$0=getAugmentedNamespace(dist$1);var tokenizeChord$1={};tokenizeChord$1.__esModule=!0,tokenizeChord$1.tokenizeChord=void 0;function tokenizeChord(s){var e=(s||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return e?e.slice(1):[]}tokenizeChord$1.tokenizeChord=tokenizeChord;var hasRequiredVoicingsInRange;function requireVoicingsInRange(){if(hasRequiredVoicingsInRange)return voicingsInRange;hasRequiredVoicingsInRange=1,voicingsInRange.__esModule=!0,voicingsInRange.voicingsInRange=void 0;var s=require$$0,e=requireDictionaryVoicing(),n=tokenizeChord$1;function a(o,l,u){l===void 0&&(l=e.lefthand),u===void 0&&(u=["D3","A4"]);var c=(0,n.tokenizeChord)(o),f=c[0],d=c[1];if(!l[d])return[];var g=l[d].map(function(S){return S.split(" ")}),O=s.Range.chromatic(u);return g.reduce(function(S,b){var E=b.map(function(Z){return s.Interval.substract(Z,b[0])}),k=s.Note.transpose(f,b[0]),$=O.filter(function(Z){return s.Note.chroma(Z)===s.Note.chroma(k)}).filter(function(Z){return s.Note.midi(s.Note.transpose(Z,E[E.length-1]))<=s.Note.midi(u[1])}).map(function(Z){return s.Note.enharmonic(Z,k)}),R=$.map(function(Z){return E.map(function(he){return s.Note.transpose(Z,he)})});return S.concat(R)},[])}return voicingsInRange.voicingsInRange=a,voicingsInRange}var hasRequiredDictionaryVoicing;function requireDictionaryVoicing(){return hasRequiredDictionaryVoicing||(hasRequiredDictionaryVoicing=1,function(s){var e=commonjsGlobal&&commonjsGlobal.__assign||function(){return e=Object.assign||function(c){for(var f,d=1,g=arguments.length;d<g;d++){f=arguments[d];for(var O in f)Object.prototype.hasOwnProperty.call(f,O)&&(c[O]=f[O])}return c},e.apply(this,arguments)},n=commonjsGlobal&&commonjsGlobal.__rest||function(c,f){var d={};for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&f.indexOf(g)<0&&(d[g]=c[g]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,g=Object.getOwnPropertySymbols(c);O<g.length;O++)f.indexOf(g[O])<0&&Object.prototype.propertyIsEnumerable.call(c,g[O])&&(d[g[O]]=c[g[O]]);return d};s.__esModule=!0,s.dictionaryVoicing=s.dictionaryVoicingFinder=s.triads=s.guidetones=s.lefthand=void 0;var a=getBestVoicing$1,o=requireVoicingsInRange();s.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},s.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},s.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var l=function(c){return function(f,d){return(0,o.voicingsInRange)(f,c,d)}};s.dictionaryVoicingFinder=l;var u=function(c){var f=c.dictionary,d=c.range,g=n(c,["dictionary","range"]);return(0,a.getBestVoicing)(e(e({},g),{range:d,finder:(0,s.dictionaryVoicingFinder)(f)}))};s.dictionaryVoicing=u}(dictionaryVoicing$1)),dictionaryVoicing$1}var minTopNoteDiff$2={};minTopNoteDiff$2.__esModule=!0,minTopNoteDiff$2.minTopNoteDiff=void 0;var tonal_1=require$$0;function minTopNoteDiff$1(s,e){if(!e)return s[0];var n=function(a){return Math.abs(tonal_1.Note.midi(e[e.length-1])-tonal_1.Note.midi(a[a.length-1]))};return s.reduce(function(a,o){return n(o)<n(a)?o:a},s[0])}minTopNoteDiff$2.minTopNoteDiff=minTopNoteDiff$1,function(s){s.__esModule=!0;var e=requireDictionaryVoicing(),n=minTopNoteDiff$2,a=getBestVoicing$1,o=tokenizeChord$1;s.default={tokenizeChord:o.tokenizeChord,getBestVoicing:a.getBestVoicing,dictionaryVoicing:e.dictionaryVoicing,dictionaryVoicingFinder:e.dictionaryVoicingFinder,lefthand:e.lefthand,guidetones:e.guidetones,triads:e.triads,minTopNoteDiff:n.minTopNoteDiff}}(dist);const _voicings=getDefaultExportFromCjs(dist),simple={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},complex={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing,minTopNoteDiff}=_voicings.default||_voicings,lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},triads={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},defaultDictionary={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},voicingRegistry={lefthand:{dictionary:lefthand,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:triads,mode:"below",anchor:"a4"},guidetones:{dictionary:guidetones,mode:"above",anchor:"a4"},default:{dictionary:defaultDictionary,mode:"below",anchor:"a4"}},setVoicingRange=(s,e)=>addVoicings(s,voicingRegistry[s].dictionary,e),addVoicings=(s,e,n=["F3","A4"])=>{Object.assign(voicingRegistry,{[s]:{dictionary:e,range:n}})},registerVoicings=(s,e,n={})=>{Object.assign(voicingRegistry,{[s]:{dictionary:e,...n}})},getVoicing=(s,e,n)=>{const{dictionary:a,range:o}=voicingRegistry[e];return dictionaryVoicing({chord:s,dictionary:a,range:o,picker:minTopNoteDiff,lastVoicing:n})};let lastVoicing;const voicings=register("voicings",function(s,e){return e.fmap(n=>(lastVoicing=getVoicing(n,s,lastVoicing),stack(...lastVoicing))).outerJoin()}),rootNotes=register("rootNotes",function(s,e){return e.fmap(n=>{const l=(n.chord||n).match(/^([a-gA-G][b#]?).*$/)[1]+s;return n.chord?{note:l}:l})}),voicing=register("voicing",function(s){return s.fmap(e=>{e=typeof e=="string"?{chord:e}:e;let{dictionary:n="default",chord:a,anchor:o,offset:l,mode:u,n:c,octaves:f,...d}=e;n=typeof n=="string"?voicingRegistry[n]:{dictionary:n,mode:"below",anchor:"c5"};let g=renderVoicing({...n,chord:a,anchor:o,offset:l,mode:u,n:c,octaves:f});return stack(...g).note().set(d)}).outerJoin()});function voicingAlias(s,e,n){n=Array.isArray(n)?n:[n],n.forEach(a=>{a[e]=a[s]})}voicingAlias("^","",[simple,complex]),Object.keys(simple).forEach(s=>{if(s.includes("-")){let e=s.replace("-","m");voicingAlias(s,e,[complex,simple])}if(s.includes("^")){let e=s.replace("^","M");voicingAlias(s,e,[complex,simple])}}),registerVoicings("ireal",simple),registerVoicings("ireal-ext",complex);const index$1=Object.freeze(Object.defineProperty({__proto__:null,addVoicings,registerVoicings,rootNotes,scale,scaleTranspose,setVoicingRange,transpose,voicing,voicingAlias,voicingRegistry,voicings},Symbol.toStringTag,{value:"Module"}));let latestOptions;function appendCanvas(s){const{canvas:e}=getDrawContext();return s.canvas.id="hydra-canvas",s.canvas.style.position="fixed",s.canvas.style.top="0px",e.after(s.canvas),e}async function initHydra(s={}){if(latestOptions&&JSON.stringify(latestOptions)!==JSON.stringify(s)&&document.getElementById("hydra-canvas").remove(),latestOptions=s,!document.getElementById("hydra-canvas")){console.log("reinit..");const{src:e="https://unpkg.com/hydra-synth",feedStrudel:n=!1,...a}={detectAudio:!1,...s};await import(e);const o=new Hydra(a);if(n){const{canvas:l}=getDrawContext();l.style.display="none",o.synth.s0.init({src:l})}appendCanvas(o)}}const H=s=>()=>s.queryArc(getTime(),getTime())[0].value,hydra=Object.freeze(Object.defineProperty({__proto__:null,H,initHydra},Symbol.toStringTag,{value:"Module"}));class EventEmitter{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,n,a={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const o=new Listener(e,this,n,a);return this.eventMap[e]||(this.eventMap[e]=[]),a.prepend?this.eventMap[e].unshift(o):this.eventMap[e].push(o),o}addOneTimeListener(e,n,a={}){a.remaining=1,this.addListener(e,n,a)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return e===void 0?this.eventMap[EventEmitter.ANY_EVENT]&&this.eventMap[EventEmitter.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,a])=>a.length>0):this.eventMap[e]&&this.eventMap[e].length>0?n instanceof Listener?this.eventMap[e].filter(o=>o===n).length>0:typeof n=="function"?this.eventMap[e].filter(o=>o.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let a=[],o=this.eventMap[EventEmitter.ANY_EVENT]||[];return this.eventMap[e]&&(o=o.concat(this.eventMap[e])),o.forEach(l=>{if(l.suspended)return;let u=[...n];Array.isArray(l.arguments)&&(u=u.concat(l.arguments)),l.remaining>0&&(a.push(l.callback.apply(l.context,u)),l.count++),--l.remaining<1&&l.remove()}),a}removeListener(e,n,a={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let o=this.eventMap[e].filter(l=>n&&l.callback!==n||a.remaining&&a.remaining!==l.remaining||a.context&&a.context!==l.context);o.length?this.eventMap[e]=o:delete this.eventMap[e]}async waitFor(e,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((a,o)=>{let l,u=this.addListener(e,()=>{clearTimeout(l),a()},{remaining:1});n.duration!==1/0&&(l=setTimeout(()=>{u.remove(),o("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Listener{constructor(e,n,a,o={}){if(typeof e!="string"&&!(e instanceof String)&&e!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof a!="function")throw new TypeError("The 'callback' must be a function.");o.arguments!==void 0&&!Array.isArray(o.arguments)&&(o.arguments=[o.arguments]),o=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},o),o.duration!==1/0&&setTimeout(()=>this.remove(),o.duration),this.arguments=o.arguments,this.callback=a,this.context=o.context,this.count=0,this.event=e,this.remaining=parseInt(o.remaining)>=1?parseInt(o.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Enumerations{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),Enumerations.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),Enumerations.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),Enumerations.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),Enumerations.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Note{constructor(e,n={}){this.duration=wm.defaults.note.duration,this.attack=wm.defaults.note.attack,this.release=wm.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=Utilities.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=Utilities.from7bitToFloat(n.rawRelease)),Number.isInteger(e)?this.identifier=Utilities.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=Utilities.getNoteDetails(e);if(wm.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(wm.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(wm.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(wm.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(wm.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(wm.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(wm.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return Utilities.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=Utilities.from7bitToFloat(e)}get rawRelease(){return Utilities.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=Utilities.from7bitToFloat(e)}get number(){return Utilities.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return wm.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+e*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Utilities{static toNoteNumber(e,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const a=this.getNoteDetails(e);if(!a)throw new TypeError("Invalid note identifier");const o={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let l=(a.octave+1+n)*12;if(l+=o[a.name],a.accidental&&(a.accidental.startsWith("b")?l-=a.accidental.length:l+=a.accidental.length),l<0||l>127)throw new RangeError("Invalid octaveOffset value");return l}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const a=n[1].toUpperCase(),o=parseInt(n[3]);let l=n[2].toLowerCase();return l=l===""?void 0:l,{accidental:l,identifier:a+(l||"")+o,name:a,octave:o}}static sanitizeChannels(e){let n;if(wm.validation){if(e==="all")n=["all"];else if(e==="none")return[]}return Array.isArray(e)?n=e:n=[e],n.indexOf("all")>-1&&(n=Enumerations.MIDI_CHANNEL_NUMBERS),n.map(function(a){return parseInt(a)}).filter(function(a){return a>=1&&a<=16})}static toTimestamp(e){let n=!1;const a=parseFloat(e);return isNaN(a)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?a>=0&&(n=wm.time+a):a>=0&&(n=a),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let a=!1;if(Number.isInteger(e)&&e>=0&&e<=127)a=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)a=parseInt(e);else if(typeof e=="string"||e instanceof String)try{a=this.toNoteNumber(e.trim(),n)}catch{return!1}return a}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=Math.floor(e/12-1)+n;return a[e%12]+o.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof Note)return e;let a=this.guessNoteNumber(e,n.octaveOffset);if(a===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new Note(a,n)}static buildNoteArray(e,n={}){let a=[];return Array.isArray(e)||(e=[e]),e.forEach(o=>{a.push(this.buildNote(o,n))}),a}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,n=0){wm.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const a=((e<<7)+n)/16383;return Math.min(Math.max(a,0),1)}static fromFloatToMsbLsb(e){wm.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(e*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(e,n=0,a=0){if(wm.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,a=parseInt(a)||0}return Math.min(Math.max(e+n*12+a,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(a=>e[a]===n)}static getCcNameByNumber(e){if(!(wm.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return Enumerations.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let n=Enumerations.CONTROL_CHANGE_MESSAGES.find(a=>a.name===e);return n?n.number:Enumerations.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in Enumerations.CHANNEL_MODE_MESSAGES)if(Enumerations.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===Enumerations.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class OutputChannel extends EventEmitter{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,a={}){if(wm.validation){if(a.useRawValue&&(a.rawValue=a.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(a.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}a.rawValue||(n=Utilities.fromFloatTo7Bit(n));const o=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),Utilities.buildNoteArray(e).forEach(l=>{this.send([(Enumerations.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),l.getOffsetNumber(o),n],{time:Utilities.toTimestamp(a.time)})}),this}sendControlChange(e,n,a={}){if(typeof e=="string"&&(e=Utilities.getCcNumberByName(e)),Array.isArray(n)||(n=[n]),wm.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(o=>{const l=Math.min(Math.max(parseInt(o),0),127);if(isNaN(l))throw new TypeError("Values must be integers between 0 and 127");return l}),n.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((o,l)=>{this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+l*32,n[l]],{time:Utilities.toTimestamp(a.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2?this:(this.sendControlChange(38,e[1],n),this)}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let a=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(o=>{Enumerations.REGISTERED_PARAMETERS[o][0]===e[0]&&Enumerations.REGISTERED_PARAMETERS[o][1]===e[1]&&(a=!0)}),!a)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let a=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(o=>{Enumerations.REGISTERED_PARAMETERS[o][0]===e[0]&&Enumerations.REGISTERED_PARAMETERS[o][1]===e[1]&&(a=!0)}),!a)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){this.sendNoteOn(e,n);const a=Array.isArray(e)?e:[e];for(let o of a)if(parseInt(o.duration)>0){const l={time:(Utilities.toTimestamp(n.time)||wm.time)+parseInt(o.duration),release:o.release,rawRelease:o.rawRelease};this.sendNoteOff(o,l)}else if(parseInt(n.duration)>0){const l={time:(Utilities.toTimestamp(n.time)||wm.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(o,l)}return this}sendNoteOff(e,n={}){if(wm.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let a=64;n.rawRelease!=null?a=n.rawRelease:isNaN(n.release)||(a=Math.round(n.release*127));const o=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(e,{rawRelease:parseInt(a)}).forEach(l=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),l.getOffsetNumber(o),l.rawRelease],{time:Utilities.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(wm.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let a=64;n.rawAttack!=null?a=n.rawAttack:isNaN(n.attack)||(a=Math.round(n.attack*127));const o=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(e,{rawAttack:a}).forEach(l=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),l.getOffsetNumber(o),l.rawAttack],{time:Utilities.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,a={}){if(typeof e=="string"&&(e=Enumerations.CHANNEL_MODE_MESSAGES[e]),wm.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,n],{time:Utilities.toTimestamp(a.time)}),this}sendOmniMode(e,n={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(wm.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(Enumerations.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e*127)],{time:Utilities.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,wm.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let a=Math.floor(e)+64,o=e-Math.floor(e);o=Math.round((o+1)/2*16383);let l=o>>7&127,u=o&127;return this.sendRpnValue("channelcoarsetuning",a,n),this.sendRpnValue("channelfinetuning",[l,u],n),this}sendModulationRange(e,n,a={}){if(wm.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],a),this}sendNrpnValue(e,n,a={}){if(n=[].concat(n),wm.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,a),this._setCurrentParameter(n,a),this._deselectNonRegisteredParameter(a),this}sendPitchBend(e,n={}){if(wm.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let a=0,o=0;if(n.rawValue&&Array.isArray(e))a=e[0],o=e[1];else if(n.rawValue&&!Array.isArray(e))a=e;else{const l=Utilities.fromFloatToMsbLsb((e+1)/2);a=l.msb,o=l.lsb}return this.send([(Enumerations.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),o,a],{time:Utilities.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,a={}){if(wm.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],a),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,wm.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(Enumerations.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:Utilities.toTimestamp(n.time)}),this}sendRpnValue(e,n,a={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,a),this._setCurrentParameter(n,a),this._deselectRegisteredParameter(a),this}sendTuningBank(e,n={}){if(wm.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(wm.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return e?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return e==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Output extends EventEmitter{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new OutputChannel(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput.onstatechange=null,await this.close(),this._midiOutput=null}_onStateChange(e){let n={timestamp:wm.time};e.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,n={time:0},a=0){if(e instanceof Message&&(e=Utilities.isNode?e.data:e.rawData),e instanceof Uint8Array&&Utilities.isNode&&(e=Array.from(e)),wm.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(a)?{time:0}:{time:a}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(o=>{if(o=parseInt(o),!(o>=0&&o<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,Utilities.toTimestamp(n.time)),this}sendSysex(e,n=[],a={}){if(e=[].concat(e),n instanceof Uint8Array){const o=new Uint8Array(1+e.length+n.length+1);o[0]=Enumerations.SYSTEM_MESSAGES.sysex,o.set(Uint8Array.from(e),1),o.set(n,1+e.length),o[o.length-1]=Enumerations.SYSTEM_MESSAGES.sysexend,this.send(o,{time:a.time})}else{const o=e.concat(n,Enumerations.SYSTEM_MESSAGES.sysexend);this.send([Enumerations.SYSTEM_MESSAGES.sysex].concat(o),{time:a.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():wm.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(wm.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([Enumerations.SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){e=Math.floor(e)||0;var a=e>>7&127,o=e&127;return this.send([Enumerations.SYSTEM_MESSAGES.songposition,a,o],{time:n.time}),this}sendSongSelect(e=0,n={}){if(wm.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([Enumerations.SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return wm.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendKeyAftertouch(e,n,a)}),this}sendControlChange(e,n,a={},o={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const l=a;a=o,a.channels=l,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendControlChange(e,n,a)}),this}sendPitchBendRange(e=0,n=0,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendPitchBendRange(e,n,a)}),this}setPitchBendRange(e=0,n=0,a="all",o={}){return wm.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),o.channels=a,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,o)}sendRpnValue(e,n,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendRpnValue(e,n,a)}),this}setRegisteredParameter(e,n=[],a="all",o={}){return wm.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),o.channels=a,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,o)}sendChannelAftertouch(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendProgramChange(e,n)}),this}sendModulationRange(e,n,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendModulationRange(e,n,a)}),this}setModulationRange(e=0,n=0,a="all",o={}){return wm.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),o.channels=a,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,o)}sendMasterTuning(e,n={}){return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(a=>{this.channels[a].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},a={}){return wm.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),a.channels=n,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,a)}sendTuningProgram(e,n={}){return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(a=>{this.channels[a].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",a={}){return wm.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),a.channels=n,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,a)}sendTuningBank(e=0,n={}){return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(a=>{this.channels[a].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",a={}){return wm.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),a.channels=n,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,a)}sendChannelMode(e,n=0,a={},o={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const l=a;a=o,a.channels=l,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(l=>{this.channels[l].sendChannelMode(e,n,a)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(wm.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const a=e;e=n,e.channels=a,e.channels==="all"&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(a=>{this.channels[a].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendNrpnValue(e,n,a)}),this}setNonRegisteredParameter(e,n=[],a="all",o={}){return wm.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),o.channels=a,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,o)}sendRpnIncrement(e,n={}){return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(a=>{this.channels[a].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",a={}){return wm.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),a.channels=n,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,a)}sendRpnDecrement(e,n={}){return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(a=>{this.channels[a].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",a={}){return wm.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),a.channels=n,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,a)}sendNoteOff(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},a={}){if(wm.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].playNote(e,n)}),this}sendNoteOn(e,n={},a={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const o=n;n=a,n.channels=o,n.channels==="all"&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Forwarder{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(Enumerations.SYSTEM_MESSAGES),...Object.keys(Enumerations.CHANNEL_MESSAGES)],this.channels=Enumerations.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),wm.validation&&(e.forEach(a=>{if(!(a instanceof Output))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(a=>{if(!Enumerations.SYSTEM_MESSAGES.hasOwnProperty(a)&&!Enumerations.CHANNEL_MESSAGES.hasOwnProperty(a))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(a=>{if(!Enumerations.MIDI_CHANNEL_NUMBERS.includes(a))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{wm.validation&&!(n instanceof Output)||n.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class InputChannel extends EventEmitter{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const a=e.message.dataBytes[0],o=e.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&o===0)this.notesState[a]=!1,n.type="noteoff",n.note=new Note(Utilities.offsetNumber(a,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:0,rawRelease:o}),n.value=Utilities.from7bitToFloat(o),n.rawValue=o,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[a]=!0,n.note=new Note(Utilities.offsetNumber(a,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:o}),n.value=Utilities.from7bitToFloat(o),n.rawValue=o,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new Note(Utilities.offsetNumber(a,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset)),n.value=Utilities.from7bitToFloat(o),n.rawValue=o,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=a;else if(n.type==="controlchange"){n.controller={number:a,name:Enumerations.CONTROL_CHANGE_MESSAGES[a].name,description:Enumerations.CONTROL_CHANGE_MESSAGES[a].description,position:Enumerations.CONTROL_CHANGE_MESSAGES[a].position},n.subtype=n.controller.name||"controller"+a,n.value=Utilities.from7bitToFloat(o),n.rawValue=o;const l=Object.assign({},n);l.type=`${n.type}-controller${a}`,delete l.subtype,this.emit(l.type,l);const u=Object.assign({},n);u.type=`${n.type}-`+Enumerations.CONTROL_CHANGE_MESSAGES[a].name,delete u.subtype,u.type.indexOf("controller")!==0&&this.emit(u.type,u),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=a,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=Utilities.from7bitToFloat(a),n.rawValue=a):n.type==="pitchbend"?(n.value=((o<<7)+a-8192)/8192,n.rawValue=(o<<7)+a):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],a=e.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[e.message]:a!==127&&(this._rpnBuffer=[e.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&a!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,n,a,o){e=e==="nrpn"?"nrpn":"rpn";const l={target:o.target,timestamp:o.timestamp,message:o.message,parameterMsb:n,parameterLsb:a,value:Utilities.from7bitToFloat(o.message.dataBytes[1]),rawValue:o.message.dataBytes[1]};e==="rpn"?l.parameter=Object.keys(Enumerations.REGISTERED_PARAMETERS).find(f=>Enumerations.REGISTERED_PARAMETERS[f][0]===n&&Enumerations.REGISTERED_PARAMETERS[f][1]===a):l.parameter=(n<<7)+a;const u=Enumerations.CONTROL_CHANGE_MESSAGES[o.message.dataBytes[0]].name;l.type=`${e}-${u}`,this.emit(l.type,l);const c=Object.assign({},l);c.type==="nrpn-dataincrement"?c.type="nrpn-databuttonincrement":c.type==="nrpn-datadecrement"?c.type="nrpn-databuttondecrement":c.type==="rpn-dataincrement"?c.type="rpn-databuttonincrement":c.type==="rpn-datadecrement"&&(c.type="rpn-databuttondecrement"),this.emit(c.type,c),l.type=e,l.subtype=u,this.emit(l.type,l)}getChannelModeByNumber(e){return wm.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),Utilities.getChannelModeByNumber(e)}getCcNameByNumber(e){if(wm.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return Utilities.getCcNameByNumber(e)}getNoteState(e){e instanceof Note&&(e=e.identifier);const n=Utilities.guessNoteNumber(e,wm.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Message{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=Utilities.getPropertyByValue(Enumerations.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=Utilities.getPropertyByValue(Enumerations.SYSTEM_MESSAGES,this.command)),this.statusByte===Enumerations.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Input extends EventEmitter{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new InputChannel(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let n={timestamp:wm.time,target:this,port:this};e.port.connection==="open"?(n.type="opened",this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new Message(e.data),a={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",a),n.isSystemMessage?this._parseEvent(a):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(a),this._forwarders.forEach(o=>o.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){wm.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,a={}){if(wm.validation&&typeof a=="function"){let o=n!=null?[].concat(n):void 0;n=a,a={channels:o}}if(Enumerations.CHANNEL_EVENTS.includes(e)){a.channels===void 0&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS);let o=[];return Utilities.sanitizeChannels(a.channels).forEach(l=>{o.push(this.channels[l].addListener(e,n,a))}),o}else return super.addListener(e,n,a)}addOneTimeListener(e,n,a={}){return a.remaining=1,this.addListener(e,n,a)}on(e,n,a,o){return this.addListener(e,n,a,o)}hasListener(e,n,a={}){if(wm.validation&&typeof a=="function"){let o=[].concat(n);n=a,a={channels:o}}return Enumerations.CHANNEL_EVENTS.includes(e)?(a.channels===void 0&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).every(o=>this.channels[o].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,a={}){if(wm.validation&&typeof a=="function"){let o=[].concat(n);n=a,a={channels:o}}if(a.channels===void 0&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),e==null)return Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o]&&this.channels[o].removeListener()}),super.removeListener();Enumerations.CHANNEL_EVENTS.includes(e)?Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].removeListener(e,n,a)}):super.removeListener(e,n,a)}addForwarder(e,n={}){let a;return e instanceof Forwarder?a=e:a=new Forwarder(e,n),this._forwarders.push(a),a}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return wm.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */let WebMidi$1=class extends EventEmitter{constructor(){super(),this.defaults={note:{attack:Utilities.from7bitToFloat(64),release:Utilities.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},n=!1){if(Utilities.isNode){try{window.navigator}catch{global.navigator=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)()}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:n}),n&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const a={timestamp:this.time,target:this,type:"error",error:void 0},o={timestamp:this.time,target:this,type:"midiaccessgranted"},l={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(u){return a.error=u,this.emit("error",a),typeof e.callback=="function"&&e.callback(u),Promise.reject(u)}this.emit("midiaccessgranted",o),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(u){return a.error=u,this.emit("error",a),typeof e.callback=="function"&&e.callback(u),Promise.reject(u)}return this.emit("enabled",l),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface&&(this.interface.onstatechange=void 0),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let a=0;a<this._disconnectedInputs.length;a++)if(this._disconnectedInputs[a].id===e.toString())return this._disconnectedInputs[a]}else for(let a=0;a<this.inputs.length;a++)if(this.inputs[a].id===e.toString())return this.inputs[a]}getInputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let a=0;a<this._disconnectedInputs.length;a++)if(~this._disconnectedInputs[a].name.indexOf(e))return this._disconnectedInputs[a]}else for(let a=0;a<this.inputs.length;a++)if(~this.inputs[a].name.indexOf(e))return this.inputs[a]}getOutputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let a=0;a<this._disconnectedOutputs.length;a++)if(~this._disconnectedOutputs[a].name.indexOf(e))return this._disconnectedOutputs[a]}else for(let a=0;a<this.outputs.length;a++)if(~this.outputs[a].name.indexOf(e))return this.outputs[a]}getOutputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let a=0;a<this._disconnectedOutputs.length;a++)if(this._disconnectedOutputs[a].id===e.toString())return this._disconnectedOutputs[a]}else for(let a=0;a<this.outputs.length;a++)if(this.outputs[a].id===e.toString())return this.outputs[a]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),Utilities.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?Utilities.getNoteDetails(Utilities.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),Utilities.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),Utilities.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),Utilities.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),Utilities.buildNoteArray(e,n)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),Utilities.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(n=>e.push(n.destroy())),this.outputs.forEach(n=>e.push(n.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let n={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?n.port=this.getOutputById(e.port.id):e.port.type==="input"&&(n.port=this.getInputById(e.port.id)),this.emit(e.port.state,n);const a=Object.assign({},n);a.type="portschanged",this.emit(a.type,a)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?n.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(n.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,n);const a=Object.assign({},n);a.type="portschanged",this.emit(a.type,a)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const a=this._inputs[n];Array.from(this.interface.inputs.values()).find(l=>l===a._midiInput)||(this._disconnectedInputs.push(a),this._inputs.splice(n,1))}let e=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(a=>a._midiInput===n)){let a=this._disconnectedInputs.find(o=>o._midiInput===n);a||(a=new Input(n)),this._inputs.push(a),e.push(a.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const a=this._outputs[n];Array.from(this.interface.outputs.values()).find(l=>l===a._midiOutput)||(this._disconnectedOutputs.push(a),this._outputs.splice(n,1))}let e=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(a=>a._midiOutput===n)){let a=this._disconnectedOutputs.find(o=>o._midiOutput===n);a||(a=new Output(n)),this._outputs.push(a),e.push(a.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),Utilities.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),Utilities.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.5"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Enumerations.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),Enumerations.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),Enumerations.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),Enumerations.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),Enumerations.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};const wm=new WebMidi$1;wm.constructor=null;const _WebMidi=Object.freeze(Object.defineProperty({__proto__:null,Enumerations,Forwarder,Input,InputChannel,Message,Note,Output,OutputChannel,Utilities,WebMidi:wm},Symbol.toStringTag,{value:"Module"})),{WebMidi}=_WebMidi;function supportsMidi(){return typeof navigator.requestMIDIAccess=="function"}function getMidiDeviceNamesString(s){return s.map(e=>`'${e.name}'`).join(" | ")}function enableWebMidi(s={}){const{onReady:e,onConnected:n,onDisconnected:a,onEnabled:o}=s;if(!WebMidi.enabled){if(!supportsMidi())throw new Error("Your Browser does not support WebMIDI.");return WebMidi.addListener("connected",()=>{n?.(WebMidi)}),WebMidi.addListener("enabled",()=>{o?.(WebMidi)}),WebMidi.addListener("disconnected",l=>{a?.(WebMidi,l)}),new Promise((l,u)=>{if(WebMidi.enabled){l(WebMidi);return}WebMidi.enable(c=>{c&&u(c),e?.(WebMidi),l(WebMidi)})})}}function getDevice(s,e){if(!e.length)throw new Error("🔌 No MIDI devices found. Connect a device or enable IAC Driver.");if(typeof s=="number")return e[s];const n=l=>e.find(u=>u.name.includes(l));if(typeof s=="string")return n(s);const a=n("IAC"),o=a??e[0];if(!o)throw new Error(`🔌 MIDI device '${o||""}' not found. Use one of ${getMidiDeviceNamesString(e)}`);return a??e[0]}typeof window<"u"&&window.addEventListener("message",s=>{WebMidi?.enabled&&s.data==="strudel-stop"&&WebMidi.outputs.forEach(e=>e.sendStop())}),Pattern$1.prototype.midi=function(s){if(isPattern(s))throw new Error(`.midi does not accept Pattern input. Make sure to pass device name with single quotes. Example: .midi('${WebMidi.outputs?.[0]?.name||"IAC Driver Bus 1"}')`);return enableWebMidi({onEnabled:({outputs:e})=>{const n=getDevice(s,e),a=e.filter(o=>o.name!==n.name);logger$2(`Midi enabled! Using "${n.name}". ${a?.length?`Also available: ${getMidiDeviceNamesString(a)}`:""}`)},onDisconnected:({outputs:e})=>logger$2(`Midi device disconnected! Available: ${getMidiDeviceNamesString(e)}`)}),this.onTrigger((e,n,a,o)=>{if(!WebMidi.enabled){console.log("not enabled");return}const l=getDevice(s,WebMidi.outputs);n.ensureObjectValue();const c=`+${(e-a)*1e3}`,{note:f,nrpnn:d,nrpv:g,ccn:O,ccv:S,midichan:b=1,midicmd:E}=n.value,k=n.context?.velocity??.9,$=Math.floor(n.duration.valueOf()*1e3-10);if(f!=null){const R=typeof f=="number"?f:noteToMidi$1(f),Z=new Note(R,{attack:k,duration:$});l.playNote(Z,b,{time:c})}if(S!==void 0&&O!==void 0){if(typeof S!="number"||S<0||S>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof O))throw new Error("expected ccn to be a number or a string");const R=Math.round(S*127);l.sendControlChange(O,R,b,{time:c})}n.whole.begin+0===0&&l.sendStart({time:c}),["clock","midiClock"].includes(E)?l.sendClock({time:c}):["start"].includes(E)?l.sendStart({time:c}):["stop"].includes(E)?l.sendStop({time:c}):["continue"].includes(E)&&l.sendContinue({time:c})})};let listeners={};const refs={};async function midin(s){const e=await enableWebMidi(),n=getDevice(s,WebMidi.inputs);if(e){const o=WebMidi.inputs.filter(l=>l.name!==n.name);logger$2(`Midi enabled! Using "${n.name}". ${o?.length?`Also available: ${getMidiDeviceNamesString(o)}`:""}`),refs[s]={}}const a=o=>ref$1(()=>refs[s][o]||0);return listeners[s]&&n.removeListener("midimessage",listeners[s]),listeners[s]=o=>{const l=o.dataBytes[0],u=o.dataBytes[1];refs[s]&&(refs[s][l]=u/127)},n.addListener("midimessage",listeners[s]),a}const index=Object.freeze(Object.defineProperty({__proto__:null,WebMidi,enableWebMidi,midin},Symbol.toStringTag,{value:"Module"}))})();
